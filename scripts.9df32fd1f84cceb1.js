!function(lt,pt){"object"==typeof exports&&"object"==typeof module?module.exports=pt():"function"==typeof define&&define.amd?define("Phaser",[],pt):"object"==typeof exports?exports.Phaser=pt():lt.Phaser=pt()}(window,function(){return gt={},lt.m=pt=[function(g,b){function t(s,u,i,r){for(var o in u)if(u.hasOwnProperty(o)){var l=(d=u,f=o,m=v=void 0,m=(p=i)?d[f]:Object.getOwnPropertyDescriptor(d,f),!p&&m.value&&"object"==typeof m.value&&(m=m.value),!(!m||!((v=m).get&&"function"==typeof v.get||v.set&&"function"==typeof v.set))&&(void 0===m.enumerable&&(m.enumerable=!0),void 0===m.configurable&&(m.configurable=!0),m));if(!1!==l){if(c=void 0,(c=Object.getOwnPropertyDescriptor((r||s).prototype,o))&&(c.value&&"object"==typeof c.value&&(c=c.value),!1===c.configurable)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,o,l)}else s.prototype[o]=u[o]}var c,d,f,p,v,m}function h(s,u){if(u){Array.isArray(u)||(u=[u]);for(var i=0;i<u.length;i++)t(s,u[i].prototype||u[i])}}function n(s){var u,i,r;if((s=s||{}).initialize){if("function"!=typeof s.initialize)throw new Error("initialize must be a function");r=s.initialize,delete s.initialize}else r=s.Extends?(i=s.Extends,function(){i.apply(this,arguments)}):function(){};s.Extends?(r.prototype=Object.create(s.Extends.prototype),r.prototype.constructor=r,u=s.Extends,delete s.Extends):r.prototype.constructor=r;var o=null;return s.Mixins&&(o=s.Mixins,delete s.Mixins),h(r,o),t(r,s,!0,u),r}n.extend=t,n.mixin=h,n.ignoreFinals=!1,g.exports=n},function(g,b){g.exports=function(){}},function(g,b){g.exports=function(t,h,n){var s=typeof t;return t&&"number"!=s&&"string"!=s&&t.hasOwnProperty(h)&&void 0!==t[h]?t[h]:n}},function(g,b,t){var h=t(0),n=t(123),s=new h({initialize:function(u,i){this.x=0,this.y=0,"object"==typeof u?(this.x=u.x||0,this.y=u.y||0):(void 0===i&&(i=u),this.x=u||0,this.y=i||0)},clone:function(){return new s(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,i){return void 0===i&&(i=u),this.x=u,this.y=i,this},setTo:function(u,i){return this.set(u,i)},setToPolar:function(u,i){return null==i&&(i=1),this.x=Math.cos(u)*i,this.y=Math.sin(u)*i,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,i){return n(this.x,u.x,i)&&n(this.y,u.y,i)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var i=u.x-this.x,r=u.y-this.y;return Math.sqrt(i*i+r*r)},distanceSq:function(u){var i=u.x-this.x,r=u.y-this.y;return i*i+r*r},length:function(){var u=this.x,i=this.y;return Math.sqrt(u*u+i*i)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,i=this.y;return u*u+i*i},normalize:function(){var u=this.x,i=this.y,r=u*u+i*i;return 0<r&&(r=1/Math.sqrt(r),this.x=u*r,this.y=i*r),this},normalizeRightHand:function(){var u=this.x;return this.x=-1*this.y,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=-1*u,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,i){void 0===i&&(i=0);var r=this.x,o=this.y;return this.x=r+i*(u.x-r),this.y=o+i*(u.y-o),this},transformMat3:function(u){var i=this.x,r=this.y,o=u.val;return this.x=o[0]*i+o[3]*r+o[6],this.y=o[1]*i+o[4]*r+o[7],this},transformMat4:function(u){var i=this.x,r=this.y,o=u.val;return this.x=o[0]*i+o[4]*r+o[12],this.y=o[1]*i+o[5]*r+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var i=this.length();return i&&u<i&&this.scale(u/i),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var i=Math.cos(u),r=Math.sin(u);return this.set(i*this.x-r*this.y,r*this.x+i*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),g.exports=s},function(g,b,t){var h=t(0),n=t(55),s=new h({initialize:function(u,i){void 0===u&&(u=0),void 0===i&&(i=u),this.type=n.POINT,this.x=u,this.y=i},setTo:function(u,i){return void 0===u&&(u=0),void 0===i&&(i=u),this.x=u,this.y=i,this}});g.exports=s},function(g,b,t){var h=t(0),n=t(24),s=t(21),u=new h({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(i){return(i.renderCanvas||i.renderWebGL)&&this.displayList.add(i),i.preUpdate&&this.updateList.add(i),i},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(i,r){u.prototype.hasOwnProperty(i)||(u.prototype[i]=r)},u.remove=function(i){u.prototype.hasOwnProperty(i)&&delete u.prototype[i]},n.register("GameObjectFactory",u,"add"),g.exports=u},function(g,b){g.exports=function(t,h,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(h))return t[h];if(-1===h.indexOf("."))return n;for(var s=h.split("."),u=t,i=n,r=0;r<s.length;r++){if(!u.hasOwnProperty(s[r])){i=n;break}i=u[s[r]],u=u[s[r]]}return i}return n}},function(g,b){g.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(h){return!1}return!0}},function(g,b){var t={};g.exports={install:function(n){for(var s in t)n[s]=t[s]},register:function(n,s){t[n]=s},destroy:function(){t={}}}},function(g,b,t){"use strict";var h=Object.prototype.hasOwnProperty,n="~";function s(){}function u(l,e,a){this.fn=l,this.context=e,this.once=a||!1}function i(l,e,a,c,d){if("function"!=typeof a)throw new TypeError("The listener must be a function");var f=new u(a,c||l,d),p=n?n+e:e;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function r(l,e){0==--l._eventsCount?l._events=new s:delete l._events[e]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var l,e,a=[];if(0===this._eventsCount)return a;for(e in l=this._events)h.call(l,e)&&a.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(l)):a},o.prototype.listeners=function(l){var a=this._events[n?n+l:l];if(!a)return[];if(a.fn)return[a.fn];for(var c=0,d=a.length,f=new Array(d);c<d;c++)f[c]=a[c].fn;return f},o.prototype.listenerCount=function(l){var a=this._events[n?n+l:l];return a?a.fn?1:a.length:0},o.prototype.emit=function(l,e,a,c,d,f){var p=n?n+l:l;if(!this._events[p])return!1;var v,m=this._events[p],x=arguments.length;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),x){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,e),!0;case 3:return m.fn.call(m.context,e,a),!0;case 4:return m.fn.call(m.context,e,a,c),!0;case 5:return m.fn.call(m.context,e,a,c,d),!0;case 6:return m.fn.call(m.context,e,a,c,d,f),!0}for(T=1,v=new Array(x-1);T<x;T++)v[T-1]=arguments[T];m.fn.apply(m.context,v)}else for(var y,w=m.length,T=0;T<w;T++)switch(m[T].once&&this.removeListener(l,m[T].fn,void 0,!0),x){case 1:m[T].fn.call(m[T].context);break;case 2:m[T].fn.call(m[T].context,e);break;case 3:m[T].fn.call(m[T].context,e,a);break;case 4:m[T].fn.call(m[T].context,e,a,c);break;default:if(!v)for(y=1,v=new Array(x-1);y<x;y++)v[y-1]=arguments[y];m[T].fn.apply(m[T].context,v)}return!0},o.prototype.on=function(l,e,a){return i(this,l,e,a,!1)},o.prototype.once=function(l,e,a){return i(this,l,e,a,!0)},o.prototype.removeListener=function(l,e,a,c){var d=n?n+l:l;if(!this._events[d])return this;if(!e)return r(this,d),this;var f=this._events[d];if(f.fn)f.fn!==e||c&&!f.once||a&&f.context!==a||r(this,d);else{for(var p=0,v=[],m=f.length;p<m;p++)(f[p].fn!==e||c&&!f[p].once||a&&f[p].context!==a)&&v.push(f[p]);v.length?this._events[d]=1===v.length?v[0]:v:r(this,d)}return this},o.prototype.removeAllListeners=function(l){var e;return l?this._events[e=n?n+l:l]&&r(this,e):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,g.exports=o},function(g,b,t){var h=t(0),n=t(56),s=t(167),u=t(300),i=t(55),r=t(45),o=t(170),l=new h({initialize:function(e,a,c,d){void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=0),this.type=i.RECTANGLE,this.x=e,this.y=a,this.width=c,this.height=d},contains:function(e,a){return n(this,e,a)},getPoint:function(e,a){return s(this,e,a)},getPoints:function(e,a,c){return u(this,e,a,c)},getRandomPoint:function(e){return o(this,e)},setTo:function(e,a,c,d){return this.x=e,this.y=a,this.width=c,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,a){return void 0===a&&(a=e),this.x=e,this.y=a,this},setSize:function(e,a){return void 0===a&&(a=e),this.width=e,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){return void 0===e&&(e=new r),e.setTo(this.x,this.y,this.right,this.y),e},getLineB:function(e){return void 0===e&&(e=new r),e.setTo(this.right,this.y,this.right,this.bottom),e},getLineC:function(e){return void 0===e&&(e=new r),e.setTo(this.right,this.bottom,this.x,this.bottom),e},getLineD:function(e){return void 0===e&&(e=new r),e.setTo(this.x,this.bottom,this.x,this.y),e},left:{get:function(){return this.x},set:function(e){this.width=e>=this.right?0:this.right-e,this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){this.width=e<=this.x?0:e-this.x}},top:{get:function(){return this.y},set:function(e){this.height=e>=this.bottom?0:this.bottom-e,this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){this.height=e<=this.y?0:e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});g.exports=l},function(g,b,t){g.exports={Alpha:t(605),AlphaSingle:t(297),BlendMode:t(298),ComputedSize:t(606),Crop:t(607),Depth:t(299),Flip:t(608),GetBounds:t(609),Mask:t(303),Origin:t(630),PathFollower:t(631),Pipeline:t(171),ScrollFactor:t(306),Size:t(632),Texture:t(633),TextureCrop:t(634),Tint:t(635),ToJSON:t(173),Transform:t(307),TransformMatrix:t(25),Visible:t(308)}},function(g,b){g.exports={getTintFromFloats:function(t,h,n,s){return((255&(255*s|0))<<24|(255&(255*t|0))<<16|(255&(255*h|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,h){return((255&(255*h|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,h){return((255&(255*h|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,h){h&&-1!==h||(h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var n=t.createShader(t.FRAGMENT_SHADER),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var u=s.replace(/%forloop%/gi,function(i){for(var r="",o=0;o<i;++o)0<o&&(r+="\nelse "),o<i-1&&(r+="if(test == "+o+".0){}");return r}(h));if(t.shaderSource(n,u),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;h=h/2|0}return h},parseFragmentShaderMaxTextures:function(t,h){if(!t)return"";for(var n="",s=0;s<h;s++)0<s&&(n+="\n\telse "),s<h-1&&(n+="if (outTexId < "+s+".5)"),n+="\n\t{",n+="\n\t\ttexture = texture2D(uMainSampler["+s+"], outTexCoord);",n+="\n\t}";return(t=t.replace(/%count%/gi,h.toString())).replace(/%forloop%/gi,n)}}},function(g,b,t){var h=t(190),n=t(6);g.exports=function(s,u,i){var r=n(s,u,null);if(null===r)return i;if(Array.isArray(r))return h.RND.pick(r);if("object"==typeof r){if(r.hasOwnProperty("randInt"))return h.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return h.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if("function"==typeof r)return r(u);return r}},function(g,b){var t={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};g.exports=t},function(g,b,t){var h=t(0),n=t(173),s=t(98),u=t(9),i=t(75),r=new h({Extends:u,initialize:function(o,l){u.call(this),this.scene=o,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(i.ADDED_TO_SCENE,this.addedToScene,this),this.on(i.REMOVED_FROM_SCENE,this.removedFromScene,this),o.sys.queueDepthSort()},setActive:function(o){return this.active=o,this},setName:function(o){return this.name=o,this},setState:function(o){return this.state=o,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(o,l){return this.data||(this.data=new s(this)),this.data.set(o,l),this},incData:function(o,l){return this.data||(this.data=new s(this)),this.data.inc(o,l),this},toggleData:function(o){return this.data||(this.data=new s(this)),this.data.toggle(o),this},getData:function(o){return this.data||(this.data=new s(this)),this.data.get(o)},setInteractive:function(o,l,e){return this.scene.sys.input.enable(this,o,l,e),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&o.id)},getIndexList:function(){for(var o=this,l=this.parentContainer,e=[];l&&(e.unshift(l.getIndex(o)),(o=l).parentContainer);)l=l.parentContainer;return e.unshift(this.scene.sys.displayList.getIndex(o)),e},destroy:function(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(i.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.displayList&&(this.displayList.queueDepthSort(),this.displayList.remove(this)),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.displayList=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,g.exports=r},function(g,b,t){var h=t(0),n=t(24),s=t(21),u=new h({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(i,r){u.prototype.hasOwnProperty(i)||(u.prototype[i]=r)},u.remove=function(i){u.prototype.hasOwnProperty(i)&&delete u.prototype[i]},n.register("GameObjectCreator",u,"make"),g.exports=u},function(g,b,t){var h=t(7),n=function(){var s,u,i,r,o,l,e=arguments[0]||{},a=1,c=arguments.length,d=!1;for("boolean"==typeof e&&(d=e,e=arguments[1]||{},a=2),c===a&&(e=this,--a);a<c;a++)if(null!=(s=arguments[a]))for(u in s)i=e[u],e!==(r=s[u])&&(d&&r&&(h(r)||(o=Array.isArray(r)))?(l=o?(o=!1,i&&Array.isArray(i)?i:[]):i&&h(i)?i:{},e[u]=n(d,l,r)):void 0!==r&&(e[u]=r));return e};g.exports=n},function(g,b){g.exports=function(t,h,n){return Math.max(h,Math.min(n,t))}},function(g,b,t){var h=t(25),n=new h,s=new h,u=new h,i={camera:n,sprite:s,calc:u};g.exports=function(r,o,l){var e=n,a=s,c=u;return a.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),e.copyFrom(o.matrix),l?(e.multiplyWithOffset(l,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),a.e=r.x,a.f=r.y):(a.e-=o.scrollX*r.scrollFactorX,a.f-=o.scrollY*r.scrollFactorY),e.multiply(a,c),i}},function(g,b){g.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(g,b,t){g.exports={ADDED_TO_SCENE:t(782),BOOT:t(783),CREATE:t(784),DESTROY:t(785),PAUSE:t(786),POST_UPDATE:t(787),PRE_UPDATE:t(788),READY:t(789),REMOVED_FROM_SCENE:t(790),RENDER:t(791),RESUME:t(792),SHUTDOWN:t(793),SLEEP:t(794),START:t(795),TRANSITION_COMPLETE:t(796),TRANSITION_INIT:t(797),TRANSITION_OUT:t(798),TRANSITION_START:t(799),TRANSITION_WAKE:t(800),UPDATE:t(801),WAKE:t(802)}},function(g,b,t){g.exports={BLUR:t(610),BOOT:t(611),CONTEXT_LOST:t(612),CONTEXT_RESTORED:t(613),DESTROY:t(614),FOCUS:t(615),HIDDEN:t(616),PAUSE:t(617),POST_RENDER:t(618),POST_STEP:t(619),PRE_RENDER:t(620),PRE_STEP:t(621),READY:t(622),RESUME:t(623),STEP:t(624),VISIBLE:t(625)}},function(g,b,t){var h=t(0),n=t(20),s=t(91),u=t(2),i=t(153),r=t(237),o=t(511),l=t(154),e=new h({initialize:function(a,c){this.loader=a,this.cache=u(c,"cache",!1),this.type=u(c,"type",!1),this.key=u(c,"key",!1);var d=this.key;if(a.prefix&&""!==a.prefix&&(this.key=a.prefix+d),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var f=u(c,"url");void 0===f?f=a.path+d+"."+u(c,"extension",""):"string"!=typeof f||f.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(f=a.path+f),this.url=f,this.src="",this.xhrSettings=l(u(c,"responseType",void 0)),u(c,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,u(c,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(c,"config",{})},setLink:function(a){(this.linkFile=a).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=i(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,this.loader.xhr))},onLoad:function(a,c){var d=a.responseURL&&0===a.responseURL.indexOf("file://")&&0===c.target.status,f=!(c.target&&200!==c.target.status)||d;4===a.readyState&&400<=a.status&&a.status<=599&&(f=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,f)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(a){a.lengthComputable&&(this.bytesLoaded=a.loaded,this.bytesTotal=a.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(a){void 0===a&&(a=this.data);var c=this.key,d=this.type;this.loader.emit(s.FILE_COMPLETE,c,d,a),this.loader.emit(s.FILE_KEY_COMPLETE+d+"-"+c,c,d,a),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});e.createObjectURL=function(a,c,d){var f;"function"==typeof URL?a.src=URL.createObjectURL(c):((f=new FileReader).onload=function(){a.removeAttribute("crossOrigin"),a.src="data:"+(c.type||d)+";base64,"+f.result.split(",")[1]},f.onerror=a.onerror,f.readAsDataURL(c))},e.revokeObjectURL=function(a){"function"==typeof URL&&URL.revokeObjectURL(a.src)},g.exports=e},function(g,b){var t={},h={};g.exports={register:function(s,u,i,r){void 0===r&&(r=!1),t[s]={plugin:u,mapping:i,custom:r}},registerCustom:function(s,u,i,r){h[s]={plugin:u,mapping:i,data:r}},hasCore:function(s){return t.hasOwnProperty(s)},hasCustom:function(s){return h.hasOwnProperty(s)},getCore:function(s){return t[s]},getCustom:function(s){return h[s]},getCustomClass:function(s){return h.hasOwnProperty(s)?h[s].plugin:null},remove:function(s){t.hasOwnProperty(s)&&delete t[s]},removeCustom:function(s){h.hasOwnProperty(s)&&delete h[s]},destroyCorePlugins:function(){for(var s in t)t.hasOwnProperty(s)&&delete t[s]},destroyCustomPlugins:function(){for(var s in h)h.hasOwnProperty(s)&&delete h[s]}}},function(g,b,t){var h=t(0),n=t(14),s=t(3),u=new h({initialize:function(i,r,o,l,e,a){void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=1),void 0===e&&(e=0),void 0===a&&(a=0),this.matrix=new Float32Array([i,r,o,l,e,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(i){this.matrix[0]=i}},b:{get:function(){return this.matrix[1]},set:function(i){this.matrix[1]=i}},c:{get:function(){return this.matrix[2]},set:function(i){this.matrix[2]=i}},d:{get:function(){return this.matrix[3]},set:function(i){this.matrix[3]=i}},e:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},f:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},tx:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},ty:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var i=this.matrix,r=i[0],o=i[1],l=i[2],e=i[3];return r||o?0<o?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):l||e?n.TAU-(0<e?Math.acos(-l/this.scaleY):-Math.acos(l/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var i=this.matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,this},translate:function(i,r){var o=this.matrix;return o[4]=o[0]*i+o[2]*r+o[4],o[5]=o[1]*i+o[3]*r+o[5],this},scale:function(i,r){var o=this.matrix;return o[0]*=i,o[1]*=i,o[2]*=r,o[3]*=r,this},rotate:function(i){var r=Math.sin(i),o=Math.cos(i),l=this.matrix,e=l[0],a=l[1],c=l[2],d=l[3];return l[0]=e*o+c*r,l[1]=a*o+d*r,l[2]=e*-r+c*o,l[3]=a*-r+d*o,this},multiply:function(i,r){var o=this.matrix,l=i.matrix,e=o[0],a=o[1],c=o[2],d=o[3],f=o[4],p=o[5],v=l[0],m=l[1],x=l[2],y=l[3],w=l[4],T=l[5],E=void 0===r?this:r;return E.a=v*e+m*c,E.b=v*a+m*d,E.c=x*e+y*c,E.d=x*a+y*d,E.e=w*e+T*c+f,E.f=w*a+T*d+p,E},multiplyWithOffset:function(i,r,o){var l=this.matrix,e=i.matrix,a=l[0],c=l[1],d=l[2],f=l[3],p=r*a+o*d+l[4],v=r*c+o*f+l[5],m=e[0],x=e[1],y=e[2],w=e[3],T=e[4],E=e[5];return l[0]=m*a+x*d,l[1]=m*c+x*f,l[2]=y*a+w*d,l[3]=y*c+w*f,l[4]=T*a+E*d+p,l[5]=T*c+E*f+v,this},transform:function(i,r,o,l,e,a){var c=this.matrix,d=c[0],f=c[1],p=c[2],v=c[3],m=c[4],x=c[5];return c[0]=i*d+r*p,c[1]=i*f+r*v,c[2]=o*d+l*p,c[3]=o*f+l*v,c[4]=e*d+a*p+m,c[5]=e*f+a*v+x,this},transformPoint:function(i,r,o){void 0===o&&(o={x:0,y:0});var l=this.matrix,a=l[1],d=l[3],p=l[5];return o.x=i*l[0]+r*l[2]+l[4],o.y=i*a+r*d+p,o},invert:function(){var i=this.matrix,r=i[0],o=i[1],l=i[2],e=i[3],a=i[4],c=i[5],d=r*e-o*l;return i[0]=e/d,i[1]=-o/d,i[2]=-l/d,i[3]=r/d,i[4]=(l*c-e*a)/d,i[5]=-(r*c-o*a)/d,this},copyFrom:function(i){var r=this.matrix;return r[0]=i.a,r[1]=i.b,r[2]=i.c,r[3]=i.d,r[4]=i.e,r[5]=i.f,this},copyFromArray:function(i){var r=this.matrix;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],this},copyToContext:function(i){var r=this.matrix;return i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i},setToContext:function(i){var r=this.matrix;return i.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),i},copyToArray:function(i){var r=this.matrix;return void 0===i?i=[r[0],r[1],r[2],r[3],r[4],r[5]]:(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5]),i},setTransform:function(i,r,o,l,e,a){var c=this.matrix;return c[0]=i,c[1]=r,c[2]=o,c[3]=l,c[4]=e,c[5]=a,this},decomposeMatrix:function(){var i,r,o=this.decomposedMatrix,l=this.matrix,e=l[0],a=l[1],c=l[2],d=l[3],f=e*d-a*c;return o.translateX=l[4],o.translateY=l[5],e||a?(i=Math.sqrt(e*e+a*a),o.rotation=0<a?Math.acos(e/i):-Math.acos(e/i),o.scaleX=i,o.scaleY=f/i):c||d?(r=Math.sqrt(c*c+d*d),o.rotation=.5*Math.PI-(0<d?Math.acos(-c/r):-Math.acos(c/r)),o.scaleX=f/r,o.scaleY=r):(o.rotation=0,o.scaleX=0,o.scaleY=0),o},applyITRS:function(i,r,o,l,e){var a=this.matrix,c=Math.sin(o),d=Math.cos(o);return a[4]=i,a[5]=r,a[0]=d*l,a[1]=c*l,a[2]=-c*e,a[3]=d*e,this},applyInverse:function(i,r,o){void 0===o&&(o=new s);var l=this.matrix,e=l[0],a=l[1],c=l[2],d=l[3],f=l[4],p=l[5],v=1/(e*d+c*-a);return o.x=d*v*i+-c*v*r+(p*c-f*d)*v,o.y=e*v*r+-a*v*i+(-p*e+f*a)*v,o},getX:function(i,r){return i*this.a+r*this.c+this.e},getY:function(i,r){return i*this.b+r*this.d+this.f},getXRound:function(i,r,o){var l=this.getX(i,r);return o&&(l=Math.round(l)),l},getYRound:function(i,r,o){var l=this.getY(i,r);return o&&(l=Math.round(l)),l},getCSSMatrix:function(){var i=this.matrix;return"matrix("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});g.exports=u},function(g,b,t){var h=t(2);g.exports=function(n,s,u,i,r,o){void 0===n&&(n=0),void 0===s&&(s=0),void 0===u&&(u=o.width),void 0===i&&(i=o.height);var l=h(r=r||{},"isNotEmpty",!1),e=h(r,"isColliding",!1),a=h(r,"hasInterestingFace",!1);n<0&&(u+=n,n=0),s<0&&(i+=s,s=0),n+u>o.width&&(u=Math.max(o.width-n,0)),s+i>o.height&&(i=Math.max(o.height-s,0));for(var c=[],d=s;d<s+i;d++)for(var f=n;f<n+u;f++){var p=o.data[d][f];if(null!==p){if(l&&-1===p.index||e&&!p.collides||a&&!p.hasInterestingFace)continue;c.push(p)}}return c}},function(g,b){g.exports=function(t,h,n,s,u,i){var r;void 0===s&&(s=0),void 0===u&&(u=0),void 0===i&&(i=1);var o=0,l=t.length;if(1===i)for(r=u;r<l;r++)t[r][h]=n+o*s,o++;else for(r=u;0<=r;r--)t[r][h]=n+o*s,o++;return t}},function(g,b,t){var h=t(33),n=t(13);g.exports=function(s,u,i){u.x=n(i,"x",0),u.y=n(i,"y",0),u.depth=n(i,"depth",0),u.flipX=n(i,"flipX",!1),u.flipY=n(i,"flipY",!1);var r=n(i,"scale",null);"number"==typeof r?u.setScale(r):null!==r&&(u.scaleX=n(r,"x",1),u.scaleY=n(r,"y",1));var o=n(i,"scrollFactor",null);"number"==typeof o?u.setScrollFactor(o):null!==o&&(u.scrollFactorX=n(o,"x",1),u.scrollFactorY=n(o,"y",1)),u.rotation=n(i,"rotation",0);var l=n(i,"angle",null);null!==l&&(u.angle=l),u.alpha=n(i,"alpha",1);var e,a,c=n(i,"origin",null);return"number"==typeof c?u.setOrigin(c):null!==c&&(e=n(c,"x",.5),a=n(c,"y",.5),u.setOrigin(e,a)),u.blendMode=n(i,"blendMode",h.NORMAL),u.visible=n(i,"visible",!0),n(i,"add",!0)&&s.sys.displayList.add(u),u.preUpdate&&s.sys.updateList.add(u),u}},function(g,b){g.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(g,b,t){var h=t(19);g.exports=function(n,s,u,i,r){var o=i.alpha*u.alpha;if(o<=0)return!1;var l=h(u,i,r).calc;return s.globalCompositeOperation=n.blendModes[u.blendMode],s.globalAlpha=o,s.save(),l.setToContext(s),s.imageSmoothingEnabled=!(!n.antialias||u.frame&&u.frame.source.scaleMode),!0}},function(g,b,t){var h,n=t(39),s=t(189),u=[],i=!1;function r(l,e,a,c,d){void 0===e&&(e=1),void 0===a&&(a=1),void 0===c&&(c=n.CANVAS),void 0===d&&(d=!1);var f=h(c),p=(null===f?(f={parent:l,canvas:document.createElement("canvas"),type:c},c===n.CANVAS&&u.push(f)):f.parent=l,f.canvas);return d&&(f.parent=p),p.width=e,p.height=a,i&&c===n.CANVAS&&s.disable(p.getContext("2d")),p}function o(){var l=0;return u.forEach(function(e){e.parent&&l++}),l}g.exports={create2D:function(l,e,a){return r(l,e,a,n.CANVAS)},create:r,createWebGL:function(l,e,a){return r(l,e,a,n.WEBGL)},disableSmoothing:function(){i=!0},enableSmoothing:function(){i=!1},first:h=function(l){if(void 0===l&&(l=n.CANVAS),l===n.WEBGL)return null;for(var e=0;e<u.length;e++){var a=u[e];if(!a.parent&&a.type===l)return a}return null},free:function(){return u.length-o()},pool:u,remove:function(l){var e=l instanceof HTMLCanvasElement;u.forEach(function(a){(e&&a.canvas===l||!e&&a.parent===l)&&(a.parent=null,a.canvas.width=1,a.canvas.height=1)})},total:o}},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(45),i=t(65),r=new h({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(o,l,e){void 0===l&&(l="Shape"),s.call(this,o,l),this.geom=e,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(i.GRAPHICS_PIPELINE)},setFillStyle:function(o,l){return void 0===l&&(l=1),void 0===o?this.isFilled=!1:(this.fillColor=o,this.fillAlpha=l,this.isFilled=!0),this},setStrokeStyle:function(o,l,e){return void 0===e&&(e=1),void 0===o?this.isStroked=!1:(this.lineWidth=o,this.strokeColor=l,this.strokeAlpha=e,this.isStroked=!0),this},setClosePath:function(o){return this.closePath=o,this},setSize:function(o,l){return this.width=o,this.height=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}}});g.exports=r},function(g,b){g.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(g,b,t){var h=t(14);g.exports=function(n){return n*h.DEG_TO_RAD}},function(g,b,t){g.exports={DESTROY:t(719),FADE_IN_COMPLETE:t(720),FADE_IN_START:t(721),FADE_OUT_COMPLETE:t(722),FADE_OUT_START:t(723),FLASH_COMPLETE:t(724),FLASH_START:t(725),FOLLOW_UPDATE:t(726),PAN_COMPLETE:t(727),PAN_START:t(728),POST_RENDER:t(729),PRE_RENDER:t(730),ROTATE_COMPLETE:t(731),ROTATE_START:t(732),SHAKE_COMPLETE:t(733),SHAKE_START:t(734),ZOOM_COMPLETE:t(735),ZOOM_START:t(736)}},function(g,b,t){var h=t(0),n=t(100),s=t(322),u=t(185),i=t(323),r=new h({initialize:function(o,l,e,a){void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(o,l,e,a)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,l,e,a,c){return void 0===a&&(a=255),void 0===c&&(c=!0),this._locked=!0,this.red=o,this.green=l,this.blue=e,this.alpha=a,this._locked=!1,this.update(c)},setGLTo:function(o,l,e,a){return void 0===a&&(a=1),this._locked=!0,this.redGL=o,this.greenGL=l,this.blueGL=e,this.alphaGL=a,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,l,e){return u(o,l,e,this)},update:function(o){if(void 0===o&&(o=!1),this._locked)return this;var l=this.r,e=this.g,a=this.b,c=this.a;return this._color=n(l,e,a),this._color32=s(l,e,a,c),this._rgba="rgba("+l+","+e+","+a+","+c/255+")",o&&i(l,e,a,this),this},updateHSV:function(){return i(this.r,this.g,this.b,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,l){void 0===o&&(o=0),void 0===l&&(l=255);var e=Math.floor(o+Math.random()*(l-o)),a=Math.floor(o+Math.random()*(l-o)),c=Math.floor(o+Math.random()*(l-o));return this.setTo(e,a,c)},randomGray:function(o,l){void 0===o&&(o=0),void 0===l&&(l=255);var e=Math.floor(o+Math.random()*(l-o));return this.setTo(e,e,e)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var l=this.r,e=this.g,a=this.b;return l=Math.max(0,Math.min(255,l-Math.round(-o/100*255))),e=Math.max(0,Math.min(255,e-Math.round(-o/100*255))),a=Math.max(0,Math.min(255,a-Math.round(-o/100*255))),this.setTo(l,e,a)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,u(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,u(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,u(this._h,this._s,o,this)}}});g.exports=r},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u){this.x=0,this.y=0,this.z=0,"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=s||0,this.z=u||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this},crossVectors:function(n,s){var u=n.x,i=n.y,r=n.z,o=s.x,l=s.y,e=s.z;return this.x=i*e-r*l,this.y=r*o-u*e,this.z=u*l-i*o,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,s,u){return"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=s||0,this.z=u||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,s){return this.fromArray(n.val,4*s)},fromArray:function(n,s){return void 0===s&&(s=0),this.x=n[s],this.y=n[s+1],this.z=n[s+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var s=n.x-this.x,u=n.y-this.y,i=n.z-this.z||0;return Math.sqrt(s*s+u*u+i*i)},distanceSq:function(n){var s=n.x-this.x,u=n.y-this.y,i=n.z-this.z||0;return s*s+u*u+i*i},length:function(){var n=this.x,s=this.y,u=this.z;return Math.sqrt(n*n+s*s+u*u)},lengthSq:function(){var n=this.x,s=this.y,u=this.z;return n*n+s*s+u*u},normalize:function(){var n=this.x,s=this.y,u=this.z,i=n*n+s*s+u*u;return 0<i&&(i=1/Math.sqrt(i),this.x=n*i,this.y=s*i,this.z=u*i),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var s=this.x,u=this.y,i=this.z,r=n.x,o=n.y,l=n.z;return this.x=u*l-i*o,this.y=i*r-s*l,this.z=s*o-u*r,this},lerp:function(n,s){void 0===s&&(s=0);var u=this.x,i=this.y,r=this.z;return this.x=u+s*(n.x-u),this.y=i+s*(n.y-i),this.z=r+s*(n.z-r),this},applyMatrix3:function(n){var s=this.x,u=this.y,i=this.z,r=n.val;return this.x=r[0]*s+r[3]*u+r[6]*i,this.y=r[1]*s+r[4]*u+r[7]*i,this.z=r[2]*s+r[5]*u+r[8]*i,this},applyMatrix4:function(n){var s=this.x,u=this.y,i=this.z,r=n.val,o=1/(r[3]*s+r[7]*u+r[11]*i+r[15]);return this.x=(r[0]*s+r[4]*u+r[8]*i+r[12])*o,this.y=(r[1]*s+r[5]*u+r[9]*i+r[13])*o,this.z=(r[2]*s+r[6]*u+r[10]*i+r[14])*o,this},transformMat3:function(n){var s=this.x,u=this.y,i=this.z,r=n.val;return this.x=s*r[0]+u*r[3]+i*r[6],this.y=s*r[1]+u*r[4]+i*r[7],this.z=s*r[2]+u*r[5]+i*r[8],this},transformMat4:function(n){var s=this.x,u=this.y,i=this.z,r=n.val;return this.x=r[0]*s+r[4]*u+r[8]*i+r[12],this.y=r[1]*s+r[5]*u+r[9]*i+r[13],this.z=r[2]*s+r[6]*u+r[10]*i+r[14],this},transformCoordinates:function(n){var s=this.x,u=this.y,i=this.z,r=n.val,l=s*r[1]+u*r[5]+i*r[9]+r[13],e=s*r[2]+u*r[6]+i*r[10]+r[14],a=s*r[3]+u*r[7]+i*r[11]+r[15];return this.x=(s*r[0]+u*r[4]+i*r[8]+r[12])/a,this.y=l/a,this.z=e/a,this},transformQuat:function(n){var s=this.x,u=this.y,i=this.z,r=n.x,o=n.y,l=n.z,e=n.w,a=e*s+o*i-l*u,c=e*u+l*s-r*i,d=e*i+r*u-o*s,f=-r*s-o*u-l*i;return this.x=a*e+f*-r+c*-l-d*-o,this.y=c*e+f*-o+d*-r-a*-l,this.z=d*e+f*-l+a*-o-c*-r,this},project:function(n){var s=this.x,u=this.y,i=this.z,r=n.val,l=r[1],e=r[2],d=r[5],f=r[6],m=r[9],x=r[10],T=r[13],E=r[14],S=1/(s*r[3]+u*r[7]+i*r[11]+r[15]);return this.x=(s*r[0]+u*r[4]+i*r[8]+r[12])*S,this.y=(s*l+u*d+i*m+T)*S,this.z=(s*e+u*f+i*x+E)*S,this},projectViewMatrix:function(n,s){return this.applyMatrix4(n).applyMatrix4(s)},unprojectViewMatrix:function(n,s){return this.applyMatrix4(n).applyMatrix4(s)},unproject:function(n,s){var o=n.w,e=o-this.y-1-n.y,a=this.z;return this.x=2*(this.x-n.x)/n.z-1,this.y=2*e/o-1,this.z=2*a-1,this.project(s)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});h.ZERO=new h,h.RIGHT=new h(1,0,0),h.LEFT=new h(-1,0,0),h.UP=new h(0,-1,0),h.DOWN=new h(0,1,0),h.FORWARD=new h(0,0,1),h.BACK=new h(0,0,-1),h.ONE=new h(1,1,1),g.exports=h},function(g,b){g.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(g,b,t){var h={VERSION:"3.50.1",BlendModes:t(33),ScaleModes:t(164),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};g.exports=h},function(g,b){g.exports=function(t){return t.y+t.height-t.height*t.originY}},function(g,b){g.exports=function(t){return t.x-t.width*t.originX}},function(g,b){g.exports=function(t){return t.x+t.width-t.width*t.originX}},function(g,b){g.exports=function(t){return t.y-t.height*t.originY}},function(g,b){g.exports=function(t,h,n,s,u,i){var r;void 0===s&&(s=0),void 0===u&&(u=0),void 0===i&&(i=1);var o=0,l=t.length;if(1===i)for(r=u;r<l;r++)t[r][h]+=n+o*s,o++;else for(r=u;0<=r;r--)t[r][h]+=n+o*s,o++;return t}},function(g,b,t){var h=t(0),n=t(301),s=t(168),u=t(55),i=t(169),r=t(3),o=new h({initialize:function(l,e,a,c){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),this.type=u.LINE,this.x1=l,this.y1=e,this.x2=a,this.y2=c},getPoint:function(l,e){return n(this,l,e)},getPoints:function(l,e,a){return s(this,l,e,a)},getRandomPoint:function(l){return i(this,l)},setTo:function(l,e,a,c){return void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),this.x1=l,this.y1=e,this.x2=a,this.y2=c,this},getPointA:function(l){return void 0===l&&(l=new r),l.set(this.x1,this.y1),l},getPointB:function(l){return void 0===l&&(l=new r),l.set(this.x2,this.y2),l},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(l){this.x1<=this.x2?this.x1=l:this.x2=l}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(l){this.x1>this.x2?this.x1=l:this.x2=l}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(l){this.y1<=this.y2?this.y1=l:this.y2=l}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(l){this.y1>this.y2?this.y1=l:this.y2=l}}});g.exports=o},function(g,b){g.exports=function(t,h,n,s){var u=n||h.fillColor;t.fillStyle="rgba("+((16711680&u)>>>16)+","+((65280&u)>>>8)+","+(255&u)+","+(s||h.fillAlpha)+")"}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i){var r=[];i.forEach(function(l){l&&r.push(l)}),this.loader=n,this.type=s,this.key=u,this.multiKeyIndex=n.multiKeyIndex++,this.files=r,this.complete=!1,this.pending=r.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var o=0;o<r.length;o++)r[o].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(n){return this.files.push(n),(n.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(n){-1!==this.files.indexOf(n)&&this.pending--},onFileFailed:function(n){-1!==this.files.indexOf(n)&&this.failed++}});g.exports=h},function(g,b){g.exports=function(t,h,n,s){var u=t-n,i=h-s;return Math.sqrt(u*u+i*i)}},function(g,b,t){g.exports={BOOT:t(918),DESTROY:t(919),DRAG_END:t(920),DRAG_ENTER:t(921),DRAG:t(922),DRAG_LEAVE:t(923),DRAG_OVER:t(924),DRAG_START:t(925),DROP:t(926),GAME_OUT:t(927),GAME_OVER:t(928),GAMEOBJECT_DOWN:t(929),GAMEOBJECT_DRAG_END:t(930),GAMEOBJECT_DRAG_ENTER:t(931),GAMEOBJECT_DRAG:t(932),GAMEOBJECT_DRAG_LEAVE:t(933),GAMEOBJECT_DRAG_OVER:t(934),GAMEOBJECT_DRAG_START:t(935),GAMEOBJECT_DROP:t(936),GAMEOBJECT_MOVE:t(937),GAMEOBJECT_OUT:t(938),GAMEOBJECT_OVER:t(939),GAMEOBJECT_POINTER_DOWN:t(940),GAMEOBJECT_POINTER_MOVE:t(941),GAMEOBJECT_POINTER_OUT:t(942),GAMEOBJECT_POINTER_OVER:t(943),GAMEOBJECT_POINTER_UP:t(944),GAMEOBJECT_POINTER_WHEEL:t(945),GAMEOBJECT_UP:t(946),GAMEOBJECT_WHEEL:t(947),MANAGER_BOOT:t(948),MANAGER_PROCESS:t(949),MANAGER_UPDATE:t(950),POINTER_DOWN:t(951),POINTER_DOWN_OUTSIDE:t(952),POINTER_MOVE:t(953),POINTER_OUT:t(954),POINTER_OVER:t(955),POINTER_UP:t(956),POINTER_UP_OUTSIDE:t(957),POINTER_WHEEL:t(958),POINTERLOCK_CHANGE:t(959),PRE_UPDATE:t(960),SHUTDOWN:t(961),START:t(962),UPDATE:t(963)}},function(g,b){var t={};g.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(n,s){for(var u,i="boolean"==typeof s?(u=2,s):(u=1,!0),r=u;r<arguments.length;r++){var o=arguments[r];if(o)for(var l in o)!i||!o[l]||o[l].constructor!==Object||n[l]&&n[l].constructor!==Object?n[l]=o[l]:(n[l]=n[l]||{},t.extend(n[l],i,o[l]))}return n},t.clone=function(n,s){return t.extend({},s,n)},t.keys=function(n){if(Object.keys)return Object.keys(n);var s=[];for(var u in n)s.push(u);return s},t.values=function(n){var s=[];if(Object.keys){for(var u=Object.keys(n),i=0;i<u.length;i++)s.push(n[u[i]]);return s}for(var r in n)s.push(n[r]);return s},t.get=function(n,s,u,i){s=s.split(".").slice(u,i);for(var r=0;r<s.length;r+=1)n=n[s[r]];return n},t.set=function(n,s,u,i,r){var o=s.split(".").slice(i,r);return t.get(n,s,0,-1)[o[o.length-1]]=u},t.shuffle=function(n){for(var s=n.length-1;0<s;s--){var u=Math.floor(t.random()*(s+1)),i=n[s];n[s]=n[u],n[u]=i}return n},t.choose=function(n){return n[Math.floor(t.random()*n.length)]},t.isElement=function(n){return"undefined"!=typeof HTMLElement?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},t.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)},t.isFunction=function(n){return"function"==typeof n},t.isPlainObject=function(n){return"object"==typeof n&&n.constructor===Object},t.isString=function(n){return"[object String]"===Object.prototype.toString.call(n)},t.clamp=function(n,s,u){return n<s?s:u<n?u:n},t.sign=function(n){return n<0?-1:1},t.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(n,s){return s=void 0!==s?s:1,(n=void 0!==n?n:0)+h()*(s-n)};var h=function(){return t._seed=(9301*t._seed+49297)%233280,t._seed/233280};t.colorToNumber=function(n){return 3==(n=n.replace("#","")).length&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},t.logLevel=1,t.log=function(){console&&0<t.logLevel&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&0<t.logLevel&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&0<t.logLevel&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(n,s){if(n.indexOf)return n.indexOf(s);for(var u=0;u<n.length;u++)if(n[u]===s)return u;return-1},t.map=function(n,s){if(n.map)return n.map(s);for(var u=[],i=0;i<n.length;i+=1)u.push(s(n[i]));return u},t.topologicalSort=function(n){var s=[],u=[],i=[];for(var r in n)u[r]||i[r]||t._topologicalSort(r,u,i,n,s);return s},t._topologicalSort=function(n,s,u,i,r){var o=i[n]||[];u[n]=!0;for(var l=0;l<o.length;l+=1){var e=o[l];u[e]||s[e]||t._topologicalSort(e,s,u,i,r)}u[n]=!1,s[n]=!0,r.push(n)},t.chain=function(){for(var n=[],s=0;s<arguments.length;s+=1){var u=arguments[s];u._chained?n.push.apply(n,u._chained):n.push(u)}function i(){for(var r,o=new Array(arguments.length),l=0,e=arguments.length;l<e;l++)o[l]=arguments[l];for(l=0;l<n.length;l+=1){var a=n[l].apply(r,o);void 0!==a&&(r=a)}return r}return i._chained=n,i},t.chainPathBefore=function(n,s,u){return t.set(n,s,t.chain(u,t.get(n,s)))},t.chainPathAfter=function(n,s,u){return t.set(n,s,t.chain(t.get(n,s),u))}}()},function(g,b){g.exports=function(t,h){return t.y=h+t.height*t.originY,t}},function(g,b){g.exports=function(t,h){return t.x=h+t.width*t.originX,t}},function(g,b){g.exports=function(t,h){return t.x=h-t.width+t.width*t.originX,t}},function(g,b){g.exports=function(t,h){return t.y=h-t.height+t.height*t.originY,t}},function(g,b){g.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(g,b){g.exports=function(t,h,n){return!(t.width<=0||t.height<=0)&&t.x<=h&&t.x+t.width>=h&&t.y<=n&&t.y+t.height>=n}},function(g,b,t){var h=t(0),n=t(172),s=t(9),u=t(368),i=t(2),r=t(67),o=t(88),l=t(139),e=t(12),a=t(369),c=new h({Extends:s,initialize:function(d){s.call(this);var f=d.game,p=f.renderer,v=p.gl;this.name=i(d,"name","WebGLPipeline"),this.game=f,this.renderer=p,this.gl=v,this.view=f.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.topology=i(d,"topology",v.TRIANGLES),this.active=!0,this.currentUnit=0,this.forceZero=i(d,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.shaders=[],this.projectionWidth=0,this.projectionHeight=0,this.config=d},boot:function(){var d=this.gl,f=this.config,p=this.renderer;this.isPostFX||(this.projectionMatrix=(new r).identity());var v=this.renderTargets,m=i(f,"renderTarget",!1);"boolean"==typeof m&&m&&(m=1);var x=p.width,y=p.height;if("number"==typeof m)for(_=0;_<m;_++)v.push(new l(p,x,y,1,0,!0));else if(Array.isArray(m))for(_=0;_<m.length;_++){var w=i(m[_],"scale",1),T=i(m[_],"minFilter",0),E=i(m[_],"autoClear",1);v.push(new l(p,x,y,w,T,E))}v.length&&(this.currentRenderTarget=v[0]),this.setShadersFromConfig(f);for(var S=this.shaders,A=0,_=0;_<S.length;_++)S[_].vertexSize>A&&(A=S[_].vertexSize);var C=i(f,"batchSize",p.config.batchSize);this.vertexCapacity=6*C;var M=new ArrayBuffer(this.vertexCapacity*A);this.vertexData=M,this.bytes=new Uint8Array(M),this.vertexViewF32=new Float32Array(M),this.vertexViewU32=new Uint32Array(M);var R=i(f,"vertices",null);for(R?(this.vertexViewF32.set(R),this.vertexBuffer=p.createVertexBuffer(M,d.STATIC_DRAW)):this.vertexBuffer=p.createVertexBuffer(M.byteLength,d.DYNAMIC_DRAW),this.setVertexBuffer(),_=S.length-1;0<=_;_--)S[_].rebind();this.hasBooted=!0,p.on(o.RESIZE,this.resize,this),p.on(o.PRE_RENDER,this.onPreRender,this),p.on(o.RENDER,this.onRender,this),p.on(o.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,f){var p=this.renderer;return d===this.currentShader&&p.currentProgram===this.currentShader.program||(this.flush(),p.resetTextures(),this.setVertexBuffer()&&!f&&(f=!0),d.bind(f,!1),this.currentShader=d),this},getShaderByName:function(d){for(var f=this.shaders,p=0;p<f.length;p++)if(f[p].name===d)return f[p]},setShadersFromConfig:function(d){var f=this.shaders,p=this.renderer;for(_=0;_<f.length;_++)f[_].destroy();var v="vertShader",m="fragShader",x="attributes",y=i(d,v,null),w=e.parseFragmentShaderMaxTextures(i(d,m,null),p.maxTextures),T=i(d,x,null),E=i(d,"shaders",[]),S=E.length;if(0===S)y&&w&&(this.shaders=[new a(this,"default",y,w,n(T))]);else{for(var A=[],_=0;_<S;_++){var C=E[_],M=i(C,"name","default"),R=i(C,v,y),L=e.parseFragmentShaderMaxTextures(i(C,m,w),p.maxTextures),D=i(C,x,T);R&&L&&A.push(new a(this,M,R,L,n(D)))}this.shaders=A}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(d,f){return void 0===f&&(f=d.frame),this.currentUnit=this.renderer.setTextureSource(f.source),this.currentUnit},shouldFlush:function(d){return void 0===d&&(d=0),this.vertexCount+d>this.vertexCapacity},resize:function(d,f){d===this.width&&f===this.height||this.flush(),this.width=d,this.height=f;for(var p=this.renderTargets,v=0;v<p.length;v++)p[v].resize(d,f);return this.setProjectionMatrix(d,f),this.emit(u.RESIZE,d,f,this),this.onResize(d,f),this},setProjectionMatrix:function(d,f){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=d,this.projectionHeight=f,p.ortho(0,d,f,0,-1e3,1e3);for(var v=this.shaders,m="uProjectionMatrix",x=0;x<v.length;x++){var y=v[x];y.hasUniform(m)&&(y.resetUniform(m),y.setMatrix4fv(m,!1,p.val,y))}return this},updateProjectionMatrix:function(){var d,f;this.projectionMatrix&&(f=this.renderer.projectionHeight,this.projectionWidth===(d=this.renderer.projectionWidth)&&this.projectionHeight===f||this.setProjectionMatrix(d,f))},bind:function(d){void 0===d&&(d=this.currentShader);var f=this.setVertexBuffer();return d.bind(f),this.currentShader=d,this.emit(u.BIND,this,d),this.onActive(d),this},rebind:function(){this.setVertexBuffer();for(var d=this.shaders,f=d.length-1;0<=f;f--)this.currentShader=d[f].rebind();return this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this},setVertexBuffer:function(){var d=this.gl,f=this.vertexBuffer;return d.getParameter(d.ARRAY_BUFFER_BINDING)!==f&&(d.bindBuffer(d.ARRAY_BUFFER,f),!0)},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){var f,p,v;return void 0===d&&(d=!1),0<this.vertexCount&&(this.emit(u.BEFORE_FLUSH,this,d),this.onBeforeFlush(d),f=this.gl,p=this.vertexCount,v=this.currentShader.vertexSize,this.active&&(this.setVertexBuffer(),p===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,p*v)),f.drawArrays(this.topology,0,p)),this.vertexCount=0,this.emit(u.AFTER_FLUSH,this,d),this.onAfterFlush(d)),this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,f,p,v,m,x,y){var w=this.vertexViewF32,T=this.vertexViewU32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;w[++E]=d,w[++E]=f,w[++E]=p,w[++E]=v,w[++E]=m,w[++E]=x,T[++E]=y,this.vertexCount++},batchQuad:function(d,f,p,v,m,x,y,w,T,E,S,A,_,C,M,R,L,D,F,U){void 0===U&&(U=this.currentUnit);var P=!1;return this.shouldFlush(6)&&(this.flush(),P=!0,U=this.setTexture2D(F)),this.batchVert(f,p,E,S,U,D,C),this.batchVert(v,m,E,_,U,D,R),this.batchVert(x,y,A,_,U,D,L),this.batchVert(f,p,E,S,U,D,C),this.batchVert(x,y,A,_,U,D,L),this.batchVert(w,T,A,S,U,D,M),this.onBatch(d),P},batchTri:function(d,f,p,v,m,x,y,w,T,E,S,A,_,C,M,R,L){void 0===L&&(L=this.currentUnit);var D=!1;return this.shouldFlush(3)&&(this.flush(),D=!0,L=this.setTexture2D(R)),this.batchVert(f,p,w,T,L,M,A),this.batchVert(v,m,w,S,L,M,_),this.batchVert(x,y,E,S,L,M,C),this.onBatch(d),D},drawFillRect:function(d,f,p,v,m,x,y,w){void 0===y&&(y=this.renderer.whiteTexture.glTexture),void 0===w&&(w=!0),d=Math.floor(d),f=Math.floor(f);var T=Math.floor(d+p),E=Math.floor(f+v),S=this.setTexture2D(y),A=e.getTintAppendFloatAlphaAndSwap(m,x),_=0,C=1;w&&(_=1,C=0),this.batchQuad(null,d,f,d,E,T,E,T,f,0,_,1,C,A,A,A,A,0,y,S)},setTexture2D:function(d){return void 0===d&&(d=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(d),this.currentUnit},bindTexture:function(d,f){void 0===f&&(f=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+f),p.bindTexture(p.TEXTURE_2D,d),this},bindRenderTarget:function(d,f){return this.bindTexture(d.texture,f)},setTime:function(d){return this.set1f(d,this.game.loop.getDuration()),this},set1f:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1f(d,f),this},set2f:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.set2f(d,f,p),this},set3f:function(d,f,p,v,m){return void 0===m&&(m=this.currentShader),m.set3f(d,f,p,v),this},set4f:function(d,f,p,v,m,x){return void 0===x&&(x=this.currentShader),x.set4f(d,f,p,v,m),this},set1fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1fv(d,f),this},set2fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set2fv(d,f),this},set3fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set3fv(d,f),this},set4fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set4fv(d,f),this},set1iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1iv(d,f),this},set2iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set2iv(d,f),this},set3iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set3iv(d,f),this},set4iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set4iv(d,f),this},set1i:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1i(d,f),this},set2i:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.set2i(d,f,p),this},set3i:function(d,f,p,v,m){return void 0===m&&(m=this.currentShader),m.set3i(d,f,p,v),this},set4i:function(d,f,p,v,m,x){return void 0===x&&(x=this.currentShader),x.set4i(d,f,p,v,m),this},setMatrix2fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix2fv(d,f,p),this},setMatrix3fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix3fv(d,f,p),this},setMatrix4fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix4fv(d,f,p),this},destroy:function(){this.emit(u.DESTROY,this);for(var d=this.shaders,f=0;f<d.length;f++)d[f].destroy();var p=this.renderTargets;for(f=0;f<p.length;f++)p[f].destroy();this.gl.deleteBuffer(this.vertexBuffer);var v=this.renderer;return v.off(o.RESIZE,this.resize,this),v.off(o.PRE_RENDER,this.onPreRender,this),v.off(o.RENDER,this.onRender,this),v.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});g.exports=c},function(g,b){g.exports=function(t,h,n,s){var u=n||h.strokeColor;t.strokeStyle="rgba("+((16711680&u)>>>16)+","+((65280&u)>>>8)+","+(255&u)+","+(s||h.strokeAlpha)+")",t.lineWidth=h.lineWidth}},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(6),o=t(7),l=new h({Extends:s,initialize:function(e,a,c,d,f){var p,v="json";o(a)&&(a=i(p=a,"key"),c=i(p,"url"),d=i(p,"xhrSettings"),v=i(p,"extension",v),f=i(p,"dataKey",f)),s.call(this,e,{type:"json",cache:e.cacheManager.json,extension:v,responseType:"text",key:a,url:c,xhrSettings:d,config:f}),o(c)&&(this.data=f?r(c,f):c,this.state=n.FILE_POPULATED)},onProcess:function(){var e,a;this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,e=JSON.parse(this.xhrLoader.responseText),this.data="string"==typeof(a=this.config)?r(e,a,e):e),this.onProcessComplete()}});u.register("json",function(e,a,c,d){if(Array.isArray(e))for(var f=0;f<e.length;f++)this.addFile(new l(this,e[f]));else this.addFile(new l(this,e,a,d,c));return this}),g.exports=l},function(g,b){g.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(g,b,t){var h=t(156),n=t(26);g.exports=function(s,u,i,r,o){for(var l,e,a,c,d=n(s,u,i,r,null,o),f=0;f<d.length;f++){var p=d[f];p&&(p.collides?(l=h(p.x,p.y-1,!0,o),e=h(p.x,p.y+1,!0,o),a=h(p.x-1,p.y,!0,o),c=h(p.x+1,p.y,!0,o),p.faceTop=!l||!l.collides,p.faceBottom=!e||!e.collides,p.faceLeft=!a||!a.collides,p.faceRight=!c||!c.collides):p.resetFaces())}}},function(g,b,t){var h=t(0),n=t(63),s=t(294),u=t(295),i=t(55),r=t(166),o=new h({initialize:function(l,e,a){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),this.type=i.CIRCLE,this.x=l,this.y=e,this._radius=a,this._diameter=2*a},contains:function(l,e){return n(this,l,e)},getPoint:function(l,e){return s(this,l,e)},getPoints:function(l,e,a){return u(this,l,e,a)},getRandomPoint:function(l){return r(this,l)},setTo:function(l,e,a){return this.x=l,this.y=e,this._radius=a,this._diameter=2*a,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(l,e){return void 0===e&&(e=l),this.x=l,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this._diameter=2*l}},diameter:{get:function(){return this._diameter},set:function(l){this._diameter=l,this._radius=.5*l}},left:{get:function(){return this.x-this._radius},set:function(l){this.x=l+this._radius}},right:{get:function(){return this.x+this._radius},set:function(l){this.x=l-this._radius}},top:{get:function(){return this.y-this._radius},set:function(l){this.y=l+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(l){this.y=l-this._radius}}});g.exports=o},function(g,b){g.exports=function(t,h,n){return 0<t.radius&&h>=t.left&&h<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-h)*(t.x-h)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(g,b){g.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(g,b){g.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(g,b){g.exports=function(t,h,n){var s=n-h;return h+((t-h)%s+s)%s}},function(g,b,t){var h=t(0),n=t(37),s=new h({initialize:function(e){this.val=new Float32Array(16),e?this.copy(e):this.identity()},clone:function(){return new s(this)},set:function(e){return this.copy(e)},setValues:function(e,a,c,d,f,p,v,m,x,y,w,T,E,S,A,_){var C=this.val;return C[0]=e,C[1]=a,C[2]=c,C[3]=d,C[4]=f,C[5]=p,C[6]=v,C[7]=m,C[8]=x,C[9]=y,C[10]=w,C[11]=T,C[12]=E,C[13]=S,C[14]=A,C[15]=_,this},copy:function(e){var a=e.val;return this.setValues(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,a,c){var d=u.fromQuat(c).val,f=a.x,p=a.y,v=a.z;return this.setValues(d[0]*f,d[1]*f,d[2]*f,0,d[4]*p,d[5]*p,d[6]*p,0,d[8]*v,d[9]*v,d[10]*v,0,e.x,e.y,e.z,1)},xyz:function(e,a,c){this.identity();var d=this.val;return d[12]=e,d[13]=a,d[14]=c,this},scaling:function(e,a,c){this.zero();var d=this.val;return d[0]=e,d[5]=a,d[10]=c,d[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,a=e[1],c=e[2],d=e[3],f=e[6],p=e[7],v=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=a,e[6]=e[9],e[7]=e[13],e[8]=c,e[9]=f,e[11]=e[14],e[12]=d,e[13]=p,e[14]=v,this},getInverse:function(e){return this.copy(e),this.invert()},invert:function(){var e=this.val,a=e[0],c=e[1],d=e[2],f=e[3],p=e[4],v=e[5],m=e[6],x=e[7],y=e[8],w=e[9],T=e[10],E=e[11],S=e[12],A=e[13],_=e[14],C=e[15],M=a*v-c*p,R=a*m-d*p,L=a*x-f*p,D=c*m-d*v,F=c*x-f*v,U=d*x-f*m,P=y*A-w*S,O=y*_-T*S,B=y*C-E*S,k=w*_-T*A,I=w*C-E*A,N=T*C-E*_,Y=M*N-R*I+L*k+D*B-F*O+U*P;return Y?this.setValues((v*N-m*I+x*k)*(Y=1/Y),(d*I-c*N-f*k)*Y,(A*U-_*F+C*D)*Y,(T*F-w*U-E*D)*Y,(m*B-p*N-x*O)*Y,(a*N-d*B+f*O)*Y,(_*L-S*U-C*R)*Y,(y*U-T*L+E*R)*Y,(p*I-v*B+x*P)*Y,(c*B-a*I-f*P)*Y,(S*F-A*L+C*M)*Y,(w*L-y*F-E*M)*Y,(v*O-p*k-m*P)*Y,(a*k-c*O+d*P)*Y,(A*R-S*D-_*M)*Y,(y*D-w*R+T*M)*Y):this},adjoint:function(){var e=this.val,a=e[0],c=e[1],d=e[2],f=e[3],p=e[4],v=e[5],m=e[6],x=e[7],y=e[8],w=e[9],T=e[10],E=e[11],S=e[12],A=e[13],_=e[14],C=e[15];return this.setValues(v*(T*C-E*_)-w*(m*C-x*_)+A*(m*E-x*T),-(c*(T*C-E*_)-w*(d*C-f*_)+A*(d*E-f*T)),c*(m*C-x*_)-v*(d*C-f*_)+A*(d*x-f*m),-(c*(m*E-x*T)-v*(d*E-f*T)+w*(d*x-f*m)),-(p*(T*C-E*_)-y*(m*C-x*_)+S*(m*E-x*T)),a*(T*C-E*_)-y*(d*C-f*_)+S*(d*E-f*T),-(a*(m*C-x*_)-p*(d*C-f*_)+S*(d*x-f*m)),a*(m*E-x*T)-p*(d*E-f*T)+y*(d*x-f*m),p*(w*C-E*A)-y*(v*C-x*A)+S*(v*E-x*w),-(a*(w*C-E*A)-y*(c*C-f*A)+S*(c*E-f*w)),a*(v*C-x*A)-p*(c*C-f*A)+S*(c*x-f*v),-(a*(v*E-x*w)-p*(c*E-f*w)+y*(c*x-f*v)),-(p*(w*_-T*A)-y*(v*_-m*A)+S*(v*T-m*w)),a*(w*_-T*A)-y*(c*_-d*A)+S*(c*T-d*w),-(a*(v*_-m*A)-p*(c*_-d*A)+S*(c*m-d*v)),a*(v*T-m*w)-p*(c*T-d*w)+y*(c*m-d*v))},determinant:function(){var e=this.val,a=e[0],c=e[1],d=e[2],f=e[3],p=e[4],v=e[5],m=e[6],x=e[7],y=e[8],w=e[9],T=e[10],E=e[11],S=e[12],A=e[13],_=e[14],C=e[15];return(a*v-c*p)*(T*C-E*_)-(a*m-d*p)*(w*C-E*A)+(a*x-f*p)*(w*_-T*A)+(c*m-d*v)*(y*C-E*S)-(c*x-f*v)*(y*_-T*S)+(d*x-f*m)*(y*A-w*S)},multiply:function(e){var a=this.val,c=a[0],d=a[1],f=a[2],p=a[3],v=a[4],m=a[5],x=a[6],y=a[7],w=a[8],T=a[9],E=a[10],S=a[11],A=a[12],_=a[13],C=a[14],M=a[15],R=e.val,L=R[0],D=R[1],F=R[2],U=R[3];return a[0]=L*c+D*v+F*w+U*A,a[1]=L*d+D*m+F*T+U*_,a[2]=L*f+D*x+F*E+U*C,a[3]=L*p+D*y+F*S+U*M,a[4]=(L=R[4])*c+(D=R[5])*v+(F=R[6])*w+(U=R[7])*A,a[5]=L*d+D*m+F*T+U*_,a[6]=L*f+D*x+F*E+U*C,a[7]=L*p+D*y+F*S+U*M,a[8]=(L=R[8])*c+(D=R[9])*v+(F=R[10])*w+(U=R[11])*A,a[9]=L*d+D*m+F*T+U*_,a[10]=L*f+D*x+F*E+U*C,a[11]=L*p+D*y+F*S+U*M,a[12]=(L=R[12])*c+(D=R[13])*v+(F=R[14])*w+(U=R[15])*A,a[13]=L*d+D*m+F*T+U*_,a[14]=L*f+D*x+F*E+U*C,a[15]=L*p+D*y+F*S+U*M,this},multiplyLocal:function(e){var a=this.val,c=e.val;return this.setValues(a[0]*c[0]+a[1]*c[4]+a[2]*c[8]+a[3]*c[12],a[0]*c[1]+a[1]*c[5]+a[2]*c[9]+a[3]*c[13],a[0]*c[2]+a[1]*c[6]+a[2]*c[10]+a[3]*c[14],a[0]*c[3]+a[1]*c[7]+a[2]*c[11]+a[3]*c[15],a[4]*c[0]+a[5]*c[4]+a[6]*c[8]+a[7]*c[12],a[4]*c[1]+a[5]*c[5]+a[6]*c[9]+a[7]*c[13],a[4]*c[2]+a[5]*c[6]+a[6]*c[10]+a[7]*c[14],a[4]*c[3]+a[5]*c[7]+a[6]*c[11]+a[7]*c[15],a[8]*c[0]+a[9]*c[4]+a[10]*c[8]+a[11]*c[12],a[8]*c[1]+a[9]*c[5]+a[10]*c[9]+a[11]*c[13],a[8]*c[2]+a[9]*c[6]+a[10]*c[10]+a[11]*c[14],a[8]*c[3]+a[9]*c[7]+a[10]*c[11]+a[11]*c[15],a[12]*c[0]+a[13]*c[4]+a[14]*c[8]+a[15]*c[12],a[12]*c[1]+a[13]*c[5]+a[14]*c[9]+a[15]*c[13],a[12]*c[2]+a[13]*c[6]+a[14]*c[10]+a[15]*c[14],a[12]*c[3]+a[13]*c[7]+a[14]*c[11]+a[15]*c[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,a){var c=e.val,d=a.val,f=c[0],p=c[4],v=c[8],m=c[12],x=c[1],y=c[5],w=c[9],T=c[13],E=c[2],S=c[6],A=c[10],_=c[14],C=c[3],M=c[7],R=c[11],L=c[15],D=d[0],F=d[4],U=d[8],P=d[12],O=d[1],B=d[5],k=d[9],I=d[13],N=d[2],Y=d[6],X=d[10],W=d[14],G=d[3],z=d[7],V=d[11],H=d[15];return this.setValues(f*D+p*O+v*N+m*G,x*D+y*O+w*N+T*G,E*D+S*O+A*N+_*G,C*D+M*O+R*N+L*G,f*F+p*B+v*Y+m*z,x*F+y*B+w*Y+T*z,E*F+S*B+A*Y+_*z,C*F+M*B+R*Y+L*z,f*U+p*k+v*X+m*V,x*U+y*k+w*X+T*V,E*U+S*k+A*X+_*V,C*U+M*k+R*X+L*V,f*P+p*I+v*W+m*H,x*P+y*I+w*W+T*H,E*P+S*I+A*W+_*H,C*P+M*I+R*W+L*H)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,a,c){var d=this.val;return d[12]=d[0]*e+d[4]*a+d[8]*c+d[12],d[13]=d[1]*e+d[5]*a+d[9]*c+d[13],d[14]=d[2]*e+d[6]*a+d[10]*c+d[14],d[15]=d[3]*e+d[7]*a+d[11]*c+d[15],this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,a,c){var d=this.val;return d[0]=d[0]*e,d[1]=d[1]*e,d[2]=d[2]*e,d[3]=d[3]*e,d[4]=d[4]*a,d[5]=d[5]*a,d[6]=d[6]*a,d[7]=d[7]*a,d[8]=d[8]*c,d[9]=d[9]*c,d[10]=d[10]*c,d[11]=d[11]*c,this},makeRotationAxis:function(e,a){var c=Math.cos(a),d=Math.sin(a),f=1-c,p=e.x,v=e.y,m=e.z,x=f*p,y=f*v;return this.setValues(x*p+c,x*v-d*m,x*m+d*v,0,x*v+d*m,y*v+c,y*m-d*p,0,x*m-d*v,y*m+d*p,f*m*m+c,0,0,0,0,1)},rotate:function(e,a){var c=this.val,d=a.x,f=a.y,p=a.z,v=Math.sqrt(d*d+f*f+p*p);if(Math.abs(v)<1e-6)return this;d*=v=1/v,f*=v,p*=v;var m=Math.sin(e),x=Math.cos(e),y=1-x,w=c[0],T=c[1],E=c[2],S=c[3],A=c[4],_=c[5],C=c[6],M=c[7],R=c[8],L=c[9],D=c[10],F=c[11],k=d*d*y+x,I=f*d*y+p*m,N=p*d*y-f*m,Y=d*f*y-p*m,X=f*f*y+x,W=p*f*y+d*m,G=d*p*y+f*m,z=f*p*y-d*m,V=p*p*y+x;return this.setValues(w*k+A*I+R*N,T*k+_*I+L*N,E*k+C*I+D*N,S*k+M*I+F*N,w*Y+A*X+R*W,T*Y+_*X+L*W,E*Y+C*X+D*W,S*Y+M*X+F*W,w*G+A*z+R*V,T*G+_*z+L*V,E*G+C*z+D*V,S*G+M*z+F*V,c[12],c[13],c[14],c[15])},rotateX:function(e){var a=this.val,c=Math.sin(e),d=Math.cos(e),f=a[4],p=a[5],v=a[6],m=a[7],x=a[8],y=a[9],w=a[10],T=a[11];return a[4]=f*d+x*c,a[5]=p*d+y*c,a[6]=v*d+w*c,a[7]=m*d+T*c,a[8]=x*d-f*c,a[9]=y*d-p*c,a[10]=w*d-v*c,a[11]=T*d-m*c,this},rotateY:function(e){var a=this.val,c=Math.sin(e),d=Math.cos(e),f=a[0],p=a[1],v=a[2],m=a[3],x=a[8],y=a[9],w=a[10],T=a[11];return a[0]=f*d-x*c,a[1]=p*d-y*c,a[2]=v*d-w*c,a[3]=m*d-T*c,a[8]=f*c+x*d,a[9]=p*c+y*d,a[10]=v*c+w*d,a[11]=m*c+T*d,this},rotateZ:function(e){var a=this.val,c=Math.sin(e),d=Math.cos(e),f=a[0],p=a[1],v=a[2],m=a[3],x=a[4],y=a[5],w=a[6],T=a[7];return a[0]=f*d+x*c,a[1]=p*d+y*c,a[2]=v*d+w*c,a[3]=m*d+T*c,a[4]=x*d-f*c,a[5]=y*d-p*c,a[6]=w*d-v*c,a[7]=T*d-m*c,this},fromRotationTranslation:function(e,a){var c=e.x,d=e.y,f=e.z,p=e.w,v=c+c,m=d+d,x=f+f,y=c*v,w=c*m,T=c*x,E=d*m,S=d*x,A=f*x,_=p*v,C=p*m,M=p*x;return this.setValues(1-(E+A),w+M,T-C,0,w-M,1-(y+A),S+_,0,T+C,S-_,1-(y+E),0,a.x,a.y,a.z,1)},fromQuat:function(e){var a=e.x,c=e.y,d=e.z,f=e.w,p=a+a,v=c+c,m=d+d,x=a*p,y=a*v,w=a*m,T=c*v,E=c*m,S=d*m,A=f*p,_=f*v,C=f*m;return this.setValues(1-(T+S),y+C,w-_,0,y-C,1-(x+S),E+A,0,w+_,E-A,1-(x+T),0,0,0,0,1)},frustum:function(e,a,c,d,f,p){var v=1/(a-e),m=1/(d-c),x=1/(f-p);return this.setValues(2*f*v,0,0,0,0,2*f*m,0,0,(a+e)*v,(d+c)*m,(p+f)*x,-1,0,0,p*f*2*x,0)},perspective:function(e,a,c,d){var f=1/Math.tan(e/2),p=1/(c-d);return this.setValues(f/a,0,0,0,0,f,0,0,0,0,(d+c)*p,-1,0,0,2*d*c*p,0)},perspectiveLH:function(e,a,c,d){return this.setValues(2*c/e,0,0,0,0,2*c/a,0,0,0,0,-d/(c-d),1,0,0,c*d/(c-d),0)},ortho:function(e,a,c,d,f,p){var v=0==(v=e-a)?v:1/v,m=0==(m=c-d)?m:1/m,x=0==(x=f-p)?x:1/x;return this.setValues(-2*v,0,0,0,0,-2*m,0,0,0,0,2*x,0,(e+a)*v,(d+c)*m,(p+f)*x,1)},lookAtRH:function(e,a,c){var d=this.val;return l.subVectors(e,a),0===l.getLengthSquared()&&(l.z=1),l.normalize(),r.crossVectors(c,l),0===r.getLengthSquared()&&(1===Math.abs(c.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),r.crossVectors(c,l)),r.normalize(),o.crossVectors(l,r),d[0]=r.x,d[1]=r.y,d[2]=r.z,d[4]=o.x,d[5]=o.y,d[6]=o.z,d[8]=l.x,d[9]=l.y,d[10]=l.z,this},lookAt:function(e,a,c){var d=e.x,f=e.y,p=e.z,v=c.x,m=c.y,x=c.z,y=a.x,w=a.y,T=a.z;if(Math.abs(d-y)<1e-6&&Math.abs(f-w)<1e-6&&Math.abs(p-T)<1e-6)return this.identity();var E=d-y,S=f-w,A=p-T,_=1/Math.sqrt(E*E+S*S+A*A),C=m*(A*=_)-x*(S*=_),M=x*(E*=_)-v*A,R=v*S-m*E;(_=Math.sqrt(C*C+M*M+R*R))?(C*=_=1/_,M*=_,R*=_):R=M=C=0;var L=S*R-A*M,D=A*C-E*R,F=E*M-S*C;return(_=Math.sqrt(L*L+D*D+F*F))?(L*=_=1/_,D*=_,F*=_):F=D=L=0,this.setValues(C,L,E,0,M,D,S,0,R,F,A,0,-(C*d+M*f+R*p),-(L*d+D*f+F*p),-(E*d+S*f+A*p),1)},yawPitchRoll:function(e,a,c){this.zero(),u.zero(),i.zero();var d=this.val,f=u.val,p=i.val,v=Math.sin(c),m=Math.cos(c);return d[10]=1,d[15]=1,d[0]=m,d[1]=v,d[4]=-v,d[5]=m,v=Math.sin(a),m=Math.cos(a),f[0]=1,f[15]=1,f[5]=m,f[10]=m,f[9]=-v,f[6]=v,v=Math.sin(e),m=Math.cos(e),p[5]=1,p[15]=1,p[0]=m,p[2]=-v,p[8]=v,p[10]=m,this.multiplyLocal(u),this.multiplyLocal(i),this},setWorldMatrix:function(e,a,c,d,f){return this.yawPitchRoll(e.y,e.x,e.z),u.scaling(c.x,c.y,c.z),i.xyz(a.x,a.y,a.z),this.multiplyLocal(u),this.multiplyLocal(i),d&&this.multiplyLocal(d),f&&this.multiplyLocal(f),this},multiplyToMat4:function(e,a){var c=this.val,d=e.val,f=c[0],p=c[1],v=c[2],m=c[3],x=c[4],y=c[5],w=c[6],T=c[7],E=c[8],S=c[9],A=c[10],_=c[11],C=c[12],M=c[13],R=c[14],L=c[15],F=d[1],U=d[2],P=d[3],O=d[4],B=d[5],k=d[6],I=d[7],N=d[8],Y=d[9],X=d[10],W=d[11],G=d[12],z=d[13],V=d[14],H=d[15];return a.setValues(d[0]*f+F*x+U*E+P*C,F*p+F*y+U*S+P*M,U*v+F*w+U*A+P*R,P*m+F*T+U*_+P*L,O*f+B*x+k*E+I*C,O*p+B*y+k*S+I*M,O*v+B*w+k*A+I*R,O*m+B*T+k*_+I*L,N*f+Y*x+X*E+W*C,N*p+Y*y+X*S+W*M,N*v+Y*w+X*A+W*R,N*m+Y*T+X*_+W*L,G*f+z*x+V*E+H*C,G*p+z*y+V*S+H*M,G*v+z*w+V*A+H*R,G*m+z*T+V*_+H*L)},fromRotationXYTranslation:function(e,a,c){var d=a.x,f=a.y,p=a.z,v=Math.sin(e.x),m=Math.cos(e.x),x=Math.sin(e.y),y=Math.cos(e.y),w=d,T=f,E=p,S=-v,A=0-S*x,_=0-m*x,C=S*y,M=m*y;return c||(w=y*d+x*p,T=A*d+m*f+C*p,E=_*d+v*f+M*p),this.setValues(y,A,_,0,0,m,v,0,x,C,M,0,w,T,E,1)},getMaxScaleOnAxis:function(){var e=this.val;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}}),u=new s,i=new s,r=new n,o=new n,l=new n;g.exports=s},function(g,b,t){"use strict";function h(w,T,E){E=E||2;var S,A,_,C,M,R,L,D=T&&T.length,F=D?T[0]*E:w.length,U=n(w,0,F,E,!0),P=[];if(!U||U.next===U.prev)return P;if(D&&(U=function(B,k,I,N){var Y,X,z,H,j,K,V=[];for(Y=0,X=k.length;Y<X;Y++)(z=n(B,k[Y]*N,Y<X-1?k[Y+1]*N:B.length,N,!1))===z.next&&(z.steiner=!0),V.push(function(H){for(var j=H,K=H;(j.x<K.x||j.x===K.x&&j.y<K.y)&&(K=j),(j=j.next)!==H;);return K}(z));for(V.sort(i),Y=0;Y<V.length;Y++)K=void 0,(j=function(Q,Z){var J,q=Z,tt=Q.x,st=Q.y,ot=-1/0;do{if(st<=q.y&&st>=q.next.y&&q.next.y!==q.y){var et=q.x+(st-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(et<=tt&&ot<et){if((ot=et)===tt){if(st===q.y)return q;if(st===q.next.y)return q.next}J=q.x<q.next.x?q:q.next}}q=q.next}while(q!==Z);if(!J)return null;if(tt===ot)return J;var $,nt,ct,it=J,rt=J.x,ut=J.y,at=1/0;for(q=J;tt>=q.x&&q.x>=rt&&tt!==q.x&&o(st<ut?tt:ot,st,rt,ut,st<ut?ot:tt,st,q.x,q.y)&&($=Math.abs(st-q.y)/(tt-q.x),f(q,Q)&&($<at||$===at&&(q.x>J.x||q.x===J.x&&l((nt=J).prev,nt,(ct=q).prev)<0&&l(ct.next,nt,nt.next)<0))&&(J=q,at=$)),(q=q.next)!==it;);return J}(H=V[Y],j=I))&&(K=p(j,H),s(j,j.next),s(K,K.next)),I=s(I,I.next);return I}(w,T,U,E)),w.length>80*E){S=_=w[0],A=C=w[1];for(var O=E;O<F;O+=E)(M=w[O])<S&&(S=M),(R=w[O+1])<A&&(A=R),_<M&&(_=M),C<R&&(C=R);L=0!==(L=Math.max(_-S,C-A))?1/L:0}return u(U,P,E,S,A,L),P}function n(w,T,E,S,A){var _,C;if(A===0<y(w,T,E,S))for(_=T;_<E;_+=S)C=v(_,w[_],w[_+1],C);else for(_=E-S;T<=_;_-=S)C=v(_,w[_],w[_+1],C);return C&&e(C,C.next)&&(m(C),C=C.next),C}function s(w,T){if(!w)return w;T=T||w;var E,S=w;do{if(E=!1,S.steiner||!e(S,S.next)&&0!==l(S.prev,S,S.next))S=S.next;else{if(m(S),(S=T=S.prev)===S.next)break;E=!0}}while(E||S!==T);return T}function u(w,T,E,S,A,_,C){if(w){!C&&_&&function(D,F,U,P){for(var O=D;null===O.z&&(O.z=r(O.x,O.y,F,U,P)),O.prevZ=O.prev,O.nextZ=O.next,(O=O.next)!==D;);O.prevZ.nextZ=null,O.prevZ=null,function(B){var k,I,N,Y,X,W,G,z,V=1;do{for(I=B,X=B=null,W=0;I;){for(W++,N=I,k=G=0;k<V&&(G++,N=N.nextZ);k++);for(z=V;0<G||0<z&&N;)0!==G&&(0===z||!N||I.z<=N.z)?(I=(Y=I).nextZ,G--):(N=(Y=N).nextZ,z--),X?X.nextZ=Y:B=Y,Y.prevZ=X,X=Y;I=N}X.nextZ=null,V*=2}while(1<W)}(O)}(w,S,A,_);for(var M,R,L=w;w.prev!==w.next;)if(M=w.prev,R=w.next,_?function(D,F,U,P){var O=D.prev,B=D,k=D.next;if(0<=l(O,B,k))return!1;for(var Y=O.x>B.x?O.x>k.x?O.x:k.x:B.x>k.x?B.x:k.x,X=O.y>B.y?O.y>k.y?O.y:k.y:B.y>k.y?B.y:k.y,W=r(O.x<B.x?O.x<k.x?O.x:k.x:B.x<k.x?B.x:k.x,O.y<B.y?O.y<k.y?O.y:k.y:B.y<k.y?B.y:k.y,F,U,P),G=r(Y,X,F,U,P),z=D.prevZ,V=D.nextZ;z&&z.z>=W&&V&&V.z<=G;){if(z!==D.prev&&z!==D.next&&o(O.x,O.y,B.x,B.y,k.x,k.y,z.x,z.y)&&0<=l(z.prev,z,z.next)||(z=z.prevZ,V!==D.prev&&V!==D.next&&o(O.x,O.y,B.x,B.y,k.x,k.y,V.x,V.y)&&0<=l(V.prev,V,V.next)))return!1;V=V.nextZ}for(;z&&z.z>=W;){if(z!==D.prev&&z!==D.next&&o(O.x,O.y,B.x,B.y,k.x,k.y,z.x,z.y)&&0<=l(z.prev,z,z.next))return!1;z=z.prevZ}for(;V&&V.z<=G;){if(V!==D.prev&&V!==D.next&&o(O.x,O.y,B.x,B.y,k.x,k.y,V.x,V.y)&&0<=l(V.prev,V,V.next))return!1;V=V.nextZ}return!0}(w,S,A,_):function(D){var F=D.prev,U=D,P=D.next;if(0<=l(F,U,P))return!1;for(var O=D.next.next;O!==D.prev;){if(o(F.x,F.y,U.x,U.y,P.x,P.y,O.x,O.y)&&0<=l(O.prev,O,O.next))return!1;O=O.next}return!0}(w))T.push(M.i/E),T.push(w.i/E),T.push(R.i/E),m(w),w=R.next,L=R.next;else if((w=R)===L){C?1===C?u(w=function(D,F,U){var P=D;do{var O=P.prev,B=P.next.next;!e(O,B)&&a(O,P,P.next,B)&&f(O,B)&&f(B,O)&&(F.push(O.i/U),F.push(P.i/U),F.push(B.i/U),m(P),m(P.next),P=D=B),P=P.next}while(P!==D);return s(P)}(s(w),T,E),T,E,S,A,_,2):2===C&&function(D,F,U,P,O,B){var Y,X,k=D;do{for(var I=k.next.next;I!==k.prev;){if(k.i!==I.i&&(Y=k).next.i!==(X=I).i&&Y.prev.i!==X.i&&!function(W,G){var z=W;do{if(z.i!==W.i&&z.next.i!==W.i&&z.i!==G.i&&z.next.i!==G.i&&a(z,z.next,W,G))return!0;z=z.next}while(z!==W);return!1}(Y,X)&&(f(Y,X)&&f(X,Y)&&function(W,G){for(var z=W,V=!1,H=(W.x+G.x)/2,j=(W.y+G.y)/2;z.y>j!=z.next.y>j&&z.next.y!==z.y&&H<(z.next.x-z.x)*(j-z.y)/(z.next.y-z.y)+z.x&&(V=!V),(z=z.next)!==W;);return V}(Y,X)&&(l(Y.prev,Y,X.prev)||l(Y,X.prev,X))||e(Y,X)&&0<l(Y.prev,Y,Y.next)&&0<l(X.prev,X,X.next))){var N=p(k,I);return k=s(k,k.next),N=s(N,N.next),u(k,F,U,P,O,B),u(N,F,U,P,O,B)}I=I.next}k=k.next}while(k!==D)}(w,T,E,S,A,_):u(s(w),T,E,S,A,_,1);break}}}function i(w,T){return w.x-T.x}function r(w,T,E,S,A){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-E)*A)|w<<8))|w<<4))|w<<2))|w<<1))|(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T=32767*(T-S)*A)|T<<8))|T<<4))|T<<2))|T<<1))<<1}function o(w,T,E,S,A,_,C,M){return 0<=(A-C)*(T-M)-(w-C)*(_-M)&&0<=(w-C)*(S-M)-(E-C)*(T-M)&&0<=(E-C)*(_-M)-(A-C)*(S-M)}function l(w,T,E){return(T.y-w.y)*(E.x-T.x)-(T.x-w.x)*(E.y-T.y)}function e(w,T){return w.x===T.x&&w.y===T.y}function a(w,T,E,S){var A=d(l(w,T,E)),_=d(l(w,T,S)),C=d(l(E,S,w)),M=d(l(E,S,T));return A!==_&&C!==M||0===A&&c(w,E,T)||0===_&&c(w,S,T)||0===C&&c(E,w,S)||!(0!==M||!c(E,T,S))}function c(w,T,E){return T.x<=Math.max(w.x,E.x)&&T.x>=Math.min(w.x,E.x)&&T.y<=Math.max(w.y,E.y)&&T.y>=Math.min(w.y,E.y)}function d(w){return 0<w?1:w<0?-1:0}function f(w,T){return l(w.prev,w,w.next)<0?0<=l(w,T,w.next)&&0<=l(w,w.prev,T):l(w,T,w.prev)<0||l(w,w.next,T)<0}function p(w,T){var E=new x(w.i,w.x,w.y),S=new x(T.i,T.x,T.y),A=w.next,_=T.prev;return(w.next=T).prev=w,(E.next=A).prev=E,(S.next=E).prev=S,(_.next=S).prev=_,S}function v(w,T,E,S){var A=new x(w,T,E);return S?(A.next=S.next,(A.prev=S).next.prev=A,S.next=A):(A.prev=A).next=A,A}function m(w){w.next.prev=w.prev,w.prev.next=w.next,w.prevZ&&(w.prevZ.nextZ=w.nextZ),w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function x(w,T,E){this.i=w,this.x=T,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(w,T,E,S){for(var A=0,_=T,C=E-S;_<E;_+=S)A+=(w[C]-w[_])*(w[_+1]+w[C+1]),C=_;return A}h.deviation=function(w,T,E,S){var A=T&&T.length,C=Math.abs(y(w,0,A?T[0]*E:w.length,E));if(A)for(var M=0,R=T.length;M<R;M++)C-=Math.abs(y(w,T[M]*E,M<R-1?T[M+1]*E:w.length,E));var F=0;for(M=0;M<S.length;M+=3){var U=S[M]*E,P=S[M+1]*E,O=S[M+2]*E;F+=Math.abs((w[U]-w[O])*(w[1+P]-w[1+U])-(w[U]-w[P])*(w[1+O]-w[1+U]))}return 0===C&&0===F?0:Math.abs((F-C)/C)},h.flatten=function(w){for(var T=w[0][0].length,E={vertices:[],holes:[],dimensions:T},S=0,A=0;A<w.length;A++){for(var _=0;_<w[A].length;_++)for(var C=0;C<T;C++)E.vertices.push(w[A][_][C]);0<A&&E.holes.push(S+=w[A-1].length)}return E},g.exports=h},function(g,b,t){g.exports={COMPLETE:t(983),DECODED:t(984),DECODED_ALL:t(985),DESTROY:t(986),DETUNE:t(987),GLOBAL_DETUNE:t(988),GLOBAL_MUTE:t(989),GLOBAL_RATE:t(990),GLOBAL_VOLUME:t(991),LOOP:t(992),LOOPED:t(993),MUTE:t(994),PAN:t(995),PAUSE_ALL:t(996),PAUSE:t(997),PLAY:t(998),RATE:t(999),RESUME_ALL:t(1e3),RESUME:t(1001),SEEK:t(1002),STOP_ALL:t(1003),STOP:t(1004),UNLOCKED:t(1005),VOLUME:t(1006)}},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function l(e,a,c,d,f){var p,v,x,m="png";r(a)&&(a=i(v=a,"key"),c=i(v,"url"),p=i(v,"normalMap"),d=i(v,"xhrSettings"),m=i(v,"extension",m),f=i(v,"frameConfig")),Array.isArray(c)&&(p=c[1],c=c[0]),s.call(this,e,{type:"image",cache:e.textureManager,extension:m,responseType:"blob",key:a,url:c,xhrSettings:d,config:f}),p&&((x=new l(e,this.key,p,d,f)).type="normalMap",this.setLink(x),e.addFile(x))},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){s.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(l.data),l.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var l,e=this.linkFile;e&&e.state===n.FILE_COMPLETE?(l="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(l),e.pendingDestroy(l)):e||(l=this.cache.addImage(this.key,this.data),this.pendingDestroy(l))}});u.register("image",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){var h={};g.exports=h;var n=t(94),s=t(116),u=t(267),i=t(50),r=t(117),o=t(585);!function(){h._inertiaScale=4,h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,h.create=function(e){var a={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=n.centre(e.vertices):e.hasOwnProperty("vertices")||(a.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=i.extend(a,e);return l(c,e),c.setOnCollideWith=function(d,f){return f?this.onCollideWith[d.id]=f:delete this.onCollideWith[d.id],this},c},h.nextGroup=function(e){return e?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++},h.nextCategory=function(){return h._nextCategory=h._nextCategory<<1,h._nextCategory};var l=function(e,a){a=a||{},h.set(e,{bounds:e.bounds||r.create(e.vertices),positionPrev:e.positionPrev||s.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e});var c,d,f,p,v=e.bounds;n.rotate(e.vertices,e.angle,e.position),o.rotate(e.axes,e.angle),r.update(v,e.vertices,e.velocity),h.set(e,{axes:a.axes||e.axes,area:a.area||e.area,mass:a.mass||e.mass,inertia:a.inertia||e.inertia}),1===e.parts.length&&(d=e.centerOffset,p=v.max.y-v.min.y,(c=e.centerOfMass).x=-(v.min.x-e.position.x)/(f=v.max.x-v.min.x),c.y=-(v.min.y-e.position.y)/p,d.x=f*c.x,d.y=p*c.y)};h.set=function(e,a,c){var d;for(d in"string"==typeof a&&(d=a,(a={})[d]=c),a)if(Object.prototype.hasOwnProperty.call(a,d))switch(c=a[d],d){case"isStatic":h.setStatic(e,c);break;case"isSleeping":u.set(e,c);break;case"mass":h.setMass(e,c);break;case"density":h.setDensity(e,c);break;case"inertia":h.setInertia(e,c);break;case"vertices":h.setVertices(e,c);break;case"position":h.setPosition(e,c);break;case"angle":h.setAngle(e,c);break;case"velocity":h.setVelocity(e,c);break;case"angularVelocity":h.setAngularVelocity(e,c);break;case"parts":h.setParts(e,c);break;case"centre":h.setCentre(e,c);break;default:e[d]=c}},h.setStatic=function(e,a){for(var c=0;c<e.parts.length;c++){var d=e.parts[c];(d.isStatic=a)?(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia},d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null)}},h.setMass=function(e,a){e.inertia=a/6*(e.inertia/(e.mass/6)),e.inverseInertia=1/e.inertia,e.mass=a,e.inverseMass=1/e.mass,e.density=e.mass/e.area},h.setDensity=function(e,a){h.setMass(e,a*e.area),e.density=a},h.setInertia=function(e,a){e.inertia=a,e.inverseInertia=1/e.inertia},h.setVertices=function(e,a){e.vertices=a[0].body===e?a:n.create(a,e),e.axes=o.fromVertices(e.vertices),e.area=n.area(e.vertices),h.setMass(e,e.density*e.area);var c=n.centre(e.vertices);n.translate(e.vertices,c,-1),h.setInertia(e,h._inertiaScale*n.inertia(e.vertices,e.mass)),n.translate(e.vertices,e.position),r.update(e.bounds,e.vertices,e.velocity)},h.setParts=function(e,a,c){for(a=a.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,p=0;p<a.length;p++){var d=a[p];d!==e&&(d.parent=e).parts.push(d)}if(1!==e.parts.length){if(c=void 0===c||c){for(var f=[],p=0;p<a.length;p++)f=f.concat(a[p].vertices);n.clockwiseSort(f);var v=n.hull(f),m=n.centre(v);h.setVertices(e,v),n.translate(e.vertices,m)}var x=h._totalProperties(e),y=x.centre.x,w=x.centre.y,T=e.bounds,E=e.centerOfMass,S=e.centerOffset;r.update(T,e.vertices,e.velocity),E.x=-(T.min.x-y)/(T.max.x-T.min.x),E.y=-(T.min.y-w)/(T.max.y-T.min.y),S.x=y,S.y=w,e.area=x.area,(e.parent=e).position.x=y,e.position.y=w,e.positionPrev.x=y,e.positionPrev.y=w,h.setMass(e,x.mass),h.setInertia(e,x.inertia),h.setPosition(e,x.centre)}},h.setCentre=function(e,a,c){c?(e.positionPrev.x+=a.x,e.positionPrev.y+=a.y,e.position.x+=a.x,e.position.y+=a.y):(e.positionPrev.x=a.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=a.y-(e.position.y-e.positionPrev.y),e.position.x=a.x,e.position.y=a.y)},h.setPosition=function(e,a){var c=s.sub(a,e.position);e.positionPrev.x+=c.x,e.positionPrev.y+=c.y;for(var d=0;d<e.parts.length;d++){var f=e.parts[d];f.position.x+=c.x,f.position.y+=c.y,n.translate(f.vertices,c),r.update(f.bounds,f.vertices,e.velocity)}},h.setAngle=function(e,a){var c=a-e.angle;e.anglePrev+=c;for(var d=0;d<e.parts.length;d++){var f=e.parts[d];f.angle+=c,n.rotate(f.vertices,c,e.position),o.rotate(f.axes,c),r.update(f.bounds,f.vertices,e.velocity),0<d&&s.rotateAbout(f.position,c,e.position,f.position)}},h.setVelocity=function(e,a){e.positionPrev.x=e.position.x-a.x,e.positionPrev.y=e.position.y-a.y,e.velocity.x=a.x,e.velocity.y=a.y,e.speed=s.magnitude(e.velocity)},h.setAngularVelocity=function(e,a){e.anglePrev=e.angle-a,e.angularVelocity=a,e.angularSpeed=Math.abs(e.angularVelocity)},h.translate=function(e,a){h.setPosition(e,s.add(e.position,a))},h.rotate=function(e,a,c){var d,f,p,v;c&&(d=Math.cos(a),f=Math.sin(a),h.setPosition(e,{x:c.x+((p=e.position.x-c.x)*d-(v=e.position.y-c.y)*f),y:c.y+(p*f+v*d)})),h.setAngle(e,e.angle+a)},h.scale=function(e,a,c,d){var f=0,p=0;d=d||e.position;for(var v=0;v<e.parts.length;v++){var m=e.parts[v];m.scale.x=a,m.scale.y=c,n.scale(m.vertices,a,c,d),m.axes=o.fromVertices(m.vertices),m.area=n.area(m.vertices),h.setMass(m,e.density*m.area),n.translate(m.vertices,{x:-m.position.x,y:-m.position.y}),h.setInertia(m,h._inertiaScale*n.inertia(m.vertices,m.mass)),n.translate(m.vertices,{x:m.position.x,y:m.position.y}),0<v&&(f+=m.area,p+=m.inertia),m.position.x=d.x+(m.position.x-d.x)*a,m.position.y=d.y+(m.position.y-d.y)*c,r.update(m.bounds,m.vertices,e.velocity)}1<e.parts.length&&(e.area=f,e.isStatic||(h.setMass(e,e.density*f),h.setInertia(e,p))),e.circleRadius&&(a===c?e.circleRadius*=a:e.circleRadius=null)},h.update=function(e,a,c,d){var f=Math.pow(a*c*e.timeScale,2),p=1-e.frictionAir*c*e.timeScale,m=e.position.y-e.positionPrev.y;e.velocity.x=(e.position.x-e.positionPrev.x)*p*d+e.force.x/e.mass*f,e.velocity.y=m*p*d+e.force.y/e.mass*f,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*p*d+e.torque/e.inertia*f,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=s.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var x=0;x<e.parts.length;x++){var y=e.parts[x];n.translate(y.vertices,e.velocity),0<x&&(y.position.x+=e.velocity.x,y.position.y+=e.velocity.y),0!==e.angularVelocity&&(n.rotate(y.vertices,e.angularVelocity,e.position),o.rotate(y.axes,e.angularVelocity),0<x&&s.rotateAbout(y.position,e.angularVelocity,e.position,y.position)),r.update(y.bounds,y.vertices,e.velocity)}},h.applyForce=function(e,a,c){e.force.x+=c.x,e.force.y+=c.y,e.torque+=(a.x-e.position.x)*c.y-(a.y-e.position.y)*c.x},h._totalProperties=function(e){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=1===e.parts.length?0:1;c<e.parts.length;c++){var d=e.parts[c],f=d.mass!==1/0?d.mass:1;a.mass+=f,a.area+=d.area,a.inertia+=d.inertia,a.centre=s.add(a.centre,s.mult(d.position,f))}return a.centre=s.div(a.centre,a.mass),a}}()},function(g,b){g.exports=function(t,h){h?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(g,b,t){var h=t(162),n=t(0),s=t(11),u=t(15),i=t(1059),r=new n({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,i],initialize:function(o,l,e,a,c){u.call(this,o,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(a,c),this.setPosition(l,e),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,l){this.anims.update(o,l)},play:function(o,l){return this.anims.play(o,l)},playReverse:function(o,l){return this.anims.playReverse(o,l)},playAfterDelay:function(o,l){return this.anims.playAfterDelay(o,l)},playAfterRepeat:function(o,l){return this.anims.playAfterRepeat(o,l)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});g.exports=r},function(g,b){g.exports=function(t,h){if(!(h>=t.length)){for(var n=t.length-1,s=t[h],u=h;u<n;u++)t[u]=t[u+1];return t.length=n,s}}},function(g,b,t){g.exports={ADDED_TO_SCENE:t(641),DESTROY:t(642),REMOVED_FROM_SCENE:t(643),VIDEO_COMPLETE:t(644),VIDEO_CREATED:t(645),VIDEO_ERROR:t(646),VIDEO_LOOP:t(647),VIDEO_PLAY:t(648),VIDEO_SEEKED:t(649),VIDEO_SEEKING:t(650),VIDEO_STOP:t(651),VIDEO_TIMEOUT:t(652),VIDEO_UNLOCKED:t(653)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.floor(t/h),s?(n+t)/h:n+t)}},function(g,b){g.exports=function(t){var h={};for(var n in t)h[n]=Array.isArray(t[n])?t[n].slice(0):t[n];return h}},function(g,b){g.exports=function(t,h,n,s){var u=t.length;if(h<0||u<h||n<=h||u<n||u<h+n){if(s)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(g,b){function t(n,s){return String(n).localeCompare(s)}function h(n,s,u,i){for(var r,o,l,e,a=n.length,c=0,d=2*u,f=0;f<a;f+=d)for(o=(r=f+u)+u,a<r&&(r=a),a<o&&(o=a),l=f,e=r;;)if(l<r&&e<o)s(n[l],n[e])<=0?i[c++]=n[l++]:i[c++]=n[e++];else if(l<r)i[c++]=n[l++];else{if(!(e<o))break;i[c++]=n[e++]}}g.exports=function(n,s){void 0===s&&(s=t);var u=function(i,r){var o=i.length;if(o<=1)return i;for(var l=new Array(o),e=1;e<o;e*=2){h(i,r,e,l);var a=i;i=l,l=a}return i}(n,s);return u!==n&&h(u,null,n.length,n),n}},function(g,b,t){var h=t(132),n=t(202);g.exports=function(s,u){var i,r=h.Power0;if("string"==typeof s?h.hasOwnProperty(s)?r=h[s]:(i="",s.indexOf(".")&&("in"===(i=s.substr(s.indexOf(".")+1)).toLowerCase()?i="easeIn":"out"===i.toLowerCase()?i="easeOut":"inout"===i.toLowerCase()&&(i="easeInOut")),s=n(s.substr(0,s.indexOf(".")+1)+i),h.hasOwnProperty(s)&&(r=h[s])):"function"==typeof s?r=s:Array.isArray(s),!u)return r;var o=u.slice(0);return o.unshift(0),function(l){return o[0]=l,r.apply(this,o)}}},function(g,b,t){var h=t(12);g.exports=function(n,s,u,i,r){var o=n.strokeTint,l=h.getTintAppendFloatAlpha(s.strokeColor,s.strokeAlpha*u);o.TL=l,o.TR=l,o.BL=l,o.BR=l;var e=s.pathData,a=e.length-1,c=s.lineWidth,d=c/2,f=e[0]-i,p=e[1]-r;s.closePath||(a-=2);for(var v=2;v<a;v+=2){var m=e[v]-i,x=e[v+1]-r;n.batchLine(f,p,m,x,d,d,c,v-2,!!s.closePath&&v===a-1),f=m,p=x}}},function(g,b,t){var h=t(0),n=t(112),s=t(470),u=t(471),i=t(55),r=t(45),o=t(178),l=new h({initialize:function(e,a,c,d,f,p){void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),this.type=i.TRIANGLE,this.x1=e,this.y1=a,this.x2=c,this.y2=d,this.x3=f,this.y3=p},contains:function(e,a){return n(this,e,a)},getPoint:function(e,a){return s(this,e,a)},getPoints:function(e,a,c){return u(this,e,a,c)},getRandomPoint:function(e){return o(this,e)},setTo:function(e,a,c,d,f,p){return void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),this.x1=e,this.y1=a,this.x2=c,this.y2=d,this.x3=f,this.y3=p,this},getLineA:function(e){return void 0===e&&(e=new r),e.setTo(this.x1,this.y1,this.x2,this.y2),e},getLineB:function(e){return void 0===e&&(e=new r),e.setTo(this.x2,this.y2,this.x3,this.y3),e},getLineC:function(e){return void 0===e&&(e=new r),e.setTo(this.x3,this.y3,this.x1,this.y1),e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var a;this.x1-=a=this.x1<=this.x2&&this.x1<=this.x3?this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?this.x2-e:this.x3-e,this.x2-=a,this.x3-=a}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var a;this.x1-=a=this.x1>=this.x2&&this.x1>=this.x3?this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?this.x2-e:this.x3-e,this.x2-=a,this.x3-=a}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var a;this.y1-=a=this.y1<=this.y2&&this.y1<=this.y3?this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?this.y2-e:this.y3-e,this.y2-=a,this.y3-=a}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var a;this.y1-=a=this.y1>=this.y2&&this.y1>=this.y3?this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?this.y2-e:this.y3-e,this.y2-=a,this.y3-=a}}});g.exports=l},function(g,b,t){var h=t(29),n=t(0),s=t(11),u=t(496),i=new n({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(r,o,l,e,a,c,d,f){this.layer=r,this.index=o,this.x=l,this.y=e,this.width=a,this.height=c,this.baseWidth=void 0!==d?d:a,this.baseHeight=void 0!==f?f:c,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,(this.collisionCallbackContext=this).tint=16777215,this.physics={}},containsPoint:function(r,o){return!(r<this.pixelX||o<this.pixelY||r>this.right||o>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var o=this.tilemapLayer;return o?o.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var o=this.tilemapLayer;return o?this.getLeft(r)+this.width*o.scaleX:this.getLeft(r)+this.width},getTop:function(r){var o=this.tilemapLayer;return o?o.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*o.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var o=this.tilemapLayer;return o?this.getTop(r)+this.height*o.scaleY:this.getTop(r)+this.height},getBounds:function(r,o){return void 0===o&&(o=new u),o.x=this.getLeft(),o.y=this.getTop(),o.width=this.getRight()-o.x,o.height=this.getBottom()-o.y,o},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,o,l,e){return!(l<=this.pixelX||e<=this.pixelY||r>=this.right||o>=this.bottom)},isInteresting:function(r,o){return r&&o?this.canCollide||this.hasInterestingFace:r?this.collides:!!o&&this.hasInterestingFace},resetCollision:function(r){return void 0===r&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,o,l,e,a){return void 0===o&&(o=r),void 0===l&&(l=r),void 0===e&&(e=r),void 0===a&&(a=!0),this.collideLeft=r,this.collideRight=o,this.collideUp=l,this.collideDown=e,this.faceLeft=r,this.faceRight=o,this.faceTop=l,this.faceBottom=e,a&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(r,o){return null===r?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=o),this},setSize:function(r,o,l,e){return void 0!==r&&(this.width=r),void 0!==o&&(this.height=o),void 0!==l&&(this.baseWidth=l),void 0!==e&&(this.baseHeight=e),this.updatePixelXY(),this},updatePixelXY:function(){var r,o,l=this.layer.orientation;return l===h.ORTHOGONAL?(this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight):l===h.ISOMETRIC?(this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5):l===h.STAGGERED?(this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2)):l===h.HEXAGONAL&&(o=(this.baseHeight-(r=this.layer.hexSideLength))/2+r,this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*o),this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var o=r.gidMap[this.index];if(o)return o}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});g.exports=i},function(g,b){g.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(g,b){g.exports=function(t,h){return t.x=h+t.width*t.originX-.5*t.width,t}},function(g,b){g.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(g,b){g.exports=function(t,h){return t.y=h+t.height*t.originY-.5*t.height,t}},function(g,b,t){g.exports={POST_RENDER:t(626),PRE_RENDER:t(627),RENDER:t(628),RESIZE:t(629)}},function(g,b,t){var h=t(74);g.exports=function(n,s,u,i){if(void 0===i&&(i=n),!Array.isArray(s))return-1!==(l=n.indexOf(s))?(h(n,l),u&&u.call(i,s),s):null;for(var r=s.length-1,o=[];0<=r;){var l,e=s[r];-1!==(l=n.indexOf(e))&&(h(n,l),o.push(e),u&&u.call(i,e)),r--}return o}},function(g,b,t){var h=t(0),n=t(196),s=t(10),u=t(3),i=new h({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(r,o){return void 0===o&&(o=32),r.strokePoints(this.getPoints(o))},getBounds:function(r,o){r=r||new s,void 0===o&&(o=16);var l=this.getLength();l<o&&(o=l/2);var e=Math.max(1,Math.round(l/o));return n(this.getSpacedPoints(e),r)},getDistancePoints:function(r){var o=this.getLength(),l=Math.max(1,o/r);return this.getSpacedPoints(l)},getEndPoint:function(r){return void 0===r&&(r=new u),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(void 0===r&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o,l=[],e=this.getPoint(0,this._tmpVec2A),a=0;l.push(0);for(var c=1;c<=r;c++)a+=(o=this.getPoint(c/r,this._tmpVec2B)).distance(e),l.push(a),e.copy(o);return this.cacheArcLengths=l},getPointAt:function(r,o){var l=this.getUtoTmapping(r);return this.getPoint(l,o)},getPoints:function(r,o,l){void 0===l&&(l=[]),r=r||(o?this.getLength()/o:this.defaultDivisions);for(var e=0;e<=r;e++)l.push(this.getPoint(e/r));return l},getRandomPoint:function(r){return void 0===r&&(r=new u),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,o,l){void 0===l&&(l=[]),r=r||(o?this.getLength()/o:this.defaultDivisions);for(var e=0;e<=r;e++){var a=this.getUtoTmapping(e/r,null,r);l.push(this.getPoint(a))}return l},getStartPoint:function(r){return void 0===r&&(r=new u),this.getPointAt(0,r)},getTangent:function(r,o){void 0===o&&(o=new u);var l=r-1e-4,e=r+1e-4;return l<0&&(l=0),1<e&&(e=1),this.getPoint(l,this._tmpVec2A),this.getPoint(e,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,o){var l=this.getUtoTmapping(r);return this.getTangent(l,o)},getTFromDistance:function(r,o){return r<=0?0:this.getUtoTmapping(0,r,o)},getUtoTmapping:function(r,o,l){for(var e,a=this.getLengths(l),c=0,d=a.length,f=o?Math.min(o,a[d-1]):r*a[d-1],p=0,v=d-1;p<=v;)if((e=a[c=Math.floor(p+(v-p)/2)]-f)<0)p=c+1;else{if(!(0<e)){v=c;break}v=c-1}if(a[c=v]===f)return c/(d-1);var m=a[c];return(c+(f-m)/(a[c+1]-m))/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});g.exports=i},function(g,b,t){g.exports={ADD:t(964),COMPLETE:t(965),FILE_COMPLETE:t(966),FILE_KEY_COMPLETE:t(967),FILE_LOAD_ERROR:t(968),FILE_LOAD:t(969),FILE_PROGRESS:t(970),POST_PROCESS:t(971),PROGRESS:t(972),START:t(973)}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){void 0===u&&(u=new h);var i=n.x1,r=n.y1,o=n.x2,l=n.y2,e=s.x1,a=s.y1,c=s.x2,d=s.y2,f=(d-a)*(o-i)-(c-e)*(l-r);if(0==f)return!1;var p=((c-e)*(r-a)-(d-a)*(i-e))/f,v=((o-i)*(r-a)-(l-r)*(i-e))/f;return 0<=p&&p<=1&&0<=v&&v<=1&&(u.x=i+p*(o-i),u.y=r+p*(l-r),!0)}},function(g,b){g.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(g,b,t){var h={};g.exports=h;var n=t(116),s=t(50);h.create=function(u,i){for(var r=[],o=0;o<u.length;o++){var l=u[o],e={x:l.x,y:l.y,index:o,body:i,isInternal:!1,contact:null,offset:null};e.contact={vertex:e,normalImpulse:0,tangentImpulse:0},r.push(e)}return r},h.fromPath=function(u,i){var r=[];return u.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(o,l,e){r.push({x:parseFloat(l),y:parseFloat(e)})}),h.create(r,i)},h.centre=function(u){for(var i,r,o,l=h.area(u,!0),e={x:0,y:0},a=0;a<u.length;a++)i=n.cross(u[a],u[o=(a+1)%u.length]),r=n.mult(n.add(u[a],u[o]),i),e=n.add(e,r);return n.div(e,6*l)},h.mean=function(u){for(var i={x:0,y:0},r=0;r<u.length;r++)i.x+=u[r].x,i.y+=u[r].y;return n.div(i,u.length)},h.area=function(u,i){for(var r=0,o=u.length-1,l=0;l<u.length;l++)r+=(u[o].x-u[l].x)*(u[o].y+u[l].y),o=l;return i?r/2:Math.abs(r)/2},h.inertia=function(u,i){for(var r,o,l=0,e=0,a=u,c=0;c<a.length;c++)o=(c+1)%a.length,l+=(r=Math.abs(n.cross(a[o],a[c])))*(n.dot(a[o],a[o])+n.dot(a[o],a[c])+n.dot(a[c],a[c])),e+=r;return i/6*(l/e)},h.translate=function(u,i,r){var o;if(r)for(o=0;o<u.length;o++)u[o].x+=i.x*r,u[o].y+=i.y*r;else for(o=0;o<u.length;o++)u[o].x+=i.x,u[o].y+=i.y;return u},h.rotate=function(u,i,r){if(0!==i){for(var o=Math.cos(i),l=Math.sin(i),e=0;e<u.length;e++){var a=u[e],c=a.x-r.x,d=a.y-r.y;a.x=r.x+(c*o-d*l),a.y=r.y+(c*l+d*o)}return u}},h.contains=function(u,i){for(var r=0;r<u.length;r++){var o=u[r],l=u[(r+1)%u.length];if(0<(i.x-o.x)*(l.y-o.y)+(i.y-o.y)*(o.x-l.x))return!1}return!0},h.scale=function(u,i,r,o){if(1===i&&1===r)return u;var e;o=o||h.centre(u);for(var a=0;a<u.length;a++)e=n.sub(u[a],o),u[a].x=o.x+e.x*i,u[a].y=o.y+e.y*r;return u},h.chamfer=function(u,i,r,o,l){i="number"==typeof i?[i]:i||[8],r=void 0!==r?r:-1,o=o||2,l=l||14;for(var e=[],a=0;a<u.length;a++){var c=u[0<=a-1?a-1:u.length-1],d=u[a],f=u[(a+1)%u.length],p=i[a<i.length?a:i.length-1];if(0!==p){var v=n.normalise({x:d.y-c.y,y:c.x-d.x}),m=n.normalise({x:f.y-d.y,y:d.x-f.x}),x=Math.sqrt(2*Math.pow(p,2)),y=n.mult(s.clone(v),p),w=n.normalise(n.mult(n.add(v,m),.5)),T=n.sub(d,n.mult(w,x)),E=r;-1===r&&(E=1.75*Math.pow(p,.32)),(E=s.clamp(E,o,l))%2==1&&(E+=1);for(var S=Math.acos(n.dot(v,m))/E,A=0;A<E;A++)e.push(n.add(n.rotate(y,S*A),T))}else e.push(d)}return e},h.clockwiseSort=function(u){var i=h.mean(u);return u.sort(function(r,o){return n.angle(i,r)-n.angle(i,o)}),u},h.isConvex=function(u){var i,r,o,l,e=0,a=u.length;if(a<3)return null;for(i=0;i<a;i++)if(l=(u[r=(i+1)%a].x-u[i].x)*(u[o=(i+2)%a].y-u[r].y),(l-=(u[r].y-u[i].y)*(u[o].x-u[r].x))<0?e|=1:0<l&&(e|=2),3===e)return!1;return 0!==e||null},h.hull=function(u){var i,r,o=[],l=[];for((u=u.slice(0)).sort(function(e,a){var c=e.x-a.x;return 0!=c?c:e.y-a.y}),r=0;r<u.length;r+=1){for(i=u[r];2<=l.length&&n.cross3(l[l.length-2],l[l.length-1],i)<=0;)l.pop();l.push(i)}for(r=u.length-1;0<=r;--r){for(i=u[r];2<=o.length&&n.cross3(o[o.length-2],o[o.length-1],i)<=0;)o.pop();o.push(i)}return o.pop(),l.pop(),o.concat(l)}},function(g,b,t){var h=t(18);g.exports=function(n,s,u){return(u-s)*h(n,0,1)}},function(g,b){g.exports=function(t,h,n){return t&&t.hasOwnProperty(h)?t[h]:n}},function(g,b){g.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(g,b,t){var h=t(0),n=t(309),s=new h({initialize:function(u,i){this.parent=u,(this.events=i)||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(u){var i=this.list;if(Array.isArray(u)){for(var r=[],o=0;o<u.length;o++)r.push(i[u[o]]);return r}return i[u]},getAll:function(){var u={};for(var i in this.list)this.list.hasOwnProperty(i)&&(u[i]=this.list[i]);return u},query:function(u){var i={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(u)&&(i[r]=this.list[r]);return i},set:function(u,i){if(this._frozen)return this;if("string"==typeof u)return this.setValue(u,i);for(var r in u)this.setValue(r,u[r]);return this},inc:function(u,i){if(this._frozen)return this;void 0===i&&(i=1);var r=this.get(u);return void 0===r&&(r=0),this.set(u,r+i),this},toggle:function(u){return this._frozen||this.set(u,!this.get(u)),this},setValue:function(u,i){return this._frozen||(this.has(u)?this.values[u]=i:(o=(r=this).list,l=this.events,e=this.parent,Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return o[u]},set:function(a){var c;r._frozen||(c=o[u],o[u]=a,l.emit(n.CHANGE_DATA,e,u,a,c),l.emit(n.CHANGE_DATA_KEY+u,e,a,c))}}),o[u]=i,l.emit(n.SET_DATA,e,u,i))),this;var r,o,l,e},each:function(u,i){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var l in this.list)r[1]=l,r[2]=this.list[l],u.apply(i,r);return this},merge:function(u,i){for(var r in void 0===i&&(i=!0),u)u.hasOwnProperty(r)&&(i||!i&&!this.has(r))&&this.setValue(r,u[r]);return this},remove:function(u){if(this._frozen)return this;if(!Array.isArray(u))return this.removeValue(u);for(var i=0;i<u.length;i++)this.removeValue(u[i]);return this},removeValue:function(u){var i;return this.has(u)&&(i=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(n.REMOVE_DATA,this.parent,u,i)),this},pop:function(u){var i=void 0;return!this._frozen&&this.has(u)&&(i=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(n.REMOVE_DATA,this.parent,u,i)),i},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var i in this.list)void 0!==this.list[i]&&u++;return u}}});g.exports=s},function(g,b,t){var h=new(t(0))({initialize:function(n){if(this.entries={},this.size=0,Array.isArray(n))for(var s=0;s<n.length;s++)this.set(n[s][0],n[s][1])},set:function(n,s){return this.has(n)||this.size++,this.entries[n]=s,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],s=this.entries;for(var u in s)n.push(s[u]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],s=this.entries;for(var u in s)n.push(s[u]);return n},dump:function(){var n=this.entries;for(var s in console.group("Map"),n)console.log(s,n[s]);console.groupEnd()},each:function(n){var s=this.entries;for(var u in s)if(!1===n(u,s[u]))break;return this},contains:function(n){var s=this.entries;for(var u in s)if(s[u]===n)return!0;return!1},merge:function(n,s){void 0===s&&(s=!1);var u=this.entries,i=n.entries;for(var r in i)u.hasOwnProperty(r)&&s?u[r]=i[r]:this.set(r,i[r]);return this}});g.exports=h},function(g,b){g.exports=function(t,h,n){return t<<16|h<<8|n}},function(g,b,t){g.exports={ENTER_FULLSCREEN:t(776),FULLSCREEN_FAILED:t(777),FULLSCREEN_UNSUPPORTED:t(778),LEAVE_FULLSCREEN:t(779),ORIENTATION_CHANGE:t(780),RESIZE:t(781)}},function(g,b,t){(function(h){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};g.exports=function(){var s=navigator.userAgent;/Windows/.test(s)?n.windows=!0:/Mac OS/.test(s)&&!/like Mac OS/.test(s)?navigator.maxTouchPoints&&2<navigator.maxTouchPoints?(n.iOS=!0,n.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):n.macOS=!0:/Android/.test(s)?n.android=!0:/Linux/.test(s)?n.linux=!0:/iP[ao]d|iPhone/i.test(s)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==s.toLowerCase().indexOf("iphone"),n.iPad=-1!==s.toLowerCase().indexOf("ipad")):/Kindle/.test(s)||/\bKF[A-Z][A-Z]+/.test(s)||/Silk.*Mobile Safari/.test(s)?n.kindle=!0:/CrOS/.test(s)&&(n.chromeOS=!0),(/Windows Phone/i.test(s)||/IEMobile/i.test(s))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var u=/Silk/.test(s);return(n.windows||n.macOS||n.linux&&!u||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(s)&&/Touch/i.test(s))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),void 0!==window.cordova&&(n.cordova=!0),void 0!==h&&h.versions&&h.versions.node&&(n.node=!0),n.node&&"object"==typeof h.versions&&(n.nodeWebkit=!!h.versions["node-webkit"],n.electron=!!h.versions.electron),void 0!==window.ejecta&&(n.ejecta=!0),/Crosswalk/.test(s)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,t(804))},function(g,b,t){g.exports={ADD:t(857),ERROR:t(858),LOAD:t(859),READY:t(860),REMOVE:t(861)}},function(g,b){g.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(g,b,t){var h=t(0),n=t(2),s=t(874),u=t(875),i=t(25),r=t(12),o=t(104),l=t(57),e=new h({Extends:l,initialize:function(a){var c=a.game.renderer,d=n(a,"fragShader",s);a.fragShader=r.parseFragmentShaderMaxTextures(d,c.maxTextures),a.vertShader=n(a,"vertShader",u),a.attributes=n(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),l.call(this,a),this._tempMatrix1=new i,this._tempMatrix2=new i,this._tempMatrix3=new i},boot:function(){l.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(a,c,d){this.manager.set(this,a);var f,p=this._tempMatrix1,v=this._tempMatrix2,m=this._tempMatrix3,x=a.frame,y=x.glTexture,w=x.u0,T=x.v0,E=x.u1,S=x.v1,C=x.cutWidth,M=x.cutHeight,R=x.customPivot,L=a.displayOriginX,D=a.displayOriginY,F=-L+x.x,U=-D+x.y;a.isCropped&&((f=a._crop).flipX===a.flipX&&f.flipY===a.flipY||x.updateCropUVs(f,a.flipX,a.flipY),w=f.u0,T=f.v0,E=f.u1,S=f.v1,C=f.width,M=f.height,F=-L+f.x,U=-D+f.y);var P=1,O=1;a.flipX&&(R||(F+=2*L-x.realWidth),P=-1),(a.flipY||x.source.isGLTexture&&!y.flipY)&&(R||(U+=2*D-x.realHeight),O=-1),v.applyITRS(a.x,a.y,a.rotation,a.scaleX*P,a.scaleY*O),p.copyFrom(c.matrix),d?(p.multiplyWithOffset(d,-c.scrollX*a.scrollFactorX,-c.scrollY*a.scrollFactorY),v.e=a.x,v.f=a.y):(v.e-=c.scrollX*a.scrollFactorX,v.f-=c.scrollY*a.scrollFactorY),p.multiply(v,m);var B=F+C,k=U+M,I=c.roundPixels,N=m.getXRound(F,U,I),Y=m.getYRound(F,U,I),X=m.getXRound(F,k,I),W=m.getYRound(F,k,I),G=m.getXRound(B,k,I),z=m.getYRound(B,k,I),V=m.getXRound(B,U,I),H=m.getYRound(B,U,I),j=r.getTintAppendFloatAlpha,K=c.alpha,Q=j(a.tintTopLeft,K*a._alphaTL),Z=j(a.tintTopRight,K*a._alphaTR),J=j(a.tintBottomLeft,K*a._alphaBL),q=j(a.tintBottomRight,K*a._alphaBR);this.shouldFlush(6)&&this.flush();var tt=this.setGameObject(a,x);this.manager.preBatch(a),this.batchQuad(a,N,Y,X,W,G,z,V,H,w,T,E,S,Q,Z,J,q,a.tintFill,y,tt),this.manager.postBatch(a)},batchTexture:function(a,c,d,f,p,v,m,x,y,w,T,E,S,A,_,C,M,R,L,D,F,U,P,O,B,k,I,N,Y,X,W,G){this.manager.set(this,a);var z,V,H,j,K,Q=this._tempMatrix1,Z=this._tempMatrix2,J=this._tempMatrix3,q=R/d+I,tt=L/f+N,st=(R+D)/d+I,ot=(L+F)/f+N,et=m,$=x,it=-C,rt=-M;a.isCropped&&(m=et=V=(z=a._crop).width,x=$=H=z.height,j=R=z.x,K=L=z.y,E&&(j=D-z.x-V),S&&(K=F-z.y-H),q=j/d+I,tt=K/f+N,st=(j+V)/d+I,ot=(K+H)/f+N,it=-C+R,rt=-M+L),E&&(et*=-1,it+=m),(S^=!W&&c.isRenderTexture?1:0)&&($*=-1,rt+=x);var ut=it+et,at=rt+$;Z.applyITRS(p,v,T,y,w),Q.copyFrom(Y.matrix),X?(Q.multiplyWithOffset(X,-Y.scrollX*A,-Y.scrollY*_),Z.e=p,Z.f=v):(Z.e-=Y.scrollX*A,Z.f-=Y.scrollY*_),Q.multiply(Z,J);var nt=Y.roundPixels,ct=J.getXRound(it,rt,nt),dt=J.getYRound(it,rt,nt),ht=J.getXRound(it,at,nt),ft=J.getYRound(it,at,nt),vt=J.getXRound(ut,at,nt),mt=J.getYRound(ut,at,nt),yt=J.getXRound(ut,rt,nt),xt=J.getYRound(ut,rt,nt);void 0===G&&(G=this.renderer.setTexture2D(c)),a&&this.manager.preBatch(a),this.batchQuad(a,ct,dt,ht,ft,vt,mt,yt,xt,q,tt,st,ot,U,P,O,B,k,c,G),a&&this.manager.postBatch(a)},batchTextureFrame:function(a,c,d,f,p,v,m){this.manager.set(this);var x=this._tempMatrix1.copyFrom(v),y=this._tempMatrix2,w=c+a.width,T=d+a.height;m?x.multiply(m,y):y=x;var E=y.getX(c,d),S=y.getY(c,d),A=y.getX(c,T),_=y.getY(c,T),C=y.getX(w,T),M=y.getY(w,T),R=y.getX(w,d),L=y.getY(w,d),D=this.renderer.setTextureSource(a.source);f=r.getTintAppendFloatAlpha(f,p),this.batchQuad(null,E,S,A,_,C,M,R,L,a.u0,a.v0,a.u1,a.v1,f,f,f,f,0,a.glTexture,D)}});g.exports=e},function(g,b,t){var h=t(0),n=t(18),s=t(17),u=new h({initialize:function(i,r,o,l,e,a,c){this.texture=i,this.name=r,this.source=i.source[o],this.sourceIndex=o,this.glTexture=this.source.glTexture,this.x=0,this.y=0,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,c,l,e)},setSize:function(i,r,o,l){void 0===o&&(o=0),void 0===l&&(l=0),this.cutX=o,this.cutY=l,this.cutWidth=i,this.cutHeight=r,this.width=i,this.height=r,this.halfWidth=Math.floor(.5*i),this.halfHeight=Math.floor(.5*r),this.centerX=Math.floor(i/2),this.centerY=Math.floor(r/2);var e=this.data,a=e.cut;a.x=o,a.y=l,a.w=i,a.h=r,a.r=o+i,a.b=l+r,e.sourceSize.w=i,e.sourceSize.h=r,e.spriteSourceSize.w=i,e.spriteSourceSize.h=r,e.radius=.5*Math.sqrt(i*i+r*r);var c=e.drawImage;return c.x=o,c.y=l,c.width=i,c.height=r,this.updateUVs()},setTrim:function(i,r,o,l,e,a){var c=this.data,d=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=i,c.sourceSize.h=r,d.x=o,d.y=l,d.w=e,d.h=a,d.r=o+e,d.b=l+a,this.x=o,this.y=l,this.width=e,this.height=a,this.halfWidth=.5*e,this.halfHeight=.5*a,this.centerX=Math.floor(e/2),this.centerY=Math.floor(a/2),this.updateUVs()},setCropUVs:function(i,r,o,l,e,a,c){var d,f,p,v,m,x,y,w=this.cutX,T=this.cutY,E=this.cutWidth,S=this.cutHeight,A=this.realWidth,_=this.realHeight,C=w+(r=n(r,0,A)),M=T+(o=n(o,0,_)),R=l=n(l,0,A-r),L=e=n(e,0,_-o),D=this.data;D.trim?(d=D.spriteSourceSize,f=r+(l=n(l,0,E-r)),p=o+(e=n(e,0,S-o)),d.r<r||d.b<o||d.x>f||d.y>p?L=R=M=C=0:(v=Math.max(d.x,r),m=Math.max(d.y,o),R=x=Math.min(d.r,f)-v,L=y=Math.min(d.b,p)-m,C=a?w+(E-(v-d.x)-x):w+(v-d.x),M=c?T+(S-(m-d.y)-y):T+(m-d.y),r=v,o=m,l=x,e=y)):(a&&(C=w+(E-r-l)),c&&(M=T+(S-o-e)));var F=this.source.width,U=this.source.height;return i.u0=Math.max(0,C/F),i.v0=Math.max(0,M/U),i.u1=Math.min(1,(C+R)/F),i.v1=Math.min(1,(M+L)/U),i.x=r,i.y=o,i.cx=C,i.cy=M,i.cw=R,i.ch=L,i.width=l,i.height=e,i.flipX=a,i.flipY=c,i},updateCropUVs:function(i,r,o){return this.setCropUVs(i,i.x,i.y,i.width,i.height,r,o)},setUVs:function(i,r,o,l,e,a){var c=this.data.drawImage;return c.width=i,c.height=r,this.u0=o,this.v0=l,this.u1=e,this.v1=a,this},updateUVs:function(){var i=this.cutX,r=this.cutY,o=this.cutWidth,l=this.cutHeight,e=this.data.drawImage;e.width=o,e.height=l;var a=this.source.width,c=this.source.height;return this.u0=i/a,this.v0=r/c,this.u1=(i+o)/a,this.v1=(r+l)/c,this},updateUVsInverted:function(){var i=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/i,this.v0=this.cutY/r,this.u1=this.cutX/i,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var i=new u(this.texture,this.name,this.sourceIndex);return i.cutX=this.cutX,i.cutY=this.cutY,i.cutWidth=this.cutWidth,i.cutHeight=this.cutHeight,i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i.halfWidth=this.halfWidth,i.halfHeight=this.halfHeight,i.centerX=this.centerX,i.centerY=this.centerY,i.rotated=this.rotated,i.data=s(!0,i.data,this.data),i.updateUVs(),i},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});g.exports=u},function(g,b,t){var h=t(205),n=t(0),s=t(1),u=t(79),i=new n({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(r,o){return o?h.Add(this.list,r):h.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,o,l){return l?h.AddAt(this.list,r,o):h.AddAt(this.list,r,o,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,o){return r&&(void 0===o&&(o=function(l,e){return l[r]-e[r]}),u(this.list,o)),this},getByName:function(r){return h.GetFirst(this.list,"name",r)},getRandom:function(r,o){return h.GetRandom(this.list,r,o)},getFirst:function(r,o,l,e){return h.GetFirst(this.list,r,o,l,e)},getAll:function(r,o,l,e){return h.GetAll(this.list,r,o,l,e)},count:function(r,o){return h.CountAllMatching(this.list,r,o)},swap:function(r,o){h.Swap(this.list,r,o)},moveTo:function(r,o){return h.MoveTo(this.list,r,o)},remove:function(r,o){return o?h.Remove(this.list,r):h.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,o){return o?h.RemoveAt(this.list,r):h.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,o,l){return l?h.RemoveBetween(this.list,r,o):h.RemoveBetween(this.list,r,o,this.removeCallback,this)},removeAll:function(r){for(var o=this.list.length;o--;)this.remove(this.list[o],r);return this},bringToTop:function(r){return h.BringToTop(this.list,r)},sendToBack:function(r){return h.SendToBack(this.list,r)},moveUp:function(r){return h.MoveUp(this.list,r),r},moveDown:function(r){return h.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(r,o){return h.Replace(this.list,r,o)},exists:function(r){return-1<this.list.indexOf(r)},setAll:function(r,o,l,e){return h.SetAll(this.list,r,o,l,e),this},each:function(r,o){for(var l=[null],e=2;e<arguments.length;e++)l.push(arguments[e]);for(e=0;e<this.list.length;e++)l[0]=this.list[e],r.apply(o,l)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});g.exports=i},function(g,b,t){var h=t(0),n=t(109),s=t(439),u=t(440),i=t(55),r=t(177),o=new h({initialize:function(l,e,a,c){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=0),this.type=i.ELLIPSE,this.x=l,this.y=e,this.width=a,this.height=c},contains:function(l,e){return n(this,l,e)},getPoint:function(l,e){return s(this,l,e)},getPoints:function(l,e,a){return u(this,l,e,a)},getRandomPoint:function(l){return r(this,l)},setTo:function(l,e,a,c){return this.x=l,this.y=e,this.width=a,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(l,e){return void 0===e&&(e=l),this.x=l,this.y=e,this},setSize:function(l,e){return void 0===e&&(e=l),this.width=l,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(l){this.x=l+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(l){this.y=l+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});g.exports=o},function(g,b){g.exports=function(t,h,n){if(t.width<=0||t.height<=0)return!1;var s=(h-t.x)/t.width,u=(n-t.y)/t.height;return(s*=s)+(u*=u)<.25}},function(g,b,t){var h=t(269),n=t(0),s=t(75),u=t(9),i=t(204),r=t(2),o=t(6),l=t(7),e=t(431),a=t(148),c=t(73),d=new n({Extends:u,initialize:function(f,p,v){u.call(this),v?p&&!Array.isArray(p)&&(p=[p]):Array.isArray(p)?l(p[0])&&(v=p,p=null):l(p)&&(v=p,p=null),this.scene=f,this.children=new a,this.isParent=!0,this.type="Group",this.classType=r(v,"classType",c),this.name=r(v,"name",""),this.active=r(v,"active",!0),this.maxSize=r(v,"maxSize",-1),this.defaultKey=r(v,"defaultKey",null),this.defaultFrame=r(v,"defaultFrame",null),this.runChildUpdate=r(v,"runChildUpdate",!1),this.createCallback=r(v,"createCallback",null),this.removeCallback=r(v,"removeCallback",null),this.createMultipleCallback=r(v,"createMultipleCallback",null),this.internalCreateCallback=r(v,"internalCreateCallback",null),this.internalRemoveCallback=r(v,"internalRemoveCallback",null),p&&this.addMultiple(p),v&&this.createMultiple(v)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(f,p,v,m,x,y){if(void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=this.defaultKey),void 0===m&&(m=this.defaultFrame),void 0===x&&(x=!0),void 0===y&&(y=!0),this.isFull())return null;var w=new this.classType(this.scene,f,p,v,m);return this.scene.sys.displayList.add(w),w.preUpdate&&this.scene.sys.updateList.add(w),w.visible=x,w.setActive(y),this.add(w),w},createMultiple:function(f){if(this.isFull())return[];Array.isArray(f)||(f=[f]);var p=[];if(f[0].key)for(var v=0;v<f.length;v++){var m=this.createFromConfig(f[v]);p=p.concat(m)}return p},createFromConfig:function(f){if(this.isFull())return[];this.classType=r(f,"classType",this.classType);var p=r(f,"key",void 0),v=r(f,"frame",null),m=r(f,"visible",!0),x=r(f,"active",!0),y=[];if(void 0===p)return y;Array.isArray(p)||(p=[p]),Array.isArray(v)||(v=[v]);var w=r(f,"repeat",0),T=r(f,"randomKey",!1),E=r(f,"randomFrame",!1),S=r(f,"yoyo",!1),A=r(f,"quantity",!1),_=r(f,"frameQuantity",1),C=r(f,"max",0),M=e(p,v,{max:C,qty:A||_,random:T,randomB:E,repeat:w,yoyo:S});f.createCallback&&(this.createCallback=f.createCallback),f.removeCallback&&(this.removeCallback=f.removeCallback);for(var R=0;R<M.length;R++){var L=this.create(0,0,M[R].a,M[R].b,m,x);if(!L)break;y.push(L)}var D=o(f,"setXY.x",0),F=o(f,"setXY.y",0),U=o(f,"setXY.stepX",0),P=o(f,"setXY.stepY",0);h.SetXY(y,D,F,U,P);var O=o(f,"setRotation.value",0),B=o(f,"setRotation.step",0);h.SetRotation(y,O,B);var k=o(f,"setScale.x",1),I=o(f,"setScale.y",k),N=o(f,"setScale.stepX",0),Y=o(f,"setScale.stepY",0);h.SetScale(y,k,I,N,Y);var X=o(f,"setOrigin.x",.5),W=o(f,"setOrigin.y",X),G=o(f,"setOrigin.stepX",0),z=o(f,"setOrigin.stepY",0);h.SetOrigin(y,X,W,G,z);var V=o(f,"setAlpha.value",1),H=o(f,"setAlpha.step",0);h.SetAlpha(y,V,H);var j=o(f,"setDepth.value",0),K=o(f,"setDepth.step",0);h.SetDepth(y,j,K);var Q=o(f,"setScrollFactor.x",1),Z=o(f,"setScrollFactor.y",Q),J=o(f,"setScrollFactor.stepX",0),q=o(f,"setScrollFactor.stepY",0);h.SetScrollFactor(y,Q,Z,J,q);var tt=r(f,"hitArea",null),st=r(f,"hitAreaCallback",null);tt&&h.SetHitArea(y,tt,st);var ot=r(f,"gridAlign",!1);return ot&&h.GridAlign(y,ot),this.createMultipleCallback&&this.createMultipleCallback.call(this,y),y},preUpdate:function(f,p){if(this.runChildUpdate&&0!==this.children.size)for(var v=this.children.entries.slice(),m=0;m<v.length;m++){var x=v[m];x.active&&x.update(f,p)}},add:function(f,p){return void 0===p&&(p=!1),this.isFull()||(this.children.set(f),this.internalCreateCallback&&this.internalCreateCallback.call(this,f),this.createCallback&&this.createCallback.call(this,f),p&&(this.scene.sys.displayList.add(f),f.preUpdate&&this.scene.sys.updateList.add(f)),f.on(s.DESTROY,this.remove,this)),this},addMultiple:function(f,p){if(void 0===p&&(p=!1),Array.isArray(f))for(var v=0;v<f.length;v++)this.add(f[v],p);return this},remove:function(f,p,v){return void 0===p&&(p=!1),void 0===v&&(v=!1),this.children.contains(f)&&(this.children.delete(f),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,f),this.removeCallback&&this.removeCallback.call(this,f),f.off(s.DESTROY,this.remove,this),v?f.destroy():p&&(f.scene.sys.displayList.remove(f),f.preUpdate&&f.scene.sys.updateList.remove(f))),this},clear:function(f,p){void 0===f&&(f=!1),void 0===p&&(p=!1);for(var v=this.children,m=0;m<v.size;m++){var x=v.entries[m];x.off(s.DESTROY,this.remove,this),p?x.destroy():f&&(x.scene.sys.displayList.remove(x),x.preUpdate&&x.scene.sys.updateList.remove(x))}return this.children.clear(),this},contains:function(f){return this.children.contains(f)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(f,p,v,m){return i(this.children.entries,f,p,v,m)},getFirst:function(f,p,v,m,x,y,w){return this.getHandler(!0,1,f,p,v,m,x,y,w)},getFirstNth:function(f,p,v,m,x,y,w,T){return this.getHandler(!0,f,p,v,m,x,y,w,T)},getLast:function(f,p,v,m,x,y,w){return this.getHandler(!1,1,f,p,v,m,x,y,w)},getLastNth:function(f,p,v,m,x,y,w,T){return this.getHandler(!1,f,p,v,m,x,y,w,T)},getHandler:function(f,p,v,m,x,y,w,T,E){var S,A;void 0===v&&(v=!1),void 0===m&&(m=!1);var _=0,C=this.children.entries;if(f)for(A=0;A<C.length;A++)if((S=C[A]).active===v){if(++_===p)break}else S=null;else for(A=C.length-1;0<=A;A--)if((S=C[A]).active===v){if(++_===p)break}else S=null;return S?("number"==typeof x&&(S.x=x),"number"==typeof y&&(S.y=y),S):m?this.create(x,y,w,T,E):null},get:function(f,p,v,m,x){return this.getFirst(!1,!0,f,p,v,m,x)},getFirstAlive:function(f,p,v,m,x,y){return this.getFirst(!0,f,p,v,m,x,y)},getFirstDead:function(f,p,v,m,x,y){return this.getFirst(!1,f,p,v,m,x,y)},playAnimation:function(f,p){return h.PlayAnimation(this.children.entries,f,p),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(f){void 0===f&&(f=!0);for(var p=0,v=0;v<this.children.size;v++)this.children.entries[v].active===f&&p++;return p},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var f=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-f},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},propertyValueSet:function(f,p,v,m,x){return h.PropertyValueSet(this.children.entries,f,p,v,m,x),this},propertyValueInc:function(f,p,v,m,x){return h.PropertyValueInc(this.children.entries,f,p,v,m,x),this},setX:function(f,p){return h.SetX(this.children.entries,f,p),this},setY:function(f,p){return h.SetY(this.children.entries,f,p),this},setXY:function(f,p,v,m){return h.SetXY(this.children.entries,f,p,v,m),this},incX:function(f,p){return h.IncX(this.children.entries,f,p),this},incY:function(f,p){return h.IncY(this.children.entries,f,p),this},incXY:function(f,p,v,m){return h.IncXY(this.children.entries,f,p,v,m),this},shiftPosition:function(f,p,v){return h.ShiftPosition(this.children.entries,f,p,v),this},angle:function(f,p){return h.Angle(this.children.entries,f,p),this},rotate:function(f,p){return h.Rotate(this.children.entries,f,p),this},rotateAround:function(f,p){return h.RotateAround(this.children.entries,f,p),this},rotateAroundDistance:function(f,p,v){return h.RotateAroundDistance(this.children.entries,f,p,v),this},setAlpha:function(f,p){return h.SetAlpha(this.children.entries,f,p),this},setTint:function(f,p,v,m){return h.SetTint(this.children.entries,f,p,v,m),this},setOrigin:function(f,p,v,m){return h.SetOrigin(this.children.entries,f,p,v,m),this},scaleX:function(f,p){return h.ScaleX(this.children.entries,f,p),this},scaleY:function(f,p){return h.ScaleY(this.children.entries,f,p),this},scaleXY:function(f,p,v,m){return h.ScaleXY(this.children.entries,f,p,v,m),this},setDepth:function(f,p){return h.SetDepth(this.children.entries,f,p),this},setBlendMode:function(f){return h.SetBlendMode(this.children.entries,f),this},setHitArea:function(f,p){return h.SetHitArea(this.children.entries,f,p),this},shuffle:function(){return h.Shuffle(this.children.entries),this},kill:function(f){this.children.contains(f)&&f.setActive(!1)},killAndHide:function(f){this.children.contains(f)&&(f.setActive(!1),f.setVisible(!1))},setVisible:function(f,p,v){return h.SetVisible(this.children.entries,f,p,v),this},toggleVisible:function(){return h.ToggleVisible(this.children.entries),this},destroy:function(f){void 0===f&&(f=!1),this.scene&&!this.ignoreDestroy&&(this.clear(!1,f),this.scene=void 0,this.children=void 0)}});g.exports=d},function(g,b,t){var h=t(12);g.exports=function(n,s,u,i,r,o){for(var l=h.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*i),e=u.pathData,a=u.pathIndexes,c=0;c<a.length;c+=3){var d=2*a[c],f=2*a[c+1],p=2*a[c+2],v=e[0+d]-r,m=e[1+d]-o,x=e[0+f]-r,y=e[1+f]-o,w=e[0+p]-r,T=e[1+p]-o,E=s.getX(v,m),S=s.getY(v,m),A=s.getX(x,y),_=s.getY(x,y),C=s.getX(w,T),M=s.getY(w,T);n.batchTri(E,S,A,_,C,M,l,l,l)}}},function(g,b){g.exports=function(t,h,n){var s=t.x3-t.x1,u=t.y3-t.y1,i=t.x2-t.x1,r=t.y2-t.y1,o=h-t.x1,l=n-t.y1,e=s*s+u*u,a=s*i+u*r,c=s*o+u*l,d=i*i+r*r,f=i*o+r*l,p=e*d-a*a,v=0==p?0:1/p,m=(d*c-a*f)*v,x=(e*f-a*c)*v;return 0<=m&&0<=x&&m+x<1}},function(g,b,t){var h=t(0),n=t(10),s=t(114),u=t(3);function i(o,l,e,a){var c=o-e,d=l-a;return Math.sqrt(c*c+d*d)}var r=new h({initialize:function(o,l,e){this.vertex1=o,this.vertex2=l,this.vertex3=e,this.bounds=new n,this._inCenter=new u},getInCenter:function(o){void 0===o&&(o=!0);var l,e,a,c,d,f=this.vertex1,p=this.vertex2,v=this.vertex3,m=o?(l=f.x,e=f.y,a=p.x,c=p.y,d=v.x,v.y):(l=f.vx,e=f.vy,a=p.vx,c=p.vy,d=v.vx,v.vy),x=i(d,m,a,c),y=i(l,e,d,m),w=i(a,c,l,e),T=x+y+w;return this._inCenter.set((l*x+a*y+d*w)/T,(e*x+c*y+m*w)/T)},contains:function(o,l,e){var a,c,d,f,p,v,m=this.vertex1,x=this.vertex2,y=this.vertex3,w=m.vx,T=m.vy,E=x.vx,S=x.vy,A=y.vx,_=y.vy;e&&(w=m.vx*(a=e.a)+m.vy*(d=e.c)+(p=e.e),T=m.vx*(c=e.b)+m.vy*(f=e.d)+(v=e.f),E=x.vx*a+x.vy*d+p,S=x.vx*c+x.vy*f+v,A=y.vx*a+y.vy*d+p,_=y.vx*c+y.vy*f+v);var C=A-w,M=_-T,R=E-w,L=S-T,D=o-w,F=l-T,U=C*C+M*M,P=C*R+M*L,O=C*D+M*F,B=R*R+L*L,k=R*D+L*F,I=U*B-P*P,N=0==I?0:1/I,Y=(B*O-P*k)*N,X=(U*k-P*O)*N;return 0<=Y&&0<=X&&Y+X<1},isCounterClockwise:function(o){var l=this.vertex1,e=this.vertex2,a=this.vertex3,c=(e.vx-l.vx)*(a.vy-l.vy)-(e.vy-l.vy)*(a.vx-l.vx);return o<=0?0<=c:c<0},load:function(o,l,e,a,c){return e=this.vertex1.load(o,l,e,a,c),e=this.vertex2.load(o,l,e,a,c),this.vertex3.load(o,l,e,a,c)},transformCoordinatesLocal:function(o,l,e,a){return this.vertex1.transformCoordinatesLocal(o,l,e,a),this.vertex2.transformCoordinatesLocal(o,l,e,a),this.vertex3.transformCoordinatesLocal(o,l,e,a),this},updateBounds:function(){var o=this.vertex1,l=this.vertex2,e=this.vertex3,a=this.bounds;return a.x=Math.min(o.vx,l.vx,e.vx),a.y=Math.min(o.vy,l.vy,e.vy),a.width=Math.max(o.vx,l.vx,e.vx)-a.x,a.height=Math.max(o.vy,l.vy,e.vy)-a.y,this},isInView:function(o,l,e,a,c,d,f,p,v,m,x){var y=this.vertex1.update(c,d,f,p,v,m,x,a),w=this.vertex2.update(c,d,f,p,v,m,x,a),T=this.vertex3.update(c,d,f,p,v,m,x,a);if(y.ta<=0&&w.ta<=0&&T.ta<=0||l&&!this.isCounterClockwise(e))return!1;var E=this.bounds;return E.x=Math.min(y.tx,w.tx,T.tx),E.y=Math.min(y.ty,w.ty,T.ty),E.width=Math.max(y.tx,w.tx,T.tx)-E.x,E.height=Math.max(y.ty,w.ty,T.ty)-E.y,s(E,o.worldView)},translate:function(o,l){void 0===l&&(l=0);var e=this.vertex1,a=this.vertex2,c=this.vertex3;return e.x+=o,e.y+=l,a.x+=o,a.y+=l,c.x+=o,c.y+=l,this},x:{get:function(){return this.getInCenter().x},set:function(o){var l=this.getInCenter();this.translate(o-l.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(o){var l=this.getInCenter();this.translate(0,o-l.y)}},alpha:{get:function(){return(this.vertex1.alpha+this.vertex2.alpha+this.vertex3.alpha)/3},set:function(o){this.vertex1.alpha=o,this.vertex2.alpha=o,this.vertex3.alpha=o}},depth:{get:function(){return(this.vertex1.vz+this.vertex2.vz+this.vertex3.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});g.exports=r},function(g,b){g.exports=function(t,h){return!(t.width<=0||t.height<=0||h.width<=0||h.height<=0||t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)}},function(g,b,t){var h=t(0),n=t(12),s=t(37),u=new h({Extends:s,initialize:function(i,r,o,l,e,a,c,d,f,p){void 0===a&&(a=16777215),void 0===c&&(c=1),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),s.call(this,i,r,o),this.vx=0,this.vy=0,this.vz=0,this.nx=d,this.ny=f,this.nz=p,this.u=l,this.v=e,this.color=a,this.alpha=c,this.tx=0,this.ty=0,this.ta=0},setUVs:function(i,r){return this.u=i,this.v=r,this},transformCoordinatesLocal:function(i,r,o,l){var e=this.x,a=this.y,c=this.z,d=i.val,p=e*d[1]+a*d[5]+c*d[9]+d[13],v=e*d[2]+a*d[6]+c*d[10]+d[14],m=e*d[3]+a*d[7]+c*d[11]+d[15];this.vx=(e*d[0]+a*d[4]+c*d[8]+d[12])/m*r,this.vy=-p/m*o,this.vz=l<=0?v/m:-v/m},update:function(i,r,o,l,e,a,c,d){var f=this.vx*i+this.vy*o+e,p=this.vx*r+this.vy*l+a;return c&&(f=Math.round(f),p=Math.round(p)),this.tx=f,this.ty=p,this.ta=this.alpha*d,this},load:function(i,r,o,l,e){return i[++o]=this.tx,i[++o]=this.ty,i[++o]=this.u,i[++o]=this.v,i[++o]=l,i[++o]=e,r[++o]=n.getTintAppendFloatAlpha(this.color,this.ta),o}});g.exports=u},function(g,b){var t={};(g.exports=t).create=function(h,n){return{x:h||0,y:n||0}},t.clone=function(h){return{x:h.x,y:h.y}},t.magnitude=function(h){return Math.sqrt(h.x*h.x+h.y*h.y)},t.magnitudeSquared=function(h){return h.x*h.x+h.y*h.y},t.rotate=function(h,n,s){var u=Math.cos(n),i=Math.sin(n),r=h.x*u-h.y*i;return(s=s||{}).y=h.x*i+h.y*u,s.x=r,s},t.rotateAbout=function(h,n,s,u){var i=Math.cos(n),r=Math.sin(n),o=s.x+((h.x-s.x)*i-(h.y-s.y)*r);return(u=u||{}).y=s.y+((h.x-s.x)*r+(h.y-s.y)*i),u.x=o,u},t.normalise=function(h){var n=t.magnitude(h);return 0===n?{x:0,y:0}:{x:h.x/n,y:h.y/n}},t.dot=function(h,n){return h.x*n.x+h.y*n.y},t.cross=function(h,n){return h.x*n.y-h.y*n.x},t.cross3=function(h,n,s){return(n.x-h.x)*(s.y-h.y)-(n.y-h.y)*(s.x-h.x)},t.add=function(h,n,s){return(s=s||{}).x=h.x+n.x,s.y=h.y+n.y,s},t.sub=function(h,n,s){return(s=s||{}).x=h.x-n.x,s.y=h.y-n.y,s},t.mult=function(h,n){return{x:h.x*n,y:h.y*n}},t.div=function(h,n){return{x:h.x/n,y:h.y/n}},t.perp=function(h,n){return{x:(n=!0===n?-1:1)*-h.y,y:n*h.x}},t.neg=function(h){return{x:-h.x,y:-h.y}},t.angle=function(h,n){return Math.atan2(n.y-h.y,n.x-h.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]},function(g,b){var t={};(g.exports=t).create=function(h){var n={min:{x:0,y:0},max:{x:0,y:0}};return h&&t.update(n,h),n},t.update=function(h,n,s){h.min.x=1/0,h.max.x=-1/0,h.min.y=1/0,h.max.y=-1/0;for(var u=0;u<n.length;u++){var i=n[u];i.x>h.max.x&&(h.max.x=i.x),i.x<h.min.x&&(h.min.x=i.x),i.y>h.max.y&&(h.max.y=i.y),i.y<h.min.y&&(h.min.y=i.y)}s&&(0<s.x?h.max.x+=s.x:h.min.x+=s.x,0<s.y?h.max.y+=s.y:h.min.y+=s.y)},t.contains=function(h,n){return n.x>=h.min.x&&n.x<=h.max.x&&n.y>=h.min.y&&n.y<=h.max.y},t.overlaps=function(h,n){return h.min.x<=n.max.x&&h.max.x>=n.min.x&&h.max.y>=n.min.y&&h.min.y<=n.max.y},t.translate=function(h,n){h.min.x+=n.x,h.max.x+=n.x,h.min.y+=n.y,h.max.y+=n.y},t.shift=function(h,n){var s=h.max.x-h.min.x,u=h.max.y-h.min.y;h.min.x=n.x,h.max.x=n.x+s,h.min.y=n.y,h.max.y=n.y+u}},function(g,b){g.exports=function(t,h,n){return 0<=t&&t<n.width&&0<=h&&h<n.height}},function(g,b,t){var h=t(0),n=t(29),s=t(2),u=new h({initialize:function(i){void 0===i&&(i={}),this.name=s(i,"name","layer"),this.x=s(i,"x",0),this.y=s(i,"y",0),this.width=s(i,"width",0),this.height=s(i,"height",0),this.tileWidth=s(i,"tileWidth",0),this.tileHeight=s(i,"tileHeight",0),this.baseTileWidth=s(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(i,"baseTileHeight",this.tileHeight),this.orientation=s(i,"orientation",n.ORTHOGONAL),this.widthInPixels=s(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(i,"alpha",1),this.visible=s(i,"visible",!0),this.properties=s(i,"properties",[]),this.indexes=s(i,"indexes",[]),this.collideIndexes=s(i,"collideIndexes",[]),this.callbacks=s(i,"callbacks",[]),this.bodies=s(i,"bodies",[]),this.data=s(i,"data",[]),this.tilemapLayer=s(i,"tilemapLayer",null),this.hexSideLength=s(i,"hexSideLength",0)}});g.exports=u},function(g,b,t){var h=t(0),n=t(29),s=t(2),u=new h({initialize:function(i){void 0===i&&(i={}),this.name=s(i,"name","map"),this.width=s(i,"width",0),this.height=s(i,"height",0),this.infinite=s(i,"infinite",!1),this.tileWidth=s(i,"tileWidth",0),this.tileHeight=s(i,"tileHeight",0),this.widthInPixels=s(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(i,"heightInPixels",this.height*this.tileHeight),this.format=s(i,"format",null),this.orientation=s(i,"orientation",n.ORTHOGONAL),this.renderOrder=s(i,"renderOrder","right-down"),this.version=s(i,"version","1"),this.properties=s(i,"properties",{}),this.layers=s(i,"layers",[]),this.images=s(i,"images",[]),this.objects=s(i,"objects",{}),this.collision=s(i,"collision",{}),this.tilesets=s(i,"tilesets",[]),this.imageCollections=s(i,"imageCollections",[]),this.tiles=s(i,"tiles",[]),this.hexSideLength=s(i,"hexSideLength",0)}});g.exports=u},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i,r,o,l,e){(void 0===u||u<=0)&&(u=32),(void 0===i||i<=0)&&(i=32),void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l={}),void 0===e&&(e={}),this.name=n,this.firstgid=s,this.tileWidth=u,this.tileHeight=i,this.tileMargin=r,this.tileSpacing=o,this.tileProperties=l,this.tileData=e,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var s=this.getTileData(n);return s&&s.objectgroup?s.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,s){return void 0!==n&&(this.tileWidth=n),void 0!==s&&(this.tileHeight=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,s){return void 0!==n&&(this.tileMargin=n),void 0!==s&&(this.tileSpacing=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,s){var u=(s-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(n-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);u%1==0&&i%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),i=Math.floor(i),this.rows=u,this.columns=i,this.total=u*i,this.texCoordinates.length=0;for(var r=this.tileMargin,o=this.tileMargin,l=0;l<this.rows;l++){for(var e=0;e<this.columns;e++)this.texCoordinates.push({x:r,y:o}),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});g.exports=h},function(g,b){g.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),Math.abs(t-h)<n}},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(1062),i=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,u],initialize:function(r,o,l,e,a){s.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(e,a),this.setPosition(o,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});g.exports=i},function(g,b){g.exports=function(t,h){return t.hasOwnProperty(h)}},function(g,b,t){var h={};g.exports=h;var n=t(94),s=t(50),u=t(71),i=t(117),r=t(116),o=t(1487);h.rectangle=function(l,e,a,c,d){d=d||{};var f,p={label:"Rectangle Body",position:{x:l,y:e},vertices:n.fromPath("L 0 0 L "+a+" 0 L "+a+" "+c+" L 0 "+c)};return d.chamfer&&(p.vertices=n.chamfer(p.vertices,(f=d.chamfer).radius,f.quality,f.qualityMin,f.qualityMax),delete d.chamfer),u.create(s.extend({},p,d))},h.trapezoid=function(l,e,a,c,d,f){f=f||{};var p,v=a*(d*=.5),m=v+(1-2*d)*a,x=m+v,w={label:"Trapezoid Body",position:{x:l,y:e},vertices:n.fromPath(d<.5?"L 0 0 L "+v+" "+-c+" L "+m+" "+-c+" L "+x+" 0":"L 0 0 L "+m+" "+-c+" L "+x+" 0")};return f.chamfer&&(w.vertices=n.chamfer(w.vertices,(p=f.chamfer).radius,p.quality,p.qualityMin,p.qualityMax),delete f.chamfer),u.create(s.extend({},w,f))},h.circle=function(l,e,a,c,d){c=c||{};var f={label:"Circle Body",circleRadius:a};d=d||25;var p=Math.ceil(Math.max(10,Math.min(d,a)));return p%2==1&&(p+=1),h.polygon(l,e,p,a,s.extend({},f,c))},h.polygon=function(l,e,a,c,d){if(d=d||{},a<3)return h.circle(l,e,c,d);for(var f=2*Math.PI/a,p="",v=.5*f,m=0;m<a;m+=1){var x=v+m*f,y=Math.cos(x)*c,w=Math.sin(x)*c;p+="L "+y.toFixed(3)+" "+w.toFixed(3)+" "}var T,E={label:"Polygon Body",position:{x:l,y:e},vertices:n.fromPath(p)};return d.chamfer&&(E.vertices=n.chamfer(E.vertices,(T=d.chamfer).radius,T.quality,T.qualityMin,T.qualityMax),delete d.chamfer),u.create(s.extend({},E,d))},h.fromVertices=function(l,e,a,c,d,f,p){var v,m,x,y,w;for(c=c||{},m=[],d=void 0!==d&&d,f=void 0!==f?f:.01,p=void 0!==p?p:10,o||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(a[0])||(a=[a]),w=0;w<a.length;w+=1)if((x=n.isConvex(y=a[w]))||!o)y=x?n.clockwiseSort(y):n.hull(y),m.push({position:{x:l,y:e},vertices:y});else{var T=y.map(function(_){return[_.x,_.y]});o.makeCCW(T),!1!==f&&o.removeCollinearPoints(T,f);for(var E=o.quickDecomp(T),S=0;S<E.length;S++){var A=E[S].map(function(_){return{x:_[0],y:_[1]}});0<p&&n.area(A)<p||m.push({position:n.centre(A),vertices:A})}}for(S=0;S<m.length;S++)m[S]=u.create(s.extend(m[S],c));return d&&h.flagCoincidentParts(m,5),1<m.length?(v=u.create(s.extend({parts:m.slice(0)},c)),u.setPosition(v,{x:l,y:e}),v):m[0]},h.flagCoincidentParts=function(l,e){void 0===e&&(e=5);for(var a=0;a<l.length;a++)for(var c=l[a],d=a+1;d<l.length;d++){var f=l[d];if(i.overlaps(c.bounds,f.bounds))for(var p=c.vertices,v=f.vertices,m=0;m<c.vertices.length;m++)for(var x=0;x<f.vertices.length;x++){var y=r.magnitudeSquared(r.sub(p[(m+1)%p.length],v[x])),w=r.magnitudeSquared(r.sub(p[m],v[(x+1)%v.length]));y<e&&w<e&&(p[m].isInternal=!0,v[x].isInternal=!0)}}return l}},function(g,b,t){var h=t(33),n=t(62),s=t(63),u=t(0),i=t(11),r=t(15),o=t(10),l=t(56),e=new u({Extends:r,Mixins:[i.Depth,i.GetBounds,i.Origin,i.Transform,i.ScrollFactor,i.Visible],initialize:function(a,c,d,f,p){void 0===f&&(f=1),void 0===p&&(p=f),r.call(this,a,"Zone"),this.setPosition(c,d),this.width=f,this.height=p,this.blendMode=h.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,c,d){void 0===d&&(d=!0),this.width=a,this.height=c,this.updateDisplayOrigin();var f=this.input;return d&&f&&!f.customHitArea&&(f.hitArea.width=a,f.hitArea.height=c),this},setDisplaySize:function(a,c){return this.displayWidth=a,this.displayHeight=c,this},setCircleDropZone:function(a){return this.setDropZone(new n(0,0,a),s)},setRectangleDropZone:function(a,c){return this.setDropZone(new o(0,0,a,c),l)},setDropZone:function(a,c){return void 0===a?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(a,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});g.exports=e},function(g,b){g.exports=function(t){return 2*(t.width+t.height)}},function(g,b){g.exports=function(t){for(var h=t.length-1;0<h;h--){var n=Math.floor(Math.random()*(h+1)),s=t[h];t[h]=t[n],t[n]=s}return t}},function(g,b,t){g.exports={ADD_ANIMATION:t(700),ANIMATION_COMPLETE:t(701),ANIMATION_COMPLETE_KEY:t(702),ANIMATION_REPEAT:t(703),ANIMATION_RESTART:t(704),ANIMATION_START:t(705),ANIMATION_STOP:t(706),ANIMATION_UPDATE:t(707),PAUSE_ALL:t(708),REMOVE_ANIMATION:t(709),RESUME_ALL:t(710)}},function(g,b,t){var h=t(0),n=t(11),s=t(34),u=t(9),i=t(35),r=t(10),o=t(25),l=t(184),e=t(3),a=new h({Extends:u,Mixins:[n.Alpha,n.Visible],initialize:function(c,d,f,p){void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),u.call(this),this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=c,this._y=d,this._width=f,this._height=p,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=l("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new e(f/2,p/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(c,d){return void 0===c&&(c=.5),void 0===d&&(d=c),this.originX=c,this.originY=d,this},getScroll:function(c,d,f){void 0===f&&(f=new e);var v=.5*this.height;return f.x=c-.5*this.width,f.y=d-v,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(c){var d=.5*this.width;return this.midPoint.x=c,this.scrollX=c-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var d=.5*this.height;return this.midPoint.y=c,this.scrollY=c-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,d){return this.centerOnX(c),this.centerOnY(d),this},centerToBounds:function(){var c,d,f;return this.useBounds&&(d=.5*this.width,f=.5*this.height,this.midPoint.set((c=this._bounds).centerX,c.centerY),this.scrollX=c.centerX-d,this.scrollY=c.centerY-f),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(c){if(this.disableCull)return c;var d=this.matrix.matrix,f=d[0],p=d[1],v=d[2],m=d[3];if(!(f*m-p*v))return c;for(var x=d[4],y=d[5],w=this.scrollX,T=this.scrollY,A=this.y,_=A+this.height,C=this.x,M=C+this.width,R=this.culledObjects,L=c.length,D=R.length=0;D<L;++D){var F,U,P,O,B=c[D];B.hasOwnProperty("width")&&!B.parentContainer?C<((P=B.x-w*B.scrollFactorX-(F=B.width)*B.originX)+F)*f+((O=B.y-T*B.scrollFactorY-(U=B.height)*B.originY)+U)*v+x&&P*f+O*v+x<M&&A<(P+F)*p+(O+U)*m+y&&P*p+O*m+y<_&&R.push(B):R.push(B)}return R},getWorldPoint:function(c,d,f){void 0===f&&(f=new e);var p=this.matrix.matrix,v=p[0],m=p[1],x=p[2],y=p[3],w=p[4],T=p[5],E=v*y-m*x;if(!E)return f.x=c,f.y=d,f;var S=y*(E=1/E),A=-m*E,_=-x*E,C=v*E,M=(x*T-y*w)*E,R=(m*w-v*T)*E,L=Math.cos(this.rotation),D=Math.sin(this.rotation),P=this.scrollX,O=this.scrollY,B=c+(P*L-O*D)*this.zoomX,k=d+(P*D+O*L)*this.zoomY;return f.x=B*S+k*_+M,f.y=B*A+k*C+R,f},ignore:function(c){var d=this.id;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var p=c[f];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=d}return this},preRender:function(){var c=this.width,d=this.height,f=.5*c,p=.5*d,v=this.zoomX,m=this.zoomY,x=this.matrix,y=c*this.originX,w=d*this.originY,T=this.scrollX,E=this.scrollY;this.useBounds&&(T=this.clampX(T),E=this.clampY(E)),this.roundPixels&&(y=Math.round(y),w=Math.round(w));var S=(this.scrollX=T)+f,A=(this.scrollY=E)+p;this.midPoint.set(S,A);var _=c/v,C=d/m;this.worldView.setTo(S-_/2,A-C/2,_,C),x.applyITRS(this.x+y,this.y+w,this.rotation,v,m),x.translate(-y,-w)},clampX:function(c){var d=this._bounds,f=this.displayWidth,p=d.x+(f-this.width)/2,v=Math.max(p,p+d.width-f);return c<p?c=p:v<c&&(c=v),c},clampY:function(c){var d=this._bounds,f=this.displayHeight,p=d.y+(f-this.height)/2,v=Math.max(p,p+d.height-f);return c<p?c=p:v<c&&(c=v),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return void 0===c&&(c=0),this.rotation=s(c),this},setBackgroundColor:function(c){return void 0===c&&(c="rgba(0,0,0,0)"),this.backgroundColor=l(c),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(c,d,f,p,v){return void 0===v&&(v=!1),this._bounds.setTo(c,d,f,p),this.dirty=!0,this.useBounds=!0,v?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){void 0===c&&(c=new r);var d=this._bounds;return c.setTo(d.x,d.y,d.width,d.height),c},setName:function(c){return void 0===c&&(c=""),this.name=c,this},setPosition:function(c,d){return void 0===d&&(d=c),this.x=c,this.y=d,this},setRotation:function(c){return void 0===c&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var d=(this.scene=c).sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(c,d){return void 0===d&&(d=c),this.scrollX=c,this.scrollY=d,this},setSize:function(c,d){return void 0===d&&(d=c),this.width=c,this.height=d,this},setViewport:function(c,d,f,p){return this.x=c,this.y=d,this.width=f,this.height=p,this},setZoom:function(c,d){return void 0===c&&(c=1),void 0===d&&(d=c),0===c&&(c=.001),0===d&&(d=.001),this.zoomX=c,this.zoomY=d,this},setMask:function(c,d){return void 0===d&&(d=!0),this.mask=c,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(c){return void 0===c&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},updateSystem:function(){var c,d;this.scaleManager&&(d=this.sceneManager,(c=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height)&&!this._customViewport?d.customViewports++:!c&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=c)},destroy:function(){this.emit(i.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){this._scrollX=c,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(c){this._scrollY=c,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});g.exports=a},function(g,b,t){var h=t(328),n=t(329),s=t(330),u=t(331),i=t(332),r=t(333),o=t(334),l=t(335),e=t(336),a=t(337),c=t(338),d=t(339);g.exports={Power0:o,Power1:l.Out,Power2:u.Out,Power3:e.Out,Power4:a.Out,Linear:o,Quad:l.Out,Cubic:u.Out,Quart:e.Out,Quint:a.Out,Sine:c.Out,Expo:r.Out,Circ:s.Out,Elastic:i.Out,Back:h.Out,Bounce:n.Out,Stepped:d,"Quad.easeIn":l.In,"Cubic.easeIn":u.In,"Quart.easeIn":e.In,"Quint.easeIn":a.In,"Sine.easeIn":c.In,"Expo.easeIn":r.In,"Circ.easeIn":s.In,"Elastic.easeIn":i.In,"Back.easeIn":h.In,"Bounce.easeIn":n.In,"Quad.easeOut":l.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":e.Out,"Quint.easeOut":a.Out,"Sine.easeOut":c.Out,"Expo.easeOut":r.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":i.Out,"Back.easeOut":h.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":l.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":e.InOut,"Quint.easeInOut":a.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":i.InOut,"Back.easeInOut":h.InOut,"Bounce.easeInOut":n.InOut}},function(g,b){g.exports=function(t,h,n){return(h-t)*n+t}},function(g,b,t){var h,n=t(102),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};g.exports=(h=navigator.userAgent,/Edge\/\d+/.test(h)?s.edge=!0:/Chrome\/(\d+)/.test(h)&&!n.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&n.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?s.opera=!0:/Safari/.test(h)&&!n.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(s.silk=!0),s)},function(g,b){g.exports=function(t,h){return Math.random()*(h-t)+t}},function(g,b){g.exports=function(t,h){return 0<t&&0==(t&t-1)&&0<h&&0==(h&h-1)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.ceil(t/h),s?(n+t)/h:n+t)}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=s||0,this.z=u||0,this.w=i||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,s,u,i){return"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=s||0,this.z=u||0,this.w=i||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,s=this.y,u=this.z,i=this.w;return Math.sqrt(n*n+s*s+u*u+i*i)},lengthSq:function(){var n=this.x,s=this.y,u=this.z,i=this.w;return n*n+s*s+u*u+i*i},normalize:function(){var n=this.x,s=this.y,u=this.z,i=this.w,r=n*n+s*s+u*u+i*i;return 0<r&&(r=1/Math.sqrt(r),this.x=n*r,this.y=s*r,this.z=u*r,this.w=i*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,s){void 0===s&&(s=0);var u=this.x,i=this.y,r=this.z,o=this.w;return this.x=u+s*(n.x-u),this.y=i+s*(n.y-i),this.z=r+s*(n.z-r),this.w=o+s*(n.w-o),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var s=n.x-this.x,u=n.y-this.y,i=n.z-this.z||0,r=n.w-this.w||0;return Math.sqrt(s*s+u*u+i*i+r*r)},distanceSq:function(n){var s=n.x-this.x,u=n.y-this.y,i=n.z-this.z||0,r=n.w-this.w||0;return s*s+u*u+i*i+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var s=this.x,u=this.y,i=this.z,r=this.w,o=n.val;return this.x=o[0]*s+o[4]*u+o[8]*i+o[12]*r,this.y=o[1]*s+o[5]*u+o[9]*i+o[13]*r,this.z=o[2]*s+o[6]*u+o[10]*i+o[14]*r,this.w=o[3]*s+o[7]*u+o[11]*i+o[15]*r,this},transformQuat:function(n){var s=this.x,u=this.y,i=this.z,r=n.x,o=n.y,l=n.z,e=n.w,a=e*s+o*i-l*u,c=e*u+l*s-r*i,d=e*i+r*u-o*s,f=-r*s-o*u-l*i;return this.x=a*e+f*-r+c*-l-d*-o,this.y=c*e+f*-o+d*-r-a*-l,this.z=d*e+f*-l+a*-o-c*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,h.prototype.div=h.prototype.divide,h.prototype.dist=h.prototype.distance,h.prototype.distSq=h.prototype.distanceSq,h.prototype.len=h.prototype.length,h.prototype.lenSq=h.prototype.lengthSq,g.exports=h},function(g,b,t){var h=t(0),n=t(88),s=new h({initialize:function(u,i,r,o,l,e,a){void 0===o&&(o=1),void 0===l&&(l=0),void 0===e&&(e=!0),void 0===a&&(a=!1),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=o,this.minFilter=l,this.autoClear=e,this.autoResize=!1,this.resize(i,r),a&&this.setAutoResize(!0)},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,i){var r;return u*this.scale===this.width&&i*this.scale===this.height||((r=this.renderer).deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,u*=this.scale,i*=this.scale,this.minFilter),this.framebuffer=r.createFramebuffer(u,i,this.texture,!1),this.width=u,this.height=i),this},bind:function(u,i,r){var o;void 0===u&&(u=!1),u&&this.renderer.flush(),i&&r&&this.resize(i,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),u&&this.adjustViewport(),this.autoClear&&((o=this.renderer.gl).clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT))},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(){var u=this.renderer,i=u.gl;u.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(u){void 0===u&&(u=!1);var i=this.renderer;return u&&i.flush(),i.popFramebuffer()},destroy:function(){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),u.off(n.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});g.exports=s},function(g,b){g.exports=function(t,h){var n;if(h)"string"==typeof h?n=document.getElementById(h):"object"==typeof h&&1===h.nodeType&&(n=h);else if(t.parentElement||null===h)return t;return(n=n||document.body).appendChild(t),t}},function(g,b){g.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(g,b){g.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(g,b,t){var h=t(77);g.exports=function(n,s){var u=h(n);for(var i in s)u.hasOwnProperty(i)||(u[i]=s[i]);return u}},function(g,b,t){var h=t(0),n=t(77),s=t(9),u=t(69),i=t(22),r=t(1),o=t(204),l=t(422),e=new h({Extends:s,initialize:function(a){s.call(this),this.game=a,this.jsonCache=a.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,a.events.on(i.BLUR,this.onGameBlur,this),a.events.on(i.FOCUS,this.onGameFocus,this),a.events.on(i.PRE_STEP,this.update,this),a.events.once(i.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(a,c){void 0===c&&(c={});var d,f,p=this.add(a,c);for(var v in p.spritemap=this.jsonCache.get(a).spritemap,p.spritemap)p.spritemap.hasOwnProperty(v)&&((d=n(c)).loop=!!(f=p.spritemap[v]).hasOwnProperty("loop")&&f.loop,p.addMarker({name:v,start:f.start,duration:f.end-f.start,config:d}));return p},get:function(a){return l(this.sounds,"key",a)},getAll:function(a){return o(this.sounds,"key",a)},play:function(a,c){var d=this.add(a);return d.once(u.COMPLETE,d.destroy,d),c?c.name?(d.addMarker(c),d.play(c.name)):d.play(c):d.play()},playAudioSprite:function(a,c,d){var f=this.addAudioSprite(a);return f.once(u.COMPLETE,f.destroy,f),f.play(c,d)},remove:function(a){var c=this.sounds.indexOf(a);return-1!==c&&(a.destroy(),this.sounds.splice(c,1),!0)},removeAll:function(){this.sounds.forEach(function(a){a.destroy()}),this.sounds.length=0},removeByKey:function(a){for(var c=0,d=this.sounds.length-1;0<=d;d--){var f=this.sounds[d];f.key===a&&(f.destroy(),this.sounds.splice(d,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(a){a.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(a){a.resume()}),this.emit(u.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(a){a.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(a){var c=0;return this.getAll(a).forEach(function(d){d.stop()&&c++}),c},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(a,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var d=this.sounds.length-1;0<=d;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(f){f.update(a,c)})},destroy:function(){this.game.events.off(i.BLUR,this.onGameBlur,this),this.game.events.off(i.FOCUS,this.onGameFocus,this),this.game.events.off(i.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(a,c){var d=this;this.sounds.forEach(function(f,p){f&&!f.pendingRemove&&a.call(c||d,f,p,d.sounds)})},setRate:function(a){return this.rate=a,this},rate:{get:function(){return this._rate},set:function(a){this._rate=a,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(u.GLOBAL_RATE,this,a)}},setDetune:function(a){return this.detune=a,this},detune:{get:function(){return this._detune},set:function(a){this._detune=a,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,a)}}});g.exports=e},function(g,b,t){var h=t(0),n=t(9),s=t(69),u=t(17),i=t(1),r=new h({Extends:n,initialize:function(o,l,e){n.call(this),this.manager=o,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,e),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!(!o||!o.name||"string"!=typeof o.name||(this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),1):(o=u(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,0)))},updateMarker:function(o){return!(!o||!o.name||"string"!=typeof o.name||(this.markers[o.name]?(this.markers[o.name]=u(!0,this.markers[o.name],o),0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),1)))},removeMarker:function(o){var l=this.markers[o];return l?(this.markers[o]=null,l):null},play:function(o,l){if(void 0===o&&(o=""),"object"==typeof o&&(l=o,o=""),"string"!=typeof o)return!1;if(o){if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=u(this.currentConfig,l),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var l=Math.pow(1.0005777895065548,this.currentConfig.detune+this.manager.detune);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});g.exports=r},function(g,b,t){var h=t(206),n=t(429);g.exports=function(s,u){if(void 0===u&&(u=90),!h(s))return null;if("string"!=typeof u&&(u=(u%360+360)%360),90===u||-270===u||"rotateLeft"===u)(s=n(s)).reverse();else if(-90===u||270===u||"rotateRight"===u)s.reverse(),s=n(s);else if(180===Math.abs(u)||"rotate180"===u){for(var i=0;i<s.length;i++)s[i].reverse();s.reverse()}return s}},function(g,b,t){var h=t(0),n=t(18),s=t(11),u=t(15),i=t(1037),r=t(1038),o=t(209),l=t(10),e=t(1039),a=new h({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,e],initialize:function(c,d,f,p,v,m,x){void 0===v&&(v=""),void 0===x&&(x=0),u.call(this,c,"BitmapText"),this.font=p;var y=this.scene.sys.cache.bitmapFont.get(p);y||console.warn("Invalid BitmapText key: "+p),this.fontData=y.data,this._text="",this._fontSize=m||this.fontData.size,this._letterSpacing=0,this._align=x,this._bounds=i(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.setTexture(y.texture,y.frame),this.setPosition(d,f),this.setOrigin(0,0),this.initPipeline(),this.setText(v)},setLeftAlign:function(){return this._align=a.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=a.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=a.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return void 0===c&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setText:function(c){return c||0===c||(c=""),Array.isArray(c)&&(c=c.join("\n")),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,d,f,p){return void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=.5),this.dropShadowX=c,this.dropShadowY=d,this.dropShadowColor=f,this.dropShadowAlpha=p,this},setCharacterTint:function(c,d,f,p,v,m,x){void 0===c&&(c=0),void 0===d&&(d=1),void 0===f&&(f=!1),void 0===p&&(p=-1),void 0===v&&(x=m=v=p);var y=this.text.length;-1===d&&(d=y),c<0&&(c=y+c),c=n(c,0,y-1);for(var w=n(c+d,c,y),T=this.charColors,E=c;E<w;E++){var S,A=T[E];-1===p?T[E]=null:(S=f?1:0,A?(A.tintEffect=S,A.tintTL=p,A.tintTR=v,A.tintBL=m,A.tintBR=x):T[E]={tintEffect:S,tintTL:p,tintTR:v,tintBL:m,tintBR:x})}return this},setWordTint:function(c,d,f,p,v,m,x){void 0===d&&(d=1);for(var y=this.getTextBounds().words,w="number"==typeof c,T=0,E=0;E<y.length;E++){var S=y[E];if((w&&E===c||!w&&S.word===c)&&(this.setCharacterTint(S.i,S.word.length,f,p,v,m,x),++T===d))return this}return this},getTextBounds:function(c){var d=this._bounds;return(this._dirty||c||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(i(this,c,!0,d),this._dirty=!1),d},getCharacterAt:function(c,d,f){for(var p=this.getLocalPoint(c,d,null,f),v=this.getTextBounds().characters,m=new l,x=0;x<v.length;x++){var y=v[x];if(m.setTo(y.x,y.t,y.r-y.x,y.b),m.contains(p.x,p.y))return y}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,d,f){var p;return void 0===d&&(d=this._fontSize),void 0===f&&(f=this._align),c===this.font||(p=this.scene.sys.cache.bitmapFont.get(c))&&(this.font=c,this.fontData=p.data,this._fontSize=d,this._align=f,this.setTexture(p.texture,p.frame),i(this,!1,!0,this._bounds)),this},setMaxWidth:function(c,d){return this._maxWidth=c,this._dirty=!0,void 0!==d&&(this.wordWrapCharCode=d),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var c=s.ToJSON(this);return c.data={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align},c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});a.ALIGN_LEFT=0,a.ALIGN_CENTER=1,a.ALIGN_RIGHT=2,a.ParseFromAtlas=r,a.ParseXMLBitmapFont=o,g.exports=a},function(g,b,t){var h=new(t(0))({initialize:function(n){if(this.entries=[],Array.isArray(n))for(var s=0;s<n.length;s++)this.set(n[s])},set:function(n){return-1===this.entries.indexOf(n)&&this.entries.push(n),this},get:function(n,s){for(var u=0;u<this.entries.length;u++){var i=this.entries[u];if(i[n]===s)return i}},getArray:function(){return this.entries.slice(0)},delete:function(n){var s=this.entries.indexOf(n);return-1<s&&this.entries.splice(s,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++)console.log(this.entries[n]);console.groupEnd()},each:function(n,s){var u,i=this.entries.slice(),r=i.length;if(s)for(u=0;u<r&&!1!==n.call(s,i[u],u);u++);else for(u=0;u<r&&!1!==n(i[u],u);u++);return this},iterate:function(n,s){var u,i=this.entries.length;if(s)for(u=0;u<i&&!1!==n.call(s,this.entries[u],u);u++);else for(u=0;u<i&&!1!==n(this.entries[u],u);u++);return this},iterateLocal:function(n){for(var s=[],u=1;u<arguments.length;u++)s.push(arguments[u]);var i=this.entries.length;for(u=0;u<i;u++){var r=this.entries[u];r[n].apply(r,s)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return-1<this.entries.indexOf(n)},union:function(n){var s=new h;return n.entries.forEach(function(u){s.set(u)}),this.entries.forEach(function(u){s.set(u)}),s},intersect:function(n){var s=new h;return this.entries.forEach(function(u){n.contains(u)&&s.set(u)}),s},difference:function(n){var s=new h;return this.entries.forEach(function(u){n.contains(u)||s.set(u)}),s},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});g.exports=h},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(186),i=t(65),r=t(1176),o=new h({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible,r],initialize:function(l,e,a,c,d,f,p){void 0===c&&(c=16777215),void 0===d&&(d=128),void 0===f&&(f=1),void 0===p&&(p=.1),s.call(this,l,"PointLight"),this.initPipeline(i.POINTLIGHT_PIPELINE),this.setPosition(e,a),this.color=u(c),this.intensity=f,this.attenuation=p,this.width=2*d,this.height=2*d,this._radius=d},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this.width=2*l,this.height=2*l}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});g.exports=o},function(g,b){g.exports=function(t,h){var n=h.width/2,s=h.height/2,u=Math.abs(t.x-h.x-n),i=Math.abs(t.y-h.y-s);if(n+t.radius<u||s+t.radius<i)return!1;if(u<=n||i<=s)return!0;var l=u-n,e=i-s;return l*l+e*e<=t.radius*t.radius}},function(g,b,t){var h=t(6),n={};g.exports={register:function(u,i,r,o,l){n[u]={plugin:i,mapping:r,settingsKey:o,configKey:l}},getPlugin:function(u){return n[u]},install:function(u){var i=u.scene.sys,r=i.settings.input,o=i.game.config;for(var l in n){var e=n[l].plugin,a=n[l].mapping;h(r,n[l].settingsKey,o[n[l].configKey])&&(u[a]=new e(u))}},remove:function(u){n.hasOwnProperty(u)&&delete n[u]}}},function(g,b,t){g.exports={ANY_KEY_DOWN:t(1317),ANY_KEY_UP:t(1318),COMBO_MATCH:t(1319),DOWN:t(1320),KEY_DOWN:t(1321),KEY_UP:t(1322),UP:t(1323)}},function(g,b){g.exports=function(t,h){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:h+t.url)}},function(g,b){g.exports=function(t,h,n,s,u,i){return void 0===t&&(t=""),void 0===h&&(h=!0),void 0===n&&(n=""),void 0===s&&(s=""),void 0===u&&(u=0),void 0===i&&(i=!1),{responseType:t,async:h,user:n,password:s,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}}},function(g,b,t){var h=t(0),n=t(240),s=t(73),u=new h({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(i,r,o,l,e){s.call(this,i,r,o,l,e),this.body=null}});g.exports=u},function(g,b,t){var h=t(118);g.exports=function(n,s,u,i){if(void 0===u&&(u=!1),h(n,s,i)){var r=i.data[s][n]||null;return r&&(-1!==r.index||u)?r:null}return null}},function(g,b){g.exports=function(t,h,n,s){var u,i,r,o=t.data,l=t.width,e=t.height,a=t.tilemapLayer,c=Math.max(0,h.left),d=Math.min(l,h.right),f=Math.max(0,h.top),p=Math.min(e,h.bottom);if(0===n)for(i=f;i<p;i++)for(u=c;o[i]&&u<d;u++)(r=o[i][u])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(1===n)for(i=f;i<p;i++)for(u=d;o[i]&&c<=u;u--)(r=o[i][u])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(2===n)for(i=p;f<=i;i--)for(u=c;o[i]&&u<d;u++)(r=o[i][u])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(3===n)for(i=p;f<=i;i--)for(u=d;o[i]&&c<=u;u--)(r=o[i][u])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);return a.tilesDrawn=s.length,a.tilesTotal=l*e,s}},function(g,b){g.exports=function(t,h,n){var s=n.collideIndexes.indexOf(t);h&&-1===s?n.collideIndexes.push(t):h||-1===s||n.collideIndexes.splice(s,1)}},function(g,b,t){var h=t(2);g.exports=function(n,s,u){if(!s)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=s.x+h(s,"startx",0)*n.tilewidth+h(s,"offsetx",0),r=s.y+h(s,"starty",0)*n.tileheight+h(s,"offsety",0);return{i:0,layers:s.layers,name:u.name+s.name+"/",opacity:u.opacity*s.opacity,visible:u.visible&&s.visible,x:u.x+i,y:u.y+r}}},function(g,b){g.exports=function(t,h,n){return t.hasOwnProperty(h)?"function"==typeof t[h]?function(s,u,i,r,o,l){return t[h](s,u,i,r,o,l)}:function(){return t[h]}:"function"==typeof n?n:function(){return n}}},function(g,b,t){var h=t(261),n=t(13),s=t(96),u=t(80),i=t(160),r=t(579),o=t(259),l=t(6),e=t(260),a=t(262),c=t(264);g.exports=function(d,f,p){void 0===p&&(p=h);for(var v=p.targets?p.targets:o(f),m=r(f),x=i(f,"delay",p.delay),y=i(f,"duration",p.duration),w=l(f,"easeParams",p.easeParams),T=u(l(f,"ease",p.ease),w),E=i(f,"hold",p.hold),S=i(f,"repeat",p.repeat),A=i(f,"repeatDelay",p.repeatDelay),_=s(f,"yoyo",p.yoyo),C=s(f,"flipX",p.flipX),M=s(f,"flipY",p.flipY),R=[],L=0;L<m.length;L++)for(var D=m[L].key,F=m[L].value,U=0;U<v.length;U++){var P=e(D,F),O=c(v[U],U,D,P.getEnd,P.getStart,P.getActive,u(l(F,"ease",T),l(F,"easeParams",w)),i(F,"delay",x),i(F,"duration",y),s(F,"yoyo",_),i(F,"hold",E),i(F,"repeat",S),i(F,"repeatDelay",A),s(F,"flipX",C),s(F,"flipY",M));R.push(O)}var B=new a(d,R,v);B.offset=n(f,"offset",null),B.completeDelay=n(f,"completeDelay",0),B.loop=Math.round(n(f,"loop",0)),B.loopDelay=Math.round(n(f,"loopDelay",0)),B.paused=s(f,"paused",!1),B.useFrames=s(f,"useFrames",!1);for(var k=l(f,"callbackScope",B),I=[B,null],N=a.TYPES,Y=0;Y<N.length;Y++){var X,W,G=N[Y],z=l(f,G,!1);z&&(X=l(f,G+"Scope",k),W=l(f,G+"Params",[]),B.setCallback(G,z,I.concat(W),X))}return B}},function(g,b,t){var h=t(0),n=t(99),s=t(2),u=t(130),i=t(182),r=new h({initialize:function(o){this.parent=o,this.animationManager=o.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0},chain:function(o){var l=this.parent;if(void 0===o)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(o)||(o=[o]);for(var e=0;e<o.length;e++){var a=o[e];null===this.nextAnim?this.nextAnim=a:this.nextAnimsQueue.push(a)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(o){this.isPlaying&&this.stop();var l,e,a,c,d,f=this.animationManager,p="string"==typeof o?o:s(o,"key",null),v=this.exists(p)?this.get(p):f.get(p);return v?(l=(this.currentAnim=v).getTotalFrames(),e=s(o,"frameRate",v.frameRate),a=s(o,"duration",v.duration),v.calculateDuration(this,l,a,e),this.delay=s(o,"delay",v.delay),this.repeat=s(o,"repeat",v.repeat),this.repeatDelay=s(o,"repeatDelay",v.repeatDelay),this.yoyo=s(o,"yoyo",v.yoyo),this.showOnStart=s(o,"showOnStart",v.showOnStart),this.hideOnComplete=s(o,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=s(o,"skipMissedFrames",v.skipMissedFrames),this.timeScale=s(o,"timeScale",this.timeScale),(c=s(o,"startFrame",0))>v.getTotalFrames()&&(c=0),d=v.frames[c],0!==c||this.forward||(d=v.getLastFrame()),this.currentFrame=d):console.warn("Missing animation: "+p),this.parent},pause:function(o){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==o&&this.setCurrentFrame(o),this.parent},resume:function(o){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==o&&this.setCurrentFrame(o),this.parent},playAfterDelay:function(o,l){var e;return this.isPlaying?((e=this.nextAnim)&&this.nextAnimsQueue.unshift(e),this.nextAnim=o,this._pendingStop=1,this._pendingStopValue=l):(this.delayCounter=l,this.play(o,!0)),this.parent},playAfterRepeat:function(o,l){var e;return void 0===l&&(l=1),this.isPlaying?((e=this.nextAnim)&&this.nextAnimsQueue.unshift(e),-1!==this.repeatCounter&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=o,this._pendingStop=2,this._pendingStopValue=l):this.play(o),this.parent},play:function(o,l){void 0===l&&(l=!1);var e=this.currentAnim;if(l&&this.isPlaying&&e.key===("string"==typeof o?o:o.key))return this.parent;if(e&&this.isPlaying){var d=this.animationManager.getMix(e.key,o);if(0<d)return this.playAfterDelay(o,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o)},playReverse:function(o,l){return void 0===l&&(l=!1),l&&this.isPlaying&&this.currentAnim.key===("string"==typeof o?o:o.key)?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o))},startAnimation:function(o){this.load(o);var l=this.currentAnim,e=this.parent;return l&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart()),e},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(o,l){var e=this.currentAnim,a=this.currentFrame,c=this.parent,d=a.textureFrame;c.emit(o,e,a,c,d),l&&c.emit(l+e.key,e,a,c,d)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var o=this.currentFrame;if(!o)return 0;var l=o.progress;return this.inReverse&&(l*=-1),l},setProgress:function(o){return this.forward||(o=1-o),this.setCurrentFrame(this.currentAnim.getFrameByProgress(o)),this.parent},setRepeat:function(o){return this.repeatCounter=-1===o?Number.MAX_VALUE:o,this.parent},globalRemove:function(o,l){void 0===l&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(o,l){void 0===o&&(o=!1),void 0===l&&(l=!1);var e=this.currentAnim,a=this.parent;return e?(l&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),e.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!o,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(e.frames[0]),this.parent):a},complete:function(){var o;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim&&(o=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(o)),this.parent},stop:function(){var o;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim&&(o=this.nextAnim,this.nextAnim=this.nextAnimsQueue.shift(),this.play(o)),this.parent},stopAfterDelay:function(o){return this._pendingStop=1,this._pendingStopValue=o,this.parent},stopAfterRepeat:function(o){return void 0===o&&(o=1),-1!==this.repeatCounter&&o>this.repeatCounter&&(o=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=o,this.parent},stopOnFrame:function(o){return this._pendingStop=3,this._pendingStopValue=o,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(o,l){var e=this.currentAnim;if(this.isPlaying&&e&&!e.paused){if(this.accumulator+=l*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?e.nextFrame(this):e.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick))for(var a=0;this.forward?e.nextFrame(this):e.previousFrame(this),a++,this.accumulator>this.nextTick&&a<60;);}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(o){var l=this.parent;return this.currentFrame=o,l.texture=o.frame.texture,l.frame=o.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),o.setAlpha&&(l.alpha=o.alpha),l.setSizeToFrame(),l._originComponent&&(o.frame.customPivot?l.setOrigin(o.frame.pivotX,o.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===o&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(o){return this.anims?this.anims.get(o):null},exists:function(o){return!!this.anims&&this.anims.has(o)},create:function(o){var l=o.key,e=!1;return l&&((e=this.get(l))||(e=new i(this,l,o),this.anims||(this.anims=new n),this.anims.set(l,e))),e},generateFrameNames:function(o,l){return this.animationManager.generateFrameNames(o,l)},generateFrameNumbers:function(o,l){return this.animationManager.generateFrameNumbers(o,l)},remove:function(o){var l=this.get(o);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(o)),l},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});g.exports=r},function(g,b,t){var h={};g.exports=h;var n=t(268),s=t(50),u=t(117),i=t(71);h.create=function(r){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},h.setModified=function(r,o,l,e){if(n.trigger(r,"compositeModified",r),r.isModified=o,l&&r.parent&&h.setModified(r.parent,o,l,e),e)for(var a=0;a<r.composites.length;a++)h.setModified(r.composites[a],o,l,e)},h.add=function(r,o){var l=[].concat(o);n.trigger(r,"beforeAdd",{object:o});for(var e=0;e<l.length;e++){var a=l[e];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(r,a);break;case"constraint":h.addConstraint(r,a);break;case"composite":h.addComposite(r,a);break;case"mouseConstraint":h.addConstraint(r,a.constraint)}}return n.trigger(r,"afterAdd",{object:o}),r},h.remove=function(r,o,l){var e=[].concat(o);n.trigger(r,"beforeRemove",{object:o});for(var a=0;a<e.length;a++){var c=e[a];switch(c.type){case"body":h.removeBody(r,c,l);break;case"constraint":h.removeConstraint(r,c,l);break;case"composite":h.removeComposite(r,c,l);break;case"mouseConstraint":h.removeConstraint(r,c.constraint)}}return n.trigger(r,"afterRemove",{object:o}),r},h.addComposite=function(r,o){return r.composites.push(o),o.parent=r,h.setModified(r,!0,!0,!1),r},h.removeComposite=function(r,o,l){var e=r.composites.indexOf(o);if(-1!==e&&(h.removeCompositeAt(r,e),h.setModified(r,!0,!0,!1)),l)for(var a=0;a<r.composites.length;a++)h.removeComposite(r.composites[a],o,!0);return r},h.removeCompositeAt=function(r,o){return r.composites.splice(o,1),h.setModified(r,!0,!0,!1),r},h.addBody=function(r,o){return r.bodies.push(o),h.setModified(r,!0,!0,!1),r},h.removeBody=function(r,o,l){var e=r.bodies.indexOf(o);if(-1!==e&&(h.removeBodyAt(r,e),h.setModified(r,!0,!0,!1)),l)for(var a=0;a<r.composites.length;a++)h.removeBody(r.composites[a],o,!0);return r},h.removeBodyAt=function(r,o){return r.bodies.splice(o,1),h.setModified(r,!0,!0,!1),r},h.addConstraint=function(r,o){return r.constraints.push(o),h.setModified(r,!0,!0,!1),r},h.removeConstraint=function(r,o,l){var e=r.constraints.indexOf(o);if(-1!==e&&h.removeConstraintAt(r,e),l)for(var a=0;a<r.composites.length;a++)h.removeConstraint(r.composites[a],o,!0);return r},h.removeConstraintAt=function(r,o){return r.constraints.splice(o,1),h.setModified(r,!0,!0,!1),r},h.clear=function(r,o,l){if(l)for(var e=0;e<r.composites.length;e++)h.clear(r.composites[e],o,!0);return o?r.bodies=r.bodies.filter(function(a){return a.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,h.setModified(r,!0,!0,!1),r},h.allBodies=function(r){for(var o=[].concat(r.bodies),l=0;l<r.composites.length;l++)o=o.concat(h.allBodies(r.composites[l]));return o},h.allConstraints=function(r){for(var o=[].concat(r.constraints),l=0;l<r.composites.length;l++)o=o.concat(h.allConstraints(r.composites[l]));return o},h.allComposites=function(r){for(var o=[].concat(r.composites),l=0;l<r.composites.length;l++)o=o.concat(h.allComposites(r.composites[l]));return o},h.get=function(r,o,l){var e,a;switch(l){case"body":e=h.allBodies(r);break;case"constraint":e=h.allConstraints(r);break;case"composite":e=h.allComposites(r).concat(r)}return e&&0!==(a=e.filter(function(c){return c.id.toString()===o.toString()})).length?a[0]:null},h.move=function(r,o,l){return h.remove(r,o),h.add(l,o),r},h.rebase=function(r){for(var o=h.allBodies(r).concat(h.allConstraints(r)).concat(h.allComposites(r)),l=0;l<o.length;l++)o[l].id=s.nextId();return h.setModified(r,!0,!0,!1),r},h.translate=function(r,o,l){for(var e=l?h.allBodies(r):r.bodies,a=0;a<e.length;a++)i.translate(e[a],o);return h.setModified(r,!0,!0,!1),r},h.rotate=function(r,o,l,e){for(var a=Math.cos(o),c=Math.sin(o),d=e?h.allBodies(r):r.bodies,f=0;f<d.length;f++){var p=d[f],v=p.position.x-l.x,m=p.position.y-l.y;i.setPosition(p,{x:l.x+(v*a-m*c),y:l.y+(v*c+m*a)}),i.rotate(p,o)}return h.setModified(r,!0,!0,!1),r},h.scale=function(r,o,l,e,a){for(var c=a?h.allBodies(r):r.bodies,d=0;d<c.length;d++){var f=c[d];i.setPosition(f,{x:e.x+(f.position.x-e.x)*o,y:e.y+(f.position.y-e.y)*l}),i.scale(f,o,l)}return h.setModified(r,!0,!0,!1),r},h.bounds=function(r){for(var o=h.allBodies(r),l=[],e=0;e<o.length;e+=1){var a=o[e];l.push(a.bounds.min,a.bounds.max)}return u.create(l)}},function(g,b){g.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){return void 0===u&&(u=new h),u.x=n.x+n.radius*Math.cos(s),u.y=n.y+n.radius*Math.sin(s),u}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var u=2*Math.PI*Math.random(),i=Math.random()+Math.random(),r=1<i?2-i:i,o=r*Math.cos(u),l=r*Math.sin(u);return s.x=n.x+o*n.radius,s.y=n.y+l*n.radius,s}},function(g,b,t){var h=t(128),n=t(4);g.exports=function(s,u,i){if(void 0===i&&(i=new n),u<=0||1<=u)return i.x=s.x,i.y=s.y,i;var r=h(s)*u;return.5<u?(r-=s.width+s.height)<=s.width?(i.x=s.right-r,i.y=s.bottom):(i.x=s.x,i.y=s.bottom-(r-s.width)):r<=s.width?(i.x=s.x+r,i.y=s.y):(i.x=s.right,i.y=s.y+(r-s.width)),i}},function(g,b,t){var h=t(64),n=t(4);g.exports=function(s,u,i,r){void 0===r&&(r=[]),!u&&0<i&&(u=h(s)/i);for(var o=s.x1,l=s.y1,e=s.x2,a=s.y2,c=0;c<u;c++){var d=c/u;r.push(new n(o+(e-o)*d,l+(a-l)*d))}return r}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var u=Math.random();return s.x=n.x1+u*(n.x2-n.x1),s.y=n.y1+u*(n.y2-n.y1),s}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.x+Math.random()*n.width,s.y=n.y+Math.random()*n.height,s}},function(g,b,t){var h=t(172),n=t(65),s=t(74);g.exports={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(i){void 0===i&&(i=n.MULTI_PIPELINE);var r=this.scene.sys.renderer.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var o=r.get(i);if(o)return this.defaultPipeline=o,this.pipeline=o,!0}return!1},setPipeline:function(i,r,o){var l,e=this.scene.sys.renderer.pipelines;return e&&((l=e.get(i))&&(this.pipeline=l),r&&(this.pipelineData=o?h(r):r)),this},setPostPipeline:function(i,r,o){var l=this.scene.sys.renderer.pipelines;if(l){Array.isArray(i)||(i=[i]);for(var e=0;e<i.length;e++){var a=l.getPostPipeline(i[e],this);a&&this.postPipelines.push(a)}r&&(this.pipelineData=o?h(r):r)}return this.hasPostPipeline=0<this.postPipelines.length,this},setPipelineData:function(i,r){var o=this.pipelineData;return void 0===r?delete o[i]:o[i]=r,this},getPostPipeline:function(i){for(var r=this.postPipelines,o=0;o<r.length;o++){var l=r[o];if("string"==typeof i&&l.name===i||l instanceof i)return l}},resetPipeline:function(i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),this.pipeline=this.defaultPipeline,i&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(i){void 0===i&&(i=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,i&&(this.pipelineData={})},removePostPipeline:function(i){for(var r=this.postPipelines,o=0;o<r.length;o++){var l=r[o];if("string"==typeof i&&l.name===i||"string"!=typeof i&&l instanceof i)return l.destroy(),s(r,o),this}return this},getPipelineName:function(){return this.pipeline.name}}},function(g,b){var t=function(h){var n,u;if("object"!=typeof h||null===h)return h;for(u in n=Array.isArray(h)?[]:{},h)n[u]=t(h[u]);return n};g.exports=t},function(g,b){g.exports=function(t){var h={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(h.textureKey=t.texture.key,h.frameKey=t.frame.name),h}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r,o,l,e){void 0===e&&(e=new h);var a=Math.sin(r),c=Math.cos(r),d=c*o,f=a*o,p=-a*l,v=c*l,m=1/(d*v+p*-f);return e.x=v*m*n+-p*m*s+(i*p-u*v)*m,e.y=d*m*s+-f*m*n+(-i*d+u*f)*m,e}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);for(var n=null,s=0;s<h;s++)n=t.shift(),t.push(n);return n}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);for(var n=null,s=0;s<h;s++)n=t.pop(),t.unshift(n);return n}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var u=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return s.x=n.x+i*Math.cos(u)*n.width/2,s.y=n.y+i*Math.sin(u)*n.height/2,s}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var u=n.x2-n.x1,i=n.y2-n.y1,r=n.x3-n.x1,o=n.y3-n.y1,l=Math.random(),e=Math.random();return 1<=l+e&&(l=1-l,e=1-e),s.x=n.x1+(u*l+r*e),s.y=n.y1+(i*l+o*e),s}},function(g,b){g.exports=function(t,h,n,s,u){var i=s+Math.atan2(t.y-n,t.x-h);return t.x=h+u*Math.cos(i),t.y=n+u*Math.sin(i),t}},function(g,b){g.exports=function(t,h,n){return(t=Math.max(0,Math.min(1,(t-h)/(n-h))))*t*t*(t*(6*t-15)+10)}},function(g,b){g.exports=function(t,h,n){return t<=h?0:n<=t?1:(t=(t-h)/(n-h))*t*(3-2*t)}},function(g,b,t){var h=t(18),n=t(0),s=t(130),u=t(312),i=t(313),r=t(6),o=t(314),l=new n({initialize:function(e,a,c){this.manager=e,this.key=a,this.type="frame",this.frames=this.getFrames(e.textureManager,r(c,"frames",[]),r(c,"defaultTextureKey",null),r(c,"sortFrames",!0)),this.frameRate=r(c,"frameRate",null),this.duration=r(c,"duration",null),this.skipMissedFrames=r(c,"skipMissedFrames",!0),this.delay=r(c,"delay",0),this.repeat=r(c,"repeat",0),this.repeatDelay=r(c,"repeatDelay",0),this.yoyo=r(c,"yoyo",!1),this.showOnStart=r(c,"showOnStart",!1),this.hideOnComplete=r(c,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,a,c,d){null===c&&null===d?(e.frameRate=24,e.duration=24/a*1e3):c&&null===d?(e.duration=c,e.frameRate=a/(c/1e3)):(e.frameRate=d,e.duration=a/d*1e3),e.msPerFrame=1e3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,a){var c,d,f=this.getFrames(this.manager.textureManager,a);return 0<f.length&&(0===e?this.frames=f.concat(this.frames):e===this.frames.length?this.frames=this.frames.concat(f):(c=this.frames.slice(0,e),d=this.frames.slice(e),this.frames=c.concat(f,d)),this.updateFrameSequence()),this},checkFrame:function(e){return 0<=e&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,a,c,d){void 0===d&&(d=!0);var f,p,v,m=[],x=1;if("string"==typeof a&&(v=e.get(p=a).getFrameNames(),d&&o(v),a=[],v.forEach(function(C){a.push({key:p,frame:C})})),!Array.isArray(a)||0===a.length)return m;for(_=0;_<a.length;_++){var y,w,T,E=a[_],S=r(E,"key",c);S&&(y=r(E,"frame",0),w=e.getFrame(S,y),(T=new i(S,y,x,w)).duration=r(E,"duration",0),T.isFirst=!f,f&&((f.nextFrame=T).prevFrame=f),m.push(T),f=T,x++)}if(0<m.length){T.isLast=!0,T.nextFrame=m[0],m[0].prevFrame=T;for(var A=1/(m.length-1),_=0;_<m.length;_++)m[_].progress=_*A}return m},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameByProgress:function(e){return e=h(e,0,1),u(e,this.frames,"progress")},nextFrame:function(e){var a=e.currentFrame;a.isLast?e.yoyo?this.handleYoyoFrame(e,!1):0<e.repeatCounter?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,a.nextFrame)},handleYoyoFrame:function(e,a){if(e.inReverse===!(a=a||!1)&&0<e.repeatCounter)return 0!==e.repeatDelay&&!e.pendingRepeat||(e.forward=a),void this.repeatAnimation(e);var c;e.inReverse===a||0!==e.repeatCounter?(c=(e.forward=a)?e.currentFrame.nextFrame:e.currentFrame.prevFrame,this.updateAndGetNextTick(e,c)):e.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var a=e.currentFrame;a.isFirst?e.yoyo?this.handleYoyoFrame(e,!0):0<e.repeatCounter?(e.inReverse&&!e.forward||(e.forward=!0),this.repeatAnimation(e)):e.complete():this.updateAndGetNextTick(e,a.prevFrame)},updateAndGetNextTick:function(e,a){e.setCurrentFrame(a),this.getNextTick(e)},removeFrame:function(e){var a=this.frames.indexOf(e);return-1!==a&&this.removeFrameAt(a),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(2===e._pendingStop){if(0===e._pendingStopValue)return e.stop();e._pendingStopValue--}0<e.repeatDelay&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.setCurrentFrame(e.forward?e.currentFrame.nextFrame:e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(a){e.frames.push(a.toJSON())}),e},updateFrameSequence:function(){for(var e,a=this.frames.length,c=1/(a-1),d=0;d<a;d++)(e=this.frames[d]).index=d+1,e.isFirst=!1,e.isLast=!1,e.progress=d*c,0===d?(e.isFirst=!0,1===a?(e.isLast=!0,(e.nextFrame=e).prevFrame=e):(e.isLast=!1,e.prevFrame=this.frames[a-1],e.nextFrame=this.frames[d+1])):d===a-1&&1<a?(e.isLast=!0,e.prevFrame=this.frames[a-2],e.nextFrame=this.frames[0]):1<a&&(e.prevFrame=this.frames[d-1],e.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}});g.exports=l},function(g,b){g.exports=function(t,h,n,s){var u;if(void 0===h&&(h=0),void 0===n&&(n=" "),void 0===s&&(s=3),h+1>=(t=t.toString()).length)switch(s){case 1:t=new Array(h+1-t.length).join(n)+t;break;case 3:var i=Math.ceil((u=h-t.length)/2);t=new Array(u-i+1).join(n)+t+new Array(i+1).join(n);break;default:t+=new Array(h+1-t.length).join(n)}return t}},function(g,b,t){var h=t(321),n=t(186),s=t(325),u=t(326);g.exports=function(i){switch(typeof i){case"string":return("rgb"===i.substr(0,3).toLowerCase()?u:h)(i);case"number":return n(i);case"object":return s(i)}}},function(g,b,t){var h=t(100);function n(s,u,i,r){var o=(s+6*u)%6,l=Math.min(o,4-o,1);return Math.round(255*(r-r*i*Math.max(0,l)))}g.exports=function(s,u,i,r){void 0===u&&(u=1),void 0===i&&(i=1);var o=n(5,s,u,i),l=n(3,s,u,i),e=n(1,s,u,i);return r?r.setTo?r.setTo(o,l,e,r.alpha,!1):(r.r=o,r.g=l,r.b=e,r.color=h(o,l,e),r):{r:o,g:l,b:e,color:h(o,l,e)}}},function(g,b,t){var h=t(36),n=t(324);g.exports=function(s){var u=n(s);return new h(u.r,u.g,u.b,u.a)}},function(g,b){g.exports=function(t,h,n){return t.x=h-t.width/2,t.y=n-t.height/2,t}},function(g,b,t){var h=t(102),n=t(134),s=t(31),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};g.exports=function(){u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch(e){u.localStorage=!1}u.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),u.fileSystem=!!window.requestFileSystem;var i,r,o,l=!1;return u.webGL=function(){if(window.WebGLRenderingContext)try{var e=s.createWebGL(this),a=e.getContext("webgl")||e.getContext("experimental-webgl"),c=s.create2D(this),d=c.getContext("2d").createImageData(1,1);return l=d.data instanceof Uint8ClampedArray,s.remove(e),s.remove(c),!!a}catch(f){return!1}return!1}(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(u.getUserMedia=!1),!h.iOS&&(n.ie||n.firefox||n.chrome)&&(u.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(u.littleEndian=(i=new ArrayBuffer(4),r=new Uint8Array(i),o=new Uint32Array(i),r[0]=161,r[1]=178,r[2]=195,r[3]=212,3569595041===o[0]||2712847316!==o[0]&&null)),u.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==u.littleEndian&&l,u}()},function(g,b){var t="";function h(n){for(var s=["i","webkitI","msI","mozI","oI"],u=0;u<s.length;u++){var i=s[u]+"mageSmoothingEnabled";if(i in n)return i}return null}g.exports={disable:function(n){return""===t&&(t=h(n)),t&&(n[t]=!1),n},enable:function(n){return""===t&&(t=h(n)),t&&(n[t]=!0),n},getPrefix:h,isEnabled:function(n){return null!==t?n[t]:null}}},function(g,b,t){var h=t(14),n=t(17)(!1,n={Angle:t(809),Distance:t(818),Easing:t(823),Fuzzy:t(824),Interpolation:t(827),Pow2:t(832),Snap:t(834),RandomDataGenerator:t(836),Average:t(837),Bernstein:t(350),Between:t(192),CatmullRom:t(191),CeilTo:t(838),Clamp:t(18),DegToRad:t(34),Difference:t(839),Euler:t(840),Factorial:t(351),FloatBetween:t(135),FloorTo:t(841),FromPercent:t(95),GetSpeed:t(842),IsEven:t(843),IsEvenStrict:t(844),Linear:t(133),MaxAdd:t(845),MinSub:t(846),Percent:t(847),RadToDeg:t(193),RandomXY:t(848),RandomXYZ:t(849),RandomXYZW:t(850),Rotate:t(356),RotateAround:t(302),RotateAroundDistance:t(179),RotateTo:t(851),RoundAwayFromZero:t(357),RoundTo:t(852),SinCosTableGenerator:t(853),SmootherStep:t(180),SmoothStep:t(181),ToXY:t(854),TransformXY:t(174),Within:t(855),Wrap:t(66),Vector2:t(3),Vector3:t(37),Vector4:t(138),Matrix3:t(358),Matrix4:t(67),Quaternion:t(359),RotateVec3:t(856)},h);g.exports=n},function(g,b){g.exports=function(t,h,n,s,u){var i=.5*(s-h),r=.5*(u-n),o=t*t;return(2*n-2*s+i+r)*(t*o)+(-3*n+3*s-2*i-r)*o+i*t+n}},function(g,b){g.exports=function(t,h){return Math.floor(Math.random()*(h-t+1)+t)}},function(g,b,t){var h=t(14);g.exports=function(n){return n*h.RAD_TO_DEG}},function(g,b,t){g.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(g,b,t){var h=new(t(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){var n;return this._dirty&&((n=new Float32Array(this._matrix))[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1),this._data},brightness:function(n,s){return void 0===n&&(n=0),void 0===s&&(s=!1),this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],s)},saturate:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var u=2*n/3+1,i=-.5*(u-1);return this.multiply([u,i,i,0,0,i,u,i,0,0,i,i,u,0,0,0,0,0,1,0],s)},desaturate:function(n){return void 0===n&&(n=!1),this.saturate(-1,n)},hue:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1),n=n/180*Math.PI;var u=Math.cos(n),i=Math.sin(n);return this.multiply([.213+.787*u+-.213*i,.715+-.715*u+-.715*i,.072+-.072*u+.928*i,0,0,.213+-.213*u+.143*i,.715+.28500000000000003*u+.14*i,.072+-.072*u+-.283*i,0,0,.213+-.213*u+-.787*i,.715+-.715*u+.715*i,.072+.928*u+.072*i,0,0,0,0,0,1,0],s)},grayscale:function(n,s){return void 0===n&&(n=1),void 0===s&&(s=!1),this.saturate(-n,s)},blackWhite:function(n){return void 0===n&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var u=n+1,i=-.5*(u-1);return this.multiply([u,0,0,0,i,0,u,0,0,i,0,0,u,0,i,0,0,0,1,0],s)},negative:function(n){return void 0===n&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return void 0===n&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return void 0===n&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,s){return void 0===n&&(n=.1),void 0===s&&(s=!1),this.multiply([-2*n,-n,0,0,0,-n,0,n,0,0,0,n,2*n,0,0,0,0,0,1,0],s)},lsd:function(n){return void 0===n&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return void 0===n&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return void 0===n&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return void 0===n&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return void 0===n&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return void 0===n&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return void 0===n&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,s){s||this.reset();for(var u=this._matrix,i=[],r=0;r<20;r++)i[r]=u[r];return u[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],u[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],u[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],u[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],u[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],u[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],u[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],u[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],u[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],u[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],u[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],u[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],u[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],u[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],u[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],u[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],u[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],u[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],u[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],u[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],this._dirty=!0,this}});g.exports=h},function(g,b,t){var h=t(10),n=t(14);g.exports=function(s,u){if(void 0===u&&(u=new h),0===s.length)return u;for(var i,r,o,l=Number.MAX_VALUE,e=Number.MAX_VALUE,a=n.MIN_SAFE_INTEGER,c=n.MIN_SAFE_INTEGER,d=0;d<s.length;d++)i=s[d],o=Array.isArray(i)?(r=i[0],i[1]):(r=i.x,i.y),l=Math.min(l,r),e=Math.min(e,o),a=Math.max(a,r),c=Math.max(c,o);return u.x=l,u.y=e,u.width=a-l,u.height=c-e,u}},function(g,b,t){var h=t(0),n=t(1),s=new h({initialize:function(u,i,r){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(u,i,r)},set:function(u,i,r){return void 0===u&&(u=0),void 0===i&&(i=0),void 0===r&&(r=0),this._rgb=[u,i,r],this.onChange(),this},equals:function(u,i,r){var o=this._rgb;return o.r===u&&o.g===i&&o.b===r},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});g.exports=s},function(g,b,t){var h={CENTER:t(397),ORIENTATION:t(398),SCALE_MODE:t(399),ZOOM:t(400)};g.exports=h},function(g,b){g.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(g,b){g.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(g,b,t){var h=t(0),n=t(142),s=t(194),u=t(21),i=t(413),r=t(414),o=t(1),l=t(415),e=new h({initialize:function(a,c){this.scene=a,this.config=c,this.settings=l.create(c),this.sceneUpdate=o},init:function(a){this.settings.status=n.INIT,this.sceneUpdate=o,this.game=a,this.renderer=a.renderer,this.canvas=a.canvas,this.context=a.context,(this.plugins=a.plugins).addToScene(this,s.Global,[s.CoreScene,r(this),i(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},install:function(a){Array.isArray(a)||(a=[a]),this.plugins.installLocal(this,a)},step:function(a,c){var d=this.events;d.emit(u.PRE_UPDATE,a,c),d.emit(u.UPDATE,a,c),this.sceneUpdate.call(this.scene,a,c),d.emit(u.POST_UPDATE,a,c)},render:function(a){var c=this.displayList;c.depthSort(),this.cameras.render(a,c),this.events.emit(u.RENDER,a)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(a){var c=this.events,d=this.settings;return this.settings.active&&(d.status=n.PAUSED,d.active=!1,c.emit(u.PAUSE,this,a)),this},resume:function(a){var c=this.events,d=this.settings;return this.settings.active||(d.status=n.RUNNING,d.active=!0,c.emit(u.RESUME,this,a)),this},sleep:function(a){var c=this.events,d=this.settings;return d.status=n.SLEEPING,d.active=!1,d.visible=!1,c.emit(u.SLEEP,this,a),this},wake:function(a){var c=this.events,d=this.settings;return d.status=n.RUNNING,d.active=!0,d.visible=!0,c.emit(u.WAKE,this,a),d.isTransition&&c.emit(u.TRANSITION_WAKE,d.transitionFrom,d.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(a){return this.settings.visible=a,this},setActive:function(a,c){return a?this.resume(c):this.pause(c)},start:function(a){var c=this.events,d=this.settings;a&&(d.data=a),d.status=n.START,d.active=!0,d.visible=!0,c.emit(u.START,this),c.emit(u.READY,this,a)},shutdown:function(a){var c=this.events,d=this.settings;c.off(u.TRANSITION_INIT),c.off(u.TRANSITION_START),c.off(u.TRANSITION_COMPLETE),c.off(u.TRANSITION_OUT),d.status=n.SHUTDOWN,d.active=!1,d.visible=!1,c.emit(u.SHUTDOWN,this,a)},destroy:function(){var a=this.events,c=this.settings;c.status=n.DESTROYED,c.active=!1,c.visible=!1,a.emit(u.DESTROY,this),a.removeAllListeners();for(var d=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],f=0;f<d.length;f++)this[d[f]]=null}});g.exports=e},function(g,b){g.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(g,b,t){var h=t(0),n=t(106),s=t(418),u="Texture.frame missing: ",i=new h({initialize:function(r,o,l,e,a){Array.isArray(l)||(l=[l]),this.manager=r,this.key=o,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var c=this.frameTotal=0;c<l.length;c++)this.source.push(new s(this,l[c],e,a))},add:function(r,o,l,e,a,c){if(this.has(r))return null;var d=new n(this,r,o,l,e,a,c);return this.frames[r]=d,"__BASE"===this.firstFrame&&(this.firstFrame=r),this.frameTotal++,d},remove:function(r){return!!this.has(r)&&(this.get(r).destroy(),delete this.frames[r],!0)},has:function(r){return this.frames[r]},get:function(r){var o=this.frames[r=r||this.firstFrame];return o||(console.warn(u+r),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(r){for(var o=0;o<this.source.length;o++)if(this.source[o]===r)return o;return-1},getFramesFromTextureSource:function(r,o){void 0===o&&(o=!1);var l,e=[];for(var a in this.frames)"__BASE"===a&&!o||(l=this.frames[a]).sourceIndex===r&&e.push(l);return e},getFrameNames:function(r){void 0===r&&(r=!1);var o,l=Object.keys(this.frames);return r||-1!==(o=l.indexOf("__BASE"))&&l.splice(o,1),l},getSourceImage:function(r){null!=r&&1!==this.frameTotal||(r="__BASE");var o=this.frames[r];return o?o.source.image:(console.warn(u+r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){null!=r&&1!==this.frameTotal||(r="__BASE");var o=this.frames[r],l=o?o.sourceIndex:(console.warn(u+r),this.frames.__BASE.sourceIndex);return this.dataSource[l].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var l=this.source[o];this.dataSource.push(new s(this,r[o],l.width,l.height))}},setFilter:function(r){for(var o=0;o<this.source.length;o++)this.source[o].setFilter(r);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(r)},destroy:function(){for(var r=0;r<this.source.length;r++)this.source[r].destroy();for(r=0;r<this.dataSource.length;r++)this.dataSource[r].destroy();for(var o in this.frames)this.frames[o].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});g.exports=i},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){void 0===i&&(i=0),void 0===r&&(r=n.length);var o=[];if(h(n,i,r))for(var l=i;l<r;l++){var e=n[l];(!s||s&&void 0===u&&e.hasOwnProperty(s)||s&&void 0!==u&&e[s]===u)&&o.push(e)}return o}},function(g,b,t){g.exports={Matrix:t(1009),Add:t(1017),AddAt:t(1018),BringToTop:t(1019),CountAllMatching:t(1020),Each:t(1021),EachInRange:t(1022),FindClosestInSorted:t(312),GetAll:t(204),GetFirst:t(422),GetRandom:t(207),MoveDown:t(1023),MoveTo:t(1024),MoveUp:t(1025),NumberArray:t(316),NumberArrayStep:t(1026),QuickSelect:t(430),Range:t(431),Remove:t(89),RemoveAt:t(1027),RemoveBetween:t(1028),RemoveRandomElement:t(1029),Replace:t(1030),RotateLeft:t(175),RotateRight:t(176),SafeRange:t(78),SendToBack:t(1031),SetAll:t(1032),Shuffle:t(129),SortByDigits:t(314),SpliceOne:t(74),StableSort:t(79),Swap:t(1033)}},function(g,b){g.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var h=t[0].length,n=1;n<t.length;n++)if(t[n].length!==h)return!1;return!0}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=t.length);var s=h+Math.floor(Math.random()*n);return void 0===t[s]?null:t[s]}},function(g,b,t){var h=t(0),n=t(9),s=t(432),u=new h({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(i){return this._pending.push(i),this._toProcess++,i},remove:function(i){return this._destroy.push(i),this._toProcess++,i},removeAll:function(){for(var i=this._active,r=this._destroy,o=i.length;o--;)r.push(i[o]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;for(var i,r=this._destroy,o=this._active,l=0;l<r.length;l++){var e=o.indexOf(i=r[l]);-1!==e&&(o.splice(e,1),this.emit(s.PROCESS_QUEUE_REMOVE,i))}for(r.length=0,r=this._pending,l=0;l<r.length;l++)i=r[l],(!this.checkQueue||this.checkQueue&&-1===o.indexOf(i))&&(o.push(i),this.emit(s.PROCESS_QUEUE_ADD,i));return r.length=0,this._toProcess=0,o},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});g.exports=u},function(g,b){function t(h,n){return parseInt(h.getAttribute(n),10)}g.exports=function(h,n,s,u,i){void 0===s&&(s=0),void 0===u&&(u=0);var r=n.cutX,o=n.cutY,l=n.source.width,e=n.source.height,a=n.sourceIndex,c={},d=h.getElementsByTagName("info")[0],f=h.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=t(d,"size"),c.lineHeight=t(f,"lineHeight")+u,c.chars={};var p,v,m=h.getElementsByTagName("char"),x=void 0!==n&&n.trimmed;x&&(p=n.height,v=n.width);for(var y=0;y<m.length;y++){var w=m[y],T=t(w,"id"),E=String.fromCharCode(T),S=t(w,"x"),A=t(w,"y"),_=t(w,"width"),C=t(w,"height");x&&(S<v&&(v=S),A<p&&(p=A)),x&&0!==p&&0!==v&&(S-=n.x,A-=n.y);var M,R=(r+S)/l,L=(o+A)/e,D=(r+S+_)/l,F=(o+A+C)/e;c.chars[T]={x:S,y:A,width:_,height:C,centerX:Math.floor(_/2),centerY:Math.floor(C/2),xOffset:t(w,"xoffset"),yOffset:t(w,"yoffset"),xAdvance:t(w,"xadvance")+s,data:{},kerning:{},u0:R,v0:L,u1:D,v1:F},!i||0===_||0===C||(M=i.add(E,a,S,A,_,C))&&M.setUVs(_,C,R,L,D,F)}var U=h.getElementsByTagName("kerning");for(y=0;y<U.length;y++){var P=U[y],O=t(P,"first"),B=t(P,"second"),k=t(P,"amount");c.chars[B].kerning[O]=k}return c}},function(g,b,t){var h=t(1043),n=t(434),s=t(0),u=t(11),i=t(106),r=t(15),o=t(107),l=new s({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,h],initialize:function(e,a,c,d,f){r.call(this,e,"Blitter"),this.setTexture(d,f),this.setPosition(a,c),this.initPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(e,a,c,d,f){void 0===d&&(d=!0),void 0===f&&(f=this.children.length),void 0===c?c=this.frame:c instanceof i||(c=this.texture.get(c));var p=new n(this,e,a,c,d);return this.children.addAt(p,f,!1),this.dirty=!0,p},createFromCallback:function(e,a,c,d){for(var f=this.createMultiple(a,c,d),p=0;p<f.length;p++)e.call(this,f[p],p);return f},createMultiple:function(e,a,c){void 0===a&&(a=this.frame.name),void 0===c&&(c=!0),Array.isArray(a)||(a=[a]);var d=[],f=this;return a.forEach(function(p){for(var v=0;v<e;v++)d.push(f.create(0,0,p,c))}),d},childCanRender:function(e){return e.visible&&0<e.alpha},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});g.exports=l},function(g,b,t){var h=t(205),n=t(33),s=t(0),u=t(11),i=t(75),r=t(15),o=t(10),l=t(1046),e=t(435),a=t(3),c=new s({Extends:r,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,l],initialize:function(d,f,p,v){r.call(this,d,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._displayList=d.sys.displayList,this._sortKey="",this._sysEvents=d.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(f,p),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),v&&this.add(v)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(d){return void 0===d&&(d=!0),this.exclusive=d,this},getBounds:function(d){var f;if(void 0===d&&(d=new o),d.setTo(this.x,this.y,0,0),this.parentContainer&&(f=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),d.setTo(f.x,f.y,0,0)),0<this.list.length){var p=this.list,v=new o,m=!1;d.setEmpty();for(var x=0;x<p.length;x++){var y=p[x];y.getBounds&&(y.getBounds(v),m?e(v,d,d):(d.setTo(v.x,v.y,v.width,v.height),m=!0))}}return d},addHandler:function(d){d.once(i.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(d),d.parentContainer&&d.parentContainer.remove(d),d.parentContainer=this),this.scene.sys.displayList.exists(d)||d.emit(i.ADDED_TO_SCENE,d,this.scene)},removeHandler:function(d){d.off(i.DESTROY,this.remove),this.exclusive&&(d.parentContainer=null),this.scene.sys.displayList.exists(d)||d.emit(i.REMOVED_FROM_SCENE,d,this.scene)},pointToContainer:function(d,f){void 0===f&&(f=new a),this.parentContainer?this.parentContainer.pointToContainer(d,f):f=new a(d.x,d.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(d.x,d.y,f),f},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(d){return h.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,f){return h.AddAt(this.list,d,f,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,f){return d&&(void 0===f&&(f=function(p,v){return p[d]-v[d]}),h.StableSort(this.list,f)),this},getByName:function(d){return h.GetFirst(this.list,"name",d)},getRandom:function(d,f){return h.GetRandom(this.list,d,f)},getFirst:function(d,f,p,v){return h.GetFirst(this.list,d,f,p,v)},getAll:function(d,f,p,v){return h.GetAll(this.list,d,f,p,v)},count:function(d,f,p,v){return h.CountAllMatching(this.list,d,f,p,v)},swap:function(d,f){return h.Swap(this.list,d,f),this},moveTo:function(d,f){return h.MoveTo(this.list,d,f),this},remove:function(d,f){var p=h.Remove(this.list,d,this.removeHandler,this);if(f&&p){Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++)p[v].destroy()}return this},removeAt:function(d,f){var p=h.RemoveAt(this.list,d,this.removeHandler,this);return f&&p&&p.destroy(),this},removeBetween:function(d,f,p){var v=h.RemoveBetween(this.list,d,f,this.removeHandler,this);if(p)for(var m=0;m<v.length;m++)v[m].destroy();return this},removeAll:function(d){var f=h.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(d)for(var p=0;p<f.length;p++)f[p].destroy();return this},bringToTop:function(d){return h.BringToTop(this.list,d),this},sendToBack:function(d){return h.SendToBack(this.list,d),this},moveUp:function(d){return h.MoveUp(this.list,d),this},moveDown:function(d){return h.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(d,f,p){return h.Replace(this.list,d,f)&&(this.addHandler(f),this.removeHandler(d),p&&d.destroy()),this},exists:function(d){return-1<this.list.indexOf(d)},setAll:function(d,f,p,v){return h.SetAll(this.list,d,f,p,v),this},each:function(d,f){for(var p=[null],v=this.list.slice(),m=v.length,x=2;x<arguments.length;x++)p.push(arguments[x]);for(x=0;x<m;x++)p[0]=v[x],d.apply(f,p);return this},iterate:function(d,f){for(var p=[null],v=2;v<arguments.length;v++)p.push(arguments[v]);for(v=0;v<this.list.length;v++)p[0]=this.list[v],d.apply(f,p);return this},setScrollFactor:function(d,f,p){return void 0===f&&(f=d),void 0===p&&(p=!1),this.scrollFactorX=d,this.scrollFactorY=f,p&&(h.SetAll(this.list,"scrollFactorX",d),h.SetAll(this.list,"scrollFactorY",f)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});g.exports=c},function(g,b,t){var h=t(147),n=t(0),s=t(1051),u=new n({Extends:h,Mixins:[s],initialize:function(i,r,o,l,e,a,c){h.call(this,i,r,o,l,e,a,c),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(i,r){return this.cropWidth=i,this.cropHeight=r,this},setDisplayCallback:function(i){return this.displayCallback=i,this},setScrollX:function(i){return this.scrollX=i,this},setScrollY:function(i){return this.scrollY=i,this}});g.exports=u},function(g,b,t){var h=t(131),n=t(0),s=t(214),u=t(297),i=t(298),r=t(299),o=t(303),l=t(171),e=t(306),a=t(307),c=t(308),d=t(108),f=t(15),p=t(2),v=t(6),m=t(14),x=t(65),y=t(1057),w=new n({Extends:f,Mixins:[u,i,r,o,l,a,c,e,y],initialize:function(T,E){var S=v(E,"x",0),A=v(E,"y",0);f.call(this,T,"Graphics"),this.setPosition(S,A),this.initPipeline(x.GRAPHICS_PIPELINE),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(E)},setDefaultStyles:function(T){return v(T,"lineStyle",null)&&(this.defaultStrokeWidth=v(T,"lineStyle.width",1),this.defaultStrokeColor=v(T,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(T,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(T,"fillStyle",null)&&(this.defaultFillColor=v(T,"fillStyle.color",16777215),this.defaultFillAlpha=v(T,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(T,E,S){return void 0===S&&(S=1),this.commandBuffer.push(s.LINE_STYLE,T,E,S),this._lineWidth=T,this},fillStyle:function(T,E){return void 0===E&&(E=1),this.commandBuffer.push(s.FILL_STYLE,T,E),this},fillGradientStyle:function(T,E,S,A,_,C,M,R){return void 0===_&&(_=1),void 0===C&&(C=_),void 0===M&&(M=_),void 0===R&&(R=_),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,_,C,M,R,T,E,S,A),this},lineGradientStyle:function(T,E,S,A,_,C){return void 0===C&&(C=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,T,C,E,S,A,_),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(T){return this.fillCircle(T.x,T.y,T.radius)},strokeCircleShape:function(T){return this.strokeCircle(T.x,T.y,T.radius)},fillCircle:function(T,E,S){return this.beginPath(),this.arc(T,E,S,0,m.PI2),this.fillPath(),this},strokeCircle:function(T,E,S){return this.beginPath(),this.arc(T,E,S,0,m.PI2),this.strokePath(),this},fillRectShape:function(T){return this.fillRect(T.x,T.y,T.width,T.height)},strokeRectShape:function(T){return this.strokeRect(T.x,T.y,T.width,T.height)},fillRect:function(T,E,S,A){return this.commandBuffer.push(s.FILL_RECT,T,E,S,A),this},strokeRect:function(T,E,S,A){var _=this._lineWidth/2,C=T-_,M=T+_;return this.beginPath(),this.moveTo(T,E),this.lineTo(T,E+A),this.strokePath(),this.beginPath(),this.moveTo(T+S,E),this.lineTo(T+S,E+A),this.strokePath(),this.beginPath(),this.moveTo(C,E),this.lineTo(M+S,E),this.strokePath(),this.beginPath(),this.moveTo(C,E+A),this.lineTo(M+S,E+A),this.strokePath(),this},fillRoundedRect:function(T,E,S,A,_){void 0===_&&(_=20);var C=_,M=_,R=_,L=_;return"number"!=typeof _&&(C=p(_,"tl",20),M=p(_,"tr",20),R=p(_,"bl",20),L=p(_,"br",20)),this.beginPath(),this.moveTo(T+C,E),this.lineTo(T+S-M,E),this.arc(T+S-M,E+M,M,-m.TAU,0),this.lineTo(T+S,E+A-L),this.arc(T+S-L,E+A-L,L,0,m.TAU),this.lineTo(T+R,E+A),this.arc(T+R,E+A-R,R,m.TAU,Math.PI),this.lineTo(T,E+C),this.arc(T+C,E+C,C,-Math.PI,-m.TAU),this.fillPath(),this},strokeRoundedRect:function(T,E,S,A,_){void 0===_&&(_=20);var C=_,M=_,R=_,L=_;return"number"!=typeof _&&(C=p(_,"tl",20),M=p(_,"tr",20),R=p(_,"bl",20),L=p(_,"br",20)),this.beginPath(),this.moveTo(T+C,E),this.lineTo(T+S-M,E),this.moveTo(T+S-M,E),this.arc(T+S-M,E+M,M,-m.TAU,0),this.lineTo(T+S,E+A-L),this.moveTo(T+S,E+A-L),this.arc(T+S-L,E+A-L,L,0,m.TAU),this.lineTo(T+R,E+A),this.moveTo(T+R,E+A),this.arc(T+R,E+A-R,R,m.TAU,Math.PI),this.lineTo(T,E+C),this.moveTo(T,E+C),this.arc(T+C,E+C,C,-Math.PI,-m.TAU),this.strokePath(),this},fillPointShape:function(T,E){return this.fillPoint(T.x,T.y,E)},fillPoint:function(T,E,S){return!S||S<1?S=1:(T-=S/2,E-=S/2),this.commandBuffer.push(s.FILL_RECT,T,E,S,S),this},fillTriangleShape:function(T){return this.fillTriangle(T.x1,T.y1,T.x2,T.y2,T.x3,T.y3)},strokeTriangleShape:function(T){return this.strokeTriangle(T.x1,T.y1,T.x2,T.y2,T.x3,T.y3)},fillTriangle:function(T,E,S,A,_,C){return this.commandBuffer.push(s.FILL_TRIANGLE,T,E,S,A,_,C),this},strokeTriangle:function(T,E,S,A,_,C){return this.commandBuffer.push(s.STROKE_TRIANGLE,T,E,S,A,_,C),this},strokeLineShape:function(T){return this.lineBetween(T.x1,T.y1,T.x2,T.y2)},lineBetween:function(T,E,S,A){return this.beginPath(),this.moveTo(T,E),this.lineTo(S,A),this.strokePath(),this},lineTo:function(T,E){return this.commandBuffer.push(s.LINE_TO,T,E),this},moveTo:function(T,E){return this.commandBuffer.push(s.MOVE_TO,T,E),this},strokePoints:function(T,E,S,A){void 0===E&&(E=!1),void 0===S&&(S=!1),void 0===A&&(A=T.length),this.beginPath(),this.moveTo(T[0].x,T[0].y);for(var _=1;_<A;_++)this.lineTo(T[_].x,T[_].y);return E&&this.lineTo(T[0].x,T[0].y),S&&this.closePath(),this.strokePath(),this},fillPoints:function(T,E,S,A){void 0===E&&(E=!1),void 0===S&&(S=!1),void 0===A&&(A=T.length),this.beginPath(),this.moveTo(T[0].x,T[0].y);for(var _=1;_<A;_++)this.lineTo(T[_].x,T[_].y);return E&&this.lineTo(T[0].x,T[0].y),S&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(T,E){void 0===E&&(E=32);var S=T.getPoints(E);return this.strokePoints(S,!0)},strokeEllipse:function(T,E,S,A,_){void 0===_&&(_=32);var C=new d(T,E,S,A).getPoints(_);return this.strokePoints(C,!0)},fillEllipseShape:function(T,E){void 0===E&&(E=32);var S=T.getPoints(E);return this.fillPoints(S,!0)},fillEllipse:function(T,E,S,A,_){void 0===_&&(_=32);var C=new d(T,E,S,A).getPoints(_);return this.fillPoints(C,!0)},arc:function(T,E,S,A,_,C,M){return void 0===C&&(C=!1),void 0===M&&(M=0),this.commandBuffer.push(s.ARC,T,E,S,A,_,C,M),this},slice:function(T,E,S,A,_,C,M){return void 0===C&&(C=!1),void 0===M&&(M=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,T,E),this.commandBuffer.push(s.ARC,T,E,S,A,_,C,M),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(T,E){return this.commandBuffer.push(s.TRANSLATE,T,E),this},scaleCanvas:function(T,E){return this.commandBuffer.push(s.SCALE,T,E),this},rotateCanvas:function(T){return this.commandBuffer.push(s.ROTATE,T),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(T,E,S){var A,_,C,M=this.scene.sys,R=M.game.renderer;return void 0===E&&(E=M.scale.width),void 0===S&&(S=M.scale.height),w.TargetCamera.setScene(this.scene),w.TargetCamera.setViewport(0,0,E,S),w.TargetCamera.scrollX=this.x,w.TargetCamera.scrollY=this.y,"string"==typeof T?M.textures.exists(T)?(C=(A=M.textures.get(T)).getSourceImage())instanceof HTMLCanvasElement&&(_=C.getContext("2d")):_=(A=M.textures.createCanvas(T,E,S)).getSourceImage().getContext("2d"):T instanceof HTMLCanvasElement&&(_=T.getContext("2d")),_&&(this.renderCanvas(R,this,w.TargetCamera,null,_,!1),A&&A.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});w.TargetCamera=new h,g.exports=w},function(g,b){g.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){void 0===u&&(u=new h);var r=n.height/2;return u.x=n.x+n.width/2*Math.cos(s),u.y=n.y+r*Math.sin(s),u}},function(g,b,t){var h=t(33),n=t(0),s=t(11),u=t(173),i=t(98),r=t(9),o=t(75),l=t(107),e=t(1065),a=t(21),c=t(79),d=new n({Extends:l,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,r,e],initialize:function(f,p){l.call(this,f),r.call(this),this.scene=f,this.displayList=null,this.type="Layer",this.state=0,this.name="",this.active=!0,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.ignoreDestroy=!1,this.systems=f.sys,this.events=f.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),p&&this.add(p),f.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new i(this)),this},setData:function(f,p){return this.data||(this.data=new i(this)),this.data.set(f,p),this},incData:function(f,p){return this.data||(this.data=new i(this)),this.data.inc(f,p),this},toggleData:function(f){return this.data||(this.data=new i(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new i(this)),this.data.get(f)},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(f){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&f.id)},addChildCallback:function(f){f.emit(o.ADDED_TO_SCENE,f,this.scene),f.displayList&&f.displayList.remove(f),(f.displayList=this).queueDepthSort(),this.events.emit(a.ADDED_TO_SCENE,f,this.scene)},removeChildCallback:function(f){f.emit(o.REMOVED_FROM_SCENE,f,this.scene),f.displayList=null,this.queueDepthSort(),this.events.emit(a.REMOVED_FROM_SCENE,f,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,p){return f._depth-p._depth},getChildren:function(){return this.list},destroy:function(){this.scene&&!this.ignoreDestroy&&(this.removeAll(),this.removeAllListeners(),this.resetPostPipeline(!0),this.emit(o.DESTROY,this),this.displayList&&(this.displayList.queueDepthSort(),this.displayList.remove(this)),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0)}});g.exports=d},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(444),i=t(107),r=t(446),o=t(1069),l=new h({Extends:s,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,o],initialize:function(e,a,c,d){if(s.call(this,e,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===c||"object"!=typeof c&&!Array.isArray(c)||(d=c,c=null),this.setTexture(a,c),this.initPipeline(),this.emitters=new i(this),this.wells=new i(this),d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this.createEmitter(d[f])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(e,a){return this.texture=this.scene.sys.textures.get(e),this.setFrame(a)},setFrame:function(e){this.frame=this.texture.get(e);var a=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),c=[];return a.forEach(function(d){c.push(d.name)}),this.frameNames=c,this.defaultFrame=this.frame,this},setEmitterFrames:function(e,a){Array.isArray(e)||(e=[e]);for(var c=a.frames,d=c.length=0;d<e.length;d++){var f=e[d];-1!==this.frameNames.indexOf(f)&&c.push(this.texture.get(f))}return a.defaultFrame=0<c.length?c[0]:this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new r(this,e))},removeEmitter:function(e){return this.emitters.remove(e,!0)},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new u(e))},emitParticle:function(e,a,c){for(var d=this.emitters.list,f=0;f<d.length;f++){var p=d[f];p.active&&p.emitParticle(e,a,c)}return this},emitParticleAt:function(e,a,c){return this.emitParticle(c,e,a)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,a){a*=this.timeScale;for(var c=this.emitters.list,d=0;d<c.length;d++){var f=c[d];f.active&&f.preUpdate(e,a)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});g.exports=l},function(g,b,t){var h=t(33),n=t(131),s=t(31),u=t(0),i=t(11),r=t(39),o=t(106),l=t(15),e=t(1),a=t(65),c=t(1073),d=t(139),f=t(12),p=t(219),v=new u({Extends:l,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Crop,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Tint,i.Transform,i.Visible,c],initialize:function(m,x,y,w,T,E,S){void 0===x&&(x=0),void 0===y&&(y=0),void 0===w&&(w=32),void 0===T&&(T=32),l.call(this,m,"RenderTexture"),this.renderer=m.sys.renderer,this.textureManager=m.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===E?(this.canvas=s.create2D(this,w,T),this.texture=m.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=m.sys.textures.get(E),this.frame=this.texture.get(S),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new n(0,0,w,T),this.renderTarget=null;var A=this.renderer;A?A.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new d(A,w,T,1,0,!1)):A.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=e,this.camera.setScene(m),this.setPosition(x,y),void 0===E&&this.setSize(w,T),this.setOrigin(0,0),this.initPipeline(a.SINGLE_PIPELINE)},setSize:function(m,x){return this.resize(m,x)},resize:function(m,x){void 0===x&&(x=m);var y,w,T=this.frame;m!==this.width||x!==this.height?"__BASE"===T.name&&(this.canvas.width=m,this.canvas.height=x,this.texture.width=m,this.texture.height=x,(y=this.renderTarget)&&(y.resize(m,x),T.glTexture=y.texture,T.source.isRenderTexture=!0,T.source.isGLTexture=!0,T.source.glTexture=y.texture),this.camera.setSize(m,x),T.source.width=m,T.source.height=x,T.setSize(m,x),this.width=m,this.height=x):(w=this.texture.getSourceImage(),T.cutX+m>w.width&&(m=w.width-T.cutX),T.cutY+x>w.height&&(x=w.height-T.cutY),T.setSize(m,x,T.cutX,T.cutY)),this.updateDisplayOrigin();var E=this.input;return E&&!E.customHitArea&&(E.hitArea.width=m,E.hitArea.height=x),this},setGlobalTint:function(m){return this.globalTint=m,this},setGlobalAlpha:function(m){return this.globalAlpha=m,this},saveTexture:function(m){return this.textureManager.renameTexture(this.texture.key,m),this._saved=!0,this.texture},fill:function(m,x,y,w,T,E){var S=this.frame,_=this.renderer;void 0===x&&(x=1),void 0===y&&(y=0),void 0===w&&(w=0),void 0===T&&(T=S.cutWidth),void 0===E&&(E=S.cutHeight);var C,L,D,F,U=(m>>16&255)/255,P=(m>>8&255)/255,O=(255&m)/255,B=this.renderTarget;return this.camera.preRender(),B?(B.bind(!0),(C=this.pipeline).manager.set(C),C.drawFillRect(y*(L=_.width/B.width),w*(D=_.height/B.height),T*L,E*D,f.getTintFromFloats(O,P,U,1),x),B.unbind(!0)):(_.setContext(F=this.context),F.fillStyle="rgba("+U+","+P+","+O+","+x+")",F.fillRect(y+S.cutX,w+S.cutY,T,E),_.setContext()),this.dirty=!0,this},clear:function(){var m,x;return this.dirty&&((m=this.renderTarget)?m.clear():((x=this.context).save(),x.setTransform(1,0,0,1,0,0),x.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),x.restore()),this.dirty=!1),this},erase:function(m,x,y){return this._eraseMode=!0,this.draw(m,x,y,1,16777215),this._eraseMode=!1,this},draw:function(m,x,y,w,T){return this.beginDraw(),this.batchDraw(m,x,y,w,T),this.endDraw(),this},drawFrame:function(m,x,y,w,T,E){return this.beginDraw(),this.batchDrawFrame(m,x,y,w,T,E),this.endDraw(),this},beginDraw:function(){var x=this.renderer,y=this.renderTarget;return this.camera.preRender(),y?x.beginCapture(y.width,y.height):x.setContext(this.context),this},batchDraw:function(m,x,y,w,T){return void 0===w&&(w=this.globalAlpha),T=void 0===T?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(T>>16)+(65280&T)+((255&T)<<16),Array.isArray(m)||(m=[m]),this.batchList(m,x,y,w,T),this},batchDrawFrame:function(m,x,y,w,T,E){void 0===y&&(y=0),void 0===w&&(w=0),void 0===T&&(T=this.globalAlpha),E=void 0===E?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(E>>16)+(65280&E)+((255&E)<<16);var S=this.textureManager.getFrame(m,x);return S&&(this.renderTarget?this.pipeline.batchTextureFrame(S,y,w,E,T,this.camera.matrix,null):this.batchTextureFrame(S,y+this.frame.cutX,w+this.frame.cutY,T,E)),this},endDraw:function(){var m,x=this.renderer,y=this.renderTarget;return y?(m=x.endCapture(),x.pipelines.setUtility().blitFrame(m,y,1,!1,!1,this._eraseMode),x.resetScissor(),x.resetViewport()):x.setContext(),this.dirty=!0,this},batchList:function(m,x,y,w,T){for(var E=0;E<m.length;E++){var S=m[E];S&&S!==this&&(S.renderWebGL||S.renderCanvas?this.drawGameObject(S,x,y):S.isParent||S.list?this.batchGroup(S.getChildren(),x,y):"string"==typeof S?this.batchTextureFrameKey(S,null,x,y,w,T):S instanceof o?this.batchTextureFrame(S,x,y,w,T):Array.isArray(S)&&this.batchList(S,x,y,w,T))}},batchGroup:function(m,x,y){void 0===x&&(x=0),void 0===y&&(y=0),x+=this.frame.cutX,y+=this.frame.cutY;for(var w=0;w<m.length;w++){var S=m[w];S.willRender(this.camera)&&this.drawGameObject(S,S.x+x,S.y+y)}},batchGameObjectWebGL:function(m,x,y){void 0===x&&(x=m.x),void 0===y&&(y=m.y);var w=m.x,T=m.y;m.setPosition(x+this.frame.cutX,y+this.frame.cutY),m.renderDirect?m.renderDirect(this.renderer,m,this.camera):m.renderWebGL(this.renderer,m,this.camera),m.setPosition(w,T)},batchGameObjectCanvas:function(m,x,y){void 0===x&&(x=m.x),void 0===y&&(y=m.y);var w,T=m.x,E=m.y;this._eraseMode&&(w=m.blendMode,m.blendMode=h.ERASE),m.setPosition(x+this.frame.cutX,y+this.frame.cutY),m.renderCanvas(this.renderer,m,this.camera,null),m.setPosition(T,E),this._eraseMode&&(m.blendMode=w)},batchTextureFrameKey:function(m,x,y,w,T,E){var S=this.textureManager.getFrame(m,x);S&&this.batchTextureFrame(S,y,w,T,E)},batchTextureFrame:function(m,x,y,w,T){var E,S,A,_;void 0===x&&(x=0),void 0===y&&(y=0),x+=this.frame.cutX,y+=this.frame.cutY,this.renderTarget?this.pipeline.batchTextureFrame(m,x,y,T,w,this.camera.matrix,null):(S=m.canvasData,A=m.source.image,_=this.camera.matrix,(E=this.context).save(),E.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",E.globalAlpha=w,_.setToContext(E),E.drawImage(A,S.x,S.y,S.width,S.height,x,y,S.width,S.height),E.restore())},snapshotArea:function(m,x,y,w,T,E,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,m,x,y,w,E,S):this.renderer.snapshotCanvas(this.canvas,T,!1,m,x,y,w,E,S),this},snapshot:function(m,x,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,m,!1,0,0,this.width,this.height,x,y):this.renderer.snapshotCanvas(this.canvas,m,!1,0,0,this.width,this.height,x,y),this},snapshotPixel:function(m,x,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!0,m,x):this.renderer.snapshotCanvas(this.canvas,y,!0,m,x),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});g.exports=v},function(g,b){g.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var h=16*Math.random()|0;return("x"===t?h:3&h|8).toString(16)})}},function(g,b,t){var h=t(162),n=t(0),s=t(11),u=t(15),i=t(65),r=t(1079),o=t(3),l=new n({Extends:u,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,r],initialize:function(e,a,c,d,f,p,v,m,x){void 0===d&&(d="__DEFAULT"),void 0===p&&(p=2),void 0===v&&(v=!0),u.call(this,e,"Rope"),this.anims=new h(this),this.points=p,this.tintFill="__DEFAULT"===d,this.dirty=!1,this.horizontal=v,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(d,f),this.setPosition(a,c),this.setSizeToFrame(),this.initPipeline(i.ROPE_PIPELINE),Array.isArray(p)&&this.resizeArrays(p.length),this.setPoints(p,m,x),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,a){var c=this.anims.currentFrame;this.anims.update(e,a),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(e,a,c){return this.anims.play(e,a,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(e,a,c){return void 0===e&&(e=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(e,a,c))},setVertical:function(e,a,c){return void 0===e&&(e=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(e,a,c)):this},setTintFill:function(e){return void 0===e&&(e=!1),this.tintFill=e,this},setAlphas:function(e,a){var c=this.points.length;if(c<1)return this;var d=this.alphas;void 0===e?e=[1]:Array.isArray(e)||void 0!==a||(e=[e]);var f=0;if(void 0!==a)for(v=0;v<c;v++)d[f=2*v]=e,d[f+1]=a;else if(e.length===c)for(v=0;v<c;v++)d[f=2*v]=e[v],d[f+1]=e[v];else for(var p=e[0],v=0;v<c;v++)e.length>(f=2*v)&&(p=e[f]),d[f]=p,e.length>f+1&&(p=e[f+1]),d[f+1]=p;return this},setColors:function(e){var a=this.points.length;if(a<1)return this;var c=this.colors;void 0===e?e=[16777215]:Array.isArray(e)||(e=[e]);var d=0;if(e.length===a)for(p=0;p<a;p++)c[d=2*p]=e[p],c[d+1]=e[p];else for(var f=e[0],p=0;p<a;p++)e.length>(d=2*p)&&(f=e[d]),c[d]=f,e.length>d+1&&(f=e[d+1]),c[d+1]=f;return this},setPoints:function(e,a,c){if(void 0===e&&(e=2),"number"==typeof e){var d,f,p,v=e;if(v<2&&(v=2),e=[],this.horizontal)for(p=-this.frame.halfWidth,f=this.frame.width/(v-1),d=0;d<v;d++)e.push({x:p+d*f,y:0});else for(p=-this.frame.halfHeight,f=this.frame.height/(v-1),d=0;d<v;d++)e.push({x:0,y:p+d*f})}var m=e.length,x=this.points.length;return m<1?console.warn("Rope: Not enough points given"):(1===m&&(e.unshift({x:0,y:0}),m++),x!==m&&this.resizeArrays(m),this.points=e,this.updateUVs(),null!=a&&this.setColors(a),null!=c&&this.setAlphas(c)),this},updateUVs:function(){for(var e=this.uv,a=this.points.length,c=this.frame.u0,d=this.frame.v0,f=this.frame.u1,p=this.frame.v1,v=(f-c)/(a-1),m=(p-d)/(a-1),x=0;x<a;x++){var y,w,T,E=4*x,S=this.horizontal?(T=y=this._flipX?f-x*v:c+x*v,this._flipY?(w=p,d):(w=d,p)):(T=this._flipX?(y=c,f):(y=f,c),w=this._flipY?p-x*m:d+x*m);e[0+E]=y,e[1+E]=w,e[2+E]=T,e[3+E]=S}return this},resizeArrays:function(e){var a=this.colors,c=this.alphas;this.vertices=new Float32Array(4*e),this.uv=new Float32Array(4*e),a=new Uint32Array(2*e),c=new Float32Array(2*e);for(var d=0;d<2*e;d++)a[d]=16777215,c[d]=1;return this.colors=a,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var e=this._perp,a=this.points,c=this.vertices,d=a.length;if(this.dirty=!1,!(d<1)){for(var f=a[0],p=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,v=0;v<d;v++){var m=a[v],x=4*v,y=v<d-1?a[v+1]:m;e.x=y.y-f.y,e.y=-(y.x-f.x);var w=e.length();e.x/=w,e.y/=w,e.x*=p,e.y*=p,c[x]=m.x+e.x,c[1+x]=m.y+e.y,c[2+x]=m.x-e.x,c[3+x]=m.y-e.y,f=m}return this}},setDebug:function(e,a){return this.debugGraphic=e,this.debugCallback=e||a?a||this.renderDebugVerts:null,this},renderDebugVerts:function(e,a,c){var d=e.debugGraphic,f=c[0],p=c[1],v=c[2],m=c[3];d.lineBetween(f,p,v,m);for(var x=4;x<a;x+=4){var y=c[x+0],w=c[x+1],T=c[x+2],E=c[x+3];d.lineBetween(f,p,y,w),d.lineBetween(v,m,T,E),d.lineBetween(v,m,y,w),d.lineBetween(y,w,T,E),f=y,p=w,v=T,m=E}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(e){return this._flipX=e,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){return this._flipY=e,this.updateUVs()}}});g.exports=l},function(g,b,t){var h=t(140),n=t(31),s=t(0),u=t(11),i=t(22),r=t(15),o=t(452),l=t(6),e=t(199),a=t(1082),c=t(453),d=new s({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,a],initialize:function(f,p,v,m,x){void 0===p&&(p=0),void 0===v&&(v=0),r.call(this,f,"Text"),this.renderer=f.sys.renderer,this.setPosition(p,v),this.setOrigin(0,0),this.initPipeline(),this.canvas=n.create(this),this.context=this.canvas.getContext("2d"),this.style=new c(this,x),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=f.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(m),x&&x.padding&&this.setPadding(x.padding),x&&x.lineSpacing&&this.setLineSpacing(x.lineSpacing),f.sys.game.events.on(i.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(f){var p=this.style;if(p.wordWrapCallback){var v=p.wordWrapCallback.call(p.wordWrapCallbackScope,f,this);return Array.isArray(v)&&(v=v.join("\n")),v}return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,p,v){for(var m="",x=f.replace(/ +/gi," ").split(this.splitRegExp),y=x.length,w=0;w<y;w++){var T="",E=(E=x[w]).replace(/^ *|\s*$/gi,"");if(p.measureText(E).width<v)m+=E+"\n";else{for(var S=v,A=E.split(" "),_=0;_<A.length;_++){var C=A[_],M=C+" ",R=p.measureText(M).width;if(S<R){if(0===_){for(var L=M;L.length&&(L=L.slice(0,-1),!((R=p.measureText(L).width)<=S)););if(!L.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var D=C.substr(L.length);A[_]=D,T+=L}var U=A.slice(A[_].length?_:_+1).join(" ").replace(/[ \n]*$/gi,"");x[w+1]=U+" "+(x[w+1]||""),y=x.length;break}T+=M,S-=R}m+=T.replace(/[ \n]*$/gi,"")+"\n"}}return m.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(f,p,v){for(var m="",x=f.split(this.splitRegExp),y=x.length-1,w=p.measureText(" ").width,T=0;T<=y;T++){for(var E=v,S=x[T].split(" "),A=S.length-1,_=0;_<=A;_++){var C=S[_],M=p.measureText(C).width,R=M;_<A&&(R+=w),E<R&&0<_&&(m+="\n",E=v),m+=C,_<A?(m+=" ",E-=R):E-=M}T<y&&(m+="\n")}return m},getWrappedText:function(f){return void 0===f&&(f=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(f).split(this.splitRegExp)},setText:function(f){return f||0===f||(f=""),Array.isArray(f)&&(f=f.join("\n")),f!==this._text&&(this._text=f.toString(),this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,p){return this.style.setFixedSize(f,p)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,p){return this.style.setStroke(f,p)},setShadow:function(f,p,v,m,x,y){return this.style.setShadow(f,p,v,m,x,y)},setShadowOffset:function(f,p){return this.style.setShadowOffset(f,p)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,p){return this.style.setWordWrapWidth(f,p)},setWordWrapCallback:function(f,p){return this.style.setWordWrapCallback(f,p)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setPadding:function(f,p,v,m){var x,y,w;return"object"==typeof f?(v=null!==(y=l(x=f,"x",null))?f=y:(f=l(x,"left",0),l(x,"right",f)),m=null!==(w=l(x,"y",null))?p=w:(p=l(x,"top",0),l(x,"bottom",p))):(void 0===f&&(f=0),void 0===p&&(p=f),void 0===v&&(v=f),void 0===m&&(m=p)),this.padding.left=f,this.padding.top=p,this.padding.right=v,this.padding.bottom=m,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},updateText:function(){var f=this.canvas,p=this.context,v=this.style,m=v.resolution,x=v.metrics;v.syncFont(f,p);var y=this._text;(v.wordWrapWidth||v.wordWrapCallback)&&(y=this.runWordWrap(this._text));var w,T=y.split(this.splitRegExp),E=o(this,x,T),S=this.padding;0===v.fixedWidth?(this.width=E.width+S.left+S.right,w=E.width):(this.width=v.fixedWidth,(w=this.width-S.left-S.right)<E.width&&(w=E.width)),this.height=0===v.fixedHeight?E.height+S.top+S.bottom:v.fixedHeight;var A,_,C=this.width,M=this.height;this.updateDisplayOrigin(),C*=m,M*=m,C=Math.max(C,1),M=Math.max(M,1),f.width!==C||f.height!==M?(f.width=C,f.height=M,this.frame.setSize(C,M),v.syncFont(f,p)):p.clearRect(0,0,C,M),p.save(),p.scale(m,m),v.backgroundColor&&(p.fillStyle=v.backgroundColor,p.fillRect(0,0,C,M)),v.syncStyle(f,p),p.textBaseline="alphabetic",p.translate(S.left,S.top);for(var R=0;R<E.lines;R++){if(A=v.strokeThickness/2,_=v.strokeThickness/2+R*E.lineHeight+x.ascent,0<R&&(_+=E.lineSpacing*R),v.rtl)A=C-A;else if("right"===v.align)A+=w-E.lineWidths[R];else if("center"===v.align)A+=(w-E.lineWidths[R])/2;else if("justify"===v.align&&.85<=E.lineWidths[R]/E.width){for(var L=E.width-E.lineWidths[R],D=p.measureText(" ").width,F=T[R].trim(),U=F.split(" "),P=Math.floor((L+=(T[R].length-F.length)*D)/D),O=0;0<P;)U[O]+=" ",O=(O+1)%(U.length-1||1),--P;T[R]=U.join(" ")}this.autoRound&&(A=Math.round(A),_=Math.round(_)),v.strokeThickness&&(this.style.syncShadow(p,v.shadowStroke),p.strokeText(T[R],A,_)),v.color&&(this.style.syncShadow(p,v.shadowFill),p.fillText(T[R],A,_))}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=u.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=p,f},preDestroy:function(){this.style.rtl&&e(this.canvas),n.remove(this.canvas),this.texture.destroy()}});g.exports=d},function(g,b,t){var h=t(31),n=t(0),s=t(11),u=t(22),i=t(15),r=t(355),o=t(189),l=t(1085),e=t(3),a=new n({Extends:i,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(c,d,f,p,v,m,x){var y=c.sys.renderer;i.call(this,c,"TileSprite");var w=c.sys.textures.get(m),T=w.get(x);v=p&&v?(p=Math.floor(p),Math.floor(v)):(p=T.width,T.height),this._tilePosition=new e,this._tileScale=new e(1,1),this.dirty=!1,this.renderer=y,this.canvas=h.create(this,p,v),this.context=this.canvas.getContext("2d"),this.displayTexture=w,this.displayFrame=T,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(T.width),this.potHeight=r(T.height),this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(d,f),this.setSize(p,v),this.setFrame(x),this.setOriginFromFrame(),this.initPipeline(),c.sys.game.events.on(u.CONTEXT_RESTORED,function(E){var S=E.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=E.createTexture2D(0,S.LINEAR,S.LINEAR,S.REPEAT,S.REPEAT,S.RGBA,this.fillCanvas,this.potWidth,this.potHeight)},this)},setTexture:function(c,d){return this.displayTexture=this.scene.sys.textures.get(c),this.setFrame(d)},setFrame:function(c){var d=this.displayTexture.get(c);return this.potWidth=r(d.width),this.potHeight=r(d.height),this.canvas.width=0,d.cutWidth&&d.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=d,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(c,d){return void 0!==c&&(this.tilePositionX=c),void 0!==d&&(this.tilePositionY=d),this},setTileScale:function(c,d){return void 0===c&&(c=this.tileScaleX),void 0===d&&(d=c),this.tileScaleX=c,this.tileScaleY=d,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var c=this.displayFrame;if(c.source.isRenderTexture||c.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var d=this.fillContext,f=this.fillCanvas,p=this.potWidth,v=this.potHeight;this.renderer.gl||(p=c.cutWidth,v=c.cutHeight),d.clearRect(0,0,p,v),f.width=p,f.height=v,d.drawImage(c.source.image,c.cutX,c.cutY,c.cutWidth,c.cutHeight,0,0,p,v),this.fillPattern=this.renderer.gl?this.renderer.canvasToTexture(f,this.fillPattern):d.createPattern(f,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var c,d,f,p,v,m=this.canvas;m.width===this.width&&m.height===this.height||(m.width=this.width,m.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(c=this.context,this.scene.sys.game.config.antialias||o.disable(c),d=this._tileScale.x,f=this._tileScale.y,p=this._tilePosition.x,v=this._tilePosition.y,c.clearRect(0,0,this.width,this.height),c.save(),c.scale(d,f),c.translate(-p,-v),c.fillStyle=this.fillPattern,c.fillRect(p,v,this.width/d,this.height/f),c.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),h.remove(this.canvas),h.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(c){this._tilePosition.x=c,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(c){this._tilePosition.y=c,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(c){this._tileScale.x=c,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(c){this._tileScale.y=c,this.dirty=!0}}});g.exports=a},function(g,b,t){var h=t(0),n=t(18),s=t(11),u=t(75),i=t(22),r=t(49),o=t(15),l=t(69),e=t(219),a=t(1088),c=t(14),d=new h({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,a],initialize:function(f,p,v,m){o.call(this,f,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=e(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=c.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(p,v),this.initPipeline(),m&&this.changeSource(m,!1);var x=f.sys.game.events;x.on(i.PAUSE,this.globalPause,this),x.on(i.RESUME,this.globalResume,this);var y=f.sys.sound;y&&y.on(l.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(f,p,v){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var m=this.video;if(!m)return console.warn("Video not loaded"),this;void 0===f&&(f=m.loop);var x=this.scene.sys.sound;x&&x.mute&&this.setMute(!0),isNaN(p)||(this._markerIn=p),!isNaN(v)&&p<v&&(this._markerOut=v),m.loop=f;var y=this._callbacks,w=m.play();return void 0!==w?w.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(m.addEventListener("playing",y.play,!0),m.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),m.addEventListener("ended",y.end,!0),m.addEventListener("timeupdate",y.time,!0),m.addEventListener("seeking",y.seeking,!0),m.addEventListener("seeked",y.seeked,!0),this},changeSource:function(f,p,v,m,x){void 0===p&&(p=!0),this.video&&this.stop();var y=this.scene.sys.cache.video.get(f);return y?(this.video=y,this._cacheKey=f,this._codePaused=y.paused,this._codeMuted=y.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,y,y.videoWidth,y.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,y.videoWidth,y.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(u.VIDEO_CREATED,this,y.videoWidth,y.videoHeight)):this.updateTexture(),y.currentTime=0,this._lastUpdate=0,p&&this.play(v,m,x)):this.video=null,this},addMarker:function(f,p,v){return!isNaN(p)&&0<=p&&!isNaN(v)&&(this.markers[f]=[p,v]),this},playMarker:function(f,p){var v=this.markers[f];return v&&this.play(p,v[0],v[1]),this},removeMarker:function(f){return delete this.markers[f],this},snapshot:function(f,p){return void 0===f&&(f=this.width),void 0===p&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,f,p)},snapshotArea:function(f,p,v,m,x,y){void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=this.width),void 0===m&&(m=this.height),void 0===x&&(x=v),void 0===y&&(y=m);var w=this.video,T=this.snapshotTexture;return T?T.setSize(x,y):(T=this.scene.sys.textures.createCanvas(e(),x,y),this.snapshotTexture=T),w&&T.context.drawImage(w,f,p,v,m,0,0,x,y),T.update()},saveSnapshotTexture:function(f){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,f):this.snapshotTexture=this.scene.sys.textures.createCanvas(f,this.width,this.height),this.snapshotTexture},loadURL:function(f,p,v){void 0===p&&(p="loadeddata"),void 0===v&&(v=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var m=document.createElement("video");return m.controls=!1,v&&(m.muted=!0,m.defaultMuted=!0,m.setAttribute("autoplay","autoplay")),m.setAttribute("playsinline","playsinline"),m.setAttribute("preload","auto"),m.addEventListener("error",this._callbacks.error,!0),m.src=f,m.load(),this.video=m,this},loadMediaStream:function(f,p,v){void 0===p&&(p="loadeddata"),void 0===v&&(v=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var m=document.createElement("video");m.controls=!1,v&&(m.muted=!0,m.defaultMuted=!0,m.setAttribute("autoplay","autoplay")),m.setAttribute("playsinline","playsinline"),m.setAttribute("preload","auto"),m.addEventListener("error",this._callbacks.error,!0);try{m.srcObject=f}catch(x){m.src=window.URL.createObjectURL(f)}return m.load(),this.video=m,this},playPromiseSuccessHandler:function(){this.touchLocked=!1,this.emit(u.VIDEO_PLAY,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(f){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(u.VIDEO_ERROR,this,f)},playHandler:function(){this.touchLocked=!1,this.emit(u.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(f){this.stop(),this.emit(u.VIDEO_ERROR,this,f)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(u.VIDEO_UNLOCKED,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(u.VIDEO_PLAY,this)},completeHandler:function(){this.emit(u.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(u.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var f,p=this.video;!p||(f=p.currentTime)!==this._lastUpdate&&(this._lastUpdate=f,this.updateTexture(),f>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=f,this.emit(u.VIDEO_LOOP,this)):(this.emit(u.VIDEO_COMPLETE,this),this.stop())))},checkVideoProgress:function(){2<=this.video.readyState?this.updateTexture():(this.retry--,0<this.retry?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(u.VIDEO_TIMEOUT,this))},updateTexture:function(){var f,p=this.video,v=p.videoWidth,m=p.videoHeight;this.videoTexture?((f=this.videoTextureSource).source!==p&&(f.source=p,f.width=v,f.height=m),f.update()):(this.videoTexture=this.scene.sys.textures.create(this._key,p,v,m),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,v,m),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(u.VIDEO_CREATED,this,v,m))},getVideoKey:function(){return this._cacheKey},seekTo:function(f){var p,m=this.video;return m&&((p=m.duration)===1/0||isNaN(p)||this.setCurrentTime(p*f)),this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(f){var p,v,m=this.video;return m&&("string"==typeof f&&(p=f[0],v=parseFloat(f.substr(1)),"+"===p?f=m.currentTime+v:"-"===p&&(f=m.currentTime-v)),m.currentTime=f,this._lastUpdate=f),this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(u.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var f=this.video;if(f){var p=f.currentTime,v=f.duration;if(v!==1/0&&!isNaN(v))return p/v}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(f){void 0===f&&(f=!0),this._codeMuted=f;var p=this.video;return p&&(p.muted=!!this._systemMuted||f),this},isMuted:function(){return this._codeMuted},globalMute:function(f,p){this._systemMuted=p;var v=this.video;v&&(v.muted=!!this._codeMuted||p)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(f){void 0===f&&(f=!0);var p=this.video;return this._codePaused=f,p&&(f?p.paused||p.pause():f||p.paused&&!this._systemPaused&&p.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(f){return void 0===f&&(f=1),this.video&&(this.video.volume=n(f,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(f){return this.video&&(this.video.playbackRate=f),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(f){return void 0===f&&(f=!0),this.video&&(this.video.loop=f),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(f,p){return void 0===p&&(p=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,f),this._key=f,this.flipY=p,this.videoTextureSource&&this.videoTextureSource.setFlipY(p),this.videoTexture},stop:function(){var f=this.video;if(f){var p=this._callbacks;for(var v in p)f.removeEventListener(v,p[v],!0);f.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var f=this.video;if(f){for(f.parentNode&&f.parentNode.removeChild(f);f.hasChildNodes();)f.removeChild(f.firstChild);f.removeAttribute("autoplay"),f.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var f=this.scene.sys.game.events;f.off(i.PAUSE,this.globalPause,this),f.off(i.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(l.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});g.exports=d},function(g,b,t){var h=t(0),n=t(225),s=t(464),u=t(55),i=new h({initialize:function(r){this.type=u.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(r,o){return n(this,r,o)},setTo:function(r){if(this.area=0,this.points=[],"string"==typeof r&&(r=r.split(" ")),!Array.isArray(r))return this;for(var o,l=Number.MAX_VALUE,e=0;e<r.length;e++)o={x:0,y:0},"number"==typeof r[e]||"string"==typeof r[e]?(o.x=parseFloat(r[e]),o.y=parseFloat(r[e+1]),e++):Array.isArray(r[e])?(o.x=r[e][0],o.y=r[e][1]):(o.x=r[e].x,o.y=r[e].y),this.points.push(o),o.y<l&&(l=o.y);return this.calculateArea(l),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r,o,l=0,e=0;e<this.points.length-1;e++)l+=((o=this.points[e+1]).x-(r=this.points[e]).x)*(r.y+o.y);return this.area=.5*-(l+=((r=this.points[0]).x-(o=this.points[this.points.length-1]).x)*(o.y+r.y)),this.area},getPoints:function(r,o,l){return s(this,r,o,l)}});g.exports=i},function(g,b){g.exports=function(t,h,n){for(var s=!1,u=-1,i=t.points.length-1;++u<t.points.length;i=u){var r=t.points[u].x,o=t.points[u].y,e=t.points[i].y;(o<=n&&n<e||e<=n&&n<o)&&h<(t.points[i].x-r)*(n-o)/(e-o)+r&&(s=!s)}return s}},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(2),i=t(17),r=t(472),o=t(1170),l=t(25),e=new h({Extends:s,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,o],initialize:function(a,c,d,f,p,v,m,x){void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=128),void 0===v&&(v=128),s.call(this,a,"Shader"),this.blendMode=-1;var y=a.sys.renderer;this.renderer=y,this.gl=y.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=y.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=y.width,this._rendererHeight=y.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(d,f),this.setSize(p,v),this.setOrigin(.5,.5),this.setShader(c,m,x)},willRender:function(a){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&a.id)},setRenderToTexture:function(a,c){var d,f,p;return void 0===c&&(c=!1),this.renderToTexture||(this.glTexture=(p=this.renderer).createTextureFromSource(null,d=this.width,f=this.height,0),this.glTexture.flipY=c,this.framebuffer=p.createFramebuffer(d,f,this.glTexture,!1),this._rendererWidth=d,this._rendererHeight=f,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),a&&(this.texture=this.scene.sys.textures.addGLTexture(a,this.glTexture,d,f))),this.shader&&(p.pipelines.clear(),this.load(),this.flush(),p.pipelines.rebind()),this},setShader:function(a,c,d){if(void 0===c&&(c=[]),"string"==typeof a){var f=this.scene.sys.cache.shader;if(!f.has(a))return console.warn("Shader missing: "+a),this;this.shader=f.get(a)}else this.shader=a;var p=this.gl,v=this.renderer;this.program&&p.deleteProgram(this.program);var m=v.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);p.uniformMatrix4fv(p.getUniformLocation(m,"uViewMatrix"),!1,this.viewMatrix),p.uniformMatrix4fv(p.getUniformLocation(m,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(m,"uResolution"),this.width,this.height),this.program=m;var x=new Date,y={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[x.getFullYear(),x.getMonth(),x.getDate(),60*x.getHours()*60+60*x.getMinutes()+x.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.uniforms=this.shader.uniforms?i(!0,{},this.shader.uniforms,y):y;for(var w=0;w<4;w++)c[w]&&this.setSampler2D("iChannel"+w,c[w],w,d);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(a){return this.pointer=a,this},projOrtho:function(a,c,d,f){var p=1/(a-c),v=1/(d-f),m=this.projectionMatrix;m[0]=-2*p,m[5]=-2*v,m[10]=-.001,m[12]=(a+c)*p,m[13]=(f+d)*v,m[14]=-0;var x=this.program,y=this.gl;this.renderer.setProgram(x),y.uniformMatrix4fv(y.getUniformLocation(x,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=c,this._rendererHeight=d},initUniforms:function(){var a=this.gl,c=this.renderer.glFuncMap,d=this.program;for(var f in this._textureCount=0,this.uniforms){var p=this.uniforms[f],v=p.type,m=c[v];p.uniformLocation=a.getUniformLocation(d,f),"sampler2D"!==v&&(p.glMatrix=m.matrix,p.glValueLength=m.length,p.glFunc=m.func)}},setSampler2DBuffer:function(a,c,d,f,p,v){void 0===p&&(p=0),void 0===v&&(v={});var m=this.uniforms[a];return m.value=c,v.width=d,v.height=f,m.textureData=v,this._textureCount=p,this.initSampler2D(m),this},setSampler2D:function(a,c,d,f){void 0===d&&(d=0);var p=this.scene.sys.textures;if(p.exists(c)){var v=p.getFrame(c);if(v.glTexture&&v.glTexture.isRenderTexture)return this.setSampler2DBuffer(a,v.glTexture,v.width,v.height,d,f);var m=this.uniforms[a],x=v.source;m.textureKey=c,m.source=x.image,m.value=v.glTexture,x.isGLTexture&&((f=f||{}).width=x.width,f.height=x.height),f&&(m.textureData=f),this._textureCount=d,this.initSampler2D(m)}return this},setUniform:function(a,c){return r(this.uniforms,a,c),this},getUniform:function(a){return u(this.uniforms,a,null)},setChannel0:function(a,c){return this.setSampler2D("iChannel0",a,0,c)},setChannel1:function(a,c){return this.setSampler2D("iChannel1",a,1,c)},setChannel2:function(a,c){return this.setSampler2D("iChannel2",a,2,c)},setChannel3:function(a,c){return this.setSampler2D("iChannel3",a,3,c)},initSampler2D:function(a){var c,d,f,p,v,m,x,y,w,T;a.value&&((c=this.gl).activeTexture(c.TEXTURE0+this._textureCount),c.bindTexture(c.TEXTURE_2D,a.value),(d=a.textureData)&&!a.value.isRenderTexture&&(f=c[u(d,"magFilter","linear").toUpperCase()],p=c[u(d,"minFilter","linear").toUpperCase()],v=c[u(d,"wrapS","repeat").toUpperCase()],m=c[u(d,"wrapT","repeat").toUpperCase()],x=c[u(d,"format","rgba").toUpperCase()],d.repeat&&(v=c.REPEAT,m=c.REPEAT),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width?(y=u(d,"width",512),w=u(d,"height",2),T=u(d,"border",0),c.texImage2D(c.TEXTURE_2D,0,x,y,w,T,x,c.UNSIGNED_BYTE,null)):c.texImage2D(c.TEXTURE_2D,0,x,c.RGBA,c.UNSIGNED_BYTE,a.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,v),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,m)),this.renderer.setProgram(this.program),c.uniform1i(a.uniformLocation,this._textureCount),this._textureCount++)},syncUniforms:function(){var a,c,d,f,p,v=this.gl,m=this.uniforms,x=0;for(var y in m)d=(a=m[y]).glFunc,c=a.glValueLength,f=a.uniformLocation,null!==(p=a.value)&&(1===c?a.glMatrix?d.call(v,f,a.transpose,p):d.call(v,f,p):2===c?d.call(v,f,p.x,p.y):3===c?d.call(v,f,p.x,p.y,p.z):4===c?d.call(v,f,p.x,p.y,p.z,p.w):"sampler2D"===a.type&&(v.activeTexture(v.TEXTURE0+x),v.bindTexture(v.TEXTURE_2D,p),v.uniform1i(f,x),x++))},load:function(a){var c,d,f=this.gl,p=this.width,v=this.height,m=this.renderer,x=this.program,y=this.viewMatrix;this.renderToTexture||(c=-this._displayOriginX,d=-this._displayOriginY,y[0]=a[0],y[1]=a[1],y[4]=a[2],y[5]=a[3],y[8]=a[4],y[9]=a[5],y[12]=y[0]*c+y[4]*d,y[13]=y[1]*c+y[5]*d),f.useProgram(x),f.uniformMatrix4fv(f.getUniformLocation(x,"uViewMatrix"),!1,y),f.uniform2f(f.getUniformLocation(x,"uResolution"),this.width,this.height);var w=this.uniforms,T=w.resolution;T.value.x=p,T.value.y=v,w.time.value=m.game.loop.getDuration();var E,A,_=this.pointer;_&&(A=1-_.y/v,(E=w.mouse).value.x=(_.x/p).toFixed(2),E.value.y=A.toFixed(2)),this.syncUniforms()},flush:function(){var a=this.width,c=this.height,d=this.program,f=this.gl,p=this.vertexBuffer,v=this.renderer,m=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(v.setFramebuffer(this.framebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)),f.bindBuffer(f.ARRAY_BUFFER,p);var x=f.getAttribLocation(d,"inPosition");-1!==x&&(f.enableVertexAttribArray(x),f.vertexAttribPointer(x,2,f.FLOAT,!1,m,0));var y=this.vertexViewF32;y[3]=c,y[4]=a,y[5]=c,y[8]=a,y[9]=c,y[10]=a,f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,6*m)),f.drawArrays(f.TRIANGLES,0,6),this.renderToTexture&&v.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var a=this.gl;a.deleteProgram(this.program),a.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});g.exports=e},function(g,b,t){var h=t(0),n=t(11),s=t(34),u=t(113),i=t(15),r=t(473),o=t(474),l=t(19),e=t(67),a=t(1173),c=t(79),d=t(37),f=t(115),p=new h({Extends:i,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,a],initialize:function(v,m,x,y,w,T,E,S,A,_,C,M){void 0===m&&(m=0),void 0===x&&(x=0),void 0===y&&(y="__WHITE"),i.call(this,v,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new e,this.viewPosition=new d,this.viewMatrix=new e,this.projectionMatrix=new e,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var R=v.sys.renderer;this.setPosition(m,x),this.setTexture(y,w),this.setSize(R.width,R.height),this.initPipeline(),this.setPerspective(R.width,R.height,45,.01,1e3),T&&this.addVertices(T,E,S,A,_,C,M)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(v){return this.viewPosition.addScale(d.LEFT,v),this.dirtyCache[10]=1,this},panY:function(v){return this.viewPosition.y+=d.DOWN.y*v,this.dirtyCache[10]=1,this},panZ:function(v){return this.viewPosition.z+=v,this.dirtyCache[10]=1,this},setPerspective:function(v,m,x,y,w){return void 0===x&&(x=45),void 0===y&&(y=.01),void 0===w&&(w=1e3),this.projectionMatrix.perspective(s(x),v/m,y,w),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(v,m,x,y){return void 0===v&&(v=this.scene.sys.renderer.getAspectRatio()),void 0===m&&(m=1),void 0===x&&(x=-1e3),void 0===y&&(y=1e3),this.projectionMatrix.ortho(-v,v,-m,m,x,y),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(v){v.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(v,m,x,y,w,T,E,S,A){var _=this.scene.sys.cache.obj.get(v);return _&&o(_,this,m,x,y,w,T,E,S,A),this},sortByDepth:function(v,m){return v.depth-m.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(v,m,x,y,w,T,E){var S=new f(v,m,x,y,w,T,E);return this.vertices.push(S),S},addFace:function(v,m,x){var y=new u(v,m,x);return this.faces.push(y),this.dirtyCache[9]=-1,y},addVertices:function(v,m,x,y,w,T,E){var S=r(v,m,x,y,w,T,E);return S&&(this.faces=this.faces.concat(S.faces),this.vertices=this.vertices.concat(S.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(v){return this.faces[v]},getFaceAt:function(v,m,x){void 0===x&&(x=this.scene.sys.cameras.main);for(var y=l(this,x).calc,w=this.faces,T=[],E=0;E<w.length;E++){var S=w[E];S.contains(v,m,y)&&T.push(S)}return c(T,this.sortByDepth)},setDebug:function(v,m){return this.debugGraphic=v,this.debugCallback=v||m?m||this.renderDebug:null,this},isDirty:function(){var v=this.modelPosition,m=this.modelRotation,x=this.modelScale,y=this.dirtyCache,w=v.x,T=v.y,E=v.z,S=m.x,A=m.y,_=m.z,C=x.x,M=x.y,R=x.z,L=this.getFaceCount(),D=y[0],F=y[1],U=y[2],P=y[3],O=y[4],B=y[5],k=y[6],I=y[7],N=y[8],Y=y[9];return y[0]=w,y[1]=T,y[2]=E,y[3]=S,y[4]=A,y[5]=_,y[6]=C,y[7]=M,y[8]=R,y[9]=L,D!==w||F!==T||U!==E||P!==S||O!==A||B!==_||k!==C||I!==M||N!==R||Y!==L},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var v=this.dirtyCache;if(this.ignoreDirtyCache||v[10]||this.isDirty()){var m=this.width,x=this.height,y=this.viewMatrix,w=this.viewPosition;v[10]&&(y.identity(),y.translate(w),y.invert(),v[10]=0);var T=this.transformMatrix;T.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var E=w.z,S=this.faces,A=0;A<S.length;A++)S[A].transformCoordinatesLocal(T,m,x,E);this.depthSort()}},renderDebug:function(v,m){for(var x=v.debugGraphic,y=0;y<m.length;y++){var w=m[y];x.strokeTriangle(w.vertex1.tx,w.vertex1.ty,w.vertex2.tx,w.vertex2.ty,w.vertex3.tx,w.vertex3.ty)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});g.exports=p},function(g,b,t){var h=t(48);g.exports=function(n,s){return h(n.x,n.y,s.x,s.y)<=n.radius+s.radius}},function(g,b,t){var h=t(4),n=t(230);g.exports=function(s,u,i){var r,o,a,c,d,f,p,v,m,x,y,w,T,E,S;return void 0===i&&(i=[]),n(s,u)&&(0==(x=(m=2*((c=s.x2-(r=s.x1))*(f=r-u.x)+(d=s.y2-(o=s.y1))*(p=o-u.y)))*m-4*(v=c*c+d*d)*(f*f+p*p-(a=u.radius)*a))?(w=r+(y=-m/(2*v))*c,T=o+y*d,0<=y&&y<=1&&i.push(new h(w,T))):0<x&&(w=r+(E=(-m-Math.sqrt(x))/(2*v))*c,T=o+E*d,0<=E&&E<=1&&i.push(new h(w,T)),w=r+(S=(-m+Math.sqrt(x))/(2*v))*c,T=o+S*d,0<=S&&S<=1&&i.push(new h(w,T)))),i}},function(g,b,t){var h=t(63),n=new(t(4));g.exports=function(s,u,i){if(void 0===i&&(i=n),h(u,s.x1,s.y1))return i.x=s.x1,i.y=s.y1,!0;if(h(u,s.x2,s.y2))return i.x=s.x2,i.y=s.y2,!0;var r,o=s.x2-s.x1,l=s.y2-s.y1,c=o*o+l*l,d=o,f=l;return 0<c&&(d*=r=((u.x-s.x1)*o+(u.y-s.y1)*l)/c,f*=r),i.x=s.x1+d,i.y=s.y1+f,d*d+f*f<=c&&0<=d*o+f*l&&h(u,i.x,i.y)}},function(g,b,t){var h=t(4),n=t(92),s=t(482);g.exports=function(u,i,r){if(void 0===r&&(r=[]),s(u,i))for(var o=i.getLineA(),l=i.getLineB(),e=i.getLineC(),a=i.getLineD(),c=[new h,new h,new h,new h],d=[n(o,u,c[0]),n(l,u,c[1]),n(e,u,c[2]),n(a,u,c[3])],f=0;f<4;f++)d[f]&&r.push(c[f]);return r}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=!1),void 0===s&&(s=[]);for(var u,i,r,o,l,e,a=t.x3-t.x1,c=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=a*a+c*c,v=a*d+c*f,m=d*d+f*f,x=p*m-v*v,y=0==x?0:1/x,w=t.x1,T=t.y1,E=0;E<h.length&&(i=(p*(e=d*(r=h[E].x-w)+f*(o=h[E].y-T))-v*(l=a*r+c*o))*y,!(0<=(u=(m*l-v*e)*y)&&0<=i&&u+i<1&&(s.push({x:h[E].x,y:h[E].y}),n)));E++);return s}},function(g,b){g.exports=function(t,h,n,s){var u=Math.cos(s),i=Math.sin(s),r=t.x1-h,o=t.y1-n;return t.x1=r*u-o*i+h,t.y1=r*i+o*u+n,t.x2=(r=t.x2-h)*u-(o=t.y2-n)*i+h,t.y2=r*i+o*u+n,t}},function(g,b){g.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(g,b){g.exports=function(t,h,n,s){var u=Math.cos(s),i=Math.sin(s),r=t.x1-h,o=t.y1-n;return t.x1=r*u-o*i+h,t.y1=r*i+o*u+n,t.x2=(r=t.x2-h)*u-(o=t.y2-n)*i+h,t.y2=r*i+o*u+n,t.x3=(r=t.x3-h)*u-(o=t.y3-n)*i+h,t.y3=r*i+o*u+n,t}},function(g,b,t){g.exports={BUTTON_DOWN:t(1304),BUTTON_UP:t(1305),CONNECTED:t(1306),DISCONNECTED:t(1307),GAMEPAD_BUTTON_DOWN:t(1308),GAMEPAD_BUTTON_UP:t(1309)}},function(g,b,t){var h=t(17),n=t(154);g.exports=function(s,u){var i=void 0===s?n():h({},s);if(u)for(var r in u)void 0!==u[r]&&(i[r]=u[r]);return i}},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=t(402),l=new h({Extends:s,initialize:function(e,a,c,d){var f,p="xml";r(a)&&(a=i(f=a,"key"),c=i(f,"url"),d=i(f,"xhrSettings"),p=i(f,"extension",p)),s.call(this,e,{type:"xml",cache:e.cacheManager.xml,extension:p,responseType:"text",key:a,url:c,xhrSettings:d})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});u.register("xml",function(e,a,c){if(Array.isArray(e))for(var d=0;d<e.length;d++)this.addFile(new l(this,e[d]));else this.addFile(new l(this,e,a,c));return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d,f="text",p="txt",v=l.cacheManager.text;r(e)&&(e=i(d=e,"key"),a=i(d,"url"),c=i(d,"xhrSettings"),p=i(d,"extension",p),f=i(d,"type",f),v=i(d,"cache",v)),s.call(this,l,{type:f,cache:v,extension:p,responseType:"text",key:e,url:a,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){g.exports={Acceleration:t(1362),Angular:t(1363),Bounce:t(1364),Debug:t(1365),Drag:t(1366),Enable:t(1367),Friction:t(1368),Gravity:t(1369),Immovable:t(1370),Mass:t(1371),OverlapCirc:t(517),OverlapRect:t(241),Pushable:t(1372),Size:t(1373),Velocity:t(1374)}},function(g,b){g.exports=function(t,h,n,s,u,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1);var l,e,a=[],c=[],d=t.treeMinMax;return d.minX=h,d.minY=n,d.maxX=h+s,d.maxY=n+u,r&&(c=t.staticTree.search(d)),i&&t.useTree?a=t.tree.search(d):i&&(l={position:{x:h,y:n},left:h,top:n,right:h+s,bottom:n+u,isCircle:!1},e=t.intersects,t.bodies.iterate(function(f){e(f,l)&&a.push(f)})),c.concat(a)}},function(g,b,t){g.exports={COLLIDE:t(1375),OVERLAP:t(1376),PAUSE:t(1377),RESUME:t(1378),TILE_COLLIDE:t(1379),TILE_OVERLAP:t(1380),WORLD_BOUNDS:t(1381),WORLD_STEP:t(1382)}},function(g,b,t){var h=t(60);g.exports=function(n,s,u,i){var r=0,o=n.deltaAbsX()+s.deltaAbsX()+i;return 0===n._dx&&0===s._dx?(n.embedded=!0,s.embedded=!0):n._dx>s._dx?o<(r=n.right-s.x)&&!u||!1===n.checkCollision.right||!1===s.checkCollision.left?r=0:(n.touching.none=!1,n.touching.right=!0,s.touching.none=!1,s.touching.left=!0,s.physicsType!==h.STATIC_BODY||u||(n.blocked.none=!1,n.blocked.right=!0),n.physicsType!==h.STATIC_BODY||u||(s.blocked.none=!1,s.blocked.left=!0)):n._dx<s._dx&&(o<-(r=n.x-s.width-s.x)&&!u||!1===n.checkCollision.left||!1===s.checkCollision.right?r=0:(n.touching.none=!1,n.touching.left=!0,s.touching.none=!1,s.touching.right=!0,s.physicsType!==h.STATIC_BODY||u||(n.blocked.none=!1,n.blocked.left=!0),n.physicsType!==h.STATIC_BODY||u||(s.blocked.none=!1,s.blocked.right=!0))),n.overlapX=r,s.overlapX=r}},function(g,b,t){var h=t(60);g.exports=function(n,s,u,i){var r=0,o=n.deltaAbsY()+s.deltaAbsY()+i;return 0===n._dy&&0===s._dy?(n.embedded=!0,s.embedded=!0):n._dy>s._dy?o<(r=n.bottom-s.y)&&!u||!1===n.checkCollision.down||!1===s.checkCollision.up?r=0:(n.touching.none=!1,n.touching.down=!0,s.touching.none=!1,s.touching.up=!0,s.physicsType!==h.STATIC_BODY||u||(n.blocked.none=!1,n.blocked.down=!0),n.physicsType!==h.STATIC_BODY||u||(s.blocked.none=!1,s.blocked.up=!0)):n._dy<s._dy&&(o<-(r=n.y-s.bottom)&&!u||!1===n.checkCollision.up||!1===s.checkCollision.down?r=0:(n.touching.none=!1,n.touching.up=!0,s.touching.none=!1,s.touching.down=!0,s.physicsType!==h.STATIC_BODY||u||(n.blocked.none=!1,n.blocked.up=!0),n.physicsType!==h.STATIC_BODY||u||(s.blocked.none=!1,s.blocked.down=!0))),n.overlapY=r,s.overlapY=r}},function(g,b){g.exports=function(t,h){return!(h.right<=t.left||h.bottom<=t.top||h.position.x>=t.right||h.position.y>=t.bottom)}},function(g,b,t){var h={};g.exports=h;var n=t(94),s=t(116),u=t(267),i=t(117),r=t(585),o=t(50);h._warming=.4,h._torqueDampen=1,h._minLength=1e-6,h.create=function(l){var e=l;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var a=e.bodyA?s.add(e.bodyA.position,e.pointA):e.pointA,c=e.bodyB?s.add(e.bodyB.position,e.pointB):e.pointB,d=s.magnitude(s.sub(a,c));e.length=void 0!==e.length?e.length:d,e.id=e.id||o.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(0<e.length?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var f={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&.1<e.stiffness?(f.type="pin",f.anchors=!1):e.stiffness<.9&&(f.type="spring"),e.render=o.extend(f,e.render),e},h.preSolveAll=function(l){for(var e=0;e<l.length;e+=1){var a=l[e],c=a.constraintImpulse;a.isStatic||0===c.x&&0===c.y&&0===c.angle||(a.position.x+=c.x,a.position.y+=c.y,a.angle+=c.angle)}},h.solveAll=function(l,e){for(var a=0;a<l.length;a+=1){var c=l[a],d=!c.bodyA||c.bodyA&&c.bodyA.isStatic,f=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(d||f)&&h.solve(l[a],e)}for(a=0;a<l.length;a+=1)d=!(c=l[a]).bodyA||c.bodyA&&c.bodyA.isStatic,f=!c.bodyB||c.bodyB&&c.bodyB.isStatic,d||f||h.solve(l[a],e)},h.solve=function(l,e){var a,c,d,f,m,x,y,w,T,E,S,A,_,C=l.bodyA,M=l.bodyB,R=l.pointA,L=l.pointB;(C||M)&&(C&&!C.isStatic&&(s.rotate(R,C.angle-l.angleA,R),l.angleA=C.angle),M&&!M.isStatic&&(s.rotate(L,M.angle-l.angleB,L),l.angleB=M.angle),a=R,c=L,C&&(a=s.add(C.position,R)),M&&(c=s.add(M.position,L)),a&&c&&(d=s.sub(a,c),(f=s.magnitude(d))<h._minLength&&(f=h._minLength),m=s.mult(d,(f-l.length)/f*(l.stiffness<1?l.stiffness*e:l.stiffness)),y=(x=(C?C.inverseMass:0)+(M?M.inverseMass:0))+((C?C.inverseInertia:0)+(M?M.inverseInertia:0)),l.damping&&(E=s.create(),S=s.div(d,f),A=s.sub(M&&s.sub(M.position,M.positionPrev)||E,C&&s.sub(C.position,C.positionPrev)||E),_=s.dot(S,A)),C&&!C.isStatic&&(C.constraintImpulse.x-=m.x*(T=C.inverseMass/x),C.constraintImpulse.y-=m.y*T,C.position.x-=m.x*T,C.position.y-=m.y*T,l.damping&&(C.positionPrev.x-=l.damping*S.x*_*T,C.positionPrev.y-=l.damping*S.y*_*T),w=s.cross(R,m)/y*h._torqueDampen*C.inverseInertia*(1-l.angularStiffness),C.constraintImpulse.angle-=w,C.angle-=w),M&&!M.isStatic&&(M.constraintImpulse.x+=m.x*(T=M.inverseMass/x),M.constraintImpulse.y+=m.y*T,M.position.x+=m.x*T,M.position.y+=m.y*T,l.damping&&(M.positionPrev.x+=l.damping*S.x*_*T,M.positionPrev.y+=l.damping*S.y*_*T),w=s.cross(L,m)/y*h._torqueDampen*M.inverseInertia*(1-l.angularStiffness),M.constraintImpulse.angle+=w,M.angle+=w)))},h.postSolveAll=function(l){for(var e=0;e<l.length;e++){var a=l[e],c=a.constraintImpulse;if(!(a.isStatic||0===c.x&&0===c.y&&0===c.angle)){u.set(a,!1);for(var d=0;d<a.parts.length;d++){var f=a.parts[d];n.translate(f.vertices,c),0<d&&(f.position.x+=c.x,f.position.y+=c.y),0!==c.angle&&(n.rotate(f.vertices,c.angle,a.position),r.rotate(f.axes,c.angle),0<d&&s.rotateAbout(f.position,c.angle,a.position,f.position)),i.update(f.bounds,f.vertices,a.velocity)}c.angle*=h._warming,c.x*=h._warming,c.y*=h._warming}}},h.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+l.pointA.x,y:(l.bodyA?l.bodyA.position.y:0)+l.pointA.y}},h.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+l.pointB.x,y:(l.bodyB?l.bodyB.position.y:0)+l.pointB.y}}},function(g,b,t){g.exports={CalculateFacesAt:t(248),CalculateFacesWithin:t(61),CheckIsoBounds:t(537),Copy:t(1414),CreateFromTiles:t(1415),CullBounds:t(539),CullTiles:t(540),Fill:t(1416),FilterTiles:t(1417),FindByIndex:t(1418),FindTile:t(1419),ForEachTile:t(1420),GetCullTilesFunction:t(1421),GetTileAt:t(156),GetTileAtWorldXY:t(1422),GetTilesWithin:t(26),GetTilesWithinShape:t(1423),GetTilesWithinWorldXY:t(523),GetTileToWorldXFunction:t(1424),GetTileToWorldXYFunction:t(1425),GetTileToWorldYFunction:t(1426),GetWorldToTileXFunction:t(1427),GetWorldToTileXYFunction:t(1428),GetWorldToTileYFunction:t(1429),HasTileAt:t(558),HasTileAtWorldXY:t(1430),HexagonalCullBounds:t(542),HexagonalCullTiles:t(541),HexagonalTileToWorldXY:t(546),HexagonalTileToWorldY:t(550),HexagonalWorldToTileXY:t(552),HexagonalWorldToTileY:t(556),IsInLayerBounds:t(118),IsometricCullTiles:t(543),IsometricTileToWorldXY:t(547),IsometricWorldToTileXY:t(553),PutTileAt:t(253),PutTileAtWorldXY:t(1431),PutTilesAt:t(1432),Randomize:t(1433),RemoveTileAt:t(559),RemoveTileAtWorldXY:t(1434),RenderDebug:t(1435),ReplaceByIndex:t(538),RunCull:t(157),SetCollision:t(1436),SetCollisionBetween:t(1437),SetCollisionByExclusion:t(1438),SetCollisionByProperty:t(1439),SetCollisionFromCollisionGroup:t(1440),SetLayerCollisionIndex:t(158),SetTileCollision:t(72),SetTileIndexCallback:t(1441),SetTileLocationCallback:t(1442),Shuffle:t(1443),StaggeredCullBounds:t(545),StaggeredCullTiles:t(544),StaggeredTileToWorldXY:t(548),StaggeredTileToWorldY:t(551),StaggeredWorldToTileXY:t(554),StaggeredWorldToTileY:t(557),SwapByIndex:t(1444),TileToWorldX:t(249),TileToWorldXY:t(549),TileToWorldY:t(250),WeightedRandomize:t(1445),WorldToTileX:t(251),WorldToTileXY:t(555),WorldToTileY:t(252)}},function(g,b,t){var h=t(156);g.exports=function(n,s,u){var i=h(n,s,!0,u),r=h(n,s-1,!0,u),o=h(n,s+1,!0,u),l=h(n-1,s,!0,u),e=h(n+1,s,!0,u),a=i&&i.collides;return a&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),r&&r.collides&&(a&&(i.faceTop=!1),r.faceBottom=!a),o&&o.collides&&(a&&(i.faceBottom=!1),o.faceTop=!a),l&&l.collides&&(a&&(i.faceLeft=!1),l.faceRight=!a),e&&e.collides&&(a&&(i.faceRight=!1),e.faceLeft=!a),i&&!i.collides&&i.resetFaces(),i}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileWidth,u=n.tilemapLayer,i=0;return u&&(i=u.x+(h=h||u.scene.cameras.main).scrollX*(1-u.scrollFactorX),s*=u.scaleX),i+t*s}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,u=n.tilemapLayer,i=0;return u&&(i=u.y+(h=h||u.scene.cameras.main).scrollY*(1-u.scrollFactorY),s*=u.scaleY),i+t*s}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=!0);var u=s.baseTileWidth,i=s.tilemapLayer;return i&&(t-=i.x+(n=n||i.scene.cameras.main).scrollX*(1-i.scrollFactorX),u*=i.scaleX),h?Math.floor(t/u):t/u}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=!0);var u=s.baseTileHeight,i=s.tilemapLayer;return i&&(t-=i.y+(n=n||i.scene.cameras.main).scrollY*(1-i.scrollFactorY),u*=i.scaleY),h?Math.floor(t/u):t/u}},function(g,b,t){var h=t(83),n=t(118),s=t(248),u=t(72);g.exports=function(i,r,o,l,e){if(void 0===l&&(l=!0),!n(r,o,e))return null;var a,c=e.data[o][r],d=c&&c.collides;i instanceof h?(null===e.data[o][r]&&(e.data[o][r]=new h(e,i.index,r,o,e.tileWidth,e.tileHeight)),e.data[o][r].copy(i)):(a=i,null===e.data[o][r]?e.data[o][r]=new h(e,a,r,o,e.tileWidth,e.tileHeight):e.data[o][r].index=a);var f=e.data[o][r],p=-1!==e.collideIndexes.indexOf(f.index);return u(f,p),l&&d!==f.collides&&s(r,o,e),f}},function(g,b,t){var h=t(29);g.exports=function(n){return"isometric"===(n=n.toLowerCase())?h.ISOMETRIC:"staggered"===n?h.STAGGERED:"hexagonal"===n?h.HEXAGONAL:h.ORTHOGONAL}},function(g,b,t){var h=t(38),n=t(119),s=t(120),u=t(83);g.exports=function(i,r,o,l,e){for(var a=new n({tileWidth:o,tileHeight:l}),c=new s({name:i,tileWidth:o,tileHeight:l,format:h.ARRAY_2D,layers:[a]}),d=[],f=r.length,p=0,v=0;v<r.length;v++){d[v]=[];for(var m=r[v],x=0;x<m.length;x++){var y=parseInt(m[x],10);d[v][x]=isNaN(y)||-1===y?e?null:new u(a,-1,x,v,o,l):new u(a,y,x,v,o,l)}0===p&&(p=m.length)}return c.width=a.width=p,c.height=a.height=f,c.widthInPixels=a.widthInPixels=p*o,c.heightInPixels=a.heightInPixels=f*l,a.data=d,c}},function(g,b,t){function h(i){return{x:i.x,y:i.y}}var n=t(567),s=t(257),u=["id","name","type","rotation","properties","visible","x","y","width","height"];g.exports=function(i,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var l,e=n(i,u);return e.x+=r,e.y+=o,i.gid?(l=s(i.gid),e.gid=l.gid,e.flippedHorizontal=l.flippedHorizontal,e.flippedVertical=l.flippedVertical,e.flippedAntiDiagonal=l.flippedAntiDiagonal):i.polyline?e.polyline=i.polyline.map(h):i.polygon?e.polygon=i.polygon.map(h):i.ellipse?e.ellipse=i.ellipse:i.text?e.text=i.text:i.point?e.point=!0:e.rectangle=!0,e}},function(g,b){g.exports=function(t){var h=Boolean(2147483648&t),n=Boolean(1073741824&t),s=Boolean(536870912&t);t&=536870911;var u=0,i=!1;return h&&n&&s?(u=Math.PI/2,i=!0):h&&n&&!s?(u=Math.PI,i=!1):h&&!n&&s?(u=Math.PI/2,i=!1):!h||n||s?!h&&n&&s?(u=3*Math.PI/2,i=!1):h||!n||s?h||n||!s?h||n||s||(u=0,i=!1):(u=3*Math.PI/2,i=!0):(u=Math.PI,i=!0):i=!(u=0),{gid:t,flippedHorizontal:h,flippedVertical:n,flippedAntiDiagonal:s,rotation:u,flipped:i}}},function(g,b,t){var h=t(38),n=t(120),s=t(560),u=t(576);g.exports=function(i,r,o,l,e,a,c,d){void 0===o&&(o=32),void 0===l&&(l=32),void 0===e&&(e=10),void 0===a&&(a=10),void 0===d&&(d=!1);var f,p=null;return Array.isArray(c)?p=s(void 0!==r?r:"map",h.ARRAY_2D,c,o,l,d):void 0!==r&&((f=i.cache.tilemap.get(r))?p=s(r,f.format,f.data,o,l,d):console.warn("No map data found for key "+r)),null===p&&(p=new n({tileWidth:o,tileHeight:l,width:e,height:a})),new u(i,p)}},function(g,b,t){var h=t(6);g.exports=function(n){var s=h(n,"targets",null);return null===s||("function"==typeof s&&(s=s.call()),Array.isArray(s)||(s=[s])),s}},function(g,b){function t(u){return!!u.getActive&&"function"==typeof u.getActive}function h(u){return!!u.getStart&&"function"==typeof u.getStart}function n(u){return!!u.getEnd&&"function"==typeof u.getEnd}var s=function(u,i){var r,o,l,e,a,c,d,f=function(w,T,E){return E},p=function(w,T,E){return E},v=null,m=typeof i;if("number"==m)f=function(){return i};else if("string"==m){var x=i[0],y=parseFloat(i.substr(2));switch(x){case"+":f=function(w,T,E){return E+y};break;case"-":f=function(w,T,E){return E-y};break;case"*":f=function(w,T,E){return E*y};break;case"/":f=function(w,T,E){return E/y};break;default:f=function(){return parseFloat(i)}}}else"function"==m?f=i:"object"==m&&(h(d=i)||n(d)||t(d)?(t(i)&&(v=i.getActive),n(i)&&(f=i.getEnd),h(i)&&(p=i.getStart)):i.hasOwnProperty("value")?c=s(u,i.value):(r=i.hasOwnProperty("to"),o=i.hasOwnProperty("from"),l=i.hasOwnProperty("start"),r&&(o||l)&&(c=s(u,i.to),l&&(e=s(u,i.start),c.getActive=e.getEnd),o&&(a=s(u,i.from),c.getStart=a.getEnd))));return c||{getActive:v,getEnd:f,getStart:p}};g.exports=s},function(g,b){g.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(g,b,t){var h=t(0),n=t(9),s=t(263),u=t(16),i=t(5),r=t(97),o=t(14),l=new h({Extends:n,initialize:function(e,a,c){n.call(this),this.parent=e,this.parentIsTimeline=e.hasOwnProperty("isTimeline"),this.data=a,this.totalData=a.length,this.targets=c,this.totalTargets=c.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null}},getValue:function(e){return void 0===e&&(e=0),this.data[e].current},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(e){return-1!==this.targets.indexOf(e)},updateTo:function(e,a,c){void 0===c&&(c=!1);for(var d=0;d<this.totalData;d++){var f=this.data[d];f.key===e&&(f.end=a,c&&(f.start=f.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var e=0,a=o.MAX_SAFE_INTEGER,c=this.data,d=0;d<this.totalData;d++){var f=c[d];f.t1=f.duration+f.hold,f.yoyo&&(f.t1+=f.duration),f.t2=f.t1+f.repeatDelay,f.totalDuration=f.delay+f.t1,-1===f.repeat?f.totalDuration+=999999999999*f.t2:0<f.repeat&&(f.totalDuration+=f.t2*f.repeat),f.totalDuration>e&&(e=f.totalDuration),f.delay<a&&(a=f.delay)}this.duration=Math.max(e,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay,this.startDelay=a},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var e=this.data,a=this.totalTargets,c=0;c<this.totalData;c++){var d=e[c],f=d.target,p=d.gen,v=d.key,m=d.index;d.delay=p.delay(f,v,0,m,a,this),d.duration=Math.max(p.duration(f,v,0,m,a,this),.001),d.hold=p.hold(f,v,0,m,a,this),d.repeat=p.repeat(f,v,0,m,a,this),d.repeatDelay=p.repeatDelay(f,v,0,m,a,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED),this},play:function(e){void 0===e&&(e=!1);var a=this.state;return a!==r.INIT||this.parentIsTimeline?a===r.ACTIVE||a===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD||(this.parentIsTimeline||a!==r.PENDING_REMOVE&&a!==r.REMOVED?this.parentIsTimeline?(this.resetTweenData(e),0===this.calculatedOffset?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(e),this.state=r.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=r.ACTIVE),this},resetTweenData:function(e){for(var a=this.data,c=this.totalData,d=this.totalTargets,f=0;f<c;f++){var p=a[f],v=p.target,m=p.key,x=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=-1===p.repeat?999999999999:p.repeat,e?(p.start=p.getStartValue(v,m,p.start,x,d,this),p.end=p.getEndValue(v,m,p.end,x,d,this),p.current=p.start,p.state=r.PLAYING_FORWARD):p.state=r.PENDING_RENDER,0<p.delay&&(p.elapsed=p.delay,p.state=r.DELAY),p.getActiveValue&&(v[m]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(e,a){void 0===a&&(a=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var c=this.data,d=this.totalTargets,f=0;f<this.totalData;f++){var p=c[f],v=p.target,m=p.gen,x=p.key,y=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=-1===p.repeat?999999999999:p.repeat,p.delay=m.delay(v,x,0,y,d,this),p.duration=Math.max(m.duration(v,x,0,y,d,this),.001),p.hold=m.hold(v,x,0,y,d,this),p.repeat=m.repeat(v,x,0,y,d,this),p.repeatDelay=m.repeatDelay(v,x,0,y,d,this),p.current=p.start,p.state=r.PLAYING_FORWARD,this.updateTweenData(this,p,0,y,d),0<p.delay&&(p.elapsed=p.delay,p.state=r.DELAY)}this.calcDuration();var w=!1;for(this.state===r.PAUSED&&(w=!0,this.state=r.ACTIVE),this.isSeeking=!0;this.update(0,a),this.totalProgress<e;);return this.isSeeking=!1,w&&(this.state=r.PAUSED),this},setCallback:function(e,a,c,d){return this.callbacks[e]={func:a,scope:d,params:c},this},complete:function(e){return void 0===e&&(e=0),e?(this.state=r.COMPLETE_DELAY,this.countdown=e):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(e){return this.state===r.ACTIVE&&void 0!==e&&this.seek(e),this.state!==r.REMOVED&&(this.state!==r.PAUSED&&this.state!==r.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(e,a){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(a=+this.parent.timeScale),this.elapsed+=a*=this.timeScale,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=a,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=a,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var c=!1,d=0;d<this.totalData;d++)this.updateTweenData(this,this.data[d],a)&&(c=!0);c||this.nextState();break;case r.LOOP_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(e,a,c){this.isSeeking||(this.emit(e,this,c.key,c.target,c.current,c.previous),a&&(a.params[1]=c.target,a.func.apply(a.scope,a.params)))},dispatchTweenEvent:function(e,a){this.isSeeking||(this.emit(e,this,this.targets),a&&(a.params[1]=this.targets,a.func.apply(a.scope,a.params)))},setStateFromEnd:function(e,a,c){return a.yoyo?(a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,e.callbacks.onYoyo,a),a.start=a.getStartValue(a.target,a.key,a.start,a.index,e.totalTargets,e),r.PLAYING_BACKWARD):0<a.repeatCounter?(a.repeatCounter--,a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),a.start=a.getStartValue(a.target,a.key,a.start,a.index,e.totalTargets,e),a.end=a.getEndValue(a.target,a.key,a.start,a.index,e.totalTargets,e),0<a.repeatDelay?(a.elapsed=a.repeatDelay-c,a.current=a.start,a.target[a.key]=a.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,e.callbacks.onRepeat,a),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(e,a,c){return 0<a.repeatCounter?(a.repeatCounter--,a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),a.end=a.getEndValue(a.target,a.key,a.start,a.index,e.totalTargets,e),0<a.repeatDelay?(a.elapsed=a.repeatDelay-c,a.current=a.start,a.target[a.key]=a.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,e.callbacks.onRepeat,a),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(e,a,c){var d=a.target;switch(a.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!d){a.state=r.COMPLETE;break}var f=a.elapsed,p=a.duration,v=0;p<(f+=c)&&(v=f-p,f=p);var m,x=a.state===r.PLAYING_FORWARD,y=f/p;a.elapsed=f,a.progress=y,a.previous=a.current,1==y?x?(a.current=a.end,d[a.key]=a.end,0<a.hold?(a.elapsed=a.hold-v,a.state=r.HOLD_DELAY):a.state=this.setStateFromEnd(e,a,v)):(a.current=a.start,d[a.key]=a.start,a.state=this.setStateFromStart(e,a,v)):(m=a.ease(x?y:1-y),a.current=a.start+(a.end-a.start)*m,d[a.key]=a.current),this.dispatchTweenDataEvent(s.TWEEN_UPDATE,e.callbacks.onUpdate,a);break;case r.DELAY:a.elapsed-=c,a.elapsed<=0&&(a.elapsed=Math.abs(a.elapsed),a.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:a.elapsed-=c,a.elapsed<=0&&(a.elapsed=Math.abs(a.elapsed),a.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,e.callbacks.onRepeat,a));break;case r.HOLD_DELAY:a.elapsed-=c,a.elapsed<=0&&(a.state=this.setStateFromEnd(e,a,Math.abs(a.elapsed)));break;case r.PENDING_RENDER:d?(a.start=a.getStartValue(d,a.key,d[a.key],a.index,e.totalTargets,e),a.end=a.getEndValue(d,a.key,a.start,a.index,e.totalTargets,e),a.current=a.start,d[a.key]=a.start,a.state=r.PLAYING_FORWARD):a.state=r.COMPLETE}return a.state!==r.COMPLETE}});l.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],i.register("tween",function(e){return this.scene.sys.tweens.add(e)}),u.register("tween",function(e){return this.scene.sys.tweens.create(e)}),g.exports=l},function(g,b,t){g.exports={TIMELINE_COMPLETE:t(1459),TIMELINE_LOOP:t(1460),TIMELINE_PAUSE:t(1461),TIMELINE_RESUME:t(1462),TIMELINE_START:t(1463),TIMELINE_UPDATE:t(1464),TWEEN_ACTIVE:t(1465),TWEEN_COMPLETE:t(1466),TWEEN_LOOP:t(1467),TWEEN_REPEAT:t(1468),TWEEN_START:t(1469),TWEEN_STOP:t(1470),TWEEN_UPDATE:t(1471),TWEEN_YOYO:t(1472)}},function(g,b){g.exports=function(t,h,n,s,u,i,r,o,l,e,a,c,d,f,p){return{target:t,index:h,key:n,getActiveValue:i,getEndValue:s,getStartValue:u,ease:r,duration:0,totalDuration:0,delay:0,yoyo:e,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:l,hold:a,repeat:c,repeatDelay:d},state:0}}},function(g,b,t){var h=t(66);g.exports=function(n){return h(n,-Math.PI,Math.PI)}},function(g,b,t){var h=t(66);g.exports=function(n){return h(n,-180,180)}},function(g,b,t){var h={};g.exports=h;var n=t(268);h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(s,u){for(var i=u*u*u,r=0;r<s.length;r++){var o,l,e=s[r],a=e.speed*e.speed+e.angularSpeed*e.angularSpeed;0===e.force.x&&0===e.force.y?(o=Math.min(e.motion,a),l=Math.max(e.motion,a),e.motion=h._minBias*o+(1-h._minBias)*l,0<e.sleepThreshold&&e.motion<h._motionSleepThreshold*i?(e.sleepCounter+=1,e.sleepCounter>=e.sleepThreshold&&h.set(e,!0)):0<e.sleepCounter&&--e.sleepCounter):h.set(e,!1)}},h.afterCollisions=function(s,u){for(var i=u*u*u,r=0;r<s.length;r++){var o,l,e,a,c,d=s[r];d.isActive&&(l=(o=d.collision).bodyA.parent,e=o.bodyB.parent,l.isSleeping&&e.isSleeping||l.isStatic||e.isStatic||(l.isSleeping||e.isSleeping)&&(c=(a=l.isSleeping&&!l.isStatic?l:e)===l?e:l,!a.isStatic&&c.motion>h._motionWakeThreshold*i&&h.set(a,!1)))}},h.set=function(s,u){var i=s.isSleeping;u?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,i||n.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,i&&n.trigger(s,"sleepEnd"))}},function(g,b,t){var h={};g.exports=h;var n=t(50);h.on=function(s,u,i){for(var r,o=u.split(" "),l=0;l<o.length;l++)r=o[l],s.events=s.events||{},s.events[r]=s.events[r]||[],s.events[r].push(i);return i},h.off=function(s,u,i){if(u){"function"==typeof u&&(i=u,u=n.keys(s.events).join(" "));for(var r=u.split(" "),o=0;o<r.length;o++){var l=s.events[r[o]],e=[];if(i&&l)for(var a=0;a<l.length;a++)l[a]!==i&&e.push(l[a]);s.events[r[o]]=e}}else s.events={}},h.trigger=function(s,u,i){var r,o,l,e,a=s.events;if(a&&0<n.keys(a).length){i=i||{},r=u.split(" ");for(var c=0;c<r.length;c++)if(l=a[o=r[c]]){(e=n.clone(i,!1)).name=o,e.source=s;for(var d=0;d<l.length;d++)l[d].apply(s,[e])}}}},function(g,b,t){g.exports={AlignTo:t(599),Angle:t(600),Call:t(601),GetFirst:t(602),GetLast:t(603),GridAlign:t(604),IncAlpha:t(654),IncX:t(655),IncXY:t(656),IncY:t(657),PlaceOnCircle:t(658),PlaceOnEllipse:t(659),PlaceOnLine:t(660),PlaceOnRectangle:t(661),PlaceOnTriangle:t(662),PlayAnimation:t(663),PropertyValueInc:t(44),PropertyValueSet:t(27),RandomCircle:t(664),RandomEllipse:t(665),RandomLine:t(666),RandomRectangle:t(667),RandomTriangle:t(668),Rotate:t(669),RotateAround:t(670),RotateAroundDistance:t(671),ScaleX:t(672),ScaleXY:t(673),ScaleY:t(674),SetAlpha:t(675),SetBlendMode:t(676),SetDepth:t(677),SetHitArea:t(678),SetOrigin:t(679),SetRotation:t(680),SetScale:t(681),SetScaleX:t(682),SetScaleY:t(683),SetScrollFactor:t(684),SetScrollFactorX:t(685),SetScrollFactorY:t(686),SetTint:t(687),SetVisible:t(688),SetX:t(689),SetXY:t(690),SetY:t(691),ShiftPosition:t(692),Shuffle:t(693),SmootherStep:t(694),SmoothStep:t(695),Spread:t(696),ToggleVisible:t(697),WrapInRectangle:t(698)}},function(g,b,t){var h=t(122),n=[];n[h.BOTTOM_CENTER]=t(271),n[h.BOTTOM_LEFT]=t(272),n[h.BOTTOM_RIGHT]=t(273),n[h.LEFT_BOTTOM]=t(274),n[h.LEFT_CENTER]=t(275),n[h.LEFT_TOP]=t(276),n[h.RIGHT_BOTTOM]=t(277),n[h.RIGHT_CENTER]=t(278),n[h.RIGHT_TOP]=t(279),n[h.TOP_CENTER]=t(280),n[h.TOP_LEFT]=t(281),n[h.TOP_RIGHT]=t(282),g.exports=function(s,u,i,r,o){return n[i](s,u,r,o)}},function(g,b,t){var h=t(40),n=t(84),s=t(85),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,n(r)+o),u(i,h(r)+l),i}},function(g,b,t){var h=t(40),n=t(41),s=t(52),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,n(r)-o),u(i,h(r)+l),i}},function(g,b,t){var h=t(40),n=t(42),s=t(53),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,n(r)+o),u(i,h(r)+l),i}},function(g,b,t){var h=t(40),n=t(41),s=t(54),u=t(53);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)-o),s(i,h(r)+l),i}},function(g,b,t){var h=t(86),n=t(41),s=t(87),u=t(53);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)-o),s(i,h(r)+l),i}},function(g,b,t){var h=t(41),n=t(43),s=t(53),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,h(r)-o),u(i,n(r)-l),i}},function(g,b,t){var h=t(40),n=t(42),s=t(54),u=t(52);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)+o),s(i,h(r)+l),i}},function(g,b,t){var h=t(86),n=t(42),s=t(87),u=t(52);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)+o),s(i,h(r)+l),i}},function(g,b,t){var h=t(42),n=t(43),s=t(52),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,h(r)+o),u(i,n(r)-l),i}},function(g,b,t){var h=t(84),n=t(43),s=t(54),u=t(85);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,h(r)+o),s(i,n(r)-l),i}},function(g,b,t){var h=t(41),n=t(43),s=t(54),u=t(52);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,h(r)-o),s(i,n(r)-l),i}},function(g,b,t){var h=t(42),n=t(43),s=t(54),u=t(53);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,h(r)+o),s(i,n(r)-l),i}},function(g,b,t){var h=t(122),n=[];n[h.BOTTOM_CENTER]=t(284),n[h.BOTTOM_LEFT]=t(285),n[h.BOTTOM_RIGHT]=t(286),n[h.CENTER]=t(287),n[h.LEFT_CENTER]=t(289),n[h.RIGHT_CENTER]=t(290),n[h.TOP_CENTER]=t(291),n[h.TOP_LEFT]=t(292),n[h.TOP_RIGHT]=t(293),n[h.LEFT_BOTTOM]=n[h.BOTTOM_LEFT],n[h.LEFT_TOP]=n[h.TOP_LEFT],n[h.RIGHT_BOTTOM]=n[h.BOTTOM_RIGHT],n[h.RIGHT_TOP]=n[h.TOP_RIGHT],g.exports=function(s,u,i,r,o){return n[i](s,u,r,o)}},function(g,b,t){var h=t(40),n=t(84),s=t(54),u=t(85);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)+o),s(i,h(r)+l),i}},function(g,b,t){var h=t(40),n=t(41),s=t(54),u=t(52);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)-o),s(i,h(r)+l),i}},function(g,b,t){var h=t(40),n=t(42),s=t(54),u=t(53);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)+o),s(i,h(r)+l),i}},function(g,b,t){var h=t(288),n=t(84),s=t(86);g.exports=function(u,i,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),h(u,n(i)+r,s(i)+o),u}},function(g,b,t){var h=t(85),n=t(87);g.exports=function(s,u,i){return h(s,u),n(s,i)}},function(g,b,t){var h=t(86),n=t(41),s=t(87),u=t(52);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)-o),s(i,h(r)+l),i}},function(g,b,t){var h=t(86),n=t(42),s=t(87),u=t(53);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),u(i,n(r)+o),s(i,h(r)+l),i}},function(g,b,t){var h=t(84),n=t(43),s=t(85),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,h(r)+o),u(i,n(r)-l),i}},function(g,b,t){var h=t(41),n=t(43),s=t(52),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,h(r)-o),u(i,n(r)-l),i}},function(g,b,t){var h=t(42),n=t(43),s=t(53),u=t(51);g.exports=function(i,r,o,l){return void 0===o&&(o=0),void 0===l&&(l=0),s(i,h(r)+o),u(i,n(r)-l),i}},function(g,b,t){var h=t(165),n=t(95),s=t(14),u=t(4);g.exports=function(i,r,o){void 0===o&&(o=new u);var l=n(r,0,s.PI2);return h(i,l,o)}},function(g,b,t){var h=t(296),n=t(165),s=t(95),u=t(14);g.exports=function(i,r,o,l){void 0===l&&(l=[]),!r&&0<o&&(r=h(i)/o);for(var e=0;e<r;e++){var a=s(e/r,0,u.PI2);l.push(n(i,a))}return l}},function(g,b){g.exports=function(t){return Math.PI*t.radius*2}},function(g,b,t){var h=t(18);g.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s){return void 0===s&&(s=1),this.alpha=s,this},alpha:{get:function(){return this._alpha},set:function(s){var u=h(s,0,1);0===(this._alpha=u)?this.renderFlags&=-3:this.renderFlags|=2}}}},function(g,b,t){var h=t(33);g.exports={_blendMode:h.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(s){"string"==typeof s&&(s=h[s]),-1<=(s|=0)&&(this._blendMode=s)}},setBlendMode:function(s){return this.blendMode=s,this}}},function(g,b){g.exports={_depth:0,depth:{get:function(){return this._depth},set:function(h){this.displayList&&this.displayList.queueDepthSort(),this._depth=h}},setDepth:function(h){return void 0===h&&(h=0),this.depth=h,this}}},function(g,b,t){var h=t(167),n=t(128);g.exports=function(s,u,i,r){void 0===r&&(r=[]),!u&&0<i&&(u=n(s)/i);for(var o=0;o<u;o++)r.push(h(s,o/u));return r}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){return void 0===u&&(u=new h),u.x=n.x1+(n.x2-n.x1)*s,u.y=n.y1+(n.y2-n.y1)*s,u}},function(g,b){g.exports=function(t,h,n,s){var u=Math.cos(s),i=Math.sin(s),r=t.x-h,o=t.y-n;return t.x=r*u-o*i+h,t.y=r*i+o*u+n,t}},function(g,b,t){var h=t(304),n=t(305);g.exports={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return void 0===u&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u){return void 0===u&&(this.texture||this.shader)&&(u=this),new h(this.scene,u)},createGeometryMask:function(u){return void 0===u&&"Graphics"===this.type&&(u=this),new n(this.scene,u)}}},function(g,b,t){var h=t(0),n=t(22),s=t(88),u=new h({initialize:function(i,r){var o=i.sys.renderer;this.renderer=o,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),i.sys.game.events.on(n.CONTEXT_RESTORED,this.createMask,this),o.on(s.RESIZE,this.createMask,this)},createMask:function(){var i,r,l,e,a,c=this.renderer;c.gl&&(this.mainTexture&&this.clearMask(),r=c.height,this.mainTexture=c.createTexture2D(0,a=(l=c.gl).LINEAR,a,e=0==((i=c.width)&i-1)&&0==(r&r-1)?l.REPEAT:l.CLAMP_TO_EDGE,e,l.RGBA,null,i,r),this.maskTexture=c.createTexture2D(0,a,a,e,e,l.RGBA,null,i,r),this.mainFramebuffer=c.createFramebuffer(i,r,this.mainTexture,!0),this.maskFramebuffer=c.createFramebuffer(i,r,this.maskTexture,!0))},clearMask:function(){var i=this.renderer;i.gl&&this.mainTexture&&(i.deleteTexture(this.mainTexture),i.deleteTexture(this.maskTexture),i.deleteFramebuffer(this.mainFramebuffer),i.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(i){this.bitmapMask=i},preRenderWebGL:function(i,r,o){i.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,o)},postRenderWebGL:function(i,r){i.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});g.exports=u},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.geometryMask=s,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return void 0===n&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,s,u){var i=n.gl;n.flush(),0===n.maskStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:u}),this.applyStencil(n,u,!0),n.maskCount++},applyStencil:function(n,s,u){var i=n.gl,r=this.geometryMask,o=n.maskCount;i.colorMask(!1,!1,!1,!1),u?(i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),r.renderWebGL(n,r,s),n.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.stencilFunc(this.invertAlpha?i.NOTEQUAL:i.EQUAL,u?o+1:o,255)},postRenderWebGL:function(n){var s=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var u,i=n.currentMask;0===n.maskStack.length?(i.mask=null,s.disable(s.STENCIL_TEST)):((u=n.maskStack[n.maskStack.length-1]).mask.applyStencil(n,u.camera,!1),n.currentCameraMask.mask!==u.mask?(i.mask=u.mask,i.camera=u.camera):i.mask=null)},preRenderCanvas:function(n,s,u){var i=this.geometryMask;n.currentContext.save(),i.renderCanvas(n,i,u,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});g.exports=h},function(g,b){g.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(h,n){return void 0===n&&(n=h),this.scrollFactorX=h,this.scrollFactorY=n,this}}},function(g,b,t){var h=t(14),n=t(25),s=t(174),u=t(265),i=t(266),r=t(3);g.exports={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,0===(this._scaleY=l)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(l){0===(this._scaleX=l)?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(l){0===(this._scaleY=l)?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return i(this._rotation*h.RAD_TO_DEG)},set:function(l){this.rotation=i(l)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=u(l)}},setPosition:function(l,e,a,c){return void 0===l&&(l=0),void 0===e&&(e=l),void 0===a&&(a=0),void 0===c&&(c=0),this.x=l,this.y=e,this.z=a,this.w=c,this},copyPosition:function(l){return void 0!==l.x&&(this.x=l.x),void 0!==l.y&&(this.y=l.y),void 0!==l.z&&(this.z=l.z),void 0!==l.w&&(this.w=l.w),this},setRandomPosition:function(l,e,a,c){return void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=this.scene.sys.scale.width),void 0===c&&(c=this.scene.sys.scale.height),this.x=l+Math.random()*a,this.y=e+Math.random()*c,this},setRotation:function(l){return void 0===l&&(l=0),this.rotation=l,this},setAngle:function(l){return void 0===l&&(l=0),this.angle=l,this},setScale:function(l,e){return void 0===l&&(l=1),void 0===e&&(e=l),this.scaleX=l,this.scaleY=e,this},setX:function(l){return void 0===l&&(l=0),this.x=l,this},setY:function(l){return void 0===l&&(l=0),this.y=l,this},setZ:function(l){return void 0===l&&(l=0),this.z=l,this},setW:function(l){return void 0===l&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return void 0===l&&(l=new n),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,e){void 0===l&&(l=new n),void 0===e&&(e=new n);var a=this.parentContainer;if(!a)return this.getLocalTransformMatrix(l);for(l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);a;)e.applyITRS(a.x,a.y,a._rotation,a._scaleX,a._scaleY),e.multiply(l,l),a=a.parentContainer;return l},getLocalPoint:function(l,e,a,c){a=a||new r;var d=(c=c||this.scene.sys.cameras.main).scrollX,f=c.scrollY,p=l+d*this.scrollFactorX-d,v=e+f*this.scrollFactorY-f;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(p,v,a):s(p,v,this.x,this.y,this.rotation,this.scaleX,this.scaleY,a),this._originComponent&&(a.x+=this._displayOriginX,a.y+=this._displayOriginY),a},getParentRotation:function(){for(var l=0,e=this.parentContainer;e;)l+=e.rotation,e=e.parentContainer;return l}}},function(g,b){g.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(h){return this.visible=h,this}}},function(g,b,t){g.exports={CHANGE_DATA:t(636),CHANGE_DATA_KEY:t(637),DESTROY:t(638),REMOVE_DATA:t(639),SET_DATA:t(640)}},function(g,b,t){var h=t(128),n=t(4);g.exports=function(s,u,i,r){if(void 0===r&&(r=[]),!u&&!i)return r;u?i=Math.round(h(s)/u):u=h(s)/i;for(var o=s.x,l=s.y,e=0,a=0;a<i;a++)switch(r.push(new n(o,l)),e){case 0:(o+=u)>=s.right&&(e=1,l+=o-s.right,o=s.right);break;case 1:(l+=u)>=s.bottom&&(e=2,o-=l-s.bottom,l=s.bottom);break;case 2:(o-=u)<=s.left&&(e=3,l-=s.left-o,o=s.left);break;case 3:(l-=u)<=s.top&&(e=0,l=s.top)}return r}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=1),void 0===n&&(n=[]);var s=Math.round(t.x1),u=Math.round(t.y1),i=Math.round(t.x2),r=Math.round(t.y2),o=Math.abs(i-s),l=Math.abs(r-u),e=s<i?1:-1,a=u<r?1:-1,c=o-l;n.push({x:s,y:u});for(var d=1;s!==i||u!==r;){var f=c<<1;-l<f&&(c-=l,s+=e),f<o&&(c+=o,u+=a),d%h==0&&n.push({x:s,y:u}),d++}return n}},function(g,b){g.exports=function(t,h,n){if(!h.length)return NaN;if(1===h.length)return h[0];var s,u,i=1;if(n){if(t<h[0][n])return h[0];for(;h[i][n]<t;)i++}else for(;h[i]<t;)i++;return i>h.length&&(i=h.length),n?(u=h[i][n])-t<=t-(s=h[i-1][n])?h[i]:h[i-1]:(u=h[i])-t<=t-(s=h[i-1])?u:s}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i,r){void 0===r&&(r=!1),this.textureKey=n,this.textureFrame=s,this.index=u,this.frame=i,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=r},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});g.exports=h},function(g,b){g.exports=function(t){var h=/\D/g;return t.sort(function(n,s){return parseInt(n.replace(h,""),10)-parseInt(s.replace(h,""),10)}),t}},function(g,b,t){var h=t(182),n=t(0),s=t(99),u=t(9),i=t(130),r=t(22),o=t(2),l=t(6),e=t(183),a=t(316),c=new n({Extends:u,initialize:function(d){u.call(this),this.game=d,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",d.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(d,f,p){var v,m=this.anims,x=this.mixes,y="string"==typeof d?d:d.key,w="string"==typeof f?f:f.key;return m.has(y)&&m.has(w)&&((v=(v=x.get(y))||{})[w]=p,x.set(y,v)),this},removeMix:function(d,f){var p,v=this.mixes,m="string"==typeof d?d:d.key,x=v.get(m);return x&&(f?x.hasOwnProperty(p="string"==typeof f?f:f.key)&&delete x[p]:f||v.delete(m)),this},getMix:function(d,f){var m="string"==typeof f?f:f.key,x=this.mixes.get("string"==typeof d?d:d.key);return x&&x.hasOwnProperty(m)?x[m]:0},add:function(d,f){return this.anims.has(d)?console.warn("Animation key exists: "+d):(f.key=d,this.anims.set(d,f),this.emit(i.ADD_ANIMATION,d,f)),this},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,f){var p=[],v=this.game.cache.json.get(d);if(!v)return p;var m=this,x=l(v,"meta",null),y=l(v,"frames",null);return x&&y&&l(x,"frameTags",[]).forEach(function(w){var T=[],E=o(w,"name",null),S=o(w,"from",0),A=o(w,"to",0),_=o(w,"direction","forward");if(E&&(!f||f&&-1<f.indexOf(E))){for(var C=[],M=Number.MAX_SAFE_INTEGER,R=S;R<=A;R++){var L,D=R.toString(),F=y[D];F&&((L=o(F,"duration",Number.MAX_SAFE_INTEGER))<M&&(M=L),C.push({frame:D,duration:L}))}C.forEach(function(B){T.push({key:d,frame:B.frame,duration:M-B.duration})});var U=M*T.length;"reverse"===_&&(T=T.reverse());var O=m.create({key:E,frames:T,duration:U,yoyo:"pingpong"===_});O&&p.push(O)}}),p},create:function(d){var f=d.key,p=!1;return f&&((p=this.get(f))||(p=new h(this,f,d),this.anims.set(f,p),this.emit(i.ADD_ANIMATION,f,p))),p},fromJSON:function(d,f){void 0===f&&(f=!1),f&&this.anims.clear(),"string"==typeof d&&(d=JSON.parse(d));var p=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var v=0;v<d.anims.length;v++)p.push(this.create(d.anims[v]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&"frame"===d.type&&p.push(this.create(d));return p},generateFrameNames:function(d,f){var p,v=l(f,"prefix",""),m=l(f,"start",0),x=l(f,"end",0),y=l(f,"suffix",""),w=l(f,"zeroPad",0),T=l(f,"outputArray",[]),E=l(f,"frames",!1),S=this.textureManager.get(d);if(!S)return T;if(f)for(E=E||a(m,x),p=0;p<E.length;p++){var A=v+e(E[p],w,"0",1)+y;S.has(A)?T.push({key:d,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+d)}else for(E=S.getFrameNames(),p=0;p<E.length;p++)T.push({key:d,frame:E[p]});return T},generateFrameNumbers:function(d,f){var p=l(f,"start",0),v=l(f,"end",-1),m=l(f,"first",!1),x=l(f,"outputArray",[]),y=l(f,"frames",!1),w=this.textureManager.get(d);if(!w)return x;m&&w.has(m)&&x.push({key:d,frame:m}),y||(-1===v&&(v=w.frameTotal-2),y=a(p,v));for(var T=0;T<y.length;T++)w.has(y[T])?x.push({key:d,frame:y[T]}):console.warn("generateFrameNumbers: Frame "+T+" missing from texture: "+d);return x},get:function(d){return this.anims.get(d)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(i.PAUSE_ALL)),this},play:function(d,f){Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++)f[p].anims.play(d);return this},staggerPlay:function(d,f,p,v){void 0===p&&(p=0),void 0===v&&(v=!0),Array.isArray(f)||(f=[f]);var m=f.length;v||m--;for(var x=0;x<f.length;x++){var y=p<0?Math.abs(p)*(m-x):p*x;f[x].anims.playAfterDelay(d,y)}return this},remove:function(d){var f=this.get(d);return f&&(this.emit(i.REMOVE_ANIMATION,d,f),this.anims.delete(d),this.removeMix(d)),f},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(i.RESUME_ALL)),this},toJSON:function(d){var f={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==d&&""!==d?f.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(p,v){f.anims.push(v.toJSON())}),f},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});g.exports=c},function(g,b){g.exports=function(t,h,n,s){var u,i=[],r=!1;if((n||s)&&(r=!0,n=n||"",s=s||""),h<t)for(u=t;h<=u;u--)i.push(r?n+u.toString()+s:u);else for(u=t;u<=h;u++)i.push(r?n+u.toString()+s:u);return i}},function(g,b,t){var h=t(0),n=t(99),s=t(9),u=t(318),i=new h({initialize:function(){this.entries=new n,this.events=new s},add:function(r,o){return this.entries.set(r,o),this.events.emit(u.ADD,this,r,o),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var o=this.get(r);return o&&(this.entries.delete(r),this.events.emit(u.REMOVE,this,r,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});g.exports=i},function(g,b,t){g.exports={ADD:t(712),REMOVE:t(713)}},function(g,b,t){var h=t(317),n=t(0),s=t(22),u=new n({initialize:function(i){this.game=i,this.binary=new h,this.bitmapFont=new h,this.json=new h,this.physics=new h,this.shader=new h,this.audio=new h,this.video=new h,this.text=new h,this.html=new h,this.obj=new h,this.tilemap=new h,this.xml=new h,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(i){return this.custom.hasOwnProperty(i)||(this.custom[i]=new h),this.custom[i]},destroy:function(){for(var i=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<i.length;r++)this[i[r]].destroy(),this[i[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});g.exports=u},function(g,b,t){var h=t(131),n=t(187),s=t(18),u=t(0),i=t(11),r=t(327),o=t(35),l=t(133),e=t(10),a=t(3),c=new u({Extends:h,Mixins:[i.Flip,i.Tint,i.Pipeline],initialize:function(d,f,p,v){h.call(this,d,f,p,v),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new a(1,1),this.followOffset=new a,this.deadzone=null,this._follow=null},setDeadzone:function(d,f){var p,v,m,x;return void 0===d?this.deadzone=null:(this.deadzone?(this.deadzone.width=d,this.deadzone.height=f):this.deadzone=new e(0,0,d,f),this._follow&&(p=this.width/2,v=this.height/2,this.midPoint.set(m=this._follow.x-this.followOffset.x,x=this._follow.y-this.followOffset.y),this.scrollX=m-p,this.scrollY=x-v),n(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(d,f,p,v,m,x){return this.fadeEffect.start(!1,d,f,p,v,!0,m,x)},fadeOut:function(d,f,p,v,m,x){return this.fadeEffect.start(!0,d,f,p,v,!0,m,x)},fadeFrom:function(d,f,p,v,m,x,y){return this.fadeEffect.start(!1,d,f,p,v,m,x,y)},fade:function(d,f,p,v,m,x,y){return this.fadeEffect.start(!0,d,f,p,v,m,x,y)},flash:function(d,f,p,v,m,x,y){return this.flashEffect.start(d,f,p,v,m,x,y)},shake:function(d,f,p,v,m){return this.shakeEffect.start(d,f,p,v,m)},pan:function(d,f,p,v,m,x,y){return this.panEffect.start(d,f,p,v,m,x,y)},rotateTo:function(d,f,p,v,m,x,y){return this.rotateToEffect.start(d,f,p,v,m,x,y)},zoomTo:function(d,f,p,v,m,x){return this.zoomEffect.start(d,f,p,v,m,x)},preRender:function(){var d=this.width,f=this.height,p=.5*d,v=.5*f,m=this.zoom,x=this.matrix,y=d*this.originX,w=f*this.originY,T=this._follow,E=this.deadzone,S=this.scrollX,A=this.scrollY;E&&n(E,this.midPoint.x,this.midPoint.y);var _,C,M=!1;T&&!this.panEffect.isRunning&&(_=T.x-this.followOffset.x,C=T.y-this.followOffset.y,E?(_<E.x?S=l(S,S-(E.x-_),this.lerp.x):_>E.right&&(S=l(S,S+(_-E.right),this.lerp.x)),C<E.y?A=l(A,A-(E.y-C),this.lerp.y):C>E.bottom&&(A=l(A,A+(C-E.bottom),this.lerp.y))):(S=l(S,_-y,this.lerp.x),A=l(A,C-w,this.lerp.y)),M=!0),this.useBounds&&(S=this.clampX(S),A=this.clampY(A)),this.roundPixels&&(y=Math.round(y),w=Math.round(w),S=Math.round(S),A=Math.round(A));var R=(this.scrollX=S)+p,L=(this.scrollY=A)+v;this.midPoint.set(R,L);var D=d/m,F=f/m,U=R-D/2,P=L-F/2;this.roundPixels&&(U=Math.round(U),P=Math.round(P)),this.worldView.setTo(U,P,D,F),x.applyITRS(this.x+y,this.y+w,this.rotation,m,m),x.translate(-y,-w),this.shakeEffect.preRender(),M&&this.emit(o.FOLLOW_UPDATE,this,T)},setLerp:function(d,f){return void 0===d&&(d=1),void 0===f&&(f=d),this.lerp.set(d,f),this},setFollowOffset:function(d,f){return void 0===d&&(d=0),void 0===f&&(f=0),this.followOffset.set(d,f),this},startFollow:function(d,f,p,v,m,x){void 0===f&&(f=!1),void 0===p&&(p=1),void 0===v&&(v=p),void 0===m&&(m=0),void 0===x&&(x=m),this._follow=d,this.roundPixels=f,p=s(p,0,1),v=s(v,0,1),this.lerp.set(p,v),this.followOffset.set(m,x);var y=this.width/2,w=this.height/2,T=d.x-m,E=d.y-x;return this.midPoint.set(T,E),this.scrollX=T-y,this.scrollY=E-w,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,f){this.visible&&(this.rotateToEffect.update(d,f),this.panEffect.update(d,f),this.zoomEffect.update(d,f),this.shakeEffect.update(d,f),this.flashEffect.update(d,f),this.fadeEffect.update(d,f))},destroy:function(){this.resetFX(),h.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});g.exports=c},function(g,b,t){var h=t(36);g.exports=function(n){var s=new h;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,e,a,c){return e+e+a+a+c+c});var u,i,r,o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return o&&(u=parseInt(o[1],16),i=parseInt(o[2],16),r=parseInt(o[3],16),s.setTo(u,i,r)),s}},function(g,b){g.exports=function(t,h,n,s){return s<<24|t<<16|h<<8|n}},function(g,b){g.exports=function(t,h,n,s){void 0===s&&(s={h:0,s:0,v:0}),t/=255,h/=255,n/=255;var u=Math.min(t,h,n),i=Math.max(t,h,n),r=i-u,o=0,l=0===i?0:r/i,e=i;return i!==u&&(i===t?o=(h-n)/r+(h<n?6:0):i===h?o=(n-t)/r+2:i===n&&(o=(t-h)/r+4),o/=6),s.hasOwnProperty("_h")?(s._h=o,s._s=l,s._v=e):(s.h=o,s.s=l,s.v=e),s}},function(g,b){g.exports=function(t){return 16777215<t?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(g,b,t){var h=t(36);g.exports=function(n){return new h(n.r,n.g,n.b,n.a)}},function(g,b,t){var h=t(36);g.exports=function(n){var s,u,i,r,o=new h,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());return l&&(s=parseInt(l[1],10),u=parseInt(l[2],10),i=parseInt(l[3],10),r=void 0!==l[4]?parseFloat(l[4]):1,o.setTo(s,u,i,255*r)),o}},function(g,b,t){g.exports={Fade:t(737),Flash:t(738),Pan:t(739),Shake:t(772),RotateTo:t(773),Zoom:t(774)}},function(g,b,t){g.exports={In:t(740),Out:t(741),InOut:t(742)}},function(g,b,t){g.exports={In:t(743),Out:t(744),InOut:t(745)}},function(g,b,t){g.exports={In:t(746),Out:t(747),InOut:t(748)}},function(g,b,t){g.exports={In:t(749),Out:t(750),InOut:t(751)}},function(g,b,t){g.exports={In:t(752),Out:t(753),InOut:t(754)}},function(g,b,t){g.exports={In:t(755),Out:t(756),InOut:t(757)}},function(g,b,t){g.exports=t(758)},function(g,b,t){g.exports={In:t(759),Out:t(760),InOut:t(761)}},function(g,b,t){g.exports={In:t(762),Out:t(763),InOut:t(764)}},function(g,b,t){g.exports={In:t(765),Out:t(766),InOut:t(767)}},function(g,b,t){g.exports={In:t(768),Out:t(769),InOut:t(770)}},function(g,b,t){g.exports=t(771)},function(g,b,t){var h=t(0),n=t(39),s=t(341),u=t(2),i=t(6),r=t(7),o=t(190),l=t(1),e=t(194),a=t(184),c=new h({initialize:function(d){void 0===d&&(d={}),this.width=i(d,"width",1024),this.height=i(d,"height",768),this.zoom=i(d,"zoom",1),this.parent=i(d,"parent",void 0),this.scaleMode=i(d,"scaleMode",0),this.expandParent=i(d,"expandParent",!0),this.autoRound=i(d,"autoRound",!1),this.autoCenter=i(d,"autoCenter",0),this.resizeInterval=i(d,"resizeInterval",500),this.fullscreenTarget=i(d,"fullscreenTarget",null),this.minWidth=i(d,"minWidth",0),this.maxWidth=i(d,"maxWidth",0),this.minHeight=i(d,"minHeight",0),this.maxHeight=i(d,"maxHeight",0);var f=i(d,"scale",null);f&&(this.width=i(f,"width",this.width),this.height=i(f,"height",this.height),this.zoom=i(f,"zoom",this.zoom),this.parent=i(f,"parent",this.parent),this.scaleMode=i(f,"mode",this.scaleMode),this.expandParent=i(f,"expandParent",this.expandParent),this.autoRound=i(f,"autoRound",this.autoRound),this.autoCenter=i(f,"autoCenter",this.autoCenter),this.resizeInterval=i(f,"resizeInterval",this.resizeInterval),this.fullscreenTarget=i(f,"fullscreenTarget",this.fullscreenTarget),this.minWidth=i(f,"min.width",this.minWidth),this.maxWidth=i(f,"max.width",this.maxWidth),this.minHeight=i(f,"min.height",this.minHeight),this.maxHeight=i(f,"max.height",this.maxHeight)),this.renderType=i(d,"type",n.AUTO),this.canvas=i(d,"canvas",null),this.context=i(d,"context",null),this.canvasStyle=i(d,"canvasStyle",null),this.customEnvironment=i(d,"customEnvironment",!1),this.sceneConfig=i(d,"scene",null),this.seed=i(d,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=i(d,"title",""),this.gameURL=i(d,"url","https://phaser.io"),this.gameVersion=i(d,"version",""),this.autoFocus=i(d,"autoFocus",!0),this.domCreateContainer=i(d,"dom.createContainer",!1),this.domBehindCanvas=i(d,"dom.behindCanvas",!1),this.inputKeyboard=i(d,"input.keyboard",!0),this.inputKeyboardEventTarget=i(d,"input.keyboard.target",window),this.inputKeyboardCapture=i(d,"input.keyboard.capture",[]),this.inputMouse=i(d,"input.mouse",!0),this.inputMouseEventTarget=i(d,"input.mouse.target",null),this.inputMousePreventDefaultDown=i(d,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=i(d,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=i(d,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=i(d,"input.mouse.preventDefaultWheel",!0),this.inputTouch=i(d,"input.touch",s.input.touch),this.inputTouchEventTarget=i(d,"input.touch.target",null),this.inputTouchCapture=i(d,"input.touch.capture",!0),this.inputActivePointers=i(d,"input.activePointers",1),this.inputSmoothFactor=i(d,"input.smoothFactor",0),this.inputWindowEvents=i(d,"input.windowEvents",!0),this.inputGamepad=i(d,"input.gamepad",!1),this.inputGamepadEventTarget=i(d,"input.gamepad.target",window),this.disableContextMenu=i(d,"disableContextMenu",!1),this.audio=i(d,"audio",{}),this.hideBanner=!1===i(d,"banner",null),this.hidePhaser=i(d,"banner.hidePhaser",!1),this.bannerTextColor=i(d,"banner.text","#ffffff"),this.bannerBackgroundColor=i(d,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=i(d,"fps",null);var p=i(d,"render",d);this.pipeline=i(p,"pipeline",null),this.antialias=i(p,"antialias",!0),this.antialiasGL=i(p,"antialiasGL",!0),this.mipmapFilter=i(p,"mipmapFilter","LINEAR"),this.desynchronized=i(p,"desynchronized",!1),this.roundPixels=i(p,"roundPixels",!1),this.pixelArt=i(p,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=i(p,"transparent",!1),this.clearBeforeRender=i(p,"clearBeforeRender",!0),this.premultipliedAlpha=i(p,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=i(p,"failIfMajorPerformanceCaveat",!1),this.powerPreference=i(p,"powerPreference","default"),this.batchSize=i(p,"batchSize",4096),this.maxTextures=i(p,"maxTextures",-1),this.maxLights=i(p,"maxLights",10);var v=i(d,"backgroundColor",0);this.backgroundColor=a(v),this.transparent&&(this.backgroundColor=a(0),this.backgroundColor.alpha=0),this.preBoot=i(d,"callbacks.preBoot",l),this.postBoot=i(d,"callbacks.postBoot",l),this.physics=i(d,"physics",{}),this.defaultPhysicsSystem=i(this.physics,"default",!1),this.loaderBaseURL=i(d,"loader.baseURL",""),this.loaderPath=i(d,"loader.path",""),this.loaderMaxParallelDownloads=i(d,"loader.maxParallelDownloads",s.os.android?6:32),this.loaderCrossOrigin=i(d,"loader.crossOrigin",void 0),this.loaderResponseType=i(d,"loader.responseType",""),this.loaderAsync=i(d,"loader.async",!0),this.loaderUser=i(d,"loader.user",""),this.loaderPassword=i(d,"loader.password",""),this.loaderTimeout=i(d,"loader.timeout",0),this.loaderWithCredentials=i(d,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var x=i(d,"plugins",null),y=e.DefaultScene;x&&(Array.isArray(x)?this.defaultPlugins=x:r(x)&&(this.installGlobalPlugins=u(x,"global",[]),this.installScenePlugins=u(x,"scene",[]),Array.isArray(x.default)?y=x.default:Array.isArray(x.defaultMerge)&&(y=y.concat(x.defaultMerge)))),this.defaultPlugins=y;var w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=i(d,"images.default",w+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=i(d,"images.missing",w+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=i(d,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}});g.exports=c},function(g,b,t){g.exports={os:t(102),browser:t(134),features:t(188),input:t(805),audio:t(806),video:t(807),fullscreen:t(808),canvasFeatures:t(342)}},function(g,b,t){var h,n,s,u=t(31),i={supportInverseAlpha:!1,supportNewBlendModes:!1};g.exports=(void 0!==document&&(i.supportNewBlendModes=(h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var r=new Image;r.onload=function(){var o=u.create(r,6,1).getContext("2d");if(o.globalCompositeOperation="multiply",o.drawImage(s,0,0),o.drawImage(r,2,0),!o.getImageData(2,0,1,1))return!1;var l=o.getImageData(2,0,1,1).data;u.remove(r),i.supportNewBlendModes=255===l[0]&&0===l[1]&&0===l[2]},r.src=h+"/wCKxvRF"+n},s.src=h+"AP804Oa6"+n,!1),i.supportInverseAlpha=function(){var r=u.create(this,2,1).getContext("2d");r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var o=r.getImageData(0,0,1,1);if(null===o)return!1;r.putImageData(o,1,0);var l=r.getImageData(1,0,1,1);return l.data[0]===o.data[0]&&l.data[1]===o.data[1]&&l.data[2]===o.data[2]&&l.data[3]===o.data[3]}()),i)},function(g,b){g.exports=function(t,h,n,s){return Math.atan2(s-h,n-t)}},function(g,b){g.exports=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)}},function(g,b){g.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},function(g,b){g.exports=function(t,h){var n=t.x-h.x,s=t.y-h.y;return Math.sqrt(n*n+s*s)}},function(g,b){g.exports=function(t,h,n,s){var u=t-n,i=h-s;return u*u+i*i}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),h-n<t}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),t<h+n}},function(g,b,t){var h=t(351);g.exports=function(n,s){return h(n)/h(s)/h(n-s)}},function(g,b){g.exports=function(t){if(0===t)return 1;for(var h=t;--t;)h*=t;return h}},function(g,b){g.exports=function(t,h,n,s,u){return(e=1-t)*e*e*h+3*(l=1-(o=t))*l*o*n+3*(1-(r=t))*r*r*s+(i=t)*i*i*u;var i,r,o,l,e}},function(g,b){g.exports=function(t,h,n,s){return(r=1-t)*r*h+2*(1-(i=t))*i*n+(u=t)*u*s;var u,i,r}},function(g,b,t){var h=t(181);g.exports=function(n,s,u){return s+(u-s)*h(n,0,1)}},function(g,b){g.exports=function(t){var h=Math.log(t)/.6931471805599453;return 1<<Math.ceil(h)}},function(g,b){g.exports=function(t,h){var n=t.x,s=t.y;return t.x=n*Math.cos(h)-s*Math.sin(h),t.y=n*Math.sin(h)+s*Math.cos(h),t}},function(g,b){g.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},function(g,b,t){var h=new(t(0))({initialize:function(n){this.val=new Float32Array(9),n?this.copy(n):this.identity()},clone:function(){return new h(this)},set:function(n){return this.copy(n)},copy:function(n){var s=this.val,u=n.val;return s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=u[6],s[7]=u[7],s[8]=u[8],this},fromMat4:function(n){var s=n.val,u=this.val;return u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[4],u[4]=s[5],u[5]=s[6],u[6]=s[8],u[7]=s[9],u[8]=s[10],this},fromArray:function(n){var s=this.val;return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,s=n[1],u=n[2],i=n[5];return n[1]=n[3],n[2]=n[6],n[3]=s,n[5]=n[7],n[6]=u,n[7]=i,this},invert:function(){var n=this.val,s=n[0],u=n[1],i=n[2],r=n[3],o=n[4],l=n[5],e=n[6],a=n[7],c=n[8],d=c*o-l*a,f=-c*r+l*e,p=a*r-o*e,v=s*d+u*f+i*p;return v?(n[0]=d*(v=1/v),n[1]=(-c*u+i*a)*v,n[2]=(l*u-i*o)*v,n[3]=f*v,n[4]=(c*s-i*e)*v,n[5]=(-l*s+i*r)*v,n[6]=p*v,n[7]=(-a*s+u*e)*v,n[8]=(o*s-u*r)*v,this):null},adjoint:function(){var n=this.val,s=n[0],u=n[1],i=n[2],r=n[3],o=n[4],l=n[5],e=n[6],a=n[7],c=n[8];return n[0]=o*c-l*a,n[1]=i*a-u*c,n[2]=u*l-i*o,n[3]=l*e-r*c,n[4]=s*c-i*e,n[5]=i*r-s*l,n[6]=r*a-o*e,n[7]=u*e-s*a,n[8]=s*o-u*r,this},determinant:function(){var n=this.val,r=n[3],o=n[4],l=n[5],e=n[6],a=n[7],c=n[8];return n[0]*(c*o-l*a)+n[1]*(-c*r+l*e)+n[2]*(a*r-o*e)},multiply:function(n){var s=this.val,u=s[0],i=s[1],r=s[2],o=s[3],l=s[4],e=s[5],a=s[6],c=s[7],d=s[8],f=n.val,p=f[0],v=f[1],m=f[2],x=f[3],y=f[4],w=f[5],T=f[6],E=f[7],S=f[8];return s[0]=p*u+v*o+m*a,s[1]=p*i+v*l+m*c,s[2]=p*r+v*e+m*d,s[3]=x*u+y*o+w*a,s[4]=x*i+y*l+w*c,s[5]=x*r+y*e+w*d,s[6]=T*u+E*o+S*a,s[7]=T*i+E*l+S*c,s[8]=T*r+E*e+S*d,this},translate:function(n){var s=this.val,u=n.x,i=n.y;return s[6]=u*s[0]+i*s[3]+s[6],s[7]=u*s[1]+i*s[4]+s[7],s[8]=u*s[2]+i*s[5]+s[8],this},rotate:function(n){var s=this.val,u=s[0],i=s[1],r=s[2],o=s[3],l=s[4],e=s[5],a=Math.sin(n),c=Math.cos(n);return s[0]=c*u+a*o,s[1]=c*i+a*l,s[2]=c*r+a*e,s[3]=c*o-a*u,s[4]=c*l-a*i,s[5]=c*e-a*r,this},scale:function(n){var s=this.val,u=n.x,i=n.y;return s[0]=u*s[0],s[1]=u*s[1],s[2]=u*s[2],s[3]=i*s[3],s[4]=i*s[4],s[5]=i*s[5],this},fromQuat:function(n){var s=n.x,u=n.y,i=n.z,r=n.w,o=s+s,l=u+u,e=i+i,a=s*o,c=s*l,d=s*e,f=u*l,p=u*e,v=i*e,m=r*o,x=r*l,y=r*e,w=this.val;return w[0]=1-(f+v),w[3]=c+y,w[6]=d-x,w[1]=c-y,w[4]=1-(a+v),w[7]=p+m,w[2]=d+x,w[5]=p-m,w[8]=1-(a+f),this},normalFromMat4:function(n){var s=n.val,u=this.val,i=s[0],r=s[1],o=s[2],l=s[3],e=s[4],a=s[5],c=s[6],d=s[7],f=s[8],p=s[9],v=s[10],m=s[11],x=s[12],y=s[13],w=s[14],T=s[15],E=i*a-r*e,S=i*c-o*e,A=i*d-l*e,_=r*c-o*a,C=r*d-l*a,M=o*d-l*c,R=f*y-p*x,L=f*w-v*x,D=f*T-m*x,F=p*w-v*y,U=p*T-m*y,P=v*T-m*w,O=E*P-S*U+A*F+_*D-C*L+M*R;return O?(u[0]=(a*P-c*U+d*F)*(O=1/O),u[1]=(c*D-e*P-d*L)*O,u[2]=(e*U-a*D+d*R)*O,u[3]=(o*U-r*P-l*F)*O,u[4]=(i*P-o*D+l*L)*O,u[5]=(r*D-i*U-l*R)*O,u[6]=(y*M-w*C+T*_)*O,u[7]=(w*A-x*M-T*S)*O,u[8]=(x*C-y*A+T*E)*O,this):null}});g.exports=h},function(g,b,t){var h=t(0),n=t(358),s=t(1),u=t(37),i=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),o=new u(1,0,0),l=new u(0,1,0),e=new u,a=new n,c=new h({initialize:function(d,f,p,v){this.onChangeCallback=s,this.set(d,f,p,v)},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(d){this._w=d,this.onChangeCallback(this)}},copy:function(d){return this.set(d)},set:function(d,f,p,v,m){return void 0===m&&(m=!0),"object"==typeof d?(this._x=d.x||0,this._y=d.y||0,this._z=d.z||0,this._w=d.w||0):(this._x=d||0,this._y=f||0,this._z=p||0,this._w=v||0),m&&this.onChangeCallback(this),this},add:function(d){return this._x+=d.x,this._y+=d.y,this._z+=d.z,this._w+=d.w,this.onChangeCallback(this),this},subtract:function(d){return this._x-=d.x,this._y-=d.y,this._z-=d.z,this._w-=d.w,this.onChangeCallback(this),this},scale:function(d){return this._x*=d,this._y*=d,this._z*=d,this._w*=d,this.onChangeCallback(this),this},length:function(){var d=this.x,f=this.y,p=this.z,v=this.w;return Math.sqrt(d*d+f*f+p*p+v*v)},lengthSq:function(){var d=this.x,f=this.y,p=this.z,v=this.w;return d*d+f*f+p*p+v*v},normalize:function(){var d=this.x,f=this.y,p=this.z,v=this.w,m=d*d+f*f+p*p+v*v;return 0<m&&(m=1/Math.sqrt(m),this._x=d*m,this._y=f*m,this._z=p*m,this._w=v*m),this.onChangeCallback(this),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,f){void 0===f&&(f=0);var p=this.x,v=this.y,m=this.z,x=this.w;return this.set(p+f*(d.x-p),v+f*(d.y-v),m+f*(d.z-m),x+f*(d.w-x))},rotationTo:function(d,f){var p=d.x*f.x+d.y*f.y+d.z*f.z;return p<-.999999?(e.copy(o).cross(d).length()<1e-6&&e.copy(l).cross(d),e.normalize(),this.setAxisAngle(e,Math.PI)):.999999<p?this.set(0,0,0,1):(e.copy(d).cross(f),this._x=e.x,this._y=e.y,this._z=e.z,this._w=1+p,this.normalize())},setAxes:function(d,f,p){var v=a.val;return v[0]=f.x,v[3]=f.y,v[6]=f.z,v[1]=p.x,v[4]=p.y,v[7]=p.z,v[2]=-d.x,v[5]=-d.y,v[8]=-d.z,this.fromMat3(a).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(d,f){f*=.5;var p=Math.sin(f);return this.set(p*d.x,p*d.y,p*d.z,Math.cos(f))},multiply:function(d){var f=this.x,p=this.y,v=this.z,m=this.w,x=d.x,y=d.y,w=d.z,T=d.w;return this.set(f*T+m*x+p*w-v*y,p*T+m*y+v*x-f*w,v*T+m*w+f*y-p*x,m*T-f*x-p*y-v*w)},slerp:function(d,f){var p=this.x,v=this.y,m=this.z,x=this.w,y=d.x,w=d.y,T=d.z,E=d.w,S=p*y+v*w+m*T+x*E;S<0&&(S=-S,y=-y,w=-w,T=-T,E=-E);var A,_,C=1-f,M=f;return 1e-6<1-S&&(A=Math.acos(S),_=Math.sin(A),C=Math.sin((1-f)*A)/_,M=Math.sin(f*A)/_),this.set(C*p+M*y,C*v+M*w,C*m+M*T,C*x+M*E)},invert:function(){var d=this.x,f=this.y,p=this.z,v=this.w,m=d*d+f*f+p*p+v*v,x=m?1/m:0;return this.set(-d*x,-f*x,-p*x,v*x)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,x=Math.sin(d),y=Math.cos(d);return this.set(f*y+m*x,p*y+v*x,v*y-p*x,m*y-f*x)},rotateY:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,x=Math.sin(d),y=Math.cos(d);return this.set(f*y-v*x,p*y+m*x,v*y+f*x,m*y-p*x)},rotateZ:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,x=Math.sin(d),y=Math.cos(d);return this.set(f*y+p*x,p*y-f*x,v*y+m*x,m*y-v*x)},calculateW:function(){var d=this.x,f=this.y,p=this.z;return this.w=-Math.sqrt(1-d*d-f*f-p*p),this},setFromEuler:function(d,f){var p=d.x/2,v=d.y/2,m=d.z/2,x=Math.cos(p),y=Math.cos(v),w=Math.cos(m),T=Math.sin(p),E=Math.sin(v),S=Math.sin(m);switch(d.order){case"XYZ":this.set(T*y*w+x*E*S,x*E*w-T*y*S,x*y*S+T*E*w,x*y*w-T*E*S,f);break;case"YXZ":this.set(T*y*w+x*E*S,x*E*w-T*y*S,x*y*S-T*E*w,x*y*w+T*E*S,f);break;case"ZXY":this.set(T*y*w-x*E*S,x*E*w+T*y*S,x*y*S+T*E*w,x*y*w-T*E*S,f);break;case"ZYX":this.set(T*y*w-x*E*S,x*E*w+T*y*S,x*y*S-T*E*w,x*y*w+T*E*S,f);break;case"YZX":this.set(T*y*w+x*E*S,x*E*w+T*y*S,x*y*S-T*E*w,x*y*w-T*E*S,f);break;case"XZY":this.set(T*y*w-x*E*S,x*E*w-T*y*S,x*y*S+T*E*w,x*y*w+T*E*S,f)}return this},setFromRotationMatrix:function(d){var f,p=d.val,v=p[0],m=p[4],x=p[8],y=p[1],w=p[5],T=p[9],E=p[2],S=p[6],A=p[10],_=v+w+A;return 0<_?(f=.5/Math.sqrt(_+1),this.set((S-T)*f,(x-E)*f,(y-m)*f,.25/f)):w<v&&A<v?(f=2*Math.sqrt(1+v-w-A),this.set(.25*f,(m+y)/f,(x+E)/f,(S-T)/f)):A<w?(f=2*Math.sqrt(1+w-v-A),this.set((m+y)/f,.25*f,(T+S)/f,(x-E)/f)):(f=2*Math.sqrt(1+A-v-w),this.set((x+E)/f,(T+S)/f,.25*f,(y-m)/f)),this},fromMat3:function(d){var f,p,v,m,x=d.val,y=x[0]+x[4]+x[8];return 0<y?(m=Math.sqrt(y+1),this.w=.5*m,this._x=(x[7]-x[5])*(m=.5/m),this._y=(x[2]-x[6])*m,this._z=(x[3]-x[1])*m):(f=0,x[4]>x[0]&&(f=1),x[8]>x[3*f+f]&&(f=2),v=i[p=i[f]],m=Math.sqrt(x[3*f+f]-x[3*p+p]-x[3*v+v]+1),r[f]=.5*m,r[p]=(x[3*p+f]+x[3*f+p])*(m=.5/m),r[v]=(x[3*v+f]+x[3*f+v])*m,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(x[3*v+p]-x[3*p+v])*m),this.onChangeCallback(this),this}});g.exports=c},function(g,b,t){var h=t(361),n=t(31),s=t(39),u=t(188);g.exports=function(i){var r=i.config;if((r.customEnvironment||r.canvas)&&r.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==s.HEADLESS)if(r.renderType===s.CANVAS||r.renderType!==s.CANVAS&&!u.webGL){if(!u.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");r.renderType=s.CANVAS}else r.renderType=s.WEBGL;r.antialias||n.disableSmoothing();var o,l,e=i.scale.baseSize,a=e.width,c=e.height;r.canvas?(i.canvas=r.canvas,i.canvas.width=a,i.canvas.height=c):i.canvas=n.create(i,a,c,r.renderType),r.canvasStyle&&(i.canvas.style=r.canvasStyle),r.antialias||h.setCrisp(i.canvas),r.renderType!==s.HEADLESS&&(o=t(362),l=t(365),r.renderType===s.WEBGL?i.renderer=new l(i):(i.renderer=new o(i),i.context=i.renderer.gameContext))}},function(g,b){g.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(h){t.style["image-rendering"]=h}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(g,b,t){var h=t(35),n=t(363),s=t(0),u=t(39),i=t(9),r=t(88),o=t(364),l=t(101),e=t(103),a=t(25),c=new s({Extends:i,initialize:function(d){i.call(this);var f=d.config;this.config={clearBeforeRender:f.clearBeforeRender,backgroundColor:f.backgroundColor,antialias:f.antialias,roundPixels:f.roundPixels},this.game=d,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=d.canvas,this.gameContext=f.context?f.context:this.gameCanvas.getContext("2d",{alpha:d.config.transparent,desynchronized:d.config.desynchronized}),this.currentContext=this.gameContext,this.antialias=d.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(e.READY,this.boot,this)},boot:function(){var d=this.game,f=d.scale.baseSize;this.width=f.width,this.height=f.height,this.isBooted=!0,d.scale.on(l.RESIZE,this.onResize,this),this.resize(f.width,f.height)},onResize:function(d,f){f.width===this.width&&f.height===this.height||this.resize(f.width,f.height)},resize:function(d,f){this.width=d,this.height=f,this.emit(r.RESIZE,d,f)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(d){return this.currentContext.globalCompositeOperation=d,this},setContext:function(d){return this.currentContext=d||this.gameContext,this},setAlpha:function(d){return this.currentContext.globalAlpha=d,this},preRender:function(){var d=this.gameContext,f=this.config,p=this.width,v=this.height;d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),f.clearBeforeRender&&d.clearRect(0,0,p,v),f.transparent||(d.fillStyle=f.backgroundColor.rgba,d.fillRect(0,0,p,v)),d.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(d,f,p){var v=f.length;this.emit(r.RENDER,d,p);var m=p.x,x=p.y,y=p.width,w=p.height,T=p.renderToTexture?p.context:d.sys.context;T.save(),this.game.scene.customViewports&&(T.beginPath(),T.rect(m,x,y,w),T.clip()),this.currentContext=T;var E=p.mask;E&&E.preRenderCanvas(this,null,p._maskCamera),p.transparent||(T.fillStyle=p.backgroundColor.rgba,T.fillRect(m,x,y,w)),T.globalAlpha=p.alpha,T.globalCompositeOperation="source-over",this.drawCount+=v,p.renderToTexture&&p.emit(h.PRE_RENDER,p),p.matrix.copyToContext(T);for(var S=0;S<v;S++){var A=f[S];A.mask&&A.mask.preRenderCanvas(this,A,p),A.renderCanvas(this,A,p),A.mask&&A.mask.postRenderCanvas(this,A,p)}T.setTransform(1,0,0,1,0,0),T.globalCompositeOperation="source-over",T.globalAlpha=1,p.flashEffect.postRenderCanvas(T),p.fadeEffect.postRenderCanvas(T),p.dirty=!1,E&&E.postRenderCanvas(this),T.restore(),p.renderToTexture&&(p.emit(h.POST_RENDER,p),p.renderToGame&&d.sys.context.drawImage(p.canvas,m,x))},postRender:function(){this.gameContext.restore(),this.emit(r.POST_RENDER);var d=this.snapshotState;d.callback&&(n(this.gameCanvas,d),d.callback=null)},snapshotCanvas:function(d,f,p,v,m,x,y,w,T){void 0===p&&(p=!1),this.snapshotArea(v,m,x,y,f,w,T);var E=this.snapshotState;return E.getPixel=p,n(this.canvas,E),E.callback=null,this},snapshot:function(d,f,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,d,f,p)},snapshotArea:function(d,f,p,v,m,x,y){var w=this.snapshotState;return w.callback=m,w.type=x,w.encoder=y,w.getPixel=!1,w.x=d,w.y=f,w.width=Math.min(p,this.gameCanvas.width),w.height=Math.min(v,this.gameCanvas.height),this},snapshotPixel:function(d,f,p){return this.snapshotArea(d,f,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(d,f,p,v){var m,x,y,w,T,E,S,A,_,C,M,R,L,D,F,U,P,O=p.alpha*d.alpha;0!=O&&(m=this.currentContext,x=this._tempMatrix1,y=this._tempMatrix2,T=(w=f.canvasData).x,E=w.y,S=f.cutWidth,A=f.cutHeight,_=f.customPivot,C=f.source.resolution,L=-(M=d.displayOriginX)+f.x,D=-(R=d.displayOriginY)+f.y,d.isCropped&&((F=d._crop).flipX===d.flipX&&F.flipY===d.flipY||f.updateCropUVs(F,d.flipX,d.flipY),S=F.cw,A=F.ch,T=F.cx,E=F.cy,L=-M+F.x,D=-R+F.y,d.flipX&&(0<=L?L=-(L+S):L<0&&(L=Math.abs(L)-S)),d.flipY&&(0<=D?D=-(D+A):D<0&&(D=Math.abs(D)-A))),P=U=1,d.flipX&&(_||(L+=2*M-f.realWidth),U=-1),d.flipY&&(_||(D+=2*R-f.realHeight),P=-1),y.applyITRS(d.x,d.y,d.rotation,d.scaleX*U,d.scaleY*P),x.copyFrom(p.matrix),v?(x.multiplyWithOffset(v,-p.scrollX*d.scrollFactorX,-p.scrollY*d.scrollFactorY),y.e=d.x,y.f=d.y):(y.e-=p.scrollX*d.scrollFactorX,y.f-=p.scrollY*d.scrollFactorY),x.multiply(y),m.save(),x.setToContext(m),m.globalCompositeOperation=this.blendModes[d.blendMode],m.globalAlpha=O,m.imageSmoothingEnabled=!(!this.antialias||f.source.scaleMode),d.mask&&d.mask.preRenderCanvas(this,d,p),m.drawImage(f.source.image,T,E,S,A,L,D,S/C,A/C),d.mask&&d.mask.postRenderCanvas(this,d,p),m.restore())},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});g.exports=c},function(g,b,t){var h=t(31),n=t(36),s=t(2);g.exports=function(u,i){var r,o,l,e,a=s(i,"callback"),c=s(i,"type","image/png"),d=s(i,"encoder",.92),f=Math.abs(Math.round(s(i,"x",0))),p=Math.abs(Math.round(s(i,"y",0))),v=s(i,"width",u.width),m=s(i,"height",u.height);s(i,"getPixel",!1)?(r=u.getContext("2d").getImageData(f,p,1,1).data,a.call(null,new n(r[0],r[1],r[2],r[3]/255))):0!==f||0!==p||v!==u.width||m!==u.height?((o=h.createWebGL(this,v,m)).getContext("2d").drawImage(u,f,p,v,m,0,0,v,m),(l=new Image).onerror=function(){a.call(null),h.remove(o)},l.onload=function(){a.call(null,l),h.remove(o)},l.src=o.toDataURL(c,d)):((e=new Image).onerror=function(){a.call(null)},e.onload=function(){a.call(null,e)},e.src=u.toDataURL(c,d))}},function(g,b,t){var h=t(33),n=t(342);g.exports=function(){var s=[],u=n.supportNewBlendModes,i="source-over";return s[h.NORMAL]=i,s[h.ADD]="lighter",s[h.MULTIPLY]=u?"multiply":i,s[h.SCREEN]=u?"screen":i,s[h.OVERLAY]=u?"overlay":i,s[h.DARKEN]=u?"darken":i,s[h.LIGHTEN]=u?"lighten":i,s[h.COLOR_DODGE]=u?"color-dodge":i,s[h.COLOR_BURN]=u?"color-burn":i,s[h.HARD_LIGHT]=u?"hard-light":i,s[h.SOFT_LIGHT]=u?"soft-light":i,s[h.DIFFERENCE]=u?"difference":i,s[h.EXCLUSION]=u?"exclusion":i,s[h.HUE]=u?"hue":i,s[h.SATURATION]=u?"saturation":i,s[h.COLOR]=u?"color":i,s[h.LUMINOSITY]=u?"luminosity":i,s[h.ERASE]="destination-out",s[h.SOURCE_IN]="source-in",s[h.SOURCE_OUT]="source-out",s[h.SOURCE_ATOP]="source-atop",s[h.DESTINATION_OVER]="destination-over",s[h.DESTINATION_IN]="destination-in",s[h.DESTINATION_OUT]="destination-out",s[h.DESTINATION_ATOP]="destination-atop",s[h.LIGHTER]="lighter",s[h.COPY]="copy",s[h.XOR]="xor",s}},function(g,b,t){var h=t(89),n=t(35),s=t(0),u=t(39),i=t(9),r=t(88),o=t(22),l=t(136),e=t(67),a=t(1),c=t(366),d=t(139),f=t(101),p=t(103),v=t(12),m=t(377),x=new s({Extends:i,initialize:function(y){i.call(this);var w=y.config;this.config={clearBeforeRender:w.clearBeforeRender,antialias:w.antialias,backgroundColor:w.backgroundColor,contextCreation:{alpha:w.transparent,desynchronized:w.desynchronized,depth:!1,antialias:w.antialiasGL,premultipliedAlpha:w.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:w.failIfMajorPerformanceCaveat,powerPreference:w.powerPreference},roundPixels:w.roundPixels,maxTextures:w.maxTextures,maxTextureSize:w.maxTextureSize,batchSize:w.batchSize,maxLights:w.maxLights,mipmapFilter:w.mipmapFilter},this.game=y,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=y.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(y){var w=this.game,T=this.canvas,E=y.backgroundColor,S=w.config.context?w.config.context:T.getContext("webgl",y.contextCreation)||T.getContext("experimental-webgl",y.contextCreation);if(!S||S.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=S;var A=this;this.contextLostHandler=function(B){A.contextLost=!0,A.game.events.emit(o.CONTEXT_LOST,A),B.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(o.CONTEXT_RESTORED,A)},T.addEventListener("webglcontextlost",this.contextLostHandler,!1),T.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),w.context=S;for(var _=0;_<=27;_++)this.blendModes.push({func:[S.ONE,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_ADD});this.blendModes[1].func=[S.ONE,S.DST_ALPHA],this.blendModes[2].func=[S.DST_COLOR,S.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[S.ONE,S.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[S.ZERO,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=S.BYTE,this.glFormats[1]=S.SHORT,this.glFormats[2]=S.UNSIGNED_BYTE,this.glFormats[3]=S.UNSIGNED_SHORT,this.glFormats[4]=S.FLOAT,this.glFuncMap={mat2:{func:S.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:S.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:S.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:S.uniform1f,length:1},"1fv":{func:S.uniform1fv,length:1},"1i":{func:S.uniform1i,length:1},"1iv":{func:S.uniform1iv,length:1},"2f":{func:S.uniform2f,length:2},"2fv":{func:S.uniform2fv,length:1},"2i":{func:S.uniform2i,length:2},"2iv":{func:S.uniform2iv,length:1},"3f":{func:S.uniform3f,length:3},"3fv":{func:S.uniform3fv,length:1},"3i":{func:S.uniform3i,length:3},"3iv":{func:S.uniform3iv,length:1},"4f":{func:S.uniform4f,length:4},"4fv":{func:S.uniform4fv,length:1},"4i":{func:S.uniform4i,length:4},"4iv":{func:S.uniform4iv,length:1}};var C=S.getSupportedExtensions();y.maxTextures&&-1!==y.maxTextures||(y.maxTextures=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS)),y.maxTextureSize||(y.maxTextureSize=S.getParameter(S.MAX_TEXTURE_SIZE));var M="WEBGL_compressed_texture_",R="WEBKIT_"+M;this.compression.ETC1=S.getExtension(M+"etc1")||S.getExtension(R+"etc1"),this.compression.PVRTC=S.getExtension(M+"pvrtc")||S.getExtension(R+"pvrtc"),this.compression.S3TC=S.getExtension(M+"s3tc")||S.getExtension(R+"s3tc"),this.supportedExtensions=C;var L="ANGLE_instanced_arrays";this.instancedArraysExtension=-1<C.indexOf(L)?S.getExtension(L):null;var D="OES_vertex_array_object";this.vaoExtension=-1<C.indexOf(D)?S.getExtension(D):null,S.disable(S.DEPTH_TEST),S.disable(S.CULL_FACE),S.enable(S.BLEND),S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),this.mipmapFilter=S[y.mipmapFilter],this.maxTextures=v.checkShaderMax(S,y.maxTextures),this.textureIndexes=[];var F=this.tempTextures;if(Array.isArray(F))for(var U=0;_<this.maxTextures;U++)S.deleteTexture(F[U]);else F=new Array(this.maxTextures);for(var P=0;P<this.maxTextures;P++){var O=S.createTexture();S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,O),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),F[P]=O,this.textureIndexes.push(P)}return this.tempTextures=F,this.currentActiveTexture=1,this.startActiveTexture++,S.activeTexture(S.TEXTURE1),this.pipelines=new c(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=(new e).identity(),w.textures.once(p.READY,this.boot,this),this},boot:function(){var y=this.game,w=this.pipelines,T=y.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,this.renderTarget=new d(this,this.width,this.height,1,0,!0,!0),w.boot(y.config.pipeline),this.blankTexture=y.textures.getFrame("__DEFAULT"),this.whiteTexture=y.textures.getFrame("__WHITE");var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,null),E.enable(E.SCISSOR_TEST),y.scale.on(f.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(y,w){w.width===this.width&&w.height===this.height||this.resize(w.width,w.height)},beginCapture:function(y,w){void 0===y&&(y=this.width),void 0===w&&(w=this.height),this.renderTarget.bind(!0,y,w),this.setProjectionMatrix(y,w),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(y,w){var T=this.gl;return this.width=y,this.height=w,this.setProjectionMatrix(y,w),T.viewport(0,0,y,w),this.drawingBufferHeight=T.drawingBufferHeight,T.scissor(0,T.drawingBufferHeight-w,y,w),this.defaultScissor[2]=y,this.defaultScissor[3]=w,this.emit(r.RESIZE,y,w),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(y,w){return y===this.projectionWidth&&w===this.projectionHeight||(this.projectionWidth=y,this.projectionHeight=w,this.projectionMatrix.ortho(0,y,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(y){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(y)},getExtension:function(y){return this.hasExtension(y)?(y in this.extensions||(this.extensions[y]=this.gl.getExtension(y)),this.extensions[y]):null},flush:function(){this.pipelines.flush()},pushScissor:function(y,w,T,E,S){void 0===S&&(S=this.drawingBufferHeight);var A=[y,w,T,E];return this.scissorStack.push(A),this.setScissor(y,w,T,E,S),this.currentScissor=A},setScissor:function(y,w,T,E,S){void 0===S&&(S=this.drawingBufferHeight);var R=this.gl,L=this.currentScissor,D=0<T&&0<E;L&&D&&(D=L[0]!==y||L[1]!==w||L[2]!==T||L[3]!==E),D&&(this.flush(),R.scissor(y,S-w-E,T,E))},resetScissor:function(){var y=this.gl;y.enable(y.SCISSOR_TEST);var E,S,A=this.currentScissor;A&&(S=A[3],0<(E=A[2])&&0<S&&y.scissor(A[0],this.drawingBufferHeight-A[1]-S,E,S))},popScissor:function(){var y=this.scissorStack;y.pop();var w=y[y.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var y=this.currentMask.mask,w=this.currentCameraMask.mask;return y&&y.isStencil||w&&w.isStencil},resetViewport:function(){var y=this.gl;y.viewport(0,0,this.width,this.height),this.drawingBufferHeight=y.drawingBufferHeight},setBlendMode:function(y,w){void 0===w&&(w=!1);var T=this.gl,E=this.blendModes[y];return!!(w||y!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==y)&&(this.flush(),T.enable(T.BLEND),T.blendEquation(E.equation),2<E.func.length?T.blendFuncSeparate(E.func[0],E.func[1],E.func[2],E.func[3]):T.blendFunc(E.func[0],E.func[1]),this.currentBlendMode=y,!0)},addBlendMode:function(y,w){return this.blendModes.push({func:y,equation:w})-1},updateBlendMode:function(y,w,T){return this.blendModes[y]&&(this.blendModes[y].func=w,T&&(this.blendModes[y].equation=T)),this},removeBlendMode:function(y){return 17<y&&this.blendModes[y]&&this.blendModes.splice(y,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y.glTexture,!0),0;var w=this.gl,T=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,T<this.maxTextures?(y.glIndex=T,w.activeTexture(w.TEXTURE0+T),w.bindTexture(w.TEXTURE_2D,y.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,y.glTexture),this.currentActiveTexture=2)),y.glIndex},isNewNormalMap:function(y,w){return this.textureZero!==y||this.normalTexture!==w},setTextureZero:function(y,w){var T;this.textureZero!==y&&(w&&this.flush(),(T=this.gl).activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,y),this.textureZero=y)},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(y){var w;this.normalTexture!==y&&((w=this.gl).activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,y),this.normalTexture=y,1===this.currentActiveTexture&&(this.currentActiveTexture=2))},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var y=this.gl,w=this.tempTextures,T=0;T<w.length;T++)y.activeTexture(y.TEXTURE0+T),y.bindTexture(y.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(y){void 0===y&&(y=!1),this.flush();var w=this.gl,T=this.tempTextures;if(y){for(var E=0;E<T.length;E++)w.activeTexture(w.TEXTURE0+E),w.bindTexture(w.TEXTURE_2D,T[E]);w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,T[1])}else w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,T[0]),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,T[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},setTexture2D:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y,!0),0;var w=this.gl,T=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,T<this.maxTextures?(y.glIndex=T,w.activeTexture(w.TEXTURE0+T),w.bindTexture(w.TEXTURE_2D,y),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,y),this.currentActiveTexture=2)),y.glIndex},pushFramebuffer:function(y,w,T,E){return y===this.currentFramebuffer?this:(this.fboStack.push(y),this.setFramebuffer(y,w,T,E))},setFramebuffer:function(y,w,T,E){if(void 0===w&&(w=!1),void 0===T&&(T=!1),void 0===E&&(E=!0),y===this.currentFramebuffer)return this;var S=this.gl,A=this.width,_=this.height;return y&&y.renderTexture&&E?(A=y.renderTexture.width,_=y.renderTexture.height):this.flush(),S.bindFramebuffer(S.FRAMEBUFFER,y),E&&S.viewport(0,0,A,_),w&&(y?(this.drawingBufferHeight=_,this.pushScissor(0,0,A,_)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=y,T&&this.resetTextures(),this},popFramebuffer:function(y,w,T){void 0===y&&(y=!1),void 0===w&&(w=!1),void 0===T&&(T=!0);var E=this.fboStack;E.pop();var S=(S=E[E.length-1])||null;return this.setFramebuffer(S,y,w,T),S},setProgram:function(y){return y!==this.currentProgram&&(this.flush(),this.gl.useProgram(y),this.currentProgram=y,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(y,w,T,E){var S=this.gl,A=S.NEAREST,_=S.NEAREST,C=S.CLAMP_TO_EDGE,M=l(w=y?y.width:w,T=y?y.height:T);return M&&(C=S.REPEAT),E===u.ScaleModes.LINEAR&&this.config.antialias&&(A=M?this.mipmapFilter:S.LINEAR,_=S.LINEAR),y||"number"!=typeof w||"number"!=typeof T?this.createTexture2D(0,A,_,C,C,S.RGBA,y):this.createTexture2D(0,A,_,C,C,S.RGBA,null,w,T)},createTexture2D:function(y,w,T,E,S,A,_,C,M,R,L,D){R=null==R||R,void 0===L&&(L=!1),void 0===D&&(D=!1);var F=this.gl,U=F.createTexture();F.activeTexture(F.TEXTURE0);var P=F.getParameter(F.TEXTURE_BINDING_2D);return F.bindTexture(F.TEXTURE_2D,U),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,w),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,T),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,S),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,E),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,D),null==_?F.texImage2D(F.TEXTURE_2D,y,A,C,M,0,A,F.UNSIGNED_BYTE,null):(L||(C=_.width,M=_.height),F.texImage2D(F.TEXTURE_2D,y,A,A,F.UNSIGNED_BYTE,_)),l(C,M)&&F.generateMipmap(F.TEXTURE_2D),P&&F.bindTexture(F.TEXTURE_2D,P),U.isAlphaPremultiplied=R,U.isRenderTexture=!1,U.width=C,U.height=M,U.glIndex=0,U.glIndexCounter=-1,U},createFramebuffer:function(y,w,T,E){var S,A,_=this.gl,C=_.createFramebuffer();if(this.setFramebuffer(C),E&&(A=_.createRenderbuffer(),_.bindRenderbuffer(_.RENDERBUFFER,A),_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,y,w),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.RENDERBUFFER,A)),T.isRenderTexture=!0,T.isAlphaPremultiplied=!1,_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,T,0),(S=_.checkFramebufferStatus(_.FRAMEBUFFER))===_.FRAMEBUFFER_COMPLETE)return C.renderTexture=T,this.setFramebuffer(null),this.resetTextures(),C;throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[S])},createProgram:function(y,w){var T=this.gl,E=T.createProgram(),S=T.createShader(T.VERTEX_SHADER),A=T.createShader(T.FRAGMENT_SHADER);if(T.shaderSource(S,y),T.shaderSource(A,w),T.compileShader(S),T.compileShader(A),!T.getShaderParameter(S,T.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+T.getShaderInfoLog(S));if(!T.getShaderParameter(A,T.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+T.getShaderInfoLog(A));if(T.attachShader(E,S),T.attachShader(E,A),T.linkProgram(E),!T.getProgramParameter(E,T.LINK_STATUS))throw new Error("Link Program failed:\n"+T.getProgramInfoLog(E));return T.useProgram(E),E},createVertexBuffer:function(y,w){var T=this.gl,E=T.createBuffer();return T.bindBuffer(T.ARRAY_BUFFER,E),T.bufferData(T.ARRAY_BUFFER,y,w),T.bindBuffer(T.ARRAY_BUFFER,null),E},createIndexBuffer:function(y,w){var T=this.gl,E=T.createBuffer();return T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,E),T.bufferData(T.ELEMENT_ARRAY_BUFFER,y,w),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,null),E},deleteTexture:function(y,w){return y&&this.gl.deleteTexture(y),w&&this.resetTextures(),this},deleteFramebuffer:function(y){return y&&(this.gl.deleteFramebuffer(y),h(this.fboStack,y),this.currentFramebuffer===y&&(this.currentFramebuffer=null)),this},deleteProgram:function(y){return y&&this.gl.deleteProgram(y),this},deleteBuffer:function(y){return this.gl.deleteBuffer(y),this},preRenderCamera:function(y){var w=y.x,T=y.y,E=y.width,S=y.height,A=y.backgroundColor;y.emit(n.PRE_RENDER,y),this.pipelines.preBatchCamera(y),this.pushScissor(w,T,E,S),y.mask&&(this.currentCameraMask.mask=y.mask,this.currentCameraMask.camera=y._maskCamera,y.mask.preRenderWebGL(this,y,y._maskCamera)),0<A.alphaGL&&this.pipelines.setMulti().drawFillRect(w,T,E,S,v.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)},getCurrentStencilMask:function(){var y=null,w=this.maskStack,T=this.currentCameraMask;return 0<w.length?y=w[w.length-1]:T.mask&&T.mask.isStencil&&(y=T),y},postRenderCamera:function(y){var w,T=y.flashEffect,E=y.fadeEffect;(T.isRunning||E.isRunning||E.isComplete)&&(w=this.pipelines.setMulti(),T.postRenderWebGL(w,v.getTintFromFloats),E.postRenderWebGL(w,v.getTintFromFloats)),y.dirty=!1,this.popScissor(),y.mask&&(this.currentCameraMask.mask=null,y.mask.postRenderWebGL(this,y._maskCamera)),this.pipelines.postBatchCamera(y),y.emit(n.POST_RENDER,y)},preRender:function(){var y,w;this.contextLost||((y=this.gl).bindFramebuffer(y.FRAMEBUFFER,null),this.config.clearBeforeRender&&(y.clearColor((w=this.config.backgroundColor).redGL,w.greenGL,w.blueGL,w.alphaGL),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.enable(y.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&y.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER))},render:function(y,w,T){if(!this.contextLost){var E=w.length;if(this.emit(r.RENDER,y,T),this.preRenderCamera(T),0===E)return this.setBlendMode(u.BlendModes.NORMAL),void this.postRenderCamera(T);this.currentType="";for(var S=this.currentMask,A=0;A<E;A++){this.finalType=A===E-1;var _=w[A],C=_.mask;(S=this.currentMask).mask&&S.mask!==C&&S.mask.postRenderWebGL(this,S.camera),C&&S.mask!==C&&C.preRenderWebGL(this,_,T),_.blendMode!==this.currentBlendMode&&this.setBlendMode(_.blendMode);var M=_.type;M!==this.currentType&&(this.newType=!0,this.currentType=M),this.nextTypeMatch=!this.finalType&&w[A+1].type===this.currentType,_.renderWebGL(this,_,T),this.newType=!1}(S=this.currentMask).mask&&S.mask.postRenderWebGL(this,S.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(T)}},postRender:function(){var y;this.contextLost||(this.flush(),this.emit(r.POST_RENDER),(y=this.snapshotState).callback&&(m(this.canvas,y),y.callback=null),0<this.textureFlush&&(this.startActiveTexture++,this.currentActiveTexture=1))},snapshot:function(y,w,T){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,y,w,T)},snapshotArea:function(y,w,T,E,S,A,_){var C=this.snapshotState;return C.callback=S,C.type=A,C.encoder=_,C.getPixel=!1,C.x=y,C.y=w,C.width=Math.min(T,this.gl.drawingBufferWidth),C.height=Math.min(E,this.gl.drawingBufferHeight),this},snapshotPixel:function(y,w,T){return this.snapshotArea(y,w,1,1,T),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(y,w,T,E,S,A,_,C,M,R,L){void 0===S&&(S=!1),void 0===A&&(A=0),void 0===_&&(_=0),void 0===C&&(C=w),void 0===M&&(M=T);var D=this.currentFramebuffer;this.snapshotArea(A,_,C,M,E,R,L);var F=this.snapshotState;return F.getPixel=S,F.isFramebuffer=!0,F.bufferWidth=w,F.bufferHeight=T,this.setFramebuffer(y),m(this.canvas,F),this.setFramebuffer(D),F.callback=null,F.isFramebuffer=!1,this},canvasToTexture:function(y,w,T,E){return void 0===T&&(T=!1),void 0===E&&(E=!1),w?this.updateCanvasTexture(y,w,E):this.createCanvasTexture(y,T,E)},createCanvasTexture:function(y,w,T){void 0===w&&(w=!1),void 0===T&&(T=!1);var E=this.gl,S=E.NEAREST,A=E.NEAREST,_=y.width,C=y.height,M=E.CLAMP_TO_EDGE,R=l(_,C);return!w&&R&&(M=E.REPEAT),this.config.antialias&&(S=R?this.mipmapFilter:E.LINEAR,A=E.LINEAR),this.createTexture2D(0,S,A,M,M,E.RGBA,y,_,C,!0,!1,T)},updateCanvasTexture:function(y,w,T){void 0===T&&(T=!1);var E,S=this.gl,A=y.width,_=y.height;return 0<A&&0<_&&(S.activeTexture(S.TEXTURE0),E=S.getParameter(S.TEXTURE_BINDING_2D),S.bindTexture(S.TEXTURE_2D,w),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,T),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,y),w.width=A,w.height=_,E&&S.bindTexture(S.TEXTURE_2D,E)),w},createVideoTexture:function(y,w,T){void 0===w&&(w=!1),void 0===T&&(T=!1);var E=this.gl,S=E.NEAREST,A=E.NEAREST,_=y.videoWidth,C=y.videoHeight,M=E.CLAMP_TO_EDGE,R=l(_,C);return!w&&R&&(M=E.REPEAT),this.config.antialias&&(S=R?this.mipmapFilter:E.LINEAR,A=E.LINEAR),this.createTexture2D(0,S,A,M,M,E.RGBA,y,_,C,!0,!0,T)},updateVideoTexture:function(y,w,T){void 0===T&&(T=!1);var E,S=this.gl,A=y.videoWidth,_=y.videoHeight;return 0<A&&0<_&&(S.activeTexture(S.TEXTURE0),E=S.getParameter(S.TEXTURE_BINDING_2D),S.bindTexture(S.TEXTURE_2D,w),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,T),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,y),w.width=A,w.height=_,E&&S.bindTexture(S.TEXTURE_2D,E)),w},setTextureFilter:function(y,w){var T=this.gl,E=[T.LINEAR,T.NEAREST][w];T.activeTexture(T.TEXTURE0);var S=T.getParameter(T.TEXTURE_BINDING_2D);return T.bindTexture(T.TEXTURE_2D,y),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,E),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,E),S&&T.bindTexture(T.TEXTURE_2D,S),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var y=this.gl,w=this.tempTextures,T=0;T<w.length;T++)y.deleteTexture(w[T]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});g.exports=x},function(g,b,t){var h=t(0),n=t(65),s=t(99),u=t(367),i=t(370),r=t(371),o=t(105),l=t(372),e=t(373),a=t(374),c=t(375),d=new h({initialize:function(f){this.game=f.game,this.renderer=f,this.classes=new s([[n.UTILITY_PIPELINE,c],[n.MULTI_PIPELINE,o],[n.BITMAPMASK_PIPELINE,u],[n.SINGLE_PIPELINE,a],[n.ROPE_PIPELINE,e],[n.LIGHT_PIPELINE,r],[n.POINTLIGHT_PIPELINE,l],[n.GRAPHICS_PIPELINE,i]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null},boot:function(f){var p,v=this,m=this.game;if(this.classes.each(function(w,T){x=v.add(w,new T({game:m})),w===n.UTILITY_PIPELINE&&(v.UTILITY_PIPELINE=x,v.fullFrame1=x.fullFrame1,v.fullFrame2=x.fullFrame2,v.halfFrame1=x.halfFrame1,v.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),f)for(p in f){var x,y=f[p];(x=new y(m)).isPostFX?this.postPipelineClasses.set(p,y):this.has(p)||(this.classes.set(p,y),this.add(p,x))}},add:function(f,p){if(!p.isPostFX){var v=this.pipelines,m=this.renderer;return v.has(f)?console.warn("Pipeline exists: "+f):(p.name=f,p.manager=this,v.set(f,p)),p.hasBooted||p.boot(),0!==m.width&&0!==m.height&&p.resize(m.width,m.height),p}console.warn(f+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(f,p){this.postPipelineClasses.has(f)||this.postPipelineClasses.set(f,p)},flush:function(){this.current&&this.current.flush()},has:function(f){var p=this.pipelines;return"string"==typeof f?p.has(f):!!p.contains(f)},get:function(f){var p=this.pipelines;return"string"==typeof f?p.get(f):p.contains(f)?f:void 0},getPostPipeline:function(f,p){var v,m=this.postPipelineClasses;if("string"==typeof f?v=m.get(f):"function"==typeof f?m.contains(f)&&(v=f):"object"==typeof f&&(v=m.get(f.name)),v){var x=new v(this.game);return p&&(x.gameObject=p),x}},remove:function(f,p,v){void 0===p&&(p=!0),void 0===v&&(v=!0),this.pipelines.delete(f),p&&this.classes.delete(f),v&&this.postPipelineClasses.delete(f)},set:function(f,p,v){if(!f.isPostFX)return this.isCurrent(f,v)||(this.flush(),this.current&&this.current.unbind(),(this.current=f).bind(v)),f.updateProjectionMatrix(),f.onBind(p),f},preBatch:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=p.length-1;0<=v;v--){var m=p[v];m.active&&m.preBatch(f)}}},postBatch:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=0;v<p.length;v++){var m=p[v];m.active&&m.postBatch(f)}}},preBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=p.length-1;0<=v;v--){var m=p[v];m.active&&m.preBatch(f)}}},postBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=0;v<p.length;v++){var m=p[v];m.active&&m.postBatch(f)}}},isCurrent:function(f,p){var m=this.current;return m&&!p&&(p=m.currentShader),!(m!==f||p.program!==this.renderer.currentProgram)},copyFrame:function(f,p,v,m,x){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(f,p,v,m,x),this},copyToGame:function(f){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(f),this},drawFrame:function(f,p,v,m){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(f,p,v,m),this},blendFrames:function(f,p,v,m,x){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(f,p,v,m,x),this},blendFramesAdditive:function(f,p,v,m,x){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(f,p,v,m,x),this},clearFrame:function(f,p){return this.UTILITY_PIPELINE.clearFrame(f,p),this},blitFrame:function(f,p,v,m,x,y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(f,p,v,m,x,y),this},copyFrameRect:function(f,p,v,m,x,y,w,T){return this.UTILITY_PIPELINE.copyFrameRect(f,p,v,m,x,y,w,T),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(f){return this.UTILITY_PIPELINE.bind(f)},rebind:function(f){void 0===f&&this.previous&&(f=this.previous);var p=this.renderer,v=p.gl;v.disable(v.DEPTH_TEST),v.disable(v.CULL_FACE),p.hasActiveStencilMask()?v.clear(v.DEPTH_BUFFER_BIT):(v.disable(v.STENCIL_TEST),v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT)),v.viewport(0,0,p.width,p.height),p.currentProgram=null,p.setBlendMode(0,!0),f&&(this.current=f).rebind(),p.resetTextures()},clear:function(){var f=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,f.currentProgram=null,f.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});g.exports=d},function(g,b,t){var h=t(0),n=t(2),s=t(862),u=t(863),i=t(104),r=t(57),o=new h({Extends:r,initialize:function(l){l.fragShader=n(l,"fragShader",s),l.vertShader=n(l,"vertShader",u),l.batchSize=n(l,"batchSize",1),l.vertices=n(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=n(l,"attributes",[{name:"inPosition",size:2,type:i.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(l,e){r.prototype.resize.call(this,l,e),this.set2f("uResolution",l,e)},beginMask:function(l,e,a){var c,d=this.gl;l.bitmapMask&&d&&((c=this.renderer).flush(),c.pushFramebuffer(l.mainFramebuffer),d.disable(d.STENCIL_TEST),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),c.currentCameraMask.mask!==l&&(c.currentMask.mask=l,c.currentMask.camera=a))},endMask:function(l,e){var a,c=this.gl,d=this.renderer,f=l.bitmapMask;f&&c&&(d.flush(),d.pushFramebuffer(l.maskFramebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),d.setBlendMode(0,!0),f.renderWebGL(d,f,e),d.flush(),d.popFramebuffer(),d.popFramebuffer(),(a=d.getCurrentStencilMask())?(c.enable(c.STENCIL_TEST),a.mask.applyStencil(d,a.camera,!0)):d.currentMask.mask=null,d.pipelines.set(this),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,l.maskTexture),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,l.mainTexture),this.set1i("uInvertMaskAlpha",l.invertAlpha),c.drawArrays(this.topology,0,3),d.resetTextures())}});g.exports=o},function(g,b,t){g.exports={AFTER_FLUSH:t(864),BEFORE_FLUSH:t(865),BIND:t(866),BOOT:t(867),DESTROY:t(868),REBIND:t(869),RESIZE:t(870)}},function(g,b,t){var h=t(0),n=t(2),s=t(104),u=new h({initialize:function(i,r,o,l,e){this.pipeline=i,this.name=r,this.renderer=i.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(o,l),this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(e),this.createUniforms()},createAttributes:function(i){for(var r=0,o=0,l=[],e=this.vertexComponentCount=0;e<i.length;e++){var a=i[e],c=a.name,d=n(a,"size",1),f=n(a,"type",s.FLOAT),v=f.size;l.push({name:c,size:d,type:f.enum,normalized:!!a.normalized,offset:o,enabled:!1,location:-1}),4===v?r+=d:r++,o+=d*v}this.vertexSize=o,this.vertexComponentCount=r,this.attributes=l},bind:function(i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),i&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(i){void 0===i&&(i=!1);for(var r=this.gl,o=this.vertexSize,l=this.attributes,e=this.program,a=0;a<l.length;a++){var c,d=l[a],f=d.size,p=d.type,v=d.offset,m=d.enabled,x=d.location,y=!!d.normalized;i?0<=(c=r.getAttribLocation(e,d.name))?(r.enableVertexAttribArray(c),r.vertexAttribPointer(c,f,p,y,o,v),d.enabled=!0,d.location=c):-1!==c&&r.disableVertexAttribArray(c):m?r.vertexAttribPointer(x,f,p,y,o,v):!m&&-1<x&&(r.disableVertexAttribArray(x),d.location=-1)}return this},createUniforms:function(){for(var i,r,o=this.gl,l=this.program,e=this.uniforms,a=o.getProgramParameter(l,o.ACTIVE_UNIFORMS),c=0;c<a;c++){var d,f=o.getActiveUniform(l,c);f&&(null!==(r=o.getUniformLocation(l,i=f.name))&&(e[i]={name:i,location:r,value1:null,value2:null,value3:null,value4:null}),0<(d=i.indexOf("["))&&(i=i.substr(0,d),e.hasOwnProperty(i)||null!==(r=o.getUniformLocation(l,i))&&(e[i]={name:i,location:r,value1:null,value2:null,value3:null,value4:null})))}return this},hasUniform:function(i){return this.uniforms.hasOwnProperty(i)},resetUniform:function(i){var r=this.uniforms[i];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(i,r,o){var l=this.uniforms[r];return l&&l.value1!==o&&(l.value1=o,this.renderer.setProgram(this.program),i.call(this.gl,l.location,o),this.pipeline.currentShader=this),this},setUniform2:function(i,r,o,l){var e=this.uniforms[r];return e&&(e.value1===o&&e.value2===l||(e.value1=o,e.value2=l,this.renderer.setProgram(this.program),i.call(this.gl,e.location,o,l),this.pipeline.currentShader=this)),this},setUniform3:function(i,r,o,l,e){var a=this.uniforms[r];return a&&(a.value1===o&&a.value2===l&&a.value3===e||(a.value1=o,a.value2=l,a.value3=e,this.renderer.setProgram(this.program),i.call(this.gl,a.location,o,l,e),this.pipeline.currentShader=this)),this},setUniform4:function(i,r,o,l,e,a){var c=this.uniforms[r];return c&&(c.value1===o&&c.value2===l&&c.value3===e&&c.value4===a||(c.value1=o,c.value2=l,c.value3=e,c.value4=a,this.renderer.setProgram(this.program),i.call(this.gl,c.location,o,l,e,a),this.pipeline.currentShader=this)),this},set1f:function(i,r){return this.setUniform1(this.gl.uniform1f,i,r)},set2f:function(i,r,o){return this.setUniform2(this.gl.uniform2f,i,r,o)},set3f:function(i,r,o,l){return this.setUniform3(this.gl.uniform3f,i,r,o,l)},set4f:function(i,r,o,l,e){return this.setUniform4(this.gl.uniform4f,i,r,o,l,e)},set1fv:function(i,r){return this.setUniform1(this.gl.uniform1fv,i,r)},set2fv:function(i,r){return this.setUniform1(this.gl.uniform2fv,i,r)},set3fv:function(i,r){return this.setUniform1(this.gl.uniform3fv,i,r)},set4fv:function(i,r){return this.setUniform1(this.gl.uniform4fv,i,r)},set1iv:function(i,r){return this.setUniform1(this.gl.uniform1iv,i,r)},set2iv:function(i,r){return this.setUniform1(this.gl.uniform2iv,i,r)},set3iv:function(i,r){return this.setUniform1(this.gl.uniform3iv,i,r)},set4iv:function(i,r){return this.setUniform1(this.gl.uniform4iv,i,r)},set1i:function(i,r){return this.setUniform1(this.gl.uniform1i,i,r)},set2i:function(i,r,o){return this.setUniform2(this.gl.uniform2i,i,r,o)},set3i:function(i,r,o,l){return this.setUniform3(this.gl.uniform3i,i,r,o,l)},set4i:function(i,r,o,l,e){return this.setUniform4(this.gl.uniform4i,i,r,o,l,e)},setMatrix2fv:function(i,r,o){return this.setUniform2(this.gl.uniformMatrix2fv,i,r,o)},setMatrix3fv:function(i,r,o){return this.setUniform2(this.gl.uniformMatrix3fv,i,r,o)},setMatrix4fv:function(i,r,o){return this.setUniform2(this.gl.uniformMatrix4fv,i,r,o)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});g.exports=u},function(g,b,t){var h=t(0),n=t(68),s=t(2),u=t(871),i=t(872),r=t(25),o=t(104),l=t(57),e=new h({Extends:l,initialize:function(a){a.fragShader=s(a,"fragShader",u),a.vertShader=s(a,"vertShader",i),a.attributes=s(a,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),l.call(this,a),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(a,c,d,f,p,v){this.renderer.pipelines.set(this);var m=this.calcMatrix;v&&v.multiply(p,m);var x=a+d,y=c+f,w=m.getX(a,c),T=m.getY(a,c),E=m.getX(a,y),S=m.getY(a,y),A=m.getX(x,y),_=m.getY(x,y),C=m.getX(x,c),M=m.getY(x,c),R=this.fillTint;this.batchQuad(w,T,E,S,A,_,C,M,R.TL,R.TR,R.BL,R.BR)},batchFillTriangle:function(a,c,d,f,p,v,m,x){this.renderer.pipelines.set(this);var y=this.calcMatrix;x&&x.multiply(m,y);var w=y.getX(a,c),T=y.getY(a,c),E=y.getX(d,f),S=y.getY(d,f),A=y.getX(p,v),_=y.getY(p,v),C=this.fillTint;this.batchTri(w,T,E,S,A,_,C.TL,C.TR,C.BL)},batchStrokeTriangle:function(a,c,d,f,p,v,m,x,y){var w=this.tempTriangle;w[0].x=a,w[0].y=c,w[0].width=m,w[1].x=d,w[1].y=f,w[1].width=m,w[2].x=p,w[2].y=v,w[2].width=m,w[3].x=a,w[3].y=c,w[3].width=m,this.batchStrokePath(w,m,!1,x,y)},batchFillPath:function(a,c,d){this.renderer.pipelines.set(this);var f=this.calcMatrix;d&&d.multiply(c,f);for(var p,v,m=a.length,x=this.polygonCache,y=this.fillTint.TL,w=this.fillTint.TR,T=this.fillTint.BL,E=0;E<m;++E)x.push((v=a[E]).x,v.y);m=(p=n(x)).length;for(var S=0;S<m;S+=3){var A=2*p[S+0],_=2*p[S+1],C=2*p[S+2],M=x[0+A],R=x[1+A],L=x[0+_],D=x[1+_],F=x[0+C],U=x[1+C],P=f.getX(M,R),O=f.getY(M,R),B=f.getX(L,D),k=f.getY(L,D),I=f.getX(F,U),N=f.getY(F,U);this.batchTri(P,O,B,k,I,N,y,w,T)}x.length=0},batchStrokePath:function(a,c,d,f,p){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var v=a.length-1,m=0;m<v;m++){var x=a[m],y=a[m+1];this.batchLine(x.x,x.y,y.x,y.y,x.width/2,y.width/2,c,m,!d&&m===v-1,f,p)}},batchLine:function(a,c,d,f,p,v,m,x,y,w,T){this.renderer.pipelines.set(this);var E=this.calcMatrix;T&&T.multiply(w,E);var S,A,_=d-a,C=f-c,M=Math.sqrt(_*_+C*C),R=p*(f-c)/M,L=p*(a-d)/M,D=v*(f-c)/M,F=v*(a-d)/M,U=d-D,P=f-F,O=a-R,B=c-L,k=d+D,I=f+F,N=a+R,Y=c+L,X=E.getX(U,P),W=E.getY(U,P),G=E.getX(O,B),z=E.getY(O,B),V=E.getX(k,I),H=E.getY(k,I),j=E.getX(N,Y),K=E.getY(N,Y),Q=this.strokeTint,Z=Q.TL,J=Q.TR,q=Q.BL,tt=Q.BR;this.batchQuad(j,K,G,z,X,W,V,H,Z,J,q,tt),m<=2||(S=this.prevQuad,A=this.firstQuad,0<x&&S[4]?this.batchQuad(j,K,G,z,S[0],S[1],S[2],S[3],Z,J,q,tt):(A[0]=j,A[1]=K,A[2]=G,A[3]=z,A[4]=1),y&&A[4]?this.batchQuad(X,W,V,H,A[0],A[1],A[2],A[3],Z,J,q,tt):(S[0]=X,S[1]=W,S[2]=V,S[3]=H,S[4]=1))},batchVert:function(a,c,d){var f=this.vertexViewF32,p=this.vertexViewU32,v=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++v]=a,f[++v]=c,p[++v]=d,this.vertexCount++},batchQuad:function(a,c,d,f,p,v,m,x,y,w,T,E){var S=!1;return this.shouldFlush(6)&&(this.flush(),S=!0),this.batchVert(a,c,y),this.batchVert(d,f,T),this.batchVert(p,v,E),this.batchVert(a,c,y),this.batchVert(p,v,E),this.batchVert(m,x,w),S},batchTri:function(a,c,d,f,p,v,m,x,y){var w=!1;return this.shouldFlush(3)&&(this.flush(),w=!0),this.batchVert(a,c,m),this.batchVert(d,f,x),this.batchVert(p,v,y),w},destroy:function(){return l.prototype.destroy.call(this),this.polygonCache=null,this}});g.exports=e},function(g,b,t){var h=t(0),n=t(2),s=t(873),u=t(105),i=t(3),r=t(57),o=10,l=new i,e=new h({Extends:u,initialize:function(a){o=a.game.renderer.config.maxLights;for(var c=n(a,"fragShader",s),d=[],f=1;f<=o;f++)d.push({name:"lights"+f,fragShader:c.replace("%LIGHT_COUNT%",f.toString())});a.shaders=d,u.call(this,a),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){r.prototype.boot.call(this);var a=this.gl,c=a.createTexture();a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c};for(var d=0;d<this.shaders.length;d++)this["lightShader"+(d+1)]=this.shaders[d]},onRender:function(a,c){var d=a.sys.lights;if(d&&d.active){var f,p=d.getLights(c),v=p.length;if(0!==v){this.setShader(this["lightShader"+v],!0);var m=this.renderer.height,x=c.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),f=0;f<v;f++){var y=p[f].light,w=y.color,T="uLights["+f+"].";x.transformPoint(y.x,y.y,l),this.set2f(T+"position",l.x-c.scrollX*y.scrollFactorX*c.zoom,m-(l.y-c.scrollY*y.scrollFactorY*c.zoom)),this.set3f(T+"color",w.r,w.g,w.b),this.set1f(T+"intensity",y.intensity),this.set1f(T+"radius",y.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(a){var c,d,f,p;a===this.currentNormalMapRotation&&0!==this.vertexCount||(0<this.vertexCount&&this.flush(),c=this.inverseRotationMatrix,a?(d=-a,f=Math.cos(d),p=Math.sin(d),c[1]=p,c[3]=-p,c[0]=c[4]=f):(c[0]=c[4]=1,c[1]=c[3]=0),this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=a)},setTexture2D:function(a,c){var d=this.renderer;void 0===a&&(a=d.tempTextures[0]);var f=this.getNormalMap(c);return d.isNewNormalMap(a,f)&&(this.flush(),d.setTextureZero(a),d.setNormalMap(f)),this.setNormalMapRotation(c?c.rotation:0),this.currentUnit=0},setGameObject:function(a,c){void 0===c&&(c=a.frame);var d=this.renderer,f=c.glTexture,p=this.getNormalMap(a);return d.isNewNormalMap()&&(this.flush(),d.setTextureZero(f),d.setNormalMap(p)),this.setNormalMapRotation(a.rotation),this.currentUnit=0},getNormalMap:function(a){var c;return a?a.displayTexture?c=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?c=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(c=Array.isArray(a.tileset)?a.tileset[0].image.dataSource[0]:a.tileset.image.dataSource[0]):c=this.defaultNormalMap,(c=c||this.defaultNormalMap).glTexture}});e.LIGHT_COUNT=o,g.exports=e},function(g,b,t){var h=t(0),n=t(2),s=t(876),u=t(877),i=t(57),r=new h({Extends:i,initialize:function(o){o.vertShader=n(o,"vertShader",u),o.fragShader=n(o,"fragShader",s),o.attributes=n(o,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),i.call(this,o)},onRender:function(o,l){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",l.zoom)},batchPointLight:function(o,l,e,a,c,d,f,p,v,m,x,y){var w=o.color,T=o.intensity,E=o.radius,S=o.attenuation,A=w.r*T,_=w.g*T,C=w.b*T,M=l.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(e,a,x,y,E,S,A,_,C,M),this.batchLightVert(c,d,x,y,E,S,A,_,C,M),this.batchLightVert(f,p,x,y,E,S,A,_,C,M),this.batchLightVert(e,a,x,y,E,S,A,_,C,M),this.batchLightVert(f,p,x,y,E,S,A,_,C,M),this.batchLightVert(v,m,x,y,E,S,A,_,C,M)},batchLightVert:function(o,l,e,a,c,d,f,p,v,m){var x=this.vertexViewF32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;x[++y]=o,x[++y]=l,x[++y]=e,x[++y]=a,x[++y]=c,x[++y]=d,x[++y]=f,x[++y]=p,x[++y]=v,x[++y]=m,this.vertexCount++}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=t(105),u=new h({Extends:s,initialize:function(i){i.topology=5,i.batchSize=n(i,"batchSize",256),s.call(this,i)}});g.exports=u},function(g,b,t){var h=t(0),n=t(2),s=t(105),u=t(878),i=t(879),r=t(57),o=new h({Extends:s,initialize:function(l){l.fragShader=n(l,"fragShader",u),l.vertShader=n(l,"vertShader",i),l.forceZero=!0,s.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});g.exports=o},function(g,b,t){var h=t(880),n=t(33),s=t(0),u=t(195),i=t(881),r=t(882),o=t(2),l=t(883),e=t(376),a=t(57),c=new s({Extends:a,initialize:function(d){d.renderTarget=o(d,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),d.vertShader=o(d,"vertShader",e),d.shaders=o(d,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:l},{name:"ColorMatrix",fragShader:i}]),d.attributes=o(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.batchSize=1,a.call(this,d),this.colorMatrix=new u},boot:function(){a.prototype.boot.call(this);var d=this.shaders,f=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(d,f,p,v,m){void 0===p&&(p=1),void 0===v&&(v=!0),void 0===m&&(m=!0);var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,d.texture),f?(x.viewport(0,0,f.width,f.height),x.bindFramebuffer(x.FRAMEBUFFER,f.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,f.texture,0)):x.viewport(0,0,d.width,d.height),v&&(x.clearColor(0,0,0,m?0:1),x.clear(x.COLOR_BUFFER_BIT)),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blitFrame:function(d,f,p,v,m,x){void 0===p&&(p=1),void 0===v&&(v=!0),void 0===m&&(m=!0),void 0===x&&(x=!1);var w,T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),d.height>f.height?(T.viewport(0,0,d.width,d.height),this.setTargetUVs(d,f)):T.viewport(0,f.height-d.height,d.width,d.height),T.bindFramebuffer(T.FRAMEBUFFER,f.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,f.texture,0),v&&(T.clearColor(0,0,0,m?0:1),T.clear(T.COLOR_BUFFER_BIT)),x&&(w=this.renderer.currentBlendMode,this.renderer.setBlendMode(n.ERASE)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),x&&this.renderer.setBlendMode(w),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,f,p,v,m,x,y,w){void 0===y&&(y=!0),void 0===w&&(w=!0);var T=this.gl;T.bindFramebuffer(T.FRAMEBUFFER,d.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,d.texture,0),y&&(T.clearColor(0,0,0,w?0:1),T.clear(T.COLOR_BUFFER_BIT)),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,f.texture),T.copyTexSubImage2D(T.TEXTURE_2D,0,0,0,p,v,m,x),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},copyToGame:function(d){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(d,f,p,v){void 0===p&&(p=!0),void 0===v&&(v=this.colorMatrix);var m=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",v.getData()),this.set1f("uAlpha",v.alpha),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,d.texture),f?(m.viewport(0,0,f.width,f.height),m.bindFramebuffer(m.FRAMEBUFFER,f.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f.texture,0)):m.viewport(0,0,d.width,d.height),m.clearColor(0,0,0,p?0:1),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),m.bindFramebuffer(m.FRAMEBUFFER,null),m.bindTexture(m.TEXTURE_2D,null)},blendFrames:function(d,f,p,v,m,x){void 0===v&&(v=1),void 0===m&&(m=!0),void 0===x&&(x=this.linearShader);var y=this.gl;this.setShader(x),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",v),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture),y.activeTexture(y.TEXTURE1),y.bindTexture(y.TEXTURE_2D,f.texture),p?(y.bindFramebuffer(y.FRAMEBUFFER,p.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,p.texture,0),y.viewport(0,0,p.width,p.height)):y.viewport(0,0,d.width,d.height),y.clearColor(0,0,0,m?0:1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFramesAdditive:function(d,f,p,v,m){this.blendFrames(d,f,p,v,m,this.addShader)},clearFrame:function(d,f){void 0===f&&(f=!0);var p=this.gl;p.viewport(0,0,d.width,d.height),p.bindFramebuffer(p.FRAMEBUFFER,d.framebuffer),p.clearColor(0,0,0,f?0:1),p.clear(p.COLOR_BUFFER_BIT),p.bindFramebuffer(p.FRAMEBUFFER,this.renderer.currentFramebuffer)},setUVs:function(d,f,p,v,m,x,y,w){var T=this.vertexViewF32;T[2]=d,T[3]=f,T[6]=p,T[7]=v,T[10]=m,T[11]=x,T[14]=d,T[15]=f,T[18]=m,T[19]=x,T[22]=y,T[23]=w},setTargetUVs:function(d,f){var p=.5<(p=f.height/d.height)?.5-(p-.5):.5-p+.5;this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});g.exports=c},function(g,b){g.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(g,b,t){var h=t(31),n=t(36),s=t(2);g.exports=function(u,i){var r=u.getContext("experimental-webgl"),o=s(i,"callback"),l=s(i,"type","image/png"),e=s(i,"encoder",.92),a=s(i,"x",0),c=s(i,"y",0),d=s(i,"getPixel",!1),f=s(i,"isFramebuffer",!1),p=f?s(i,"bufferWidth",1):r.drawingBufferWidth,v=f?s(i,"bufferHeight",1):r.drawingBufferHeight;if(d){var m=new Uint8Array(4);r.readPixels(a,f?c:v-c,1,1,r.RGBA,r.UNSIGNED_BYTE,m),o.call(null,new n(m[0],m[1],m[2],m[3]/255))}else{var y=s(i,"width",p),w=s(i,"height",v),T=new Uint8Array(y*w*4);r.readPixels(a,v-c-w,y,w,r.RGBA,r.UNSIGNED_BYTE,T);for(var E=h.createWebGL(this,y,w),S=E.getContext("2d"),A=S.getImageData(0,0,y,w),_=A.data,C=0;C<w;C++)for(var M=0;M<y;M++){var R=4*((w-C-1)*y+M),L=4*(C*y+M);_[0+L]=T[0+R],_[1+L]=T[1+R],_[2+L]=T[2+R],_[3+L]=T[3+R]}S.putImageData(A,0,0);var D=new Image;D.onerror=function(){o.call(null),h.remove(E)},D.onload=function(){o.call(null,D),h.remove(E)},D.src=E.toDataURL(l,e)}}},function(g,b,t){var h=t(39);g.exports=function(n){var s,u,i,r,o,l,e,a=n.config;a.hideBanner||(s="WebGL",a.renderType===h.CANVAS?s="Canvas":a.renderType===h.HEADLESS&&(s="Headless"),u=a.audio,e=(i=n.device.audio).webAudio&&!u.disableWebAudio?"Web Audio":u.noAudio||!i.webAudio&&!i.audioData?"No Audio":"HTML5 Audio",n.device.browser.ie?window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io"):(o=[r=""],Array.isArray(a.bannerBackgroundColor)?(a.bannerBackgroundColor.forEach(function(c){r=r.concat("%c "),o.push("background: "+c),l=c}),o[o.length-1]="color: "+a.bannerTextColor+"; background: "+l):(r=r.concat("%c "),o.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor)),o.push("background: #fff"),a.gameTitle&&(r=r.concat(a.gameTitle),a.gameVersion&&(r=r.concat(" v"+a.gameVersion)),a.hidePhaser||(r=r.concat(" / "))),a.hidePhaser||(r=r.concat("Phaser v"+h.VERSION+" ("+s+" | "+e+")")),r=r.concat(" %c "+a.gameURL),o[0]=r,console.log.apply(console,o)))}},function(g,b,t){var h=t(0),n=t(6),s=t(1),u=t(380),i=new h({initialize:function(r,o){this.game=r,this.raf=new u,this.started=!1,this.running=!1,this.minFps=n(o,"min",5),this.targetFps=n(o,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=n(o,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(o,"deltaHistory",10),this.panicMax=n(o,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(o,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3;for(var o=this.framesThisSecond=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now(),o=(this.now=r)-this.lastTime;o<0&&(o=0),this.rawDelta=o;var l=this.deltaIndex,e=this.deltaHistory,a=this.deltaSmoothingMax,c=o,d=o;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,c=Math.min(c,this._target)),c>this._min&&(c=e[l],c=Math.min(c,this._min)),e[l]=c,this.deltaIndex++,this.deltaIndex>a&&(this.deltaIndex=0);for(var f=d=0;f<a;f++)d+=e[f];d/=a}this.delta=d,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++,this.callback(r,d,d/this._target),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});g.exports=i},function(g,b,t){var h=t(0),n=t(1),s=new h({initialize:function(){this.isRunning=!1,this.callback=n,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var u=this;this.step=function i(){var r=window.performance.now();u.lastTime=u.tick,u.tick=r,u.callback(r),u.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var r=Date.now(),o=Math.min(Math.max(2*u.target+u.tick-r,0),u.target);u.lastTime=u.tick,u.tick=r,u.callback(r),u.timeOutID=window.setTimeout(i,o)}},start:function(u,i,r){this.isRunning||(this.callback=u,this.isSetTimeOut=i,this.target=r,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}});g.exports=s},function(g,b,t){var h=t(22);g.exports=function(n){var s,u=n.events;void 0!==document.hidden?s="visibilitychange":["webkit","moz","ms"].forEach(function(i){void 0!==document[i+"Hidden"]&&(document.hidden=function(){return document[i+"Hidden"]},s=i+"visibilitychange")}),s&&document.addEventListener(s,function(i){document.hidden||"pause"===i.type?u.emit(h.HIDDEN):u.emit(h.VISIBLE)},!1),window.onblur=function(){u.emit(h.BLUR)},window.onfocus=function(){u.emit(h.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()}},function(g,b,t){var h=t(383),n=t(31),s=t(6);g.exports=function(u){var i=s(u,"data",[]),r=s(u,"canvas",null),o=s(u,"palette",h),l=s(u,"pixelWidth",1),e=s(u,"pixelHeight",l),a=s(u,"resizeCanvas",!0),c=s(u,"clearCanvas",!0),d=s(u,"preRender",null),f=s(u,"postRender",null),p=Math.floor(Math.abs(i[0].length*l)),v=Math.floor(Math.abs(i.length*e));r||(r=n.create2D(this,p,v),c=a=!1),a&&(r.width=p,r.height=v);var m=r.getContext("2d");c&&m.clearRect(0,0,p,v),d&&d(r,m);for(var x=0;x<i.length;x++)for(var y=i[x],w=0;w<y.length;w++){var T=y[w];"."!==T&&" "!==T&&(m.fillStyle=o[T],m.fillRect(w*l,x*e,l,e))}return f&&f(r,m),r}},function(g,b){g.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(g,b,t){var h=t(0),n=t(352),s=t(90),u=t(3),i=new h({Extends:s,initialize:function(r,o,l,e){s.call(this,"CubicBezierCurve"),Array.isArray(r)&&(e=new u(r[6],r[7]),l=new u(r[4],r[5]),o=new u(r[2],r[3]),r=new u(r[0],r[1])),this.p0=r,this.p1=o,this.p2=l,this.p3=e},getStartPoint:function(r){return void 0===r&&(r=new u),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){void 0===o&&(o=new u);var l=this.p0,e=this.p1,a=this.p2,c=this.p3;return o.set(n(r,l.x,e.x,a.x,c.x),n(r,l.y,e.y,a.y,c.y))},draw:function(r,o){void 0===o&&(o=32);var l=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var e=1;e<l.length;e++)r.lineTo(l[e].x,l[e].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});i.fromJSON=function(r){var o=r.points,l=new u(o[0],o[1]),e=new u(o[2],o[3]),a=new u(o[4],o[5]),c=new u(o[6],o[7]);return new i(l,e,a,c)},g.exports=i},function(g,b,t){var h=t(0),n=t(90),s=t(34),u=t(6),i=t(193),r=t(3),o=new h({Extends:n,initialize:function(l,e,a,c,d,f,p,v){var m;"object"==typeof l?(l=u(m=l,"x",0),e=u(m,"y",0),a=u(m,"xRadius",0),c=u(m,"yRadius",a),d=u(m,"startAngle",0),f=u(m,"endAngle",360),p=u(m,"clockwise",!1),v=u(m,"rotation",0)):(void 0===c&&(c=a),void 0===d&&(d=0),void 0===f&&(f=360),void 0===p&&(p=!1),void 0===v&&(v=0)),n.call(this,"EllipseCurve"),this.p0=new r(l,e),this._xRadius=a,this._yRadius=c,this._startAngle=s(d),this._endAngle=s(f),this._clockwise=p,this._rotation=s(v)},getStartPoint:function(l){return void 0===l&&(l=new r),this.getPoint(0,l)},getResolution:function(l){return 2*l},getPoint:function(l,e){void 0===e&&(e=new r);for(var a=2*Math.PI,c=this._endAngle-this._startAngle,d=Math.abs(c)<Number.EPSILON;c<0;)c+=a;for(;a<c;)c-=a;c<Number.EPSILON&&(c=d?0:a),this._clockwise&&!d&&(c===a?c=-a:c-=a);var f,p,v,m,x=this._startAngle+l*c,y=this.p0.x+this._xRadius*Math.cos(x),w=this.p0.y+this._yRadius*Math.sin(x);return 0!==this._rotation&&(f=Math.cos(this._rotation),p=Math.sin(this._rotation),y=(v=y-this.p0.x)*f-(m=w-this.p0.y)*p+this.p0.x,w=v*p+m*f+this.p0.y),e.set(y,w)},setXRadius:function(l){return this.xRadius=l,this},setYRadius:function(l){return this.yRadius=l,this},setWidth:function(l){return this.xRadius=l/2,this},setHeight:function(l){return this.yRadius=l/2,this},setStartAngle:function(l){return this.startAngle=l,this},setEndAngle:function(l){return this.endAngle=l,this},setClockwise:function(l){return this.clockwise=l,this},setRotation:function(l){return this.rotation=l,this},x:{get:function(){return this.p0.x},set:function(l){this.p0.x=l}},y:{get:function(){return this.p0.y},set:function(l){this.p0.y=l}},xRadius:{get:function(){return this._xRadius},set:function(l){this._xRadius=l}},yRadius:{get:function(){return this._yRadius},set:function(l){this._yRadius=l}},startAngle:{get:function(){return i(this._startAngle)},set:function(l){this._startAngle=s(l)}},endAngle:{get:function(){return i(this._endAngle)},set:function(l){this._endAngle=s(l)}},clockwise:{get:function(){return this._clockwise},set:function(l){this._clockwise=l}},angle:{get:function(){return i(this._rotation)},set:function(l){this._rotation=s(l)}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=l}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:i(this._startAngle),endAngle:i(this._endAngle),clockwise:this._clockwise,rotation:i(this._rotation)}}});o.fromJSON=function(l){return new o(l)},g.exports=o},function(g,b,t){var h=t(0),n=t(90),s=t(196),u=t(10),i=t(3),r=new i,o=new h({Extends:n,initialize:function(l,e){n.call(this,"LineCurve"),Array.isArray(l)&&(e=new i(l[2],l[3]),l=new i(l[0],l[1])),this.p0=l,this.p1=e,this.arcLengthDivisions=1},getBounds:function(l){return void 0===l&&(l=new u),s([this.p0,this.p1],l)},getStartPoint:function(l){return void 0===l&&(l=new i),l.copy(this.p0)},getResolution:function(l){return void 0===l&&(l=1),l},getPoint:function(l,e){return void 0===e&&(e=new i),1===l?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(l).add(this.p0),e)},getPointAt:function(l,e){return this.getPoint(l,e)},getTangent:function(){return r.copy(this.p1).subtract(this.p0).normalize()},getUtoTmapping:function(l,e,a){var c,d;return e?(d=(c=this.getLengths(a))[c.length-1],Math.min(e,d)/d):l},draw:function(l){return l.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});o.fromJSON=function(l){var e=l.points,a=new i(e[0],e[1]),c=new i(e[2],e[3]);return new o(a,c)},g.exports=o},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(u,i){this.active=!1,this.p0=new n(u,i)},getPoint:function(u,i){return void 0===i&&(i=new n),i.copy(this.p0)},getPointAt:function(u,i){return this.getPoint(u,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});g.exports=s},function(g,b,t){var h=t(0),n=t(90),s=t(353),u=t(3),i=new h({Extends:n,initialize:function(r,o,l){n.call(this,"QuadraticBezier"),Array.isArray(r)&&(l=new u(r[4],r[5]),o=new u(r[2],r[3]),r=new u(r[0],r[1])),this.p0=r,this.p1=o,this.p2=l},getStartPoint:function(r){return void 0===r&&(r=new u),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){void 0===o&&(o=new u);var l=this.p0,e=this.p1,a=this.p2;return o.set(s(r,l.x,e.x,a.x),s(r,l.y,e.y,a.y))},draw:function(r,o){void 0===o&&(o=32);var l=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var e=1;e<l.length;e++)r.lineTo(l[e].x,l[e].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});i.fromJSON=function(r){var o=r.points,l=new u(o[0],o[1]),e=new u(o[2],o[3]),a=new u(o[4],o[5]);return new i(l,e,a)},g.exports=i},function(g,b,t){var h=t(191),n=t(0),s=t(90),u=t(3),i=new n({Extends:s,initialize:function(r){void 0===r&&(r=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(r){for(var o=0;o<r.length;o++){var l=new u;"number"==typeof r[o]?(l.x=r[o],l.y=r[o+1],o++):Array.isArray(r[o])?(l.x=r[o][0],l.y=r[o][1]):(l.x=r[o].x,l.y=r[o].y),this.points.push(l)}return this},addPoint:function(r,o){var l=new u(r,o);return this.points.push(l),l},getStartPoint:function(r){return void 0===r&&(r=new u),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,o){void 0===o&&(o=new u);var l=this.points,e=(l.length-1)*r,a=Math.floor(e),c=e-a,d=l[0===a?a:a-1],f=l[a],p=l[a>l.length-2?l.length-1:a+1],v=l[a>l.length-3?l.length-1:a+2];return o.set(h(c,d.x,f.x,p.x,v.x),h(c,d.y,f.y,p.y,v.y))},toJSON:function(){for(var r=[],o=0;o<this.points.length;o++)r.push(this.points[o].x),r.push(this.points[o].y);return{type:this.type,points:r}}});i.fromJSON=function(r){return new i(r.points)},g.exports=i},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i){s&&""!==s||(s=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),u&&""!==u||(u=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===i&&(i=null),this.key=n,this.fragmentSrc=s,this.vertexSrc=u,this.uniforms=i}});g.exports=h},function(g,b,t){var h=t(36);h.ColorSpectrum=t(905),h.ColorToRGBA=t(906),h.ComponentToHex=t(392),h.GetColor=t(100),h.GetColor32=t(322),h.HexStringToColor=t(321),h.HSLToColor=t(907),h.HSVColorWheel=t(908),h.HSVToRGB=t(185),h.HueToComponent=t(393),h.IntegerToColor=t(186),h.IntegerToRGB=t(324),h.Interpolate=t(909),h.ObjectToColor=t(325),h.RandomRGB=t(910),h.RGBStringToColor=t(326),h.RGBToHSV=t(323),h.RGBToString=t(911),h.ValueToColor=t(184),g.exports=h},function(g,b){g.exports=function(t){var h=t.toString(16);return 1===h.length?"0"+h:h}},function(g,b){g.exports=function(t,h,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(h-t)*n:n<.5?h:n<2/3?t+(h-t)*(2/3-n)*6:t}},function(g,b,t){var h=t(102);g.exports=function(n){var s;"complete"!==document.readyState&&"interactive"!==document.readyState?(s=function(){document.removeEventListener("deviceready",s,!0),document.removeEventListener("DOMContentLoaded",s,!0),window.removeEventListener("load",s,!0),n()},document.body?h.cordova?document.addEventListener("deviceready",s,!1):(document.addEventListener("DOMContentLoaded",s,!0),window.addEventListener("load",s,!0)):window.setTimeout(s,20)):n()}},function(g,b){g.exports=function(t){if(!t)return window.innerHeight;var h=Math.abs(window.orientation),n={w:0,h:0},s=document.createElement("div");return s.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(s),n.w=90===h?s.offsetHeight:window.innerWidth,n.h=90===h?window.innerWidth:s.offsetHeight,document.documentElement.removeChild(s),s=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(g,b,t){var h=t(198);g.exports=function(n,s){var u=window.screen,i=!!u&&(u.orientation||u.mozOrientation||u.msOrientation);return i&&"string"==typeof i.type?i.type:"string"==typeof i?i:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?h.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?h.ORIENTATION.LANDSCAPE:void 0:n<s?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE}},function(g,b){g.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(g,b){g.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(g,b){g.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(g,b){g.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(g,b){g.exports=function(t){var h;return""!==t&&("string"==typeof t?h=document.getElementById(t):t&&1===t.nodeType&&(h=t)),h||document.body}},function(g,b){g.exports=function(t){var h="";try{window.DOMParser?h=(new DOMParser).parseFromString(t,"text/xml"):(h=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(n){h=null}return h&&h.documentElement&&!h.getElementsByTagName("parsererror").length?h:null}},function(g,b,t){var h=t(0),n=t(200),s=t(9),u=t(49),i=t(22),r=t(404),o=t(405),l=t(406),e=t(407),a=t(25),c=t(174),d=new h({initialize:function(f,p){this.game=f,this.config=p,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=p.inputKeyboard?new r(this):null,this.mouse=p.inputMouse?new o(this):null,this.touch=p.inputTouch?new e(this):null,this.pointers=[],this.pointersTotal=p.inputActivePointers,p.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var v=0;v<=this.pointersTotal;v++){var m=new l(this,v);m.smoothFactor=p.inputSmoothFactor,this.pointers.push(m)}this.mousePointer=p.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new a,this._tempMatrix2=new a,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],f.events.once(i.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(u.MANAGER_BOOT),this.game.events.on(i.PRE_RENDER,this.preRender,this),this.game.events.once(i.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(u.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(u.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,p=this.game.loop.delta,v=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(u.MANAGER_UPDATE);for(var m=0;m<v.length;m++){var x=v[m];if(x.sys.input&&x.sys.input.updatePoll(f,p)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f){f.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){void 0===f&&(f=1);var p=[];10<this.pointersTotal+f&&(f=10-this.pointersTotal);for(var v=0;v<f;v++){var x=new l(this,this.pointers.length);x.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(x),this.pointersTotal++,p.push(x)}return p},updateInputPlugins:function(f,p){var v=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var m=0;m<v.length;m++){var x=v[m];if(x.sys.input&&(x.sys.input.update(f,p)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var x=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var w=p[y];if(!w.active){w.touchstart(x,f),this.activePointer=w,v.push(w);break}}this.updateInputPlugins(n.TOUCH_START,v)},onTouchMove:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var x=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var w=p[y];if(w.active&&w.identifier===x.identifier){w.touchmove(x,f),this.activePointer=w,v.push(w);break}}this.updateInputPlugins(n.TOUCH_MOVE,v)},onTouchEnd:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var x=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var w=p[y];if(w.active&&w.identifier===x.identifier){w.touchend(x,f),v.push(w);break}}this.updateInputPlugins(n.TOUCH_END,v)},onTouchCancel:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var x=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var w=p[y];if(w.active&&w.identifier===x.identifier){w.touchcancel(x,f),v.push(w);break}}this.updateInputPlugins(n.TOUCH_CANCEL,v)},onMouseDown:function(f){var p=this.mousePointer;p.down(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var p=this.mousePointer;p.move(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var p=this.mousePointer;p.up(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var p=this.mousePointer;p.wheel(f),this.activePointer=p,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(u.POINTERLOCK_CHANGE,f,p)},inputCandidate:function(f,p){var v=f.input;if(!v||!v.enabled||!v.alwaysEnabled&&!f.willRender(p))return!1;var m=!0,x=f.parentContainer;if(x)do{if(!x.willRender(p)){m=!1;break}x=x.parentContainer}while(x);return m},hitTest:function(f,p,v,m){void 0===m&&(m=this._tempHitTest);var x=this._tempPoint,y=v.scrollX,w=v.scrollY;m.length=0,v.getWorldPoint(f.x,f.y,x),f.worldX=x.x,f.worldY=x.y;for(var S={x:0,y:0},A=this._tempMatrix,_=this._tempMatrix2,C=0;C<p.length;C++){var M,R,L=p[C];this.inputCandidate(L,v)&&(M=x.x+y*L.scrollFactorX-y,R=x.y+w*L.scrollFactorY-w,L.parentContainer?(L.getWorldTransformMatrix(A,_),A.applyInverse(M,R,S)):c(M,R,L.x,L.y,L.rotation,L.scaleX,L.scaleY,S),this.pointWithinHitArea(L,S.x,S.y)&&m.push(L))}return m},pointWithinHitArea:function(f,p,v){p+=f.displayOriginX,v+=f.displayOriginY;var m=f.input;return!(!m||!m.hitAreaCallback(m.hitArea,p,v,f)||(m.localX=p,m.localY=v,0))},pointWithinInteractiveObject:function(f,p,v){return!!f.hitArea&&(v+=f.gameObject.displayOriginY,f.localX=p+=f.gameObject.displayOriginX,f.localY=v,f.hitAreaCallback(f.hitArea,p,v,f))},transformPointer:function(f,p,v,m){var x=f.position,y=f.prevPosition;y.x=x.x,y.y=x.y;var w=this.scaleManager.transformX(p),T=this.scaleManager.transformY(v),E=f.smoothFactor;m&&0!==E?(x.x=w*E+y.x*(1-E),x.y=T*E+y.y*(1-E)):(x.x=w,x.y=T)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(i.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});g.exports=d},function(g,b,t){var h=t(89),n=t(0),s=t(22),u=t(49),i=t(141),r=t(1),o=new n({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.onKeyDown=r,this.onKeyUp=r,l.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputKeyboard,this.target=l.inputKeyboardEventTarget,this.addCapture(l.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var l=this;this.onKeyDown=function(a){!a.defaultPrevented&&l.enabled&&l.manager&&(l.queue.push(a),l.manager.events.emit(u.MANAGER_PROCESS),l.preventDefault&&!(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)&&-1<l.captures.indexOf(a.keyCode)&&a.preventDefault())},this.onKeyUp=function(a){!a.defaultPrevented&&l.enabled&&l.manager&&(l.queue.push(a),l.manager.events.emit(u.MANAGER_PROCESS),l.preventDefault&&!(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)&&-1<l.captures.indexOf(a.keyCode)&&a.preventDefault())};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var l=this.target;l.removeEventListener("keydown",this.onKeyDown,!1),l.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(l){"string"==typeof l&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var e=this.captures,a=0;a<l.length;a++){var c=l[a];"string"==typeof c&&(c=i[c.trim().toUpperCase()]),-1===e.indexOf(c)&&e.push(c)}this.preventDefault=0<e.length},removeCapture:function(l){"string"==typeof l&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var e=this.captures,a=0;a<l.length;a++){var c=l[a];"string"==typeof c&&(c=i[c.toUpperCase()]),h(e,c)}this.preventDefault=0<e.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});g.exports=o},function(g,b,t){var h=t(0),n=t(188),s=t(49),u=t(1),i=new h({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,r.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){var r;n.pointerLock&&((r=this.target).requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock())},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var o=this,l=this.manager,e=l.canvas,a=window&&window.focus&&l.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&(l.onMouseMove(d),o.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){a&&window.focus(),!d.defaultPrevented&&o.enabled&&l&&l.enabled&&(l.onMouseDown(d),o.preventDefaultDown&&d.target===e&&d.preventDefault())},this.onMouseDownWindow=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&d.target!==e&&l.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&(l.onMouseUp(d),o.preventDefaultUp&&d.target===e&&d.preventDefault())},this.onMouseUpWindow=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&d.target!==e&&l.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&l.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&l.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&o.enabled&&l&&l.enabled&&l.onMouseWheel(d),o.preventDefaultWheel&&d.target===e&&d.preventDefault()};var c={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,c),r.addEventListener("mouseout",this.onMouseOut,c),r.addEventListener("wheel",this.onMouseWheel,this.preventDefaultWheel?{passive:!1}:c),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch(d){window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(d){var f=o.target;o.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,l.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&((r=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=i},function(g,b,t){var h=t(343),n=t(0),s=t(48),u=t(123),i=t(354),r=t(3),o=t(102),l=new n({initialize:function(e,a){this.manager=e,this.id=a,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===a,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(e){var a=e.getWorldPoint(this.x,this.y);return this.worldX=a.x,this.worldY=a.y,this},positionToCamera:function(e,a){return e.getWorldPoint(this.x,this.y,a)},updateMotion:function(){var e,a,c,d,f=this.position.x,p=this.position.y,v=this.midPoint.x,m=this.midPoint.y;f===v&&p===m||(e=i(this.motionFactor,v,f),a=i(this.motionFactor,m,p),u(e,f,.1)&&(e=f),u(a,p,.1)&&(a=p),this.midPoint.set(e,a),this.velocity.set(c=f-e,d=p-a),this.angle=h(e,a,f,p),this.distance=Math.sqrt(c*c+d*d))},up:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),0===e.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),0===e.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=e.timeStamp),this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0),this.moveTime=e.timeStamp,this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ,this.wasTouch=!1},touchstart:function(e,a){e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.active=!0,this.buttons=1,this.event=a,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=a.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(e,a){this.event=a,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.moveTime=a.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(e,a){this.buttons=0,this.event=a,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=a.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(e,a){this.buttons=0,this.event=a,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=a.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(e,a){void 0===e&&(e=10),void 0===a&&(a=[]);for(var c=this.prevPosition.x,d=this.prevPosition.y,f=this.position.x,p=this.position.y,v=0;v<e;v++){var m=1/e*v;a[v]={x:i(m,c,f),y:i(m,d,p)}}return a},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}});g.exports=l},function(g,b,t){var h=t(0),n=t(49),s=t(1),u=new h({initialize:function(i){this.manager=i,this.capture=!0,this.enabled=!1,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,i.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputTouch,this.target=i.inputTouchEventTarget,this.capture=i.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},startListeners:function(){var i=this,r=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(c){o&&window.focus(),!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchStart(c),i.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchStartWindow=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&c.target!==r&&i.manager.onTouchStart(c)},this.onTouchMove=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchMove(c),i.capture&&c.cancelable&&c.preventDefault())},this.onTouchEnd=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchEnd(c),i.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchEndWindow=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&c.target!==r&&i.manager.onTouchEnd(c)},this.onTouchCancel=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchCancel(c),i.capture&&c.preventDefault())},this.onTouchCancelWindow=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.onTouchCancel(c)},this.onTouchOver=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOver(c)},this.onTouchOut=function(c){!c.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOut(c)};var l,e,a=this.target;a&&(e={passive:!(l={passive:!0})},a.addEventListener("touchstart",this.onTouchStart,this.capture?e:l),a.addEventListener("touchmove",this.onTouchMove,this.capture?e:l),a.addEventListener("touchend",this.onTouchEnd,this.capture?e:l),a.addEventListener("touchcancel",this.onTouchCancel,this.capture?e:l),a.addEventListener("touchover",this.onTouchOver,this.capture?e:l),a.addEventListener("touchout",this.onTouchOut,this.capture?e:l),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,e),window.addEventListener("touchend",this.onTouchEndWindow,e),window.addEventListener("touchcancel",this.onTouchCancelWindow,e)),this.enabled=!0)},stopListeners:function(){var i=this.target;i.removeEventListener("touchstart",this.onTouchStart),i.removeEventListener("touchmove",this.onTouchMove),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("touchcancel",this.onTouchCancel),i.removeEventListener("touchover",this.onTouchOver),i.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=u},function(g,b,t){var h=t(0),n=t(22),s=t(9),u=t(8),i=t(16),r=t(5),o=t(2),l=t(24),e=t(89),a=new h({Extends:s,initialize:function(c){s.call(this),this.game=c,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],c.isBooted?this.boot():c.events.once(n.BOOT,this.boot,this)},boot:function(){for(var c,d,f,p,v,m,x=this.game.config,y=(y=x.installGlobalPlugins).concat(this._pendingGlobal),w=0;w<y.length;w++)d=o(c=y[w],"key",null),f=o(c,"plugin",null),p=o(c,"start",!1),v=o(c,"mapping",null),m=o(c,"data",null),d&&(f?this.install(d,f,p,v,m):console.warn("Missing `plugin` for key: "+d));for(y=(y=x.installScenePlugins).concat(this._pendingScene),w=0;w<y.length;w++)d=o(c=y[w],"key",null),f=o(c,"plugin",null),v=o(c,"mapping",null),d&&(f?this.installScenePlugin(d,f,v):console.warn("Missing `plugin` for key: "+d));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(c,d,f){for(var p,v=this.game,m=c.scene,x=c.settings.map,y=c.settings.isBooted,w=0;w<d.length;w++)v[A=d[w]]?(c[A]=v[A],x.hasOwnProperty(A)&&(m[x[A]]=c[A])):"game"===A&&x.hasOwnProperty(A)&&(m[x[A]]=v);for(var T=0;T<f.length;T++)for(p=f[T],w=0;w<p.length;w++){var E,S,A=p[w];l.hasCore(A)&&(S=new((E=l.getCore(A)).plugin)(m,this),c[E.mapping]=S,E.custom?m[E.mapping]=S:x.hasOwnProperty(E.mapping)&&(m[x[E.mapping]]=S),y&&S.boot())}for(p=this.plugins,w=0;w<p.length;w++){var _=p[w];_.mapping&&(m[_.mapping]=_.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(c,d,f,p,v){if(void 0===v&&(v=!1),"function"==typeof d){if(l.hasCore(c)){if(!v&&l.hasCore(c))return void console.warn("Scene Plugin key in use: "+c)}else l.register(c,d,f,!0),this.scenePlugins.push(c);var m;p&&(m=new d(p,this),p.sys[c]=m,f&&""!==f&&(p[f]=m),m.boot())}else console.warn("Invalid Scene Plugin: "+c)},install:function(c,d,f,p,v){if(void 0===f&&(f=!1),void 0===p&&(p=null),void 0===v&&(v=null),"function"!=typeof d)return console.warn("Invalid Plugin: "+c),null;if(l.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(null!==p&&(f=!0),this.game.isBooted){if(l.registerCustom(c,d,p,v),f)return this.start(c)}else this._pendingGlobal.push({key:c,plugin:d,start:f,mapping:p,data:v});return null},getIndex:function(c){for(var d=this.plugins,f=0;f<d.length;f++)if(d[f].key===c)return f;return-1},getEntry:function(c){var d=this.getIndex(c);if(-1!==d)return this.plugins[d]},isActive:function(c){var d=this.getEntry(c);return d&&d.active},start:function(c,d){void 0===d&&(d=c);var f=this.getEntry(d);return f&&!f.active?(f.active=!0,f.plugin.start()):f=f||this.createEntry(c,d),f?f.plugin:null},createEntry:function(c,d){var f,p=l.getCustom(c);return p&&(p={key:d,plugin:f=new p.plugin(this),active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),f.init(p.data),f.start()),p},stop:function(c){var d=this.getEntry(c);return d&&d.active&&(d.active=!1,d.plugin.stop()),this},get:function(c,d){void 0===d&&(d=!0);var f=this.getEntry(c);if(f)return f.plugin;var p=this.getClass(c);return p&&d?(f=this.createEntry(c,c))?f.plugin:null:p||null},getClass:function(c){return l.getCustomClass(c)},removeGlobalPlugin:function(c){var d=this.getEntry(c);d&&e(this.plugins,d),l.removeCustom(c)},removeScenePlugin:function(c){e(this.scenePlugins,c),l.remove(c)},registerGameObject:function(c,d,f){return d&&r.register(c,d),f&&i.register(c,f),this},removeGameObject:function(c,d,f){return void 0===d&&(d=!0),void 0===f&&(f=!0),d&&r.remove(c),f&&i.remove(c),this},registerFileType:function(c,d,f){u.register(c,d),f&&f.sys.load&&(f.sys.load[c]=d)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();l.destroyCustomPlugins(),this.game.noReturn&&l.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});g.exports=a},function(g,b,t){var h=t(198),n=t(0),s=t(9),u=t(101),i=t(22),r=t(395),o=t(401),l=t(396),e=t(1),a=t(10),c=t(410),d=t(76),f=t(3),p=new n({Extends:s,initialize:function(v){s.call(this),this.game=v,this.canvasBounds=new a,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new f(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:e,windowResize:e,fullScreenChange:e,fullScreenError:e}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(i.BOOT,this.boot,this)},boot:function(){var v=this.game;this.canvas=v.canvas,this.fullscreen=v.device.fullscreen,this.scaleMode!==h.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),v.events.on(i.PRE_STEP,this.step,this),v.events.once(i.READY,this.refresh,this),v.events.once(i.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(v){this.getParent(v),this.getParentBounds();var m,x,y,w,T=v.width,E=v.height,S=v.scaleMode,A=v.zoom,_=v.autoRound;"string"==typeof T&&(0===(m=this.parentSize.width)&&(m=window.innerWidth),x=parseInt(T,10)/100,T=Math.floor(m*x)),"string"==typeof E&&(0===(y=this.parentSize.height)&&(y=window.innerHeight),w=parseInt(E,10)/100,E=Math.floor(y*w)),this.scaleMode=S,this.autoRound=_,this.autoCenter=v.autoCenter,this.resizeInterval=v.resizeInterval,_&&(T=Math.floor(T),E=Math.floor(E)),this.gameSize.setSize(T,E),A===h.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),1!==(this.zoom=A)&&(this._resetZoom=!0),this.baseSize.setSize(T,E),_&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<v.minWidth&&this.displaySize.setMin(v.minWidth*A,v.minHeight*A),0<v.maxWidth&&this.displaySize.setMax(v.maxWidth*A,v.maxHeight*A),this.displaySize.setSize(T,E),this.orientation=l(T,E)},getParent:function(v){var m,x=v.parent;null!==x&&(this.parent=o(x),this.parentIsWindow=this.parent===document.body,v.expandParent&&v.scaleMode!==h.SCALE_MODE.NONE&&(m=this.parent.getBoundingClientRect(),!this.parentIsWindow&&0!==m.height||(document.documentElement.style.height="100%",document.body.style.height="100%",m=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==m.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),v.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(v.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var v=this.parentSize,m=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(m.height=r(!0));var x=m.width,y=m.height;return(v.width!==x||v.height!==y)&&(v.setSize(x,y),!0)},lockOrientation:function(v){var m=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!m&&m.call(screen,v)},setParentSize:function(v,m){return this.parentSize.setSize(v,m),this.refresh()},setGameSize:function(v,m){var x=this.autoRound;x&&(v=Math.floor(v),m=Math.floor(m));var y=this.width,w=this.height;return this.gameSize.resize(v,m),this.baseSize.resize(v,m),x&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(v/m),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(y,w)},resize:function(v,m){var x=this.zoom,y=this.autoRound;y&&(v=Math.floor(v),m=Math.floor(m));var w=this.width,T=this.height;this.gameSize.resize(v,m),this.baseSize.resize(v,m),y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(v*x,m*x),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var E=this.canvas.style,S=v*x,A=m*x;return y&&(S=Math.floor(S),A=Math.floor(A)),S===v&&A===m||(E.width=S+"px",E.height=A+"px"),this.refresh(w,T)},setZoom:function(v){return this.zoom=v,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(v,m){void 0===v&&(v=this.width),void 0===m&&(m=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var x,y,w=this.game.domContainer;return w&&(this.baseSize.setCSS(w),x=this.canvas.style,(y=w.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",y.marginLeft=x.marginLeft,y.marginTop=x.marginTop),this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,v,m),this},updateOrientation:function(){var v;this._checkOrientation&&(this._checkOrientation=!1,(v=l(this.width,this.height))!==this.orientation&&(this.orientation=v,this.emit(u.ORIENTATION_CHANGE,v)))},updateScale:function(){var v,m,x=this.canvas.style,T=this.zoom,E=this.autoRound;this.scaleMode===h.SCALE_MODE.NONE?(this.displaySize.setSize(this.gameSize.width*T,this.gameSize.height*T),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),this._resetZoom&&(x.width=v+"px",x.height=m+"px",this._resetZoom=!1)):this.scaleMode===h.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),this.canvas.width=v,this.canvas.height=m):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),x.width=v+"px",x.height=m+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var v=d(this.parentSize.width,this.gameSize.width,0,!0),m=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(v,m),1)},updateCenter:function(){var v,m,x,y,w,T,E,S=this.autoCenter;S!==h.CENTER.NO_CENTER&&(m=(v=this.canvas).style,y=(x=v.getBoundingClientRect()).width,w=x.height,T=Math.floor((this.parentSize.width-y)/2),E=Math.floor((this.parentSize.height-w)/2),S===h.CENTER.CENTER_HORIZONTALLY?E=0:S===h.CENTER.CENTER_VERTICALLY&&(T=0),m.marginLeft=T+"px",m.marginTop=E+"px")},updateBounds:function(){var v=this.canvasBounds,m=this.canvas.getBoundingClientRect();v.x=m.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),v.y=m.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),v.width=m.width,v.height=m.height},transformX:function(v){return(v-this.canvasBounds.left)*this.displayScale.x},transformY:function(v){return(v-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(v){void 0===v&&(v={navigationUI:"hide"});var x=this.fullscreen;x.available?x.active||this.getFullscreenTarget()[x.request](x.keyboard?Element.ALLOW_KEYBOARD_INPUT:v):this.emit(u.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(v){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,v)},getFullscreenTarget:function(){var v;return this.fullscreenTarget||((v=document.createElement("div")).style.margin="0",v.style.padding="0",v.style.width="100%",v.style.height="100%",this.fullscreenTarget=v,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var v,m;!this._createdFullscreenTarget||(v=this.fullscreenTarget)&&v.parentNode&&((m=v.parentNode).insertBefore(this.canvas,v),m.removeChild(v))},stopFullscreen:function(){var v=this.fullscreen;if(!v.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;v.active&&document[v.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(v){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(v)},startListeners:function(){var v=this,m=this.listeners;m.orientationChange=function(){v.updateBounds(),v._checkOrientation=!0,v.dirty=!0},m.windowResize=function(){v.updateBounds(),v.dirty=!0},window.addEventListener("orientationchange",m.orientationChange,!1),window.addEventListener("resize",m.windowResize,!1),this.fullscreen.available&&(m.fullScreenChange=function(x){return v.onFullScreenChange(x)},m.fullScreenError=function(x){return v.onFullScreenError(x)},["webkit","moz",""].forEach(function(x){document.addEventListener(x+"fullscreenchange",m.fullScreenChange,!1),document.addEventListener(x+"fullscreenerror",m.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.addEventListener("MSFullscreenError",m.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(v,m){this.parent&&(this._lastCheck+=m,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var v=this.listeners;window.removeEventListener("orientationchange",v.orientationChange,!1),window.removeEventListener("resize",v.windowResize,!1),["webkit","moz",""].forEach(function(m){document.removeEventListener(m+"fullscreenchange",v.fullScreenChange,!1),document.removeEventListener(m+"fullscreenerror",v.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",v.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",v.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});g.exports=p},function(g,b,t){var h=t(18),n=t(0),s=t(76),u=t(3),i=new n({initialize:function(r,o,l,e){void 0===r&&(r=0),void 0===o&&(o=r),void 0===l&&(l=0),void 0===e&&(e=null),this._width=r,this._height=o,this._parent=e,this.aspectMode=l,this.aspectRatio=0===o?1:r/o,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(r){return void 0===r&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this.snapTo.set(r,o),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this.minWidth=h(r,0,this.maxWidth),this.minHeight=h(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,o){return void 0===r&&(r=Number.MAX_VALUE),void 0===o&&(o=r),this.maxWidth=h(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=h(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,o){switch(void 0===r&&(r=0),void 0===o&&(o=r),this.aspectMode){case i.NONE:this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(s(o,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case i.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case i.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case i.FIT:this.constrain(r,o,!0);break;case i.ENVELOP:this.constrain(r,o,!1)}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,o){return this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(s(o,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(r,o){return void 0===o&&(o=!0),r=h(r,this.minWidth,this.maxWidth),o&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,o){return void 0===o&&(o=!0),r=h(r,this.minHeight,this.maxHeight),o&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,o,l){void 0===r&&(r=0),void 0===o&&(o=r),void 0===l&&(l=!0),r=this.getNewWidth(r),o=this.getNewHeight(o);var e=this.snapTo,a=0===o?1:r/o;return l&&this.aspectRatio>a||!l&&this.aspectRatio<a?(o=(r=s(r,e.x))/this.aspectRatio,0<e.y&&(r=(o=s(o,e.y))*this.aspectRatio)):(l&&this.aspectRatio<a||!l&&this.aspectRatio>a)&&(r=(o=s(o,e.y))*this.aspectRatio,0<e.x&&(o=(r=s(r,e.x))*(1/this.aspectRatio))),this._width=r,this._height=o,this},fitTo:function(r,o){return this.constrain(r,o,!0)},envelop:function(r,o){return this.constrain(r,o,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});i.NONE=0,i.WIDTH_CONTROLS_HEIGHT=1,i.HEIGHT_CONTROLS_WIDTH=2,i.FIT=3,i.ENVELOP=4,g.exports=i},function(g,b,t){var h=t(0),n=t(142),s=t(21),u=t(22),i=t(6),r=t(91),o=t(1),l=t(412),e=t(201),a=new h({initialize:function(c,d){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this._pending.push({key:"default",scene:d[f],autoStart:0===f,data:{}})}c.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var c=0;c<this._pending.length;c++){var d,f,p,v=(f=this._pending[c]).key;(p=f.scene)instanceof l?d=this.createSceneFromInstance(v,p):"object"==typeof p?d=this.createSceneFromObject(v,p):"function"==typeof p&&(d=this.createSceneFromFunction(v,p)),this.keys[v=d.sys.settings.key]=d,this.scenes.push(d),this._data[v]&&(d.sys.settings.data=this._data[v].data,this._data[v].autoStart&&(f.autoStart=!0)),(f.autoStart||d.sys.settings.active)&&this._start.push(v)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)this.start(f=this._start[c]);this._start.length=0}},processQueue:function(){var c,d,f=this._pending.length;if(0!==f||0!==this._queue.length){if(f){for(c=0;c<f;c++)this.add((d=this._pending[c]).key,d.scene,d.autoStart,d.data);for(c=0;c<this._start.length;c++)this.start(d=this._start[c]);return this._start.length=0,void(this._pending.length=0)}for(c=0;c<this._queue.length;c++)this[(d=this._queue[c]).op](d.keyA,d.keyB);this._queue.length=0}},add:function(c,d,f,p){return void 0===f&&(f=!1),void 0===p&&(p={}),this.isProcessing||!this.isBooted?(this._pending.push({key:c,scene:d,autoStart:f,data:p}),this.isBooted||(this._data[c]={data:p}),null):(c=this.getKey(c,d),d instanceof l?v=this.createSceneFromInstance(c,d):"object"==typeof d?(d.key=c,v=this.createSceneFromObject(c,d)):"function"==typeof d&&(v=this.createSceneFromFunction(c,d)),v.sys.settings.data=p,this.keys[c=v.sys.settings.key]=v,this.scenes.push(v),(f||v.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),v);var v},remove:function(c){if(this.isProcessing)this._queue.push({op:"remove",keyA:c,keyB:null});else{var d=this.getScene(c);if(!d||d.sys.isTransitioning())return this;var f=this.scenes.indexOf(d),p=d.sys.settings.key;-1<f&&(delete this.keys[p],this.scenes.splice(f,1),-1<this._start.indexOf(p)&&(f=this._start.indexOf(p),this._start.splice(f,1)),d.sys.destroy())}return this},bootScene:function(c){var d,f=c.sys,p=f.settings;f.sceneUpdate=o,c.init&&(c.init.call(c,p.data),p.status=n.INIT,p.isTransition&&f.events.emit(s.TRANSITION_INIT,p.transitionFrom,p.transitionDuration)),f.load&&(d=f.load).reset(),d&&c.preload?(c.preload.call(c),0===d.list.size?this.create(c):(p.status=n.LOADING,d.once(r.COMPLETE,this.loadComplete,this),d.start())):this.create(c)},loadComplete:function(c){var d=c.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(d)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,d){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;0<=f;f--){var p=this.scenes[f].sys;p.settings.status>n.START&&p.settings.status<=n.RUNNING&&p.step(c,d)}},render:function(c){for(var d=0;d<this.scenes.length;d++){var f=this.scenes[d].sys;f.settings.visible&&f.settings.status>=n.LOADING&&f.settings.status<n.SLEEPING&&f.render(c)}this.isProcessing=!1},create:function(c){var d=c.sys,f=d.settings;c.create&&(f.status=n.CREATING,c.create.call(c,f.data),f.status===n.DESTROYED)||(f.isTransition&&d.events.emit(s.TRANSITION_START,f.transitionFrom,f.transitionDuration),c.update&&(d.sceneUpdate=c.update),f.status=n.RUNNING,d.events.emit(s.CREATE,c))},createSceneFromFunction:function(c,d){var f=new d;if(f instanceof l){var p=f.sys.settings.key;if(""!==p&&(c=p),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return this.createSceneFromInstance(c,f)}return f.sys=new e(f),f.sys.settings.key=c,f.sys.init(this.game),f},createSceneFromInstance:function(c,d){return""===d.sys.settings.key&&(d.sys.settings.key=c),d.sys.init(this.game),d},createSceneFromObject:function(c,d){var f=new l(d),p=f.sys.settings.key;""!==p?c=p:f.sys.settings.key=c,f.sys.init(this.game);for(var v,m=["init","preload","create","update","render"],x=0;x<m.length;x++){var y=i(d,m[x],null);y&&(f[m[x]]=y)}if(d.hasOwnProperty("extend"))for(var w in d.extend)d.extend.hasOwnProperty(w)&&(v=d.extend[w],"data"===w&&f.hasOwnProperty("data")&&"object"==typeof v?f.data.merge(v):"sys"!==w&&(f[w]=v));return f},getKey:function(c,d){if(c=c||"default","function"==typeof d)return c;if(d instanceof l?c=d.sys.settings.key:"object"==typeof d&&d.hasOwnProperty("key")&&(c=d.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return c},getScenes:function(c,d){void 0===c&&(c=!0),void 0===d&&(d=!1);for(var f=[],p=this.scenes,v=0;v<p.length;v++){var m=p[v];m&&(!c||c&&m.sys.isActive())&&f.push(m)}return d?f.reverse():f},getScene:function(c){if("string"==typeof c){if(this.keys[c])return this.keys[c]}else for(var d=0;d<this.scenes.length;d++)if(c===this.scenes[d])return c;return null},isActive:function(c){var d=this.getScene(c);return d?d.sys.isActive():null},isPaused:function(c){var d=this.getScene(c);return d?d.sys.isPaused():null},isVisible:function(c){var d=this.getScene(c);return d?d.sys.isVisible():null},isSleeping:function(c){var d=this.getScene(c);return d?d.sys.isSleeping():null},pause:function(c,d){var f=this.getScene(c);return f&&f.sys.pause(d),this},resume:function(c,d){var f=this.getScene(c);return f&&f.sys.resume(d),this},sleep:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.sleep(d),this},wake:function(c,d){var f=this.getScene(c);return f&&f.sys.wake(d),this},run:function(c,d){var f=this.getScene(c);if(!f){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===c){this.queueOp("start",c,d);break}return this}f.sys.isSleeping()?f.sys.wake(d):f.sys.isPaused()?f.sys.resume(d):this.start(c,d)},start:function(c,d){if(!this.isBooted)return this._data[c]={autoStart:!0,data:d},this;var f=this.getScene(c);if(f){var p,v=f.sys;if(v.isActive()||v.isPaused())v.shutdown(),v.sceneUpdate=o,v.start(d);else if(v.sceneUpdate=o,v.start(d),v.load&&(p=v.load),p&&v.settings.hasOwnProperty("pack")&&(p.reset(),p.addPack({payload:v.settings.pack})))return v.settings.status=n.LOADING,p.once(r.COMPLETE,this.payloadComplete,this),p.start(),this;this.bootScene(f)}return this},stop:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.shutdown(d),this},switch:function(c,d){var f=this.getScene(c),p=this.getScene(d);return f&&p&&f!==p&&(this.sleep(c),this.isSleeping(d)?this.wake(d):this.start(d)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var d=this.getScene(c);return this.scenes.indexOf(d)},bringToTop:function(c){var d,f;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:c,keyB:null}):-1!==(d=this.getIndex(c))&&d<this.scenes.length&&(f=this.getScene(c),this.scenes.splice(d,1),this.scenes.push(f)),this},sendToBack:function(c){var d,f;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:c,keyB:null}):-1!==(d=this.getIndex(c))&&0<d&&(f=this.getScene(c),this.scenes.splice(d,1),this.scenes.unshift(f)),this},moveDown:function(c){var d,f,p,v;return this.isProcessing?this._queue.push({op:"moveDown",keyA:c,keyB:null}):0<(d=this.getIndex(c))&&(f=d-1,p=this.getScene(c),v=this.getAt(f),this.scenes[d]=v,this.scenes[f]=p),this},moveUp:function(c){var d,f,p,v;return this.isProcessing?this._queue.push({op:"moveUp",keyA:c,keyB:null}):(d=this.getIndex(c))<this.scenes.length-1&&(f=d+1,p=this.getScene(c),v=this.getAt(f),this.scenes[d]=v,this.scenes[f]=p),this},moveAbove:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:c,keyB:d}):(f=this.getIndex(c),p=this.getIndex(d),-1!==f&&-1!==p&&(v=this.getAt(p),this.scenes.splice(p,1),this.scenes.splice(f+1,0,v)))),this;var f,p,v},moveBelow:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:c,keyB:d}):(f=this.getIndex(c),p=this.getIndex(d),-1!==f&&-1!==p&&(v=this.getAt(p),this.scenes.splice(p,1),0===f?this.scenes.unshift(v):this.scenes.splice(f,0,v)))),this;var f,p,v},queueOp:function(c,d,f){return this._queue.push({op:c,keyA:d,keyB:f}),this},swapPosition:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:c,keyB:d}):(f=this.getIndex(c))!==(p=this.getIndex(d))&&-1!==f&&-1!==p&&(v=this.getAt(f),this.scenes[f]=this.scenes[p],this.scenes[p]=v)),this;var f,p,v},dump:function(){for(var c=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var p=this.scenes[f].sys,v=!p.settings.visible||p.settings.status!==n.RUNNING&&p.settings.status!==n.PAUSED?"[-] ":"[*] ";c.push(v+=p.settings.key+" ("+d[p.settings.status]+")")}console.log(c.join("\n"))},destroy:function(){for(var c=0;c<this.scenes.length;c++)this.scenes[c].sys.destroy();this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});g.exports=a},function(g,b,t){var h=t(0),n=t(201),s=new h({initialize:function(u){this.sys=new n(this,u)},update:function(){}});g.exports=s},function(g,b,t){var h=t(2),n=t(202);g.exports=function(s){var u=s.game.config.defaultPhysicsSystem,i=h(s.settings,"physics",!1);if(u||i){var r=[];if(u&&r.push(n(u+"Physics")),i)for(var o in i)o=n(o.concat("Physics")),-1===r.indexOf(o)&&r.push(o);return r}}},function(g,b,t){var h=t(2);g.exports=function(n){var s=n.plugins.getDefaultScenePlugins(),u=h(n.settings,"plugins",!1);return Array.isArray(u)?u:s||[]}},function(g,b,t){var h=t(142),n=t(6),s=t(143),u=t(974);g.exports={create:function(r){return"string"==typeof r?r={key:r}:void 0===r&&(r={}),{status:h.PENDING,key:n(r,"key",""),active:n(r,"active",!1),visible:n(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(r,"pack",!1),cameras:n(r,"cameras",null),map:n(r,"map",s(u,n(r,"mapAdd",{}))),physics:n(r,"physics",{}),loader:n(r,"loader",{}),plugins:n(r,"plugins",!1),input:n(r,"input",{})}}}},function(g,b,t){var h=t(31),n=t(417),s=t(0),u=t(36),i=t(39),r=t(9),o=t(103),l=t(22),e=t(382),a=t(6),c=t(419),d=t(203),f=new s({Extends:r,initialize:function(p){r.call(this),this.game=p,this.name="TextureManager",this.list={},this._tempCanvas=h.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,p.events.once(l.BOOT,this.boot,this)},boot:function(){this.on(o.LOAD,this.updatePending,this),this.on(o.ERROR,this.updatePending,this);var p=this.game.config;this.addBase64("__DEFAULT",p.defaultImage),this.addBase64("__MISSING",p.missingImage),this.addBase64("__WHITE",p.whiteImage),this._pending=3,this.game.events.once(l.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(o.LOAD),this.off(o.ERROR),this.emit(o.READY))},checkKey:function(p){return!this.exists(p)||(console.error("Texture key already in use: "+p),!1)},remove:function(p){if("string"==typeof p){if(!this.exists(p))return console.warn("No texture found matching key: "+p),this;p=this.get(p)}return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(o.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,v){var m,x;return this.checkKey(p)&&(m=this,(x=new Image).onerror=function(){m.emit(o.ERROR,p)},x.onload=function(){var y=m.create(p,x);c.Image(y,0),m.emit(o.ADD,p,y),m.emit(o.LOAD,p,y)},x.src=v),this},getBase64:function(p,v,m,x){void 0===m&&(m="image/png"),void 0===x&&(x=.92);var y,w,T="",E=this.getFrame(p,v);return E&&(E.source.isRenderTexture||E.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):E&&((w=h.create2D(this,(y=E.canvasData).width,y.height)).getContext("2d").drawImage(E.source.image,y.x,y.y,y.width,y.height,0,0,y.width,y.height),T=w.toDataURL(m,x),h.remove(w)),T},addImage:function(p,v,m){var x=null;return this.checkKey(p)&&(x=this.create(p,v),c.Image(x,0),m&&x.setDataSource(m),this.emit(o.ADD,p,x)),x},addGLTexture:function(p,v,m,x){var y=null;return this.checkKey(p)&&(void 0===m&&(m=v.width),void 0===x&&(x=v.height),(y=this.create(p,v,m,x)).add("__BASE",0,0,0,m,x),this.emit(o.ADD,p,y)),y},addRenderTexture:function(p,v){var m=null;return this.checkKey(p)&&((m=this.create(p,v)).add("__BASE",0,0,0,v.width,v.height),this.emit(o.ADD,p,m)),m},generate:function(p,v){if(this.checkKey(p)){var m=h.create(this,1,1);return v.canvas=m,e(v),this.addCanvas(p,m)}return null},createCanvas:function(p,v,m){if(void 0===v&&(v=256),void 0===m&&(m=256),this.checkKey(p)){var x=h.create(this,v,m,i.CANVAS,!0);return this.addCanvas(p,x)}return null},addCanvas:function(p,v,m){void 0===m&&(m=!1);var x=null;return m?x=new n(this,p,v,v.width,v.height):this.checkKey(p)&&(x=new n(this,p,v,v.width,v.height),this.list[p]=x,this.emit(o.ADD,p,x)),x},addAtlas:function(p,v,m,x){return Array.isArray(m.textures)||Array.isArray(m.frames)?this.addAtlasJSONArray(p,v,m,x):this.addAtlasJSONHash(p,v,m,x)},addAtlasJSONArray:function(p,v,m,x){var y=null;if(this.checkKey(p)){if(y=this.create(p,v),Array.isArray(m))for(var w=1===m.length,T=0;T<y.source.length;T++)c.JSONArray(y,T,w?m[0]:m[T]);else c.JSONArray(y,0,m);x&&y.setDataSource(x),this.emit(o.ADD,p,y)}return y},addAtlasJSONHash:function(p,v,m,x){var y=null;if(this.checkKey(p)){if(y=this.create(p,v),Array.isArray(m))for(var w=0;w<m.length;w++)c.JSONHash(y,w,m[w]);else c.JSONHash(y,0,m);x&&y.setDataSource(x),this.emit(o.ADD,p,y)}return y},addAtlasXML:function(p,v,m,x){var y=null;return this.checkKey(p)&&(y=this.create(p,v),c.AtlasXML(y,0,m),x&&y.setDataSource(x),this.emit(o.ADD,p,y)),y},addUnityAtlas:function(p,v,m,x){var y=null;return this.checkKey(p)&&(y=this.create(p,v),c.UnityYAML(y,0,m),x&&y.setDataSource(x),this.emit(o.ADD,p,y)),y},addSpriteSheet:function(p,v,m){var x,w=null;return this.checkKey(p)&&(x=(w=this.create(p,v)).source[0].width,c.SpriteSheet(w,0,0,0,x,w.source[0].height,m),this.emit(o.ADD,p,w)),w},addSpriteSheetFromAtlas:function(p,v){if(!this.checkKey(p))return null;var m=a(v,"atlas",null),x=a(v,"frame",null);if(m&&x){var y=this.get(m).get(x);if(y){var w=this.create(p,y.source.image);return y.trimmed?c.SpriteSheetFromAtlas(w,y,v):c.SpriteSheet(w,0,y.cutX,y.cutY,y.cutWidth,y.cutHeight,v),this.emit(o.ADD,p,w),w}}},create:function(p,v,m,x){var y=null;return this.checkKey(p)&&(y=new d(this,p,v,m,x),this.list[p]=y),y},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return void 0===p&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof d?p:this.list.__MISSING},cloneFrame:function(p,v){if(this.list[p])return this.list[p].get(v).clone()},getFrame:function(p,v){if(this.list[p])return this.list[p].get(v)},getTextureKeys:function(){var p=[];for(var v in this.list)"__DEFAULT"!==v&&"__MISSING"!==v&&p.push(v);return p},getPixel:function(p,v,m,x){var y=this.getFrame(m,x);if(y){p-=y.x,v-=y.y;var w=y.data.cut;if(v+=w.y,(p+=w.x)>=w.x&&p<w.r&&v>=w.y&&v<w.b){var T=this._tempContext;T.clearRect(0,0,1,1),T.drawImage(y.source.image,p,v,1,1,0,0,1,1);var E=T.getImageData(0,0,1,1);return new u(E.data[0],E.data[1],E.data[2],E.data[3])}}return null},getPixelAlpha:function(p,v,m,x){var y=this.getFrame(m,x);if(y){p-=y.x,v-=y.y;var w=y.data.cut;if(v+=w.y,(p+=w.x)>=w.x&&p<w.r&&v>=w.y&&v<w.b){var T=this._tempContext;return T.clearRect(0,0,1,1),T.drawImage(y.source.image,p,v,1,1,0,0,1,1),T.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(p,v,m){return this.list[v]&&(p.texture=this.list[v],p.frame=p.texture.get(m)),p},renameTexture:function(p,v){var m=this.get(p);return!(!m||p===v||(m.key=v,this.list[v]=m,delete this.list[p],0))},each:function(p,v){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(v,m)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,h.remove(this._tempCanvas)}});g.exports=f},function(g,b,t){var h=t(0),n=t(18),s=t(36),u=t(39),i=t(136),r=t(203),o=new h({Extends:r,initialize:function(l,e,a,c,d){r.call(this,l,e,a,c,d),this.add("__BASE",0,0,0,c,d),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=c,this.height=d,this.imageData=this.context.getImageData(0,0,c,d),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(l,e,a){return this.context.drawImage(a,l,e),this.update()},drawFrame:function(l,e,a,c){void 0===a&&(a=0),void 0===c&&(c=0);var d=this.manager.getFrame(l,e);if(d){var f=d.canvasData,p=d.cutWidth,v=d.cutHeight,m=d.source.resolution;return this.context.drawImage(d.source.image,f.x,f.y,p,v,a,c,p/m,v/m),this.update()}return this},setPixel:function(l,e,a,c,d,f){var p;return void 0===f&&(f=255),l=Math.abs(Math.floor(l)),e=Math.abs(Math.floor(e)),-1<this.getIndex(l,e)&&((p=this.context.getImageData(l,e,1,1)).data[0]=a,p.data[1]=c,p.data[2]=d,p.data[3]=f,this.context.putImageData(p,l,e)),this},putData:function(l,e,a,c,d,f,p){return void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=l.width),void 0===p&&(p=l.height),this.context.putImageData(l,e,a,c,d,f,p),this},getData:function(l,e,a,c){return l=n(Math.floor(l),0,this.width-1),e=n(Math.floor(e),0,this.height-1),a=n(a,1,this.width-l),c=n(c,1,this.height-e),this.context.getImageData(l,e,a,c)},getPixel:function(l,e,a){a=a||new s;var c,d,m=this.getIndex(l,e);return-1<m&&(d=(c=this.data)[m+0],a.setTo(d,c[m+1],c[m+2],c[m+3])),a},getPixels:function(l,e,a,c){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=this.width),void 0===c&&(c=a),l=Math.abs(Math.round(l)),e=Math.abs(Math.round(e));for(var d=n(l,0,this.width),f=n(l+a,0,this.width),p=n(e,0,this.height),v=n(e+c,0,this.height),m=new s,x=[],y=p;y<v;y++){for(var w=[],T=d;T<f;T++)m=this.getPixel(T,y,m),w.push({x:T,y,color:m.color,alpha:m.alphaGL});x.push(w)}return x},getIndex:function(l,e){return l=Math.abs(Math.round(l)),e=Math.abs(Math.round(e)),l<this.width&&e<this.height?4*(l+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(l,e,a,c){return void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=this.width),void 0===c&&(c=this.height),this.context.clearRect(l,e,a,c),this.update()},setSize:function(l,e){return void 0===e&&(e=l),l===this.width&&e===this.height||(this.canvas.width=l,this.canvas.height=e,this._source.width=l,this._source.height=e,this._source.isPowerOf2=i(l,e),this.frames.__BASE.setSize(l,e,0,0),this.width=l,this.height=e,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});g.exports=o},function(g,b,t){var h=t(31),n=t(0),s=t(136),u=t(164),i=new n({initialize:function(r,o,l,e,a){void 0===a&&(a=!1);var c=r.manager.game;this.renderer=c.renderer,this.texture=r,this.source=o,this.image=o,this.compressionAlgorithm=null,this.resolution=1,this.width=l||o.naturalWidth||o.videoWidth||o.width||0,this.height=e||o.naturalHeight||o.videoHeight||o.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=o instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&o instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===o.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&o instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=a,this.init(c)},init:function(r){var o=this.renderer;o&&(o.gl?this.isCanvas?this.glTexture=o.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=o.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=o.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.glTexture=this.isGLTexture?this.source:o.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return void 0===r&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!1),this.isCanvas&&h.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});g.exports=i},function(g,b,t){g.exports={AtlasXML:t(975),Canvas:t(976),Image:t(977),JSONArray:t(978),JSONHash:t(979),SpriteSheet:t(980),SpriteSheetFromAtlas:t(981),UnityYAML:t(982)}},function(g,b,t){var h=t(421),n=t(424),s=t(426);g.exports={create:function(i){var r=i.config.audio,o=i.device.audio;return new(r.noAudio||!o.webAudio&&!o.audioData?n:o.webAudio&&!r.disableWebAudio?s:h)(i)}}},function(g,b,t){var h=t(144),n=t(0),s=t(69),u=t(423),i=new n({Extends:h,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,h.call(this,r)},add:function(r,o){var l=new u(this,r,o);return this.sounds.push(l),l},unlock:function(){this.locked=!1;var r,o,l,e=this;this.game.cache.audio.entries.each(function(a,c){for(var d=0;d<c.length;d++)if("true"===c[d].dataset.locked)return!(e.locked=!0);return!0}),this.locked&&(r=!1,o=function(){r=!0},l=function(){var a,c;r?r=!1:(document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",l),a=[],e.game.cache.audio.entries.each(function(d,f){for(var p=0;p<f.length;p++){var v=f[p];"true"===v.dataset.locked&&a.push(v)}return!0}),0!==a.length&&((c=a[a.length-1]).oncanplaythrough=function(){c.oncanplaythrough=null,a.forEach(function(d){d.dataset.locked="false"}),e.unlocked=!0},a.forEach(function(d){d.load()})))},this.once(s.UNLOCKED,function(){for(this.forEachActiveSound(function(c){null===c.currentMarker&&0===c.duration&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var a=this.lockedActionsQueue.shift();a.sound[a.prop].apply?a.sound[a.prop].apply(a.sound,a.value||[]):a.sound[a.prop]=a.value}},this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",l,!1))},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,o,l){return"true"===r.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:r,prop:o,value:l}),!0)},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(s.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(s.GLOBAL_VOLUME,this,r)}}});g.exports=i},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=n.length),h(n,i,r))for(var o=i;o<r;o++){var l=n[o];if(!s||s&&void 0===u&&l.hasOwnProperty(s)||s&&void 0!==u&&l[s]===u)return l}return null}},function(g,b,t){var h=t(145),n=t(0),s=t(69),u=t(18),i=new n({Extends:h,initialize:function(r,o,l){if(void 0===l&&(l={}),this.tags=r.game.cache.audio.get(o),!this.tags)throw new Error('There is no audio asset with key "'+o+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,h.call(this,r,o,l)},play:function(r,o){return!(this.manager.isLocked(this,"play",[r,o])||!h.prototype.play.call(this,r,o)||!this.pickAndPlayAudioTag()||(this.emit(s.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||0<this.startTime||!h.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||0<this.startTime||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(s.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!h.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var o=this.currentConfig.delay,l=(this.currentMarker?this.currentMarker.start:0)+this.currentConfig.seek;return this.previousTime=l,this.audio.currentTime=l,this.applyConfig(),0===o?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*o,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if("false"===o.dataset.used)return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var l=[];this.manager.forEachActiveSound(function(a){a.key===this.key&&a.audio&&l.push(a)},this),l.sort(function(a,c){return a.loop===c.loop?c.seek/c.duration-a.seek/a.duration:a.loop?1:-1});var e=l[0];return this.audio=e.audio,e.reset(),e.audio=null,e.startTime=0,!(e.previousTime=0)},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying)if(0<this.startTime)this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var o=this.currentMarker?this.currentMarker.start:0,l=o+this.duration,e=this.audio.currentTime;if(this.currentConfig.loop)e>=l-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,e-l),e=this.audio.currentTime):e<o&&(this.audio.currentTime+=o,e=this.audio.currentTime),e<this.previousTime&&this.emit(s.LOOPED,this);else if(l<=e)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(s.COMPLETE,this);this.previousTime=e}},destroy:function(){h.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,this.manager.isLocked(this,"mute",r)||(this.updateMute(),this.emit(s.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,this.manager.isLocked(this,"volume",r)||(this.updateVolume(),this.emit(s.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.manager.isLocked(this,s.RATE,r)||(this.calculateRate(),this.emit(s.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.manager.isLocked(this,s.DETUNE,r)||(this.calculateRate(),this.emit(s.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||0<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(s.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.manager.isLocked(this,"loop",r)||(this.audio&&(this.audio.loop=r),this.emit(s.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(s.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});g.exports=i},function(g,b,t){var h=t(144),n=t(0),s=t(9),u=t(425),i=t(1),r=new n({Extends:s,initialize:function(o){s.call(this),this.game=o,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,l){var e=new u(this,o,l);return this.sounds.push(e),e},addAudioSprite:function(o,l){var e=this.add(o,l);return e.spritemap={},e},play:function(o,l){return!1},playAudioSprite:function(o,l,e){return!1},remove:function(o){return h.prototype.remove.call(this,o)},removeByKey:function(o){return h.prototype.removeByKey.call(this,o)},pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,forEachActiveSound:function(o,l){h.prototype.forEachActiveSound.call(this,o,l)},destroy:function(){h.prototype.destroy.call(this)}});g.exports=r},function(g,b,t){function h(){return!1}function n(){return this}var s=t(145),u=t(0),i=t(9),r=t(17),o=new u({Extends:i,initialize:function(l,e,a){void 0===a&&(a={}),i.call(this),this.manager=l,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},a),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:function(){return null},play:h,pause:h,resume:h,stop:h,destroy:function(){s.prototype.destroy.call(this)},setMute:n,setVolume:n,setRate:n,setDetune:n,setSeek:n,setLoop:n,setPan:n});g.exports=o},function(g,b,t){var h=t(427),n=t(144),s=t(0),u=t(69),i=t(22),r=t(428),o=new s({Extends:n,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(i.BOOT,this.unlock,this)},createAudioContext:function(l){var e=l.config.audio;return e.context?(e.context.resume(),e.context):new AudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,e){var a=new r(this,l,e);return this.sounds.push(a),a},decodeAudio:function(l,e){for(var a=Array.isArray(l)?l:[{key:l,data:e}],c=this.game.cache.audio,d=a.length,f=0;f<a.length;f++){var p=a[f],v=p.key,m=p.data;"string"==typeof m&&(m=h(m));var x=function(w,T){c.add(w,T),this.emit(u.DECODED,w),0==--d&&this.emit(u.DECODED_ALL)}.bind(this,v),y=function(w,T){console.error("Error decoding audio: "+w+" - ",T?T.message:""),0==--d&&this.emit(u.DECODED_ALL)}.bind(this,v);this.context.decodeAudioData(m,x,y)}},unlock:function(){function l(){e.context&&e.context.resume().then(function(){a.removeEventListener("touchstart",l),a.removeEventListener("touchend",l),a.removeEventListener("click",l),a.removeEventListener("keydown",l),e.unlocked=!0},function(){a.removeEventListener("touchstart",l),a.removeEventListener("touchend",l),a.removeEventListener("click",l),a.removeEventListener("keydown",l)})}var e=this,a=document.body;a&&(a.addEventListener("touchstart",l,!1),a.addEventListener("touchend",l,!1),a.addEventListener("click",l,!1),a.addEventListener("keydown",l,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){var l;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context?this.context.suspend():(l=this).context.close().then(function(){l.context=null}),n.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(u.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(u.GLOBAL_VOLUME,this,l)}}});g.exports=o},function(g,b){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=new Uint8Array(256),n=0;n<t.length;n++)h[t.charCodeAt(n)]=n;g.exports=function(s){var u,i,r,o,l=(s=s.substr(s.indexOf(",")+1)).length,e=.75*l,a=0;"="===s[l-1]&&(e--,"="===s[l-2]&&e--);for(var c=new ArrayBuffer(e),d=new Uint8Array(c),f=0;f<l;f+=4)u=h[s.charCodeAt(f)],i=h[s.charCodeAt(f+1)],r=h[s.charCodeAt(f+2)],o=h[s.charCodeAt(f+3)],d[a++]=u<<2|i>>4,d[a++]=(15&i)<<4|r>>2,d[a++]=(3&r)<<6|63&o;return c}},function(g,b,t){var h=t(145),n=t(0),s=t(69),u=new n({Extends:h,initialize:function(i,r,o){if(void 0===o&&(o={}),this.audioBuffer=i.game.cache.audio.get(r),!this.audioBuffer)throw new Error('Audio key "'+r+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=i.context.createGain(),this.volumeNode=i.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),i.context.createStereoPanner?(this.pannerNode=i.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(i.destination)):this.volumeNode.connect(i.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,h.call(this,i,r,o)},play:function(i,r){return!!h.prototype.play.call(this,i,r)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(s.RESUME,this),0))},stop:function(){return!!h.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var i=this.currentConfig.seek,o=this.manager.context.currentTime+this.currentConfig.delay,l=(this.currentMarker?this.currentMarker.start:0)+i,e=this.duration-i;this.playTime=o-i,this.startTime=o,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,o),Math.max(0,l),Math.max(0,e)),this.resetConfig()},createAndStartLoopBufferSource:function(){var i=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,o=this.duration;this.loopTime=i,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,i),Math.max(0,r),Math.max(0,o))},createBufferSource:function(){var i=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(o){o.target===i.source&&(i.currentConfig.loop?i.hasLooped=!0:i.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),h.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){h.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode.disconnect(),this.pannerNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){h.prototype.calculateRate.call(this);var i=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,i),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,i)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var i=0,r=0;r<this.rateUpdates.length;r++)i+=((r<this.rateUpdates.length-1?this.rateUpdates[r+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[r].time)*this.rateUpdates[r].rate;return i},getLoopTime:function(){for(var i=0,r=0;r<this.rateUpdates.length-1;r++)i+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var o=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+o.time+(this.duration-i)/o.rate},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,this.calculateRate(),this.emit(s.RATE,this,i)}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,this.calculateRate(),this.emit(s.DETUNE,this,i)}},setDetune:function(i){return this.detune=i,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(i){this.currentConfig.mute=i,this.muteNode.gain.setValueAtTime(i?0:1,0),this.emit(s.MUTE,this,i)}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(i){this.currentConfig.volume=i,this.volumeNode.gain.setValueAtTime(i,0),this.emit(s.VOLUME,this,i)}},setVolume:function(i){return this.volume=i,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.currentConfig.seek=i,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),i&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,i)}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(i){this.currentConfig.pan=i,this.pannerNode&&this.pannerNode.pan.setValueAtTime(i,this.manager.context.currentTime),this.emit(s.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});g.exports=u},function(g,b){g.exports=function(t){for(var h=t.length,n=t[0].length,s=new Array(n),u=0;u<n;u++){s[u]=new Array(h);for(var i=h-1;-1<i;i--)s[u][i]=t[i][u]}return s}},function(g,b){function t(s,u,i){var r=s[u];s[u]=s[i],s[i]=r}function h(s,u){return s<u?-1:u<s?1:0}var n=function(s,u,i,r,o){for(void 0===i&&(i=0),void 0===r&&(r=s.length-1),void 0===o&&(o=h);i<r;){var l,e,a,c,d,f,p;600<r-i&&(l=r-i+1,e=u-i+1,a=Math.log(l),c=.5*Math.exp(2*a/3),d=.5*Math.sqrt(a*c*(l-c)/l)*(e-l/2<0?-1:1),f=Math.max(i,Math.floor(u-e*c/l+d)),p=Math.min(r,Math.floor(u+(l-e)*c/l+d)),n(s,u,f,p,o));var v=s[u],m=i,x=r;for(t(s,i,u),0<o(s[r],v)&&t(s,i,r);m<x;){for(t(s,m,x),m++,x--;o(s[m],v)<0;)m++;for(;0<o(s[x],v);)x--}0===o(s[i],v)?t(s,i,x):t(s,++x,r),x<=u&&(i=x+1),u<=x&&(r=x-1)}};g.exports=n},function(g,b,t){var h=t(6),n=t(129);g.exports=function(s,u,i){var r,o=h(i,"max",0),l=h(i,"qty",1),e=h(i,"random",!1),a=h(i,"randomB",!1),c=h(i,"repeat",0),d=h(i,"yoyo",!1),f=[];a&&n(u),-1===c&&(c=0===o?0:(r=s.length*u.length*l,d&&(r*=2),Math.ceil(o/r)));for(var p=0;p<=c;p++){var v=function(m,x,y){for(var w=[],T=0;T<m.length;T++)for(var E=0;E<x.length;E++)for(var S=0;S<y;S++)w.push({a:m[T],b:x[E]});return w}(s,u,l);e&&n(v),f=f.concat(v),d&&(v.reverse(),f=f.concat(v))}return o&&f.splice(o),f}},function(g,b,t){g.exports={PROCESS_QUEUE_ADD:t(1035),PROCESS_QUEUE_REMOVE:t(1036)}},function(g,b,t){var h=t(13);g.exports=function(n,s){var u,i,r,o,l,e,a,c,d,f,p=h(s,"anims",null);return null===p||("string"==typeof p?n.anims.play(p):"object"==typeof p&&(u=n.anims,(i=h(p,"key",void 0))&&(r=h(p,"startFrame",void 0),o=h(p,"delay",0),l=h(p,"repeat",0),e=h(p,"repeatDelay",0),a=h(p,"yoyo",!1),c=h(p,"play",!1),d=h(p,"delayedPlay",0),f={key:i,delay:o,repeat:l,repeatDelay:e,yoyo:a,startFrame:r},c?u.play(f):0<d?u.playAfterDelay(f,d):u.load(f)))),n}},function(g,b,t){var h=t(0),n=t(106),s=new h({initialize:function(u,i,r,o,l){this.parent=u,this.x=i,this.y=r,this.frame=o,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(u){return this.frame=void 0===u?this.parent.frame:u instanceof n&&u.texture===this.parent.texture?u:this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,i,r){return this.x=u,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(u,i){return this.x=u,this.y=i,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,i){return this.flipX=u,this.flipY=i,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=0<this._alpha!=0<u,this._alpha=u}}});g.exports=s},function(g,b,t){var h=t(10);g.exports=function(n,s,u){void 0===u&&(u=new h);var i=Math.min(n.x,s.x),r=Math.min(n.y,s.y),o=Math.max(n.right,s.right)-i,l=Math.max(n.bottom,s.bottom)-r;return u.setTo(i,r,o,l)}},function(g,b,t){var h=t(0),n=t(11),s=t(1049),u=t(15),i=t(7),r=t(199),o=t(21),l=t(138),e=new h({Extends:u,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,s],initialize:function(a,c,d,f,p,v){u.call(this,a,"DOMElement"),this.parent=a.sys.game.domContainer,this.cache=a.sys.cache.html,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new l,this.rotate3dAngle="deg",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(c,d),"string"==typeof f?"#"===f[0]?this.setElement(f.substr(1),p,v):this.createElement(f,p,v):f&&this.setElement(f,p,v),a.sys.events.on(o.SLEEP,this.handleSceneEvent,this),a.sys.events.on(o.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(a){var c=this.node;c&&(c.style.display=a.settings.visible?"block":"none")},setSkew:function(a,c){return void 0===a&&(a=0),void 0===c&&(c=a),this.skewX=a,this.skewY=c,this},setPerspective:function(a){return this.parent.style.perspective=a+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(a){this.parent.style.perspective=a+"px"}},addListener:function(a){if(this.node){a=a.split(" ");for(var c=0;c<a.length;c++)this.node.addEventListener(a[c],this.handler,!1)}return this},removeListener:function(a){if(this.node){a=a.split(" ");for(var c=0;c<a.length;c++)this.node.removeEventListener(a[c],this.handler)}return this},dispatchNativeEvent:function(a){this.emit(a.type,a)},createElement:function(a,c,d){return this.setElement(document.createElement(a),c,d)},setElement:function(a,c,d){var f;if(this.removeElement(),"string"==typeof a?("#"===a[0]&&(a=a.substr(1)),f=document.getElementById(a)):"object"==typeof a&&1===a.nodeType&&(f=a),!f)return this;if(this.node=f,c&&i(c))for(var p in c)f.style[p]=c[p];else"string"==typeof c&&(f.style=c);return f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",(f.phaser=this).parent&&this.parent.appendChild(f),d&&(f.innerText=d),this.updateSize()},createFromCache:function(a,c){var d=this.cache.get(a);return d&&this.createFromHTML(d,c),this},createFromHTML:function(a,c){void 0===c&&(c="div"),this.removeElement();var d=document.createElement(c);return(this.node=d).style.zIndex="0",d.style.display="inline",d.style.position="absolute",(d.phaser=this).parent&&this.parent.appendChild(d),d.innerHTML=a,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var a=this.node,c=a.getBoundingClientRect();return this.width=a.clientWidth,this.height=a.clientHeight,this.displayWidth=c.width||0,this.displayHeight=c.height||0,this},getChildByProperty:function(a,c){if(this.node)for(var d=this.node.querySelectorAll("*"),f=0;f<d.length;f++)if(d[f][a]===c)return d[f];return null},getChildByID:function(a){return this.getChildByProperty("id",a)},getChildByName:function(a){return this.getChildByProperty("name",a)},setClassName:function(a){return this.node&&(this.node.className=a,this.updateSize()),this},setText:function(a){return this.node&&(this.node.innerText=a,this.updateSize()),this},setHTML:function(a){return this.node&&(this.node.innerHTML=a,this.updateSize()),this},preUpdate:function(){var a=this.parentContainer,c=this.node;c&&a&&!a.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this)}});g.exports=e},function(g,b,t){var h=t(1050),n=t(15),s=t(25),u=new s,i=new s,r=new s;g.exports=function(o,l,e,a){var c,d,f,p,v,m,x,y,w,T=l.node,E=T.style;!(T&&E&&l.scene.sys.settings.visible&&n.RENDER_MASK===l.renderFlags)||0!==l.cameraFilter&&l.cameraFilter&e.id||l.parentContainer&&!l.parentContainer.willRender()?T&&(E.display="none"):(d=e.alpha*l.alpha,(c=l.parentContainer)&&(d*=c.alpha),f=u,p=i,v=r,x=m=0,w=y="0%",a?(p.applyITRS(l.x-(m=l.width*l.scaleX*l.originX),l.y-(x=l.height*l.scaleY*l.originY),l.rotation,l.scaleX,l.scaleY),f.copyFrom(e.matrix),f.multiplyWithOffset(a,-e.scrollX*l.scrollFactorX,-e.scrollY*l.scrollFactorY),p.e=l.x-m,p.f=l.y-x):(p.applyITRS(l.x-(m=l.width*l.originX),l.y-(x=l.height*l.originY),l.rotation,l.scaleX,l.scaleY),f.copyFrom(e.matrix),y=100*l.originX+"%",w=100*l.originY+"%",p.e-=e.scrollX*l.scrollFactorX,p.f-=e.scrollY*l.scrollFactorY),f.multiply(p,v),l.transformOnly||(E.display="block",E.opacity=d,E.zIndex=l._depth,E.pointerEvents="auto",E.mixBlendMode=h[l._blendMode]),E.transform=v.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",E.transformOrigin=y+" "+w)}},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(1054),i=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,u],initialize:function(r){s.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});g.exports=i},function(g,b,t){var h=t(215),n=t(95),s=t(14),u=t(4);g.exports=function(i,r,o){void 0===o&&(o=new u);var l=n(r,0,s.PI2);return h(i,l,o)}},function(g,b,t){var h=t(441),n=t(215),s=t(95),u=t(14);g.exports=function(i,r,o,l){void 0===l&&(l=[]),!r&&0<o&&(r=h(i)/o);for(var e=0;e<r;e++){var a=s(e/r,0,u.PI2);l.push(n(i,a))}return l}},function(g,b){g.exports=function(t){var h=t.width/2,n=t.height/2,s=Math.pow(h-n,2)/Math.pow(h+n,2);return Math.PI*(h+n)*(1+3*s/(10+Math.sqrt(4-3*s)))}},function(g,b,t){var h=t(214),n=t(30);g.exports=function(s,u,i,r,o,l){var e=u.commandBuffer,a=e.length,c=o||s.currentContext;if(0!==a&&n(s,c,u,i,r)){var p,v,m;c.beginPath();for(var T=0;T<a;++T)switch(e[T]){case h.ARC:c.arc(e[T+1],e[T+2],e[T+3],e[T+4],e[T+5],e[T+6]),T+=7;break;case h.LINE_STYLE:m=e[T+1],c.strokeStyle="rgba("+((16711680&(p=e[T+2]))>>>16)+","+((65280&p)>>>8)+","+(255&p)+","+e[T+3]+")",c.lineWidth=m,T+=3;break;case h.FILL_STYLE:c.fillStyle="rgba("+((16711680&(v=e[T+1]))>>>16)+","+((65280&v)>>>8)+","+(255&v)+","+e[T+2]+")",T+=2;break;case h.BEGIN_PATH:c.beginPath();break;case h.CLOSE_PATH:c.closePath();break;case h.FILL_PATH:l||c.fill();break;case h.STROKE_PATH:l||c.stroke();break;case h.FILL_RECT:l?c.rect(e[T+1],e[T+2],e[T+3],e[T+4]):c.fillRect(e[T+1],e[T+2],e[T+3],e[T+4]),T+=4;break;case h.FILL_TRIANGLE:c.beginPath(),c.moveTo(e[T+1],e[T+2]),c.lineTo(e[T+3],e[T+4]),c.lineTo(e[T+5],e[T+6]),c.closePath(),l||c.fill(),T+=6;break;case h.STROKE_TRIANGLE:c.beginPath(),c.moveTo(e[T+1],e[T+2]),c.lineTo(e[T+3],e[T+4]),c.lineTo(e[T+5],e[T+6]),c.closePath(),l||c.stroke(),T+=6;break;case h.LINE_TO:c.lineTo(e[T+1],e[T+2]),T+=2;break;case h.MOVE_TO:c.moveTo(e[T+1],e[T+2]),T+=2;break;case h.LINE_FX_TO:c.lineTo(e[T+1],e[T+2]),T+=5;break;case h.MOVE_FX_TO:c.moveTo(e[T+1],e[T+2]),T+=5;break;case h.SAVE:c.save();break;case h.RESTORE:c.restore();break;case h.TRANSLATE:c.translate(e[T+1],e[T+2]),T+=2;break;case h.SCALE:c.scale(e[T+1],e[T+2]),T+=2;break;case h.ROTATE:c.rotate(e[T+1]),T+=1;break;case h.GRADIENT_FILL_STYLE:T+=5;break;case h.GRADIENT_LINE_STYLE:T+=6}c.restore()}}},function(g,b,t){var h=t(0),n=t(135),s=t(80),u=t(2),i=t(66),r=new h({initialize:function(o,l,e,a){void 0===a&&(a=!1),this.propertyKey=l,this.propertyValue=e,this.defaultValue=e,this.steps=0,this.counter=0,this.start=0,this.end=0,this.emitOnly=a,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(o)},loadConfig:function(o,l){void 0===o&&(o={}),l&&(this.propertyKey=l),this.propertyValue=u(o,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(o){return this.propertyValue=o,this.setMethods()},setMethods:function(){var o,l,e,a=this.propertyValue,c=typeof a;return this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"==c?(this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate):Array.isArray(a)?this.onEmit=this.randomStaticValueEmit:"function"==c?this.emitOnly?this.onEmit=a:this.onUpdate=a:"object"==c&&this.hasBoth(a,"start","end")?(this.start=a.start,this.end=a.end,(o=this.has(a,"random"))&&(this.onEmit=this.randomRangedValueEmit),this.has(a,"steps")?(this.steps=a.steps,this.counter=this.start,this.onEmit=this.steppedEmit):(l=this.has(a,"ease")?a.ease:"Linear",this.ease=s(l,a.easeParams),o||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate)):"object"==c&&this.hasBoth(a,"min","max")?(this.start=a.min,this.end=a.max,this.onEmit=this.randomRangedValueEmit):"object"==c&&this.has(a,"random")?(e=a.random,Array.isArray(e)&&(this.start=e[0],this.end=e[1]),this.onEmit=this.randomRangedValueEmit):"object"==c&&this.hasEither(a,"onEmit","onUpdate")&&(this.has(a,"onEmit")&&(this.onEmit=a.onEmit),this.has(a,"onUpdate")&&(this.onUpdate=a.onUpdate)),this},has:function(o,l){return o.hasOwnProperty(l)},hasBoth:function(o,l,e){return o.hasOwnProperty(l)&&o.hasOwnProperty(e)},hasEither:function(o,l,e){return o.hasOwnProperty(l)||o.hasOwnProperty(e)},defaultEmit:function(o,l,e){return e},defaultUpdate:function(o,l,e,a){return a},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var o=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[o]},randomRangedValueEmit:function(o,l){var e=n(this.start,this.end);return o&&o.data[l]&&(o.data[l].min=e),e},steppedEmit:function(){var o=this.counter;return this.counter=i(this.counter+(this.end-this.start)/this.steps,this.start,this.end),o},easedValueEmit:function(o,l){var e;return o&&o.data[l]&&((e=o.data[l]).min=this.start,e.max=this.end),this.start},easeValueUpdate:function(o,l,e){var a=o.data[l];return(a.max-a.min)*this.ease(e)+a.min}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(u,i,r,o,l){var e;"object"==typeof u?(u=n(e=u,"x",0),i=n(e,"y",0),r=n(e,"power",0),o=n(e,"epsilon",100),l=n(e,"gravity",50)):(void 0===u&&(u=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=100),void 0===l&&(l=50)),this.x=u,this.y=i,this.active=!0,this._gravity=l,this._power=0,this._epsilon=0,this.power=r,this.epsilon=o},update:function(u,i){var r,o,l=this.x-u.x,e=this.y-u.y,a=l*l+e*e;0!==a&&(r=Math.sqrt(a),a<this._epsilon&&(a=this._epsilon),u.velocityX+=l*(o=this._power*i/(a*r)*100),u.velocityY+=e*o)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(u){this._epsilon=u*u}},power:{get:function(){return this._power/this._gravity},set:function(u){this._power=u*this._gravity}},gravity:{get:function(){return this._gravity},set:function(u){var i=this.power;this._gravity=u,this.power=i}}});g.exports=s},function(g,b,t){var h=t(0),n=t(34),s=t(48),u=new h({initialize:function(i){this.emitter=i,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.x=0,this.y=0},fire:function(i,r){var o=this.emitter;this.frame=o.getFrame(),o.emitZone&&o.emitZone.getPoint(this),this.x+=void 0===i?o.x.onEmit(this,"x"):i,this.y+=void 0===r?o.y.onEmit(this,"y"):r,this.life=o.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var l,e,a,c,d,f=o.speedX.onEmit(this,"speedX"),p=o.speedY?o.speedY.onEmit(this,"speedY"):f;o.radial?(l=n(o.angle.onEmit(this,"angle")),this.velocityX=Math.cos(l)*Math.abs(f),this.velocityY=Math.sin(l)*Math.abs(p)):o.moveTo?(e=o.moveToX.onEmit(this,"moveToX"),a=o.moveToY?o.moveToY.onEmit(this,"moveToY"):e,c=Math.atan2(a-this.y,e-this.x),d=s(this.x,this.y,e,a)/(this.life/1e3),this.velocityX=Math.cos(c)*d,this.velocityY=Math.sin(c)*d):(this.velocityX=f,this.velocityY=p),o.acceleration&&(this.accelerationX=o.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=o.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=o.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=o.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=o.delay.onEmit(this,"delay"),this.scaleX=o.scaleX.onEmit(this,"scaleX"),this.scaleY=o.scaleY?o.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=o.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),this.bounce=o.bounce.onEmit(this,"bounce"),this.alpha=o.alpha.onEmit(this,"alpha"),this.tint=o.tint.onEmit(this,"tint")},computeVelocity:function(i,r,o,l){var e=this.velocityX,a=this.velocityY,c=this.accelerationX,d=this.accelerationY,f=this.maxVelocityX,p=this.maxVelocityY;e+=i.gravityX*o,a+=i.gravityY*o,c&&(e+=c*o),d&&(a+=d*o),f<e?e=f:e<-f&&(e=-f),p<a?a=p:a<-p&&(a=-p),this.velocityX=e,this.velocityY=a;for(var v=0;v<l.length;v++)l[v].update(this,r,o)},checkBounds:function(i){var r=i.bounds,o=-this.bounce;this.x<r.x&&i.collideLeft?(this.x=r.x,this.velocityX*=o):this.x>r.right&&i.collideRight&&(this.x=r.right,this.velocityX*=o),this.y<r.y&&i.collideTop?(this.y=r.y,this.velocityY*=o):this.y>r.bottom&&i.collideBottom&&(this.y=r.bottom,this.velocityY*=o)},update:function(i,r,o){if(0<this.delayCurrent)return this.delayCurrent-=i,!1;var l=this.emitter,e=1-this.lifeCurrent/this.life;return this.lifeT=e,this.computeVelocity(l,i,r,o),this.x+=this.velocityX*r,this.y+=this.velocityY*r,l.bounds&&this.checkBounds(l),l.deathZone&&l.deathZone.willKill(this)?!(this.lifeCurrent=0):(this.scaleX=l.scaleX.onUpdate(this,"scaleX",e,this.scaleX),this.scaleY=l.scaleY?l.scaleY.onUpdate(this,"scaleY",e,this.scaleY):this.scaleX,this.angle=l.rotate.onUpdate(this,"rotate",e,this.angle),this.rotation=n(this.angle),this.alpha=l.alpha.onUpdate(this,"alpha",e,this.alpha),this.tint=l.tint.onUpdate(this,"tint",e,this.tint),this.lifeCurrent-=i,this.lifeCurrent<=0)}});g.exports=u},function(g,b,t){var h=t(33),n=t(0),s=t(11),u=t(447),i=t(448),r=t(443),o=t(2),l=t(207),e=t(449),a=t(125),c=t(445),d=t(450),f=t(10),p=t(79),v=t(3),m=t(66),x=new n({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(y,w){this.manager=y,this.texture=y.texture,this.frames=[y.defaultFrame],this.defaultFrame=y.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new r(w,"x",0,!0),this.y=new r(w,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(w,"accelerationX",0,!0),this.accelerationY=new r(w,"accelerationY",0,!0),this.maxVelocityX=new r(w,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(w,"maxVelocityY",1e4,!0),this.speedX=new r(w,"speedX",0,!0),this.speedY=new r(w,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(w,"moveToX",0,!0),this.moveToY=new r(w,"moveToY",0,!0),this.bounce=new r(w,"bounce",0,!0),this.scaleX=new r(w,"scaleX",1),this.scaleY=new r(w,"scaleY",1),this.tint=new r(w,"tint",16777215),this.alpha=new r(w,"alpha",1),this.lifespan=new r(w,"lifespan",1e3,!0),this.angle=new r(w,"angle",{min:0,max:360},!0),this.rotate=new r(w,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(w,"quantity",1,!0),this.delay=new r(w,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=h.NORMAL,this.follow=null,this.followOffset=new v,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,w&&this.fromJSON(w)},fromJSON:function(y){if(!y)return this;var w,E=0,T="";for(E=0;E<this.configFastMap.length;E++)a(y,T=this.configFastMap[E])&&(this[T]=o(y,T));for(E=0;E<this.configOpMap.length;E++)a(y,T=this.configOpMap[E])&&this[T].loadConfig(y);return this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,a(y,"speed")&&(this.speedX.loadConfig(y,"speed"),this.speedY=null),(e(y,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),a(y,"scale")&&(this.scaleX.loadConfig(y,"scale"),this.scaleY=null),a(y,"callbackScope")&&(w=o(y,"callbackScope",null),this.emitCallbackScope=w,this.deathCallbackScope=w),a(y,"emitZone")&&this.setEmitZone(y.emitZone),a(y,"deathZone")&&this.setDeathZone(y.deathZone),a(y,"bounds")&&this.setBounds(y.bounds),a(y,"followOffset")&&this.followOffset.setFromObject(o(y,"followOffset",0)),a(y,"frame")&&this.setFrame(y.frame),a(y,"reserve")&&this.reserve(y.reserve),this},toJSON:function(y){void 0===y&&(y={});var T=0,w="";for(T=0;T<this.configFastMap.length;T++)y[w=this.configFastMap[T]]=this[w];for(T=0;T<this.configOpMap.length;T++)this[w=this.configOpMap[T]]&&(y[w]=this[w].toJSON());return this.speedY||(delete y.speedX,y.speed=this.speedX.toJSON()),this.scaleY||(delete y.scaleX,y.scale=this.scaleX.toJSON()),y},startFollow:function(y,w,T,E){return void 0===w&&(w=0),void 0===T&&(T=0),void 0===E&&(E=!1),this.follow=y,this.followOffset.set(w,T),this.trackVisible=E,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return l(this.frames);var y=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=m(this.currentFrame+1,0,this._frameLength)),y},setFrame:function(y,w,T){void 0===w&&(w=!0),void 0===T&&(T=1),this.randomFrame=w,this.frameQuantity=T,this.currentFrame=0,this._frameCounter=0;var E,S,A=typeof y;return Array.isArray(y)||"string"==A||"number"==A?this.manager.setEmitterFrames(y,this):"object"==A&&((y=o(E=y,"frames",null))&&this.manager.setEmitterFrames(y,this),S=o(E,"cycle",!1),this.randomFrame=!S,this.frameQuantity=o(E,"quantity",T)),this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(y){return void 0===y&&(y=!0),this.radial=y,this},setPosition:function(y,w){return this.x.onChange(y),this.y.onChange(w),this},setBounds:function(y,w,T,E){var S;return"object"==typeof y&&(y=(S=y).x,w=S.y,T=a(S,"w")?S.w:S.width,E=a(S,"h")?S.h:S.height),this.bounds?this.bounds.setTo(y,w,T,E):this.bounds=new f(y,w,T,E),this},setSpeedX:function(y){return this.speedX.onChange(y),this.radial=!1,this},setSpeedY:function(y){return this.speedY&&(this.speedY.onChange(y),this.radial=!1),this},setSpeed:function(y){return this.speedX.onChange(y),this.speedY=null,this.radial=!0,this},setScaleX:function(y){return this.scaleX.onChange(y),this},setScaleY:function(y){return this.scaleY.onChange(y),this},setScale:function(y){return this.scaleX.onChange(y),this.scaleY=null,this},setGravityX:function(y){return this.gravityX=y,this},setGravityY:function(y){return this.gravityY=y,this},setGravity:function(y,w){return this.gravityX=y,this.gravityY=w,this},setAlpha:function(y){return this.alpha.onChange(y),this},setTint:function(y){return this.tint.onChange(y),this},setEmitterAngle:function(y){return this.angle.onChange(y),this},setAngle:function(y){return this.angle.onChange(y),this},setLifespan:function(y){return this.lifespan.onChange(y),this},setQuantity:function(y){return this.quantity.onChange(y),this},setFrequency:function(y,w){return this.frequency=y,this._counter=0,w&&this.quantity.onChange(w),this},setEmitZone:function(y){if(void 0===y)this.emitZone=null;else{var w=o(y,"type","random"),T=o(y,"source",null);switch(w){case"random":this.emitZone=new d(T);break;case"edge":var E=o(y,"quantity",1),S=o(y,"stepRate",0),A=o(y,"yoyo",!1),_=o(y,"seamless",!0);this.emitZone=new i(T,E,S,A,_)}}return this},setDeathZone:function(y){var w,T;return void 0===y?this.deathZone=null:(w=o(y,"type","onEnter"),(T=o(y,"source",null))&&"function"==typeof T.contains&&(this.deathZone=new u(T,"onEnter"===w))),this},reserve:function(y){for(var w=this.dead,T=0;T<y;T++)w.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(y,w){return void 0===y?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof y&&(this.emitCallback=y,w&&(this.emitCallbackScope=w)),this},onParticleDeath:function(y,w){return void 0===y?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof y&&(this.deathCallback=y,w&&(this.deathCallbackScope=w)),this},killAll:function(){for(var y=this.dead,w=this.alive;0<w.length;)y.push(w.pop());return this},forEachAlive:function(y,w){for(var T=this.alive,E=T.length,S=0;S<E;++S)y.call(w,T[S],this);return this},forEachDead:function(y,w){for(var T=this.dead,E=T.length,S=0;S<E;++S)y.call(w,T[S],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return p(this.alive,this.depthSortCallback),this},flow:function(y,w){return void 0===w&&(w=1),this.frequency=y,this.quantity.onChange(w),this.start()},explode:function(y,w,T){return this.frequency=-1,this.emitParticle(y,w,T)},emitParticleAt:function(y,w,T){return this.emitParticle(T,y,w)},emitParticle:function(y,w,T){if(!this.atLimit()){void 0===y&&(y=this.quantity.onEmit());for(var E=this.dead,S=this.follow?this.follow.x+this.followOffset.x:w,A=this.follow?this.follow.y+this.followOffset.y:T,_=0;_<y;_++){var C=E.pop();if((C=C||new this.particleClass(this)).fire(S,A),this.particleBringToTop?this.alive.push(C):this.alive.unshift(C),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,C,this),this.atLimit())break}return C}},preUpdate:function(y,w){var T=(w*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var E=this.manager.getProcessors(),S=this.alive,A=this.dead,_=0,C=[],M=S.length;for(_=0;_<M;_++){var R=S[_];R.update(w,T,E)&&C.push({index:_,particle:R})}if(0<(M=C.length)){var L=this.deathCallback,D=this.deathCallbackScope;for(_=M-1;0<=_;_--){var F=C[_];S.splice(F.index,1),A.push(F.particle),L&&L.call(D,F.particle),F.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():0<this.frequency&&(this._counter-=w,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(y,w){return y.y-w.y}});g.exports=x},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.source=n,this.killOnEnter=s},willKill:function(n){var s=this.source.contains(n.x,n.y);return s&&this.killOnEnter||!s&&!this.killOnEnter}});g.exports=h},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i,r){void 0===i&&(i=!1),void 0===r&&(r=!0),this.source=n,this.points=[],this.quantity=s,this.stepRate=u,this.yoyo=i,this.counter=-1,this.seamless=r,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){var n,s;this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(n=this.points[0]).x===(s=this.points[this.points.length-1]).x&&n.y===s.y&&this.points.pop();var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var s=this.points[this.counter];s&&(n.x=s.x,n.y=s.y)}});g.exports=h},function(g,b){g.exports=function(t,h){for(var n=0;n<h.length;n++)if(t.hasOwnProperty(h[n]))return!0;return!1}},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(u){this.source=u,this._tempVec=new n},getPoint:function(u){var i=this._tempVec;this.source.getRandomPoint(i),u.x=i.x,u.y=i.y}});g.exports=s},function(g,b,t){var h=t(0),n=t(11),s=t(73),u=new h({Extends:s,Mixins:[n.PathFollower],initialize:function(i,r,o,l,e,a){s.call(this,i,o,l,e,a),this.path=r},preUpdate:function(i,r){this.anims.update(i,r),this.pathUpdate(i)}});g.exports=u},function(g,b){g.exports=function(t,h,n){var u=t.context,i=t.style,r=[],o=0,l=n.length;0<i.maxLines&&i.maxLines<n.length&&(l=i.maxLines),i.syncFont(t.canvas,u);for(var e=0;e<l;e++){var a=i.strokeThickness;a+=u.measureText(n[e]).width,i.wordWrap&&(a-=u.measureText(" ").width),r[e]=Math.ceil(a),o=Math.max(o,r[e])}var c=h.fontSize+i.strokeThickness,d=c*l,f=t.lineSpacing;return 1<l&&(d+=f*(l-1)),{width:o,height:d,lines:l,lineWidths:r,lineSpacing:f,lineHeight:c}}},function(g,b,t){var h=t(0),n=t(13),s=t(6),u=t(454),i={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xc3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new h({initialize:function(o,l){this.parent=o,this.setStyle(l,!1,!0);var e=s(l,"metrics",!1);this.metrics=e?{ascent:s(e,"ascent",0),descent:s(e,"descent",0),fontSize:s(e,"fontSize",0)}:u(this)},setStyle:function(o,l,e){for(var a in void 0===l&&(l=!0),void 0===e&&(e=!1),o&&o.hasOwnProperty("fontSize")&&"number"==typeof o.fontSize&&(o.fontSize=o.fontSize.toString()+"px"),i)this[a]=("wordWrapCallback"===a||"wordWrapCallbackScope"===a?s:n)(o,i[a][0],e?i[a][1]:this[a]);var d=s(o,"font",null);null!==d&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=s(o,"fill",null);return null!==f&&(this.color=f),l?this.update(!0):this.parent},syncFont:function(o,l){l.font=this._font},syncStyle:function(o,l){l.textBaseline="alphabetic",l.fillStyle=this.color,l.strokeStyle=this.stroke,l.lineWidth=this.strokeThickness,l.lineCap="round",l.lineJoin="round"},syncShadow:function(o,l){l?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(o,l){void 0===l&&(l=!0);var e,a,c=o,d="",f="";return"string"!=typeof o?(c=s(o,"fontFamily","Courier"),d=s(o,"fontSize","16px"),f=s(o,"fontStyle","")):(a=0,f=2<(e=o.split(" ")).length?e[a++]:"",d=e[a++]||"16px",c=e[a++]||"Courier"),c===this.fontFamily&&d===this.fontSize&&f===this.fontStyle||(this.fontFamily=c,this.fontSize=d,this.fontStyle=f,l&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return"number"==typeof o&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,l){return this.fixedWidth=o,this.fixedHeight=l,o&&(this.parent.width=o),l&&(this.parent.height=l),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,l){return void 0===l&&(l=this.strokeThickness),void 0===o&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===o&&this.strokeThickness===l||(this.stroke=o,this.strokeThickness=l,this.update(!0)),this.parent},setShadow:function(o,l,e,a,c,d){return void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e="#000"),void 0===a&&(a=0),void 0===c&&(c=!1),void 0===d&&(d=!0),this.shadowOffsetX=o,this.shadowOffsetY=l,this.shadowColor=e,this.shadowBlur=a,this.shadowStroke=c,this.shadowFill=d,this.update(!1)},setShadowOffset:function(o,l){return void 0===o&&(o=0),void 0===l&&(l=o),this.shadowOffsetX=o,this.shadowOffsetY=l,this.update(!1)},setShadowColor:function(o){return void 0===o&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return void 0===o&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,l){return void 0===l&&(l=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=l,this.update(!1)},setWordWrapCallback:function(o,l){return void 0===l&&(l=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=l,this.update(!1)},setAlign:function(o){return void 0===o&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return void 0===o&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var l in i)o[l]=this[l];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});g.exports=r},function(g,b,t){var h=t(31);g.exports=function(n){var s=h.create(this),u=s.getContext("2d");n.syncFont(s,u);var i=u.measureText(n.testString);if(i.hasOwnProperty("actualBoundingBoxAscent")){var r=i.actualBoundingBoxAscent,o=i.actualBoundingBoxDescent;return h.remove(s),{ascent:r,descent:o,fontSize:r+o}}var l=Math.ceil(i.width*n.baselineX),e=2*(a=l),a=a*n.baselineY|0;s.width=l,s.height=e,u.fillStyle="#f00",u.fillRect(0,0,l,e),u.font=n._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(n.testString,0,a);var c={ascent:0,descent:0,fontSize:0};if(!u.getImageData(0,0,l,e))return c.ascent=a,c.descent=6+a,c.fontSize=c.ascent+c.descent,h.remove(s),c;for(var d,f=u.getImageData(0,0,l,e).data,p=f.length,v=4*l,m=0,x=!1,y=0;y<a;y++){for(d=0;d<v;d+=4)if(255!==f[m+d]){x=!0;break}if(x)break;m+=v}for(c.ascent=a-y,m=p-v,x=!1,y=e;a<y;y--){for(d=0;d<v;d+=4)if(255!==f[m+d]){x=!0;break}if(x)break;m-=v}return c.descent=y-a,c.fontSize=c.ascent+c.descent,h.remove(s),c}},function(g,b,t){var h=t(1091),n=t(0),s=t(34),u=t(68),i=t(62),r=t(14),o=t(32),l=new n({Extends:o,Mixins:[h],initialize:function(e,a,c,d,f,p,v,m,x){void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=128),void 0===f&&(f=0),void 0===p&&(p=360),void 0===v&&(v=!1),o.call(this,e,"Arc",new i(0,0,d)),this._startAngle=f,this._endAngle=p,this._anticlockwise=v,this._iterations=.01,this.setPosition(a,c);var y=2*this.geom.radius;this.setSize(y,y),void 0!==m&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){var a=2*(this.geom.radius=e);this.setSize(a,a),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e,this.updateData()}},setRadius:function(e){return this.radius=e,this},setIterations:function(e){return void 0===e&&(e=.01),this.iterations=e,this},setStartAngle:function(e,a){return this._startAngle=e,void 0!==a&&(this._anticlockwise=a),this.updateData()},setEndAngle:function(e,a){return this._endAngle=e,void 0!==a&&(this._anticlockwise=a),this.updateData()},updateData:function(){var e=this._iterations,a=e,c=this.geom.radius,d=s(this._startAngle),f=s(this._endAngle),p=c,v=c;f-=d,this._anticlockwise?f<-r.PI2?f=-r.PI2:0<f&&(f=f%r.PI2-r.PI2):f>r.PI2?f=r.PI2:f<0&&(f=r.PI2+f%r.PI2);for(var m,x=[p+Math.cos(d)*c,v+Math.sin(d)*c];a<1;)m=f*a+d,x.push(p+Math.cos(m)*c,v+Math.sin(m)*c),a+=e;return m=f+d,x.push(p+Math.cos(m)*c,v+Math.sin(m)*c),x.push(p+Math.cos(d)*c,v+Math.sin(d)*c),this.pathIndexes=u(x),this.pathData=x,this}});g.exports=l},function(g,b,t){var h=t(0),n=t(1094),s=t(68),u=t(10),i=t(32),r=new h({Extends:i,Mixins:[n],initialize:function(o,l,e,a,c,d){void 0===l&&(l=0),void 0===e&&(e=0),i.call(this,o,"Curve",a),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(l,e),void 0!==c&&this.setFillStyle(c,d),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,l=this._smoothness;this.geom.getBounds(o,l),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var e=[],a=this.geom.getPoints(l),c=0;c<a.length;c++)e.push(a[c].x,a[c].y);return e.push(a[0].x,a[0].y),this.pathIndexes=s(e),this.pathData=e,this}});g.exports=r},function(g,b,t){var h=t(0),n=t(68),s=t(1097),u=t(108),i=t(32),r=new h({Extends:i,Mixins:[s],initialize:function(o,l,e,a,c,d,f){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=128),void 0===c&&(c=128),i.call(this,o,"Ellipse",new u(a/2,c/2,a,c)),this._smoothness=64,this.setPosition(l,e),this.width=a,this.height=c,void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,l){return this.width=o,this.height=l,this.geom.setPosition(o/2,l/2),this.geom.setSize(o,l),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],l=this.geom.getPoints(this._smoothness),e=0;e<l.length;e++)o.push(l[e].x,l[e].y);return o.push(l[0].x,l[0].y),this.pathIndexes=n(o),this.pathData=o,this}});g.exports=r},function(g,b,t){var h=t(0),n=t(32),s=t(1100),u=new h({Extends:n,Mixins:[s],initialize:function(i,r,o,l,e,a,c,d,f,p,v){void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=128),void 0===e&&(e=128),void 0===a&&(a=32),void 0===c&&(c=32),n.call(this,i,"Grid",null),this.cellWidth=a,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.setPosition(r,o),this.setSize(l,e),this.setFillStyle(d,f),void 0!==p&&this.setOutlineStyle(p,v),this.updateDisplayOrigin()},setFillStyle:function(i,r){return void 0===r&&(r=1),void 0===i?this.showCells=!1:(this.fillColor=i,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(i,r){return void 0===r&&(r=1),void 0===i?this.showAltCells=!1:(this.altFillColor=i,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(i,r){return void 0===r&&(r=1),void 0===i?this.showOutline=!1:(this.outlineFillColor=i,this.outlineFillAlpha=r,this.showOutline=!0),this}});g.exports=u},function(g,b,t){var h=t(1103),n=t(0),s=t(32),u=new n({Extends:s,Mixins:[h],initialize:function(i,r,o,l,e,a,c,d){void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=48),void 0===e&&(e=32),void 0===a&&(a=15658734),void 0===c&&(c=10066329),void 0===d&&(d=13421772),s.call(this,i,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=c,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,o),this.setSize(l,e),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setFaces:function(i,r,o){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=i,this.showLeft=r,this.showRight=o,this},setFillStyle:function(i,r,o){return this.fillTop=i,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});g.exports=u},function(g,b,t){var h=t(0),n=t(1106),s=t(32),u=new h({Extends:s,Mixins:[n],initialize:function(i,r,o,l,e,a,c,d,f){void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=48),void 0===e&&(e=32),void 0===a&&(a=!1),void 0===c&&(c=15658734),void 0===d&&(d=10066329),void 0===f&&(f=13421772),s.call(this,i,"IsoTriangle",null),this.projection=4,this.fillTop=c,this.fillLeft=d,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(r,o),this.setSize(l,e),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setReversed:function(i){return this.isReversed=i,this},setFaces:function(i,r,o){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=i,this.showLeft=r,this.showRight=o,this},setFillStyle:function(i,r,o){return this.fillTop=i,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});g.exports=u},function(g,b,t){var h=t(0),n=t(32),s=t(45),u=t(1109),i=new h({Extends:n,Mixins:[u],initialize:function(r,o,l,e,a,c,d,f,p){void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=128),void 0===d&&(d=0),n.call(this,r,"Line",new s(e,a,c,d));var v=Math.max(1,this.geom.right-this.geom.left),m=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(o,l),this.setSize(v,m),void 0!==f&&this.setStrokeStyle(1,f,p),this.updateDisplayOrigin()},setLineWidth:function(r,o){return void 0===o&&(o=r),this._startWidth=r,this._endWidth=o,this.lineWidth=r,this},setTo:function(r,o,l,e){return this.geom.setTo(r,o,l,e),this}});g.exports=i},function(g,b,t){var h=t(1112),n=t(0),s=t(68),u=t(463),i=t(224),r=t(32),o=t(466),l=new n({Extends:r,Mixins:[h],initialize:function(e,a,c,d,f,p){void 0===a&&(a=0),void 0===c&&(c=0),r.call(this,e,"Polygon",new i(d));var v=u(this.geom);this.setPosition(a,c),this.setSize(v.width,v.height),void 0!==f&&this.setFillStyle(f,p),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){void 0===e&&(e=1);for(var a=0;a<e;a++)o(this.geom);return this.updateData()},updateData:function(){for(var e=[],a=this.geom.points,c=0;c<a.length;c++)e.push(a[c].x,a[c].y);return e.push(a[0].x,a[0].y),this.pathIndexes=s(e),this.pathData=e,this}});g.exports=l},function(g,b,t){var h=t(10);g.exports=function(n,s){void 0===s&&(s=new h);for(var u,i=1/0,r=1/0,o=-i,l=-r,e=0;e<n.points.length;e++)u=n.points[e],i=Math.min(i,u.x),r=Math.min(r,u.y),o=Math.max(o,u.x),l=Math.max(l,u.y);return s.x=i,s.y=r,s.width=o-i,s.height=l-r,s}},function(g,b,t){var h=t(64),n=t(45),s=t(465);g.exports=function(u,i,r,o){void 0===o&&(o=[]);var l=u.points,e=s(u);!i&&0<r&&(i=e/r);for(var a=0;a<i;a++)for(var c=e*(a/i),d=0,f=0;f<l.length;f++){var p=l[f],v=l[(f+1)%l.length],m=new n(p.x,p.y,v.x,v.y),x=h(m);if(!(c<d||d+x<c)){var y=m.getPoint((c-d)/x);o.push(y);break}d+=x}return o}},function(g,b,t){var h=t(64),n=t(45);g.exports=function(s){for(var u=s.points,i=0,r=0;r<u.length;r++){var o=u[r],l=u[(r+1)%u.length],e=new n(o.x,o.y,l.x,l.y);i+=h(e)}return i}},function(g,b){function t(h,n){return h[0]=n[0],h[1]=n[1],h}g.exports=function(h){for(var n=[],s=h.points,u=0;u<s.length;u++)n.push([s[u].x,s[u].y]);var i=[];for(0<n.length&&i.push(t([0,0],n[0])),u=0;u<n.length-1;u++){var r=n[u],o=n[u+1],l=r[0],e=r[1],a=o[0],c=o[1];i.push([.85*l+.15*a,.85*e+.15*c]),i.push([.15*l+.85*a,.15*e+.85*c])}return 1<n.length&&i.push(t([0,0],n[n.length-1])),h.setTo(i)}},function(g,b,t){var h=t(0),n=t(10),s=t(32),u=t(1115),i=new h({Extends:s,Mixins:[u],initialize:function(r,o,l,e,a,c,d){void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=128),void 0===a&&(a=128),s.call(this,r,"Rectangle",new n(0,0,e,a)),this.setPosition(o,l),this.setSize(e,a),void 0!==c&&this.setFillStyle(c,d),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,o){return this.width=r,this.height=o,this.geom.setSize(r,o),this.updateData(),this},updateData:function(){var r=[],o=this.geom,l=this._tempLine;return o.getLineA(l),r.push(l.x1,l.y1,l.x2,l.y2),o.getLineB(l),r.push(l.x2,l.y2),o.getLineC(l),r.push(l.x2,l.y2),o.getLineD(l),r.push(l.x2,l.y2),this.pathData=r,this}});g.exports=i},function(g,b,t){var h=t(1118),n=t(0),s=t(68),u=t(32),i=new n({Extends:u,Mixins:[h],initialize:function(r,o,l,e,a,c,d,f){void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=5),void 0===a&&(a=32),void 0===c&&(c=64),u.call(this,r,"Star",null),this._points=e,this._innerRadius=a,this._outerRadius=c,this.setPosition(o,l),this.setSize(2*c,2*c),void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],o=this._points,l=this._innerRadius,e=this._outerRadius,a=Math.PI/2*3,c=Math.PI/o,d=e,f=e;r.push(d,f+-e);for(var p=0;p<o;p++)r.push(d+Math.cos(a)*e,f+Math.sin(a)*e),a+=c,r.push(d+Math.cos(a)*l,f+Math.sin(a)*l),a+=c;return r.push(d,f+-e),this.pathIndexes=s(r),this.pathData=r,this}});g.exports=i},function(g,b,t){var h=t(0),n=t(32),s=t(82),u=t(1121),i=new h({Extends:n,Mixins:[u],initialize:function(r,o,l,e,a,c,d,f,p,v,m){void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=128),void 0===c&&(c=64),void 0===d&&(d=0),void 0===f&&(f=128),void 0===p&&(p=128),n.call(this,r,"Triangle",new s(e,a,c,d,f,p));var x=this.geom.right-this.geom.left,y=this.geom.bottom-this.geom.top;this.setPosition(o,l),this.setSize(x,y),void 0!==v&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,o,l,e,a,c){return this.geom.setTo(r,o,l,e,a,c),this.updateData()},updateData:function(){var r=[],o=this.geom,l=this._tempLine;return o.getLineA(l),r.push(l.x1,l.y1,l.x2,l.y2),o.getLineB(l),r.push(l.x2,l.y2),o.getLineC(l),r.push(l.x2,l.y2),this.pathData=r,this}});g.exports=i},function(g,b,t){var h=t(4),n=t(64);g.exports=function(s,u,i){void 0===i&&(i=new h);var r=s.getLineA(),o=s.getLineB(),l=s.getLineC();if(u<=0||1<=u)return i.x=r.x1,i.y=r.y1,i;var e=n(r),a=n(o),c=n(l),d=(e+a+c)*u,f=0;return d<e?(i.x=r.x1+(r.x2-r.x1)*(f=d/e),i.y=r.y1+(r.y2-r.y1)*f):e+a<d?(f=(d-=e+a)/c,i.x=l.x1+(l.x2-l.x1)*f,i.y=l.y1+(l.y2-l.y1)*f):(f=(d-=e)/a,i.x=o.x1+(o.x2-o.x1)*f,i.y=o.y1+(o.y2-o.y1)*f),i}},function(g,b,t){var h=t(64),n=t(4);g.exports=function(s,u,i,r){void 0===r&&(r=[]);var o=s.getLineA(),l=s.getLineB(),e=s.getLineC(),a=h(o),c=h(l),d=h(e),f=a+c+d;!u&&0<i&&(u=f/i);for(var p=0;p<u;p++){var v=f*(p/u),m=0,x=new n;v<a?(x.x=o.x1+(o.x2-o.x1)*(m=v/a),x.y=o.y1+(o.y2-o.y1)*m):a+c<v?(m=(v-=a+c)/d,x.x=e.x1+(e.x2-e.x1)*m,x.y=e.y1+(e.y2-e.y1)*m):(m=(v-=a)/c,x.x=l.x1+(l.x2-l.x1)*m,x.y=l.y1+(l.y2-l.y1)*m),r.push(x)}return r}},function(g,b){g.exports=function(t,h,n){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(h))return t[h]=n,!0;if(-1===h.indexOf("."))return!1;for(var s=h.split("."),u=t,i=t,r=0;r<s.length;r++){if(!u.hasOwnProperty(s[r]))return!1;u=(i=u)[s[r]]}return i[s[s.length-1]]=n,!0}},function(g,b,t){var h=t(113),n=t(115);g.exports=function(s,u,i,r,o,l,e){if(void 0===r&&(r=!1),void 0===l&&(l=16777215),void 0===e&&(e=1),s.length===u.length){var a={faces:[],verts:[]},c=r?3:2,d=Array.isArray(l),f=Array.isArray(e);if(Array.isArray(i)&&0<i.length)for(D=0;D<i.length;D++){var p=i[D],v=2*i[D],m=i[D]*c,x=s[m],y=s[1+m],w=r?s[2+m]:0,T=u[v],E=u[1+v],S=d?l[p]:l,A=f?e[p]:e,_=0,C=0,M=0;o&&(_=o[m],C=o[1+m],M=r?o[2+m]:0),a.verts.push(new n(x,y,w,T,E,S,A,_,C,M))}else for(var R=0,L=0,D=0;D<s.length;D+=c)M=C=_=0,o&&(_=o[D],C=o[D+1],M=r?o[D+2]:0),a.verts.push(new n(x=s[D],y=s[D+1],w=r?s[D+2]:0,T=u[R],E=u[R+1],S=d?l[L]:l,A=f?e[L]:e,_,C,M)),R+=2,L++;for(D=0;D<a.verts.length;D+=3)a.faces.push(new h(a.verts[D],a.verts[D+1],a.verts[D+2]));return a}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(g,b,t){var h=t(113),n=t(67),s=t(37),u=t(115),i=new s,r=new s,o=new n;g.exports=function(l,e,a,c,d,f,p,v,m,x){void 0===a&&(a=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=0),void 0===m&&(m=0),void 0===x&&(x=!0);var y={faces:[],verts:[]},w=l.materials;i.set(c,d,f),r.set(p,v,m),o.fromRotationXYTranslation(r,i,x);for(var T=0;T<l.models.length;T++)for(var E=l.models[T],S=E.vertices,A=E.textureCoords,_=E.faces,C=0;C<_.length;C++){var M=_[C],R=M.vertices[0],L=M.vertices[1],D=M.vertices[2],F=S[R.vertexIndex],U=S[L.vertexIndex],P=S[D.vertexIndex],O=R.textureCoordsIndex,B=L.textureCoordsIndex,k=D.textureCoordsIndex,I=-1===O?{u:0,v:1}:A[O],N=-1===B?{u:0,v:0}:A[B],Y=-1===k?{u:1,v:1}:A[k],X=16777215;""!==M.material&&w[M.material]&&(X=w[M.material]);var W=new u(F.x*a,F.y*a,F.z*a,I.u,I.v,X).transformMat4(o),G=new u(U.x*a,U.y*a,U.z*a,N.u,N.v,X).transformMat4(o),z=new u(P.x*a,P.y*a,P.z*a,Y.u,Y.v,X).transformMat4(o);y.verts.push(W,G,z),y.faces.push(new h(W,G,z))}return e&&(e.faces=e.faces.concat(y.faces),e.vertices=e.vertices.concat(y.verts)),y}},function(g,b,t){var h=t(62),n=t(0),s=t(11),u=t(197),i=t(12),r=new n({Extends:h,Mixins:[s.ScrollFactor,s.Visible],initialize:function(o,l,e,a,c,d,f){h.call(this,o,l,e),this.color=new u(a,c,d),this.intensity=f,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&o.id)},setColor:function(o){var l=i.getFloatsFromUintRGB(o);return this.color.set(l[0],l[1],l[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});r.RENDER_MASK=15,g.exports=r},function(g,b,t){var h=t(150),n=t(0),s=t(48),u=t(475),i=t(149),r=t(197),o=t(74),l=t(79),e=t(12),a=new n({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,d,f,p,v){return this.systems.displayList.add(new i(this.scene,c,d,f,p,v))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.scene.sys.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var d=this.lights,f=c.worldView,p=[],v=0;v<d.length;v++){var m=d[v];m.willRender(c)&&h(m,f)&&p.push({light:m,distance:s(m.x,m.y,f.centerX,f.centerY)})}return p.length>this.maxLights&&(l(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(c,d){return c.distance>=d.distance},setAmbientColor:function(c){var d=e.getFloatsFromUintRGB(c);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,d,f,p,v){void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=128),void 0===p&&(p=16777215),void 0===v&&(v=1);var m=e.getFloatsFromUintRGB(p),x=new u(c,d,f,m[0],m[1],m[2],v);return this.lights.push(x),x},removeLight:function(c){var d=this.lights.indexOf(c);return 0<=d&&o(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});g.exports=a},function(g,b,t){var h=t(55),n=t(17)(!1,n={Circle:t(1185),Ellipse:t(1195),Intersects:t(478),Line:t(1215),Mesh:t(1237),Point:t(1240),Polygon:t(1254),Rectangle:t(496),Triangle:t(1287)},h);g.exports=n},function(g,b,t){g.exports={CircleToCircle:t(228),CircleToRectangle:t(150),GetCircleToCircle:t(1205),GetCircleToRectangle:t(1206),GetLineToCircle:t(229),GetLineToLine:t(479),GetLineToPoints:t(480),GetLineToPolygon:t(481),GetLineToRectangle:t(231),GetRaysFromPointToPolygon:t(1207),GetRectangleIntersection:t(1208),GetRectangleToRectangle:t(1209),GetRectangleToTriangle:t(1210),GetTriangleToCircle:t(1211),GetTriangleToLine:t(486),GetTriangleToTriangle:t(1212),LineToCircle:t(230),LineToLine:t(92),LineToRectangle:t(482),PointToLine:t(490),PointToLineSegment:t(1213),RectangleToRectangle:t(114),RectangleToTriangle:t(483),RectangleToValues:t(1214),TriangleToCircle:t(485),TriangleToLine:t(487),TriangleToTriangle:t(488)}},function(g,b,t){var h=t(37);g.exports=function(n,s,u){var i=n.x1,r=n.y1,e=s.x1,a=s.y1,c=n.x2-i,d=n.y2-r,f=s.x2-e,p=s.y2-a;if(0==c||p*c-f*d==0)return!1;var v=(c*(a-r)+d*(i-e))/(f*d-p*c),m=(e+f*v-i)/c;return m<0||v<0||1<v?null:(void 0===u&&(u=new h),u.set(i+c*m,r+d*m,m))}},function(g,b,t){var h=t(37),n=t(479),s=new(t(45)),u=new h;g.exports=function(i,r,o){void 0===o&&(o=new h);var l=!1;o.set(),u.set();for(var e=r[0],a=1;a<r.length;a++){var c=r[a];s.setTo(e.x,e.y,c.x,c.y),e=c,n(i,s,u)&&(!l||u.z<o.z)&&(o.copy(u),l=!0)}return l?o:null}},function(g,b,t){var h=t(37),n=t(138),s=t(480),u=new h;g.exports=function(i,r,o){void 0===o&&(o=new n),Array.isArray(r)||(r=[r]);var l=!1;o.set(),u.set();for(var e=0;e<r.length;e++)s(i,r[e].points,u)&&(!l||u.z<o.z)&&(o.set(u.x,u.y,u.z,e),l=!0);return l?o:null}},function(g,b){g.exports=function(t,h){var n=t.x1,s=t.y1,u=t.x2,i=t.y2,r=h.x,o=h.y,l=h.right,e=h.bottom,a=0;if(r<=n&&n<=l&&o<=s&&s<=e||r<=u&&u<=l&&o<=i&&i<=e)return!0;if(n<r&&r<=u){if(o<(a=s+(i-s)*(r-n)/(u-n))&&a<=e)return!0}else if(l<n&&u<=l&&o<=(a=s+(i-s)*(l-n)/(u-n))&&a<=e)return!0;if(s<o&&o<=i){if(r<=(a=n+(u-n)*(o-s)/(i-s))&&a<=l)return!0}else if(e<s&&i<=e&&r<=(a=n+(u-n)*(e-s)/(i-s))&&a<=l)return!0;return!1}},function(g,b,t){var h=t(92),n=t(56),s=t(232),u=t(484);g.exports=function(i,r){if(r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top)return!1;var o=r.getLineA(),l=r.getLineB(),e=r.getLineC();if(n(i,o.x1,o.y1)||n(i,o.x2,o.y2)||n(i,l.x1,l.y1)||n(i,l.x2,l.y2)||n(i,e.x1,e.y1)||n(i,e.x2,e.y2))return!0;var a=i.getLineA(),c=i.getLineB(),d=i.getLineC(),f=i.getLineD();if(h(o,a)||h(o,c)||h(o,d)||h(o,f)||h(l,a)||h(l,c)||h(l,d)||h(l,f)||h(e,a)||h(e,c)||h(e,d)||h(e,f))return!0;var p=u(i);return 0<s(r,p,!0).length}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=[]),h.push({x:t.x,y:t.y}),h.push({x:t.right,y:t.y}),h.push({x:t.right,y:t.bottom}),h.push({x:t.x,y:t.bottom}),h}},function(g,b,t){var h=t(230),n=t(112);g.exports=function(s,u){return!(s.left>u.right||s.right<u.left||s.top>u.bottom||s.bottom<u.top||!n(s,u.x,u.y)&&!h(s.getLineA(),u)&&!h(s.getLineB(),u)&&!h(s.getLineC(),u))}},function(g,b,t){var h=t(4),n=t(487),s=t(92);g.exports=function(u,i,r){if(void 0===r&&(r=[]),n(u,i))for(var o=u.getLineA(),l=u.getLineB(),e=u.getLineC(),a=[new h,new h,new h],c=[s(o,i,a[0]),s(l,i,a[1]),s(e,i,a[2])],d=0;d<3;d++)c[d]&&r.push(a[d]);return r}},function(g,b,t){var h=t(92);g.exports=function(n,s){return!!(n.contains(s.x1,s.y1)||n.contains(s.x2,s.y2)||h(n.getLineA(),s)||h(n.getLineB(),s)||h(n.getLineC(),s))}},function(g,b,t){var h=t(232),n=t(489),s=t(92);g.exports=function(u,i){if(u.left>i.right||u.right<i.left||u.top>i.bottom||u.bottom<i.top)return!1;var r=u.getLineA(),o=u.getLineB(),l=u.getLineC(),e=i.getLineA(),a=i.getLineB(),c=i.getLineC();if(s(r,e)||s(r,a)||s(r,c)||s(o,e)||s(o,a)||s(o,c)||s(l,e)||s(l,a)||s(l,c))return!0;var d=n(u);return 0<h(i,d,!0).length||(d=n(i),0<h(u,d,!0).length)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=[]),h.push({x:t.x1,y:t.y1}),h.push({x:t.x2,y:t.y2}),h.push({x:t.x3,y:t.y3}),h}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=1);var s=h.x1,u=h.y1,i=h.x2,r=h.y2,o=t.x,l=t.y,e=(i-s)*(i-s)+(r-u)*(r-u);if(0==e)return!1;var a=((o-s)*(i-s)+(l-u)*(r-u))/e;return a<0?Math.sqrt((s-o)*(s-o)+(u-l)*(u-l))<=n:0<=a&&a<=1?Math.abs(((u-l)*(i-s)-(s-o)*(r-u))/e)*Math.sqrt(e)<=n:Math.sqrt((i-o)*(i-o)+(r-l)*(r-l))<=n}},function(g,b,t){var h=t(14),n=t(66),s=t(93);g.exports=function(u){var i=s(u)-h.TAU;return n(i,-Math.PI,Math.PI)}},function(g,b){var t=!0,h="untitled",n="",s="";function u(i){return 0===i.models.length&&i.models.push({faces:[],name:h,textureCoords:[],vertexNormals:[],vertices:[]}),n="",i.models[i.models.length-1]}g.exports=function(i,r){void 0===r&&(r=!0),t=r;var o={materials:{},materialLibraries:[],models:[]};s=n="";for(var l,e,c,d,f,p,v,m,x,y,w,T,E,S,A,_,C,M,R,L,D,F,P,O,B,k=i.split("\n"),I=0;I<k.length;I++){var N=(O=k[I],-1<(B=O.indexOf("#"))?O.substring(0,B):O).replace(/\s\s+/g," ").trim().split(" ");switch(N[0].toLowerCase()){case"o":P=2<=(F=N).length?F[1]:h,o.models.push({faces:[],name:P,textureCoords:[],vertexNormals:[],vertices:[]}),n="";break;case"g":2===(D=N).length&&(n=D[1]);break;case"v":_=o,M=2<=(C=(A=N).length)?parseFloat(A[1]):0,R=3<=C?parseFloat(A[2]):0,L=4<=C?parseFloat(A[3]):0,u(_).vertices.push({x:M,y:R,z:L});break;case"vt":y=o,S=E=T=void 0,T=2<=(w=(x=N).length)?parseFloat(x[1]):0,E=3<=w?parseFloat(x[2]):0,S=4<=w?parseFloat(x[3]):0,isNaN(T)&&(T=0),isNaN(E)&&(E=0),isNaN(S)&&(S=0),t&&(E=1-E),u(y).textureCoords.push({u:T,v:E,w:S});break;case"vn":d=o,p=2<=(f=(c=N).length)?parseFloat(c[1]):0,v=3<=f?parseFloat(c[2]):0,m=4<=f?parseFloat(c[3]):0,u(d).vertexNormals.push({x:p,y:v,z:m});break;case"f":!function(Y,X){var W=Y.length-1;if(!(W<3)){for(var G={group:n,material:s,vertices:[]},z=0;z<W;z++){var V,H,j,K=Y[z+1].split("/"),Q=K.length;Q<1||3<Q||(H=V=j=0,j=parseInt(K[0],10),1<Q&&""!==K[1]&&(V=parseInt(K[1],10)),2<Q&&(H=parseInt(K[2],10)),0!==j&&(j<0&&(j=u(X).vertices.length+1+j),--V,--j,--H,G.vertices.push({textureCoordsIndex:V,vertexIndex:j,vertexNormalIndex:H})))}u(X).faces.push(G)}}(N,o);break;case"mtllib":2<=(e=N).length&&o.materialLibraries.push(e[1]);break;case"usemtl":2<=(l=N).length&&(s=l[1])}}return o}},function(g,b,t){var h=t(100);g.exports=function(n){for(var s={},u=n.split("\n"),i="",r=0;r<u.length;r++){var o=u[r].trim();if(0!==o.indexOf("#")&&""!==o){var l=o.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":i=l[1];break;case"kd":var e=Math.floor(255*l[1]),a=2<=l.length?Math.floor(255*l[2]):e,c=3<=l.length?Math.floor(255*l[3]):e;s[i]=h(e,a,c)}}}return s}},function(g,b){g.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(g,b){g.exports=function(t){return t.x*t.x+t.y*t.y}},function(g,b,t){var h=t(10);h.Area=t(1261),h.Ceil=t(1262),h.CeilAll=t(1263),h.CenterOn=t(187),h.Clone=t(1264),h.Contains=t(56),h.ContainsPoint=t(1265),h.ContainsRect=t(497),h.CopyFrom=t(1266),h.Decompose=t(484),h.Equals=t(1267),h.FitInside=t(1268),h.FitOutside=t(1269),h.Floor=t(1270),h.FloorAll=t(1271),h.FromPoints=t(196),h.FromXY=t(1272),h.GetAspectRatio=t(234),h.GetCenter=t(1273),h.GetPoint=t(167),h.GetPoints=t(300),h.GetSize=t(1274),h.Inflate=t(1275),h.Intersection=t(1276),h.MarchingAnts=t(310),h.MergePoints=t(1277),h.MergeRect=t(1278),h.MergeXY=t(1279),h.Offset=t(1280),h.OffsetPoint=t(1281),h.Overlaps=t(1282),h.Perimeter=t(128),h.PerimeterPoint=t(1283),h.Random=t(170),h.RandomOutside=t(1284),h.SameDimensions=t(1285),h.Scale=t(1286),h.Union=t(435),g.exports=h},function(g,b){g.exports=function(t,h){return!(h.width*h.height>t.width*t.height)&&h.x>t.x&&h.x<t.right&&h.right>t.x&&h.right<t.right&&h.y>t.y&&h.y<t.bottom&&h.bottom>t.y&&h.bottom<t.bottom}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=(n.x1+n.x2+n.x3)/3,s.y=(n.y1+n.y2+n.y3)/3,s}},function(g,b){g.exports=function(t,h,n){return t.x1+=h,t.y1+=n,t.x2+=h,t.y2+=n,t.x3+=h,t.y3+=n,t}},function(g,b,t){var h=t(4);function n(s,u,i,r){var o=s-i,l=u-r;return Math.sqrt(o*o+l*l)}g.exports=function(s,u){void 0===u&&(u=new h);var i=s.x1,r=s.y1,o=s.x2,l=s.y2,e=s.x3,a=s.y3,c=n(e,a,o,l),d=n(i,r,e,a),f=n(o,l,i,r),p=c+d+f;return u.x=(i*c+o*d+e*f)/p,u.y=(r*c+l*d+a*f)/p,u}},function(g,b){g.exports=function(t,h){return function(n,s,u,i){var r=t.getPixelAlpha(s,u,i.texture.key,i.frame.name);return r&&h<=r}}},function(g,b){g.exports=function(t,h,n){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.pad=n,this.events=n.events,this.index=s,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});g.exports=h},function(g,b,t){var h=t(0),n=t(236),s=new h({initialize:function(u,i){this.pad=u,this.events=u.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var i=this.pad,r=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,i,this,u),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,r,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,i,this,u),this.pad.emit(n.GAMEPAD_BUTTON_UP,r,u,this))},destroy:function(){this.pad=null,this.events=null}});g.exports=s},function(g,b,t){var h=t(503),n=t(504),s=t(0),u=t(9),i=t(3),r=new s({Extends:u,initialize:function(o,l){u.call(this),this.manager=o,this.pad=l,this.id=l.id,this.index=l.index;for(var e=[],a=0;a<l.buttons.length;a++)e.push(new n(this,a));this.buttons=e;var c=[];for(a=0;a<l.axes.length;a++)c.push(new h(this,a));this.axes=c,this.vibration=l.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=e[14]?e[14]:d,this._LCRight=e[15]?e[15]:d,this._LCTop=e[12]?e[12]:d,this._LCBottom=e[13]?e[13]:d,this._RCLeft=e[2]?e[2]:d,this._RCRight=e[1]?e[1]:d,this._RCTop=e[3]?e[3]:d,this._RCBottom=e[0]?e[0]:d,this._FBLeftTop=e[4]?e[4]:d,this._FBLeftBottom=e[6]?e[6]:d,this._FBRightTop=e[5]?e[5]:d,this._FBRightBottom=e[7]?e[7]:d;var f={value:0};this._HAxisLeft=c[0]?c[0]:f,this._VAxisLeft=c[1]?c[1]:f,this._HAxisRight=c[2]?c[2]:f,this._VAxisRight=c[3]?c[3]:f,this.leftStick=new i,this.rightStick=new i,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var l=0;l<this.axes.length;l++)this.axes[l].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){for(var l=this.buttons,e=o.buttons,f=l.length,a=0;a<f;a++)l[a].update(e[a].value);var c=this.axes,d=o.axes;for(f=c.length,a=0;a<f;a++)c[a].update(d[a]);2<=f&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),4<=f&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){var o;for(this.removeAllListeners(),this.manager=null,this.pad=null,o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});g.exports=r},function(g,b,t){var h=t(0),n=t(9),s=t(152),u=new h({Extends:n,initialize:function(i,r){n.call(this),this.plugin=i,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(i){return this.emitOnRepeat=i,this},onDown:function(i){this.originalEvent=i,this.enabled&&(this.altKey=i.altKey,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.location=i.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,i):(this.isDown=!0,this.isUp=!1,this.timeDown=i.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,i)))},onUp:function(i){this.originalEvent=i,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=i.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,i))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});g.exports=u},function(g,b,t){var h=t(0),n=t(152),s=t(2),u=t(508),i=t(510),r=new h({initialize:function(o,l,e){if(void 0===e&&(e={}),l.length<2)return!1;this.manager=o,this.enabled=!0,this.keyCodes=[];for(var a=0;a<l.length;a++){var c=l[a];"string"==typeof c?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):"number"==typeof c?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(e,"resetOnWrongKey",!0),this.maxKeyDelay=s(e,"maxKeyDelay",0),this.resetOnMatch=s(e,"resetOnMatch",!1),this.deleteOnMatch=s(e,"deleteOnMatch",!1);var d=this;this.onKeyDown=function(f){!d.matched&&d.enabled&&u(f,d)&&(d.manager.emit(n.COMBO_MATCH,d,f),d.resetOnMatch?i(d):d.deleteOnMatch&&d.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});g.exports=r},function(g,b,t){var h=t(509);g.exports=function(n,s){if(s.matched)return!0;var i=!1,r=!1;return n.keyCode===s.current&&(0<s.index&&0<s.maxKeyDelay?n.timeStamp<=s.timeLastMatched+s.maxKeyDelay&&(r=!0,i=h(n,s)):(r=!0,i=h(n,s))),!r&&s.resetOnWrongKey&&(s.index=0,s.current=s.keyCodes[0]),i&&(s.timeLastMatched=n.timeStamp,s.matched=!0,s.timeMatched=n.timeStamp),i}},function(g,b){g.exports=function(t,h){return h.timeLastMatched=t.timeStamp,h.index++,h.index===h.size||(h.current=h.keyCodes[h.index],!1)}},function(g,b){g.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(g,b,t){var h=t(237);g.exports=function(n,s){var u=h(s,n.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",n.src,u.async,u.user,u.password),i.responseType=n.xhrSettings.responseType,i.timeout=u.timeout,u.headers)for(var r in u.headers)i.setRequestHeader(r,u.headers[r]);return u.header&&u.headerValue&&i.setRequestHeader(u.header,u.headerValue),u.requestedWith&&i.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&i.overrideMimeType(u.overrideMimeType),u.withCredentials&&(i.withCredentials=!0),i.onload=n.onLoad.bind(n,i),i.onerror=n.onError.bind(n,i),i.onprogress=n.onProgress.bind(n),i.send(),i}},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(513),o=t(7),l=new h({Extends:s,initialize:function(e,a,c,d,f){var p;o(a)&&(a=i(p=a,"key"),d=i(p,"xhrSettings"),f=i(p,"context",f)),s.call(this,e,{type:"audio",cache:e.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:a,url:c.url,xhrSettings:d,config:{context:f}})},onProcess:function(){this.state=n.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(a){e.data=a,e.onProcessComplete()},function(a){console.error("Error decoding audio: "+e.key+" - ",a?a.message:null),e.onProcessError()}),this.config.context=null}});l.create=function(e,a,c,d,f){var p=e.systems.game,v=p.config.audio,m=p.device.audio;o(a)&&(c=i(a,"url",[]),d=i(a,"config",{}));var x=l.getAudioURL(p,c);return x?m.webAudio&&!v.disableWebAudio?new l(e,a,x,f,p.sound.context):new r(e,a,x,d):null},l.getAudioURL=function(e,a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=i(a[c],"url",a[c]);if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return{url:d,type:""};var f=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=i(a[c],"type",f?f[1]:"").toLowerCase(),e.device.audio[f])return{url:d,type:f}}return null},u.register("audio",function(e,a,c,d){var f,p=this.systems.game,m=p.device.audio;if(p.config.audio.noAudio||!m.webAudio&&!m.audioData)return this;if(Array.isArray(e))for(var x=0;x<e.length;x++)(f=l.create(this,e[x]))&&this.addFile(f);else(f=l.create(this,e,a,c,d))&&this.addFile(f);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(91),s=t(23),u=t(2),i=t(153),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d;r(e)&&(e=u(d=e,"key"),c=u(d,"config",c)),s.call(this,l,{type:"audio",cache:l.cacheManager.audio,extension:a.type,key:e,url:a.url,config:c}),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var l=0;l<this.data.length;l++){var e=this.data[l];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(l){var e=l.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var l=this.config&&this.config.instances||1;this.filesTotal=l,this.filesLoaded=0;for(var e=this.percentComplete=0;e<l;e++){var a=new Audio;a.dataset||(a.dataset={}),a.dataset.name=this.key+("0"+e).slice(-2),a.dataset.used="false",this.locked?a.dataset.locked="true":(a.dataset.locked="false",a.preload="auto",a.oncanplaythrough=this.onProgress.bind(this),a.onerror=this.onError.bind(this)),this.data.push(a)}for(e=0;e<this.data.length;e++)(a=this.data[e]).src=i(this,this.loader.baseURL),this.locked||a.load();this.locked&&setTimeout(this.onLoad.bind(this))}});g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d,f="js";r(e)&&(e=i(d=e,"key"),a=i(d,"url"),c=i(d,"xhrSettings"),f=i(d,"extension",f)),s.call(this,l,{type:"script",cache:!1,extension:f,responseType:"text",key:e,url:a,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){var h=t(516),n=t(155),s=t(0),u=t(60),i=t(518),r=t(519),o=new s({initialize:function(l){this.world=l,this.scene=l.scene,this.sys=l.scene.sys},collider:function(l,e,a,c,d){return this.world.addCollider(l,e,a,c,d)},overlap:function(l,e,a,c,d){return this.world.addOverlap(l,e,a,c,d)},existing:function(l,e){return this.world.enableBody(l,e?u.STATIC_BODY:u.DYNAMIC_BODY),l},staticImage:function(l,e,a,c){var d=new h(this.scene,l,e,a,c);return this.sys.displayList.add(d),this.world.enableBody(d,u.STATIC_BODY),d},image:function(l,e,a,c){var d=new h(this.scene,l,e,a,c);return this.sys.displayList.add(d),this.world.enableBody(d,u.DYNAMIC_BODY),d},staticSprite:function(l,e,a,c){var d=new n(this.scene,l,e,a,c);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,u.STATIC_BODY),d},sprite:function(l,e,a,c){var d=new n(this.scene,l,e,a,c);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,u.DYNAMIC_BODY),d},staticGroup:function(l,e){return this.sys.updateList.add(new r(this.world,this.world.scene,l,e))},group:function(l,e){return this.sys.updateList.add(new i(this.world,this.world.scene,l,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});g.exports=o},function(g,b,t){var h=t(0),n=t(240),s=t(124),u=new h({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(i,r,o,l,e){s.call(this,i,r,o,l,e),this.body=null}});g.exports=u},function(g,b,t){var h=t(241),n=t(62),s=t(228),u=t(150);g.exports=function(i,r,o,l,e,a){var c=h(i,r-l,o-l,2*l,2*l,e,a);if(0===c.length)return c;for(var d=new n(r,o,l),f=new n,p=[],v=0;v<c.length;v++){var m=c[v];m.isCircle?(f.setTo(m.center.x,m.center.y,m.halfWidth),s(d,f)&&p.push(m)):u(d,m)&&p.push(m)}return p}},function(g,b,t){var h=t(155),n=t(0),s=t(60),u=t(2),i=t(110),r=t(7),o=new n({Extends:i,initialize:function(l,e,a,c){var d;a||c?r(a)?(c=a,a=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler):Array.isArray(a)&&r(a[0])?(c=a[0],d=this,a.forEach(function(f){f.internalCreateCallback=d.createCallbackHandler,f.internalRemoveCallback=d.removeCallbackHandler}),a=null):c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,c.classType=u(c,"classType",h),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:u(c,"collideWorldBounds",!1),setBoundsRectangle:u(c,"customBoundsRectangle",null),setAccelerationX:u(c,"accelerationX",0),setAccelerationY:u(c,"accelerationY",0),setAllowDrag:u(c,"allowDrag",!0),setAllowGravity:u(c,"allowGravity",!0),setAllowRotation:u(c,"allowRotation",!0),setBounceX:u(c,"bounceX",0),setBounceY:u(c,"bounceY",0),setDragX:u(c,"dragX",0),setDragY:u(c,"dragY",0),setEnable:u(c,"enable",!0),setGravityX:u(c,"gravityX",0),setGravityY:u(c,"gravityY",0),setFrictionX:u(c,"frictionX",0),setFrictionY:u(c,"frictionY",0),setMaxVelocityX:u(c,"maxVelocityX",1e4),setMaxVelocityY:u(c,"maxVelocityY",1e4),setVelocityX:u(c,"velocityX",0),setVelocityY:u(c,"velocityY",0),setAngularVelocity:u(c,"angularVelocity",0),setAngularAcceleration:u(c,"angularAcceleration",0),setAngularDrag:u(c,"angularDrag",0),setMass:u(c,"mass",1),setImmovable:u(c,"immovable",!1)},i.call(this,e,a,c),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,s.DYNAMIC_BODY);var e=l.body;for(var a in this.defaults)e[a](this.defaults[a])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,e,a){void 0===a&&(a=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.set(l+d*a,e+d*a);return this},setVelocityX:function(l,e){void 0===e&&(e=0);for(var a=this.getChildren(),c=0;c<a.length;c++)a[c].body.velocity.x=l+c*e;return this},setVelocityY:function(l,e){void 0===e&&(e=0);for(var a=this.getChildren(),c=0;c<a.length;c++)a[c].body.velocity.y=l+c*e;return this}});g.exports=o},function(g,b,t){var h=t(155),n=t(0),s=t(60),u=t(2),i=t(110),r=t(7),o=new n({Extends:i,initialize:function(l,e,a,c){a||c?r(a)?(c=a,a=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=u(c,"classType",h)):Array.isArray(a)&&r(a[0])?(c=a,a=null,c.forEach(function(d){d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=u(d,"classType",h)})):c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:h},this.world=l,this.physicsType=s.STATIC_BODY,i.call(this,e,a,c),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,s.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,e=0;e<l.length;e++)l[e].body.reset();return this}});g.exports=o},function(g,b,t){var h=t(344),n=t(521),s=t(18),u=t(0),i=t(522),r=t(60),o=t(48),l=t(9),e=t(242),a=t(123),c=t(348),d=t(349),f=t(243),p=t(244),v=t(523),m=t(6),x=t(14),y=t(208),w=t(524),T=t(10),E=t(525),S=t(526),A=t(531),_=t(532),C=t(148),M=t(533),R=t(245),L=t(25),D=t(3),F=t(66),U=new u({Extends:l,initialize:function(P,O){l.call(this),this.scene=P,this.bodies=new C,this.staticBodies=new C,this.pendingDestroy=new C,this.colliders=new y,this.gravity=new D(m(O,"gravity.x",0),m(O,"gravity.y",0)),this.bounds=new T(m(O,"x",0),m(O,"y",0),m(O,"width",P.sys.scale.width),m(O,"height",P.sys.scale.height)),this.checkCollision={up:m(O,"checkCollision.up",!0),down:m(O,"checkCollision.down",!0),left:m(O,"checkCollision.left",!0),right:m(O,"checkCollision.right",!0)},this.fps=m(O,"fps",60),this.fixedStep=m(O,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=m(O,"timeScale",1),this.OVERLAP_BIAS=m(O,"overlapBias",4),this.TILE_BIAS=m(O,"tileBias",16),this.forceX=m(O,"forceX",!1),this.isPaused=m(O,"isPaused",!1),this._total=0,this.drawDebug=m(O,"debug",!1),this.defaults={debugShowBody:m(O,"debugShowBody",!0),debugShowStaticBody:m(O,"debugShowStaticBody",!0),debugShowVelocity:m(O,"debugShowVelocity",!0),bodyDebugColor:m(O,"debugBodyColor",16711935),staticBodyDebugColor:m(O,"debugStaticBodyColor",255),velocityDebugColor:m(O,"debugVelocityColor",65280)},this.maxEntries=m(O,"maxEntries",16),this.useTree=m(O,"useTree",!0),this.tree=new E(this.maxEntries),this.staticTree=new E(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new L,this._tempMatrix2=new L,this.drawDebug&&this.createDebugGraphic()},enable:function(P,O){void 0===O&&(O=r.DYNAMIC_BODY),Array.isArray(P)||(P=[P]);for(var B=0;B<P.length;B++){var k=P[B];if(k.isParent)for(var I=k.getChildren(),N=0;N<I.length;N++){var Y=I[N];Y.isParent?this.enable(Y,O):this.enableBody(Y,O)}else this.enableBody(k,O)}},enableBody:function(P,O){return void 0===O&&(O=r.DYNAMIC_BODY),P.body||(O===r.DYNAMIC_BODY?P.body=new n(this,P):O===r.STATIC_BODY&&(P.body=new M(this,P))),this.add(P.body),P},add:function(P){return P.physicsType===r.DYNAMIC_BODY?this.bodies.set(P):P.physicsType===r.STATIC_BODY&&(this.staticBodies.set(P),this.staticTree.insert(P)),P.enable=!0,P},disable:function(P){Array.isArray(P)||(P=[P]);for(var O=0;O<P.length;O++){var B=P[O];if(B.isParent)for(var k=B.getChildren(),I=0;I<k.length;I++){var N=k[I];N.isParent?this.disable(N):this.disableBody(N.body)}else this.disableBody(B.body)}},disableBody:function(P){this.remove(P),P.enable=!1},remove:function(P){P.physicsType===r.DYNAMIC_BODY?(this.tree.remove(P),this.bodies.delete(P)):P.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(P),this.staticTree.remove(P))},createDebugGraphic:function(){var P=this.scene.sys.add.graphics({x:0,y:0});return P.setDepth(Number.MAX_VALUE),this.debugGraphic=P,this.drawDebug=!0,P},setBounds:function(P,O,B,k,I,N,Y,X){return this.bounds.setTo(P,O,B,k),void 0!==I&&this.setBoundsCollision(I,N,Y,X),this},setBoundsCollision:function(P,O,B,k){return void 0===P&&(P=!0),void 0===O&&(O=!0),void 0===B&&(B=!0),void 0===k&&(k=!0),this.checkCollision.left=P,this.checkCollision.right=O,this.checkCollision.up=B,this.checkCollision.down=k,this},pause:function(){return this.isPaused=!0,this.emit(e.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(e.RESUME),this},addCollider:function(P,O,B,k,I){void 0===B&&(B=null),void 0===k&&(k=null),void 0===I&&(I=B);var N=new i(this,!1,P,O,B,k,I);return this.colliders.add(N),N},addOverlap:function(P,O,B,k,I){void 0===B&&(B=null),void 0===k&&(k=null),void 0===I&&(I=B);var N=new i(this,!0,P,O,B,k,I);return this.colliders.add(N),N},removeCollider:function(P){return this.colliders.remove(P),this},setFPS:function(P){return this.fps=P,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(P,O){if(!this.isPaused&&0!==this.bodies.size){var B,k=this._frameTime,I=this._frameTimeMS*this.timeScale;this._elapsed+=O;var N=this.bodies.entries,Y=this._elapsed>=I;for(this.fixedStep||(k=.001*O,Y=!0,this._elapsed=0),W=0;W<N.length;W++)(B=N[W]).enable&&B.preUpdate(Y,k);if(Y){this._elapsed-=I,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(N));for(var X=this.colliders.update(),W=0;W<X.length;W++){var G=X[W];G.active&&G.update()}this.emit(e.WORLD_STEP,k)}for(;this._elapsed>=I;)this._elapsed-=I,this.step(k)}},step:function(P){for(var O,B=this.bodies.entries,k=B.length,I=0;I<k;I++)(O=B[I]).enable&&O.update(P);this.useTree&&(this.tree.clear(),this.tree.load(B));var N=this.colliders.update();for(I=0;I<N.length;I++){var Y=N[I];Y.active&&Y.update()}this.emit(e.WORLD_STEP,P),this.stepsLastFrame++},postUpdate:function(){var P,O=(Y=this.bodies.entries).length,B=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(G=this.stepsLastFrame=0;G<O;G++)(P=Y[G]).enable&&P.postUpdate();if(this.drawDebug){var I=this.debugGraphic;for(I.clear(),G=0;G<O;G++)(P=Y[G]).willDrawDebug()&&P.drawDebug(I);for(O=(Y=k.entries).length,G=0;G<O;G++)(P=Y[G]).willDrawDebug()&&P.drawDebug(I)}var N=this.pendingDestroy;if(0<N.size){for(var Y,X=this.tree,W=this.staticTree,G=(O=(Y=N.entries).length,0);G<O;G++)(P=Y[G]).physicsType===r.DYNAMIC_BODY?(X.remove(P),B.delete(P)):P.physicsType===r.STATIC_BODY&&(W.remove(P),k.delete(P)),P.world=void 0,P.gameObject=void 0;N.clear()}},updateMotion:function(P,O){P.allowRotation&&this.computeAngularVelocity(P,O),this.computeVelocity(P,O)},computeAngularVelocity:function(P,O){var B=P.angularVelocity,k=P.angularAcceleration,I=P.angularDrag,N=P.maxAngular;k?B+=k*O:P.allowDrag&&I&&(c(B-(I*=O),0,.1)?B-=I:d(B+I,0,.1)?B+=I:B=0);var Y=(B=s(B,-N,N))-P.angularVelocity;P.angularVelocity+=Y,P.rotation+=P.angularVelocity*O},computeVelocity:function(P,O){var B=P.velocity.x,k=P.acceleration.x,I=P.drag.x,N=P.maxVelocity.x,Y=P.velocity.y,X=P.acceleration.y,W=P.drag.y,G=P.maxVelocity.y,z=P.speed,V=P.maxSpeed,H=P.allowDrag,j=P.useDamping;P.allowGravity&&(B+=(this.gravity.x+P.gravity.x)*O,Y+=(this.gravity.y+P.gravity.y)*O),k?B+=k*O:H&&I&&(j?(B*=I=Math.pow(I,O),z=Math.sqrt(B*B+Y*Y),a(z,0,.001)&&(B=0)):c(B-(I*=O),0,.01)?B-=I:d(B+I,0,.01)?B+=I:B=0),X?Y+=X*O:H&&W&&(j?(Y*=W=Math.pow(W,O),z=Math.sqrt(B*B+Y*Y),a(z,0,.001)&&(Y=0)):c(Y-(W*=O),0,.01)?Y-=W:d(Y+W,0,.01)?Y+=W:Y=0),B=s(B,-N,N),Y=s(Y,-G,G),P.velocity.set(B,Y),-1<V&&V<z&&(P.velocity.normalize().scale(V),z=V),P.speed=z},separate:function(P,O,B,k,I,N){if(!N&&!P.enable||!O.enable||P.checkCollision.none||O.checkCollision.none||!this.intersects(P,O)||B&&!1===B.call(k,P.gameObject,O.gameObject))return!1;if(P.isCircle&&O.isCircle)return this.separateCircle(P,O,I);if(P.isCircle!==O.isCircle){var Y=P.isCircle?O:P,H=(P.isCircle?P:O).center;if((H.y<Y.y||H.y>Y.bottom)&&(H.x<Y.x||H.x>Y.right))return this.separateCircle(P,O,I)}var j=!1,K=!1;I?(j=A(P,O,I,this.OVERLAP_BIAS),K=_(P,O,I,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+P.gravity.y)<Math.abs(this.gravity.x+P.gravity.x)?(j=A(P,O,I,this.OVERLAP_BIAS),this.intersects(P,O)&&(K=_(P,O,I,this.OVERLAP_BIAS))):(K=_(P,O,I,this.OVERLAP_BIAS),this.intersects(P,O)&&(j=A(P,O,I,this.OVERLAP_BIAS)));var Q=j||K;return Q&&(I?(P.onOverlap||O.onOverlap)&&this.emit(e.OVERLAP,P.gameObject,O.gameObject,P,O):(P.onCollide||O.onCollide)&&this.emit(e.COLLIDE,P.gameObject,O.gameObject,P,O)),Q},separateCircle:function(P,O,B,k){f(P,O,!1,k),p(P,O,!1,k);var I,N,Y=0;if(P.isCircle!==O.isCircle?((N={x:P.isCircle?P.center.x:O.center.x,y:P.isCircle?P.center.y:O.center.y,radius:P.isCircle?P.halfWidth:O.halfWidth}).y<(I={x:O.isCircle?P.position.x:O.position.x,y:O.isCircle?P.position.y:O.position.y,right:O.isCircle?P.right:O.right,bottom:O.isCircle?P.bottom:O.bottom}).y?N.x<I.x?Y=o(N.x,N.y,I.x,I.y)-N.radius:I.right<N.x&&(Y=o(N.x,N.y,I.right,I.y)-N.radius):I.bottom<N.y&&(N.x<I.x?Y=o(N.x,N.y,I.x,I.bottom)-N.radius:I.right<N.x&&(Y=o(N.x,N.y,I.right,I.bottom)-N.radius)),Y*=-1):Y=P.halfWidth+O.halfWidth-o(P.center.x,P.center.y,O.center.x,O.center.y),P.overlapR=Y,O.overlapR=Y,B||0===Y||P.immovable&&O.immovable||P.customSeparateX||O.customSeparateX)return 0!==Y&&(P.onOverlap||O.onOverlap)&&this.emit(e.OVERLAP,P.gameObject,O.gameObject,P,O),0!==Y;var W=P.center.y-O.center.y,G=Math.sqrt(Math.pow(P.center.x-O.center.x,2)+Math.pow(W,2)),z=(O.center.x-P.center.x)/G||0,V=(O.center.y-P.center.y)/G||0,H=2*(P.velocity.x*z+P.velocity.y*V-O.velocity.x*z-O.velocity.y*V)/(P.mass+O.mass);(P.immovable||O.immovable)&&(H*=2),P.immovable||(P.velocity.x=P.velocity.x-H/P.mass*z,P.velocity.y=P.velocity.y-H/P.mass*V),O.immovable||(O.velocity.x=O.velocity.x+H/O.mass*z,O.velocity.y=O.velocity.y+H/O.mass*V),P.immovable||O.immovable||(Y/=2);var j=h(P.center,O.center),K=(Y+x.EPSILON)*Math.cos(j),Q=(Y+x.EPSILON)*Math.sin(j);return P.immovable||(P.x-=K,P.y-=Q,P.updateCenter()),O.immovable||(O.x+=K,O.y+=Q,O.updateCenter()),P.velocity.x*=P.bounce.x,P.velocity.y*=P.bounce.y,O.velocity.x*=O.bounce.x,O.velocity.y*=O.bounce.y,(P.onCollide||O.onCollide)&&this.emit(e.COLLIDE,P.gameObject,O.gameObject,P,O),!0},intersects:function(P,O){return P!==O&&(P.isCircle||O.isCircle?P.isCircle?O.isCircle?o(P.center.x,P.center.y,O.center.x,O.center.y)<=P.halfWidth+O.halfWidth:this.circleBodyIntersects(P,O):this.circleBodyIntersects(O,P):!(P.right<=O.position.x||P.bottom<=O.position.y||P.position.x>=O.right||P.position.y>=O.bottom))},circleBodyIntersects:function(P,O){var B=s(P.center.x,O.left,O.right),k=s(P.center.y,O.top,O.bottom);return(P.center.x-B)*(P.center.x-B)+(P.center.y-k)*(P.center.y-k)<=P.halfWidth*P.halfWidth},overlap:function(P,O,B,k,I){return void 0===B&&(B=null),void 0===k&&(k=null),void 0===I&&(I=B),this.collideObjects(P,O,B,k,I,!0)},collide:function(P,O,B,k,I){return void 0===B&&(B=null),void 0===k&&(k=null),void 0===I&&(I=B),this.collideObjects(P,O,B,k,I,!1)},collideObjects:function(P,O,B,k,I,N){var Y;P.isParent&&void 0===P.physicsType&&(P=P.children.entries),O&&O.isParent&&void 0===O.physicsType&&(O=O.children.entries);var X=Array.isArray(P),W=Array.isArray(O);if(this._total=0,X||W)if(!X&&W)for(Y=0;Y<O.length;Y++)this.collideHandler(P,O[Y],B,k,I,N);else if(X&&!W)if(O)for(Y=0;Y<P.length;Y++)this.collideHandler(P[Y],O,B,k,I,N);else for(Y=0;Y<P.length;Y++)for(var G=P[Y],z=Y+1;z<P.length;z++)Y!==z&&this.collideHandler(G,P[z],B,k,I,N);else for(Y=0;Y<P.length;Y++)for(z=0;z<O.length;z++)this.collideHandler(P[Y],O[z],B,k,I,N);else this.collideHandler(P,O,B,k,I,N);return 0<this._total},collideHandler:function(P,O,B,k,I,N){if(void 0===O&&P.isParent)return this.collideGroupVsGroup(P,P,B,k,I,N);if(!P||!O)return!1;if(P.body){if(O.body)return this.collideSpriteVsSprite(P,O,B,k,I,N);if(O.isParent)return this.collideSpriteVsGroup(P,O,B,k,I,N);if(O.isTilemap)return this.collideSpriteVsTilemapLayer(P,O,B,k,I,N)}else if(P.isParent){if(O.body)return this.collideSpriteVsGroup(O,P,B,k,I,N);if(O.isParent)return this.collideGroupVsGroup(P,O,B,k,I,N);if(O.isTilemap)return this.collideGroupVsTilemapLayer(P,O,B,k,I,N)}else if(P.isTilemap){if(O.body)return this.collideSpriteVsTilemapLayer(O,P,B,k,I,N);if(O.isParent)return this.collideGroupVsTilemapLayer(O,P,B,k,I,N)}},collideSpriteVsSprite:function(P,O,B,k,I,N){return!(!P.body||!O.body||(this.separate(P.body,O.body,k,I,N)&&(B&&B.call(I,P,O),this._total++),0))},collideSpriteVsGroup:function(P,O,B,k,I,N){var Y,X=P.body;if(0!==O.length&&X&&X.enable&&!X.checkCollision.none)if(this.useTree||O.physicsType===r.STATIC_BODY){var W=this.treeMinMax;W.minX=X.left,W.minY=X.top,W.maxX=X.right,W.maxY=X.bottom;for(var G=O.physicsType===r.DYNAMIC_BODY?this.tree.search(W):this.staticTree.search(W),z=G.length,V=0;V<z;V++)X!==(Y=G[V])&&Y.enable&&!Y.checkCollision.none&&O.contains(Y.gameObject)&&this.separate(X,Y,k,I,N,!0)&&(B&&B.call(I,X.gameObject,Y.gameObject),this._total++)}else{var H=O.getChildren(),j=O.children.entries.indexOf(P);for(z=H.length,V=0;V<z;V++)(Y=H[V].body)&&V!==j&&Y.enable&&this.separate(X,Y,k,I,N)&&(B&&B.call(I,X.gameObject,Y.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(P,O,B,k,I,N){var Y=P.getChildren();if(0===Y.length)return!1;for(var X=!1,W=0;W<Y.length;W++)Y[W].body&&this.collideSpriteVsTilemapLayer(Y[W],O,B,k,I,N)&&(X=!0);return X},collideTiles:function(P,O,B,k,I){return!(!P.body.enable||0===O.length)&&this.collideSpriteVsTilesHandler(P,O,B,k,I,!1,!1)},overlapTiles:function(P,O,B,k,I){return!(!P.body.enable||0===O.length)&&this.collideSpriteVsTilesHandler(P,O,B,k,I,!0,!1)},collideSpriteVsTilemapLayer:function(P,O,B,k,I,N){var Y=P.body;if(!Y.enable||Y.checkCollision.none)return!1;var X,W=Y.position.x,z=Y.width,V=Y.height,H=O.layer;H.tileWidth>H.baseTileWidth&&(W-=X=(H.tileWidth-H.baseTileWidth)*O.scaleX,z+=X),H.tileHeight>H.baseTileHeight&&(V+=(H.tileHeight-H.baseTileHeight)*O.scaleY);var j=v(W,Y.position.y,z,V,null,O.scene.cameras.main,O.layer);return 0!==j.length&&this.collideSpriteVsTilesHandler(P,j,B,k,I,N,!0)},collideSpriteVsTilesHandler:function(P,O,B,k,I,N,Y){for(var X,W,G=P.body,z={left:0,right:0,top:0,bottom:0},V=!1,H=0;H<O.length;H++){var j=(W=(X=O[H]).tilemapLayer).tileToWorldXY(X.x,X.y);z.left=j.x,z.top=j.y,X.baseHeight!==X.height&&(z.top-=(X.height-X.baseHeight)*W.scaleY),z.right=z.left+X.width*W.scaleX,z.bottom=z.top+X.height*W.scaleY,R(z,G)&&(!k||k.call(I,P,X))&&w(X,P)&&(N||S(H,G,X,z,W,this.TILE_BIAS,Y))&&(this._total++,V=!0,B&&B.call(I,P,X),N&&G.onOverlap?this.emit(e.TILE_OVERLAP,P,X,G):G.onCollide&&this.emit(e.TILE_COLLIDE,P,X,G))}return V},collideGroupVsGroup:function(P,O,B,k,I,N){if(0!==P.length&&0!==O.length)for(var Y=P.getChildren(),X=0;X<Y.length;X++)this.collideSpriteVsGroup(Y[X],O,B,k,I,N)},wrap:function(P,O){P.body?this.wrapObject(P,O):P.getChildren?this.wrapArray(P.getChildren(),O):Array.isArray(P)?this.wrapArray(P,O):this.wrapObject(P,O)},wrapArray:function(P,O){for(var B=0;B<P.length;B++)this.wrapObject(P[B],O)},wrapObject:function(P,O){void 0===O&&(O=0),P.x=F(P.x,this.bounds.left-O,this.bounds.right+O),P.y=F(P.y,this.bounds.top-O,this.bounds.bottom+O)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});g.exports=U},function(g,b,t){var h=t(0),n=t(60),s=t(242),u=t(193),i=t(10),r=t(56),o=t(3),l=new h({initialize:function(e,a){var c=a.displayWidth?a.displayWidth:64,d=a.displayHeight?a.displayHeight:64;this.world=e,this.gameObject=a,this.transform={x:a.x,y:a.y,rotation:a.angle,scaleX:a.scaleX,scaleY:a.scaleY,displayOriginX:a.displayOriginX,displayOriginY:a.displayOriginY},this.debugShowBody=e.defaults.debugShowBody,this.debugShowVelocity=e.defaults.debugShowVelocity,this.debugBodyColor=e.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(a.x-a.scaleX*a.displayOriginX,a.y-a.scaleY*a.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=a.angle,this.preRotation=a.angle,this.width=c,this.height=d,this.sourceWidth=c,this.sourceHeight=d,a.frame&&(this.sourceWidth=a.frame.realWidth,this.sourceHeight=a.frame.realHeight),this.halfWidth=Math.abs(c/2),this.halfHeight=Math.abs(d/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new o,this.newVelocity=new o,this.deltaMax=new o,this.acceleration=new o,this.allowDrag=!0,this.drag=new o,this.allowGravity=!0,this.gravity=new o,this.bounce=new o,this.worldBounce=null,this.customBoundsRectangle=e.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new o(1e4,1e4),this.maxSpeed=-1,this.friction=new o(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this._sx=a.scaleX,this._sy=a.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new i},updateBounds:function(){var e,a=this.gameObject,c=this.transform;a.parentContainer?(e=a.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),c.x=e.tx,c.y=e.ty,c.rotation=u(e.rotation),c.scaleX=e.scaleX,c.scaleY=e.scaleY):(c.x=a.x,c.y=a.y,c.rotation=a.angle,c.scaleX=a.scaleX,c.scaleY=a.scaleY),c.displayOriginX=a.displayOriginX,c.displayOriginY=a.displayOriginY;var d,f,p,v=!1;this.syncBounds?(d=a.getBounds(this._bounds),this.width=d.width,this.height=d.height,v=!0):(f=Math.abs(c.scaleX),p=Math.abs(c.scaleY),this._sx===f&&this._sy===p||(this.width=this.sourceWidth*f,this.height=this.sourceHeight*p,this._sx=f,this._sy=p,v=!0)),v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var e=this.transform;this.position.x=e.x+e.scaleX*(this.offset.x-e.displayOriginX),this.position.y=e.y+e.scaleY*(this.offset.y-e.displayOriginY),this.updateCenter()},resetFlags:function(e){void 0===e&&(e=!1);var a=this.wasTouching,c=this.touching,d=this.blocked;e?(a.none=!0,a.up=!1,a.down=!1,a.left=!1,a.right=!1):(a.none=c.none,a.up=c.up,a.down=c.down,a.left=c.left,a.right=c.right),c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(e,a){e&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),e&&this.update(a)},update:function(e){var a,c;this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves&&(this.world.updateMotion(this,e),this.newVelocity.set((a=this.velocity.x)*e,(c=this.velocity.y)*e),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(c,a),this.speed=Math.sqrt(a*a+c*c),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var e,a,c=this.position.x-this.prevFrame.x,d=this.position.y-this.prevFrame.y;this.moves&&(0!==(e=this.deltaMax.x)&&0!==c&&(c<0&&c<-e?c=-e:0<c&&e<c&&(c=e)),0!==(a=this.deltaMax.y)&&0!==d&&(d<0&&d<-a?d=-a:0<d&&a<d&&(d=a)),this.gameObject.x+=c,this.gameObject.y+=d),c<0?this.facing=n.FACING_LEFT:0<c&&(this.facing=n.FACING_RIGHT),d<0?this.facing=n.FACING_UP:0<d&&(this.facing=n.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=c,this._ty=d},setBoundsRectangle:function(e){return this.customBoundsRectangle=e||this.world.bounds,this},checkWorldBounds:function(){var e=this.position,a=this.customBoundsRectangle,c=this.world.checkCollision,d=this.worldBounce?-this.worldBounce.x:-this.bounce.x,f=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return e.x<a.x&&c.left?(e.x=a.x,this.velocity.x*=d,p=this.blocked.left=!0):this.right>a.right&&c.right&&(e.x=a.right-this.width,this.velocity.x*=d,p=this.blocked.right=!0),e.y<a.y&&c.up?(e.y=a.y,this.velocity.y*=f,p=this.blocked.up=!0):this.bottom>a.bottom&&c.down&&(e.y=a.bottom-this.height,this.velocity.y*=f,p=this.blocked.down=!0),p&&(this.blocked.none=!1,this.updateCenter()),p},setOffset:function(e,a){return void 0===a&&(a=e),this.offset.set(e,a),this},setSize:function(e,a,c){void 0===c&&(c=!0);var p=this.gameObject;return!e&&p.frame&&(e=p.frame.realWidth),!a&&p.frame&&(a=p.frame.realHeight),this.sourceWidth=e,this.sourceHeight=a,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),c&&p.getCenter&&this.offset.set((p.width-e)/2,(p.height-a)/2),this.isCircle=!1,this.radius=0,this},setCircle:function(e,a,c){return void 0===a&&(a=this.offset.x),void 0===c&&(c=this.offset.y),0<e?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(a,c),this.updateCenter()):this.isCircle=!1,this},reset:function(e,a){this.stop();var c=this.gameObject;c.setPosition(e,a),c.getTopLeft?c.getTopLeft(this.position):this.position.set(e,a),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=c.angle,this.preRotation=c.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(e){return e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom,e},hitTest:function(e,a){return this.isCircle?0<this.radius&&e>=this.left&&e<=this.right&&a>=this.top&&a<=this.bottom&&(this.center.x-e)*(this.center.x-e)+(this.center.y-a)*(this.center.y-a)<=this.radius*this.radius:r(this,e,a)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(e){var a=this.position,c=a.x+this.halfWidth,d=a.y+this.halfHeight;this.debugShowBody&&(e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor),this.isCircle?e.strokeCircle(c,d,this.width/2):(this.checkCollision.up&&e.lineBetween(a.x,a.y,a.x+this.width,a.y),this.checkCollision.right&&e.lineBetween(a.x+this.width,a.y,a.x+this.width,a.y+this.height),this.checkCollision.down&&e.lineBetween(a.x,a.y+this.height,a.x+this.width,a.y+this.height),this.checkCollision.left&&e.lineBetween(a.x,a.y,a.x,a.y+this.height))),this.debugShowVelocity&&(e.lineStyle(e.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),e.lineBetween(c,d,c+this.velocity.x/2,d+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(e,a,c,d){void 0===e&&(e=!0),this.collideWorldBounds=e;var f=void 0!==a,p=void 0!==c;return(f||p)&&(this.worldBounce||(this.worldBounce=new o),f&&(this.worldBounce.x=a),p&&(this.worldBounce.y=c)),void 0!==d&&(this.onWorldBounds=d),this},setVelocity:function(e,a){return this.velocity.set(e,a),e=this.velocity.x,a=this.velocity.y,this.speed=Math.sqrt(e*e+a*a),this},setVelocityX:function(e){this.velocity.x=e;var a=this.velocity.y;return this.speed=Math.sqrt(e*e+a*a),this},setVelocityY:function(e){this.velocity.y=e;var a=this.velocity.x;return this.speed=Math.sqrt(a*a+e*e),this},setMaxVelocity:function(e,a){return this.maxVelocity.set(e,a),this},setMaxVelocityX:function(e){return this.maxVelocity.x=e,this},setMaxVelocityY:function(e){return this.maxVelocity.y=e,this},setMaxSpeed:function(e){return this.maxSpeed=e,this},setBounce:function(e,a){return this.bounce.set(e,a),this},setBounceX:function(e){return this.bounce.x=e,this},setBounceY:function(e){return this.bounce.y=e,this},setAcceleration:function(e,a){return this.acceleration.set(e,a),this},setAccelerationX:function(e){return this.acceleration.x=e,this},setAccelerationY:function(e){return this.acceleration.y=e,this},setAllowDrag:function(e){return void 0===e&&(e=!0),this.allowDrag=e,this},setAllowGravity:function(e){return void 0===e&&(e=!0),this.allowGravity=e,this},setAllowRotation:function(e){return void 0===e&&(e=!0),this.allowRotation=e,this},setDrag:function(e,a){return this.drag.set(e,a),this},setDamping:function(e){return this.useDamping=e,this},setDragX:function(e){return this.drag.x=e,this},setDragY:function(e){return this.drag.y=e,this},setGravity:function(e,a){return this.gravity.set(e,a),this},setGravityX:function(e){return this.gravity.x=e,this},setGravityY:function(e){return this.gravity.y=e,this},setFriction:function(e,a){return this.friction.set(e,a),this},setFrictionX:function(e){return this.friction.x=e,this},setFrictionY:function(e){return this.friction.y=e,this},setAngularVelocity:function(e){return this.angularVelocity=e,this},setAngularAcceleration:function(e){return this.angularAcceleration=e,this},setAngularDrag:function(e){return this.angularDrag=e,this},setMass:function(e){return this.mass=e,this},setImmovable:function(e){return void 0===e&&(e=!0),this.immovable=e,this},setEnable:function(e){return void 0===e&&(e=!0),this.enable=e,this},processX:function(e,a,c,d){this.x+=e,this.updateCenter(),null!==a&&(this.velocity.x=a);var f=this.blocked;c&&(f.left=!0),d&&(f.right=!0)},processY:function(e,a,c,d){this.y+=e,this.updateCenter(),null!==a&&(this.velocity.y=a);var f=this.blocked;c&&(f.up=!0),d&&(f.down=!0)},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});g.exports=l},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i,r,o,l){this.world=n,this.name="",this.active=!0,this.overlapOnly=s,this.object1=u,this.object2=i,this.collideCallback=r,this.processCallback=o,this.callbackContext=l},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});g.exports=h},function(g,b,t){var h=t(26),n=t(3),s=new n,u=new n;g.exports=function(i,r,o,l,e,a,c){var d=c.tilemapLayer.tilemap._convert.WorldToTileXY;d(i,r,!0,s,a,c);var f=s.x,p=s.y;d(i+o,r+l,!1,u,a,c);var v=Math.ceil(u.x),m=Math.ceil(u.y);return h(f,p,v-f,m-p,e,c)}},function(g,b){g.exports=function(t,h){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,h,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,h,t)}},function(g,b,t){var h=t(430);function n(p){if(!(this instanceof n))return new n(p);this._maxEntries=Math.max(4,p||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(p,v){u(p,0,p.children.length,v,p)}function u(p,v,m,x,y){(y=y||d(null)).minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var w,T=v;T<m;T++)w=p.children[T],i(y,p.leaf?x(w):w);return y}function i(p,v){return p.minX=Math.min(p.minX,v.minX),p.minY=Math.min(p.minY,v.minY),p.maxX=Math.max(p.maxX,v.maxX),p.maxY=Math.max(p.maxY,v.maxY),p}function r(p,v){return p.minX-v.minX}function o(p,v){return p.minY-v.minY}function l(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function e(p){return p.maxX-p.minX+(p.maxY-p.minY)}function a(p,v){return p.minX<=v.minX&&p.minY<=v.minY&&v.maxX<=p.maxX&&v.maxY<=p.maxY}function c(p,v){return v.minX<=p.maxX&&v.minY<=p.maxY&&v.maxX>=p.minX&&v.maxY>=p.minY}function d(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(p,v,m,x,y){for(var w,T=[v,m];T.length;)(m=T.pop())-(v=T.pop())<=x||(w=v+Math.ceil((m-v)/x/2)*x,h(p,w,v,m,y),T.push(v,w,w,m))}n.prototype={all:function(){return this._all(this.data,[])},search:function(p){var v=this.data,m=[],x=this.toBBox;if(!c(p,v))return m;for(var y,w,T,E,S=[];v;){for(y=0,w=v.children.length;y<w;y++)T=v.children[y],c(p,E=v.leaf?x(T):T)&&(v.leaf?m.push(T):a(p,E)?this._all(T,m):S.push(T));v=S.pop()}return m},collides:function(p){var v=this.data,m=this.toBBox;if(!c(p,v))return!1;for(var x,y,w,T,E=[];v;){for(x=0,y=v.children.length;x<y;x++)if(w=v.children[x],c(p,T=v.leaf?m(w):w)){if(v.leaf||a(p,T))return!0;E.push(w)}v=E.pop()}return!1},load:function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var v=0,m=p.length;v<m;v++)this.insert(p[v]);return this}var x,y=this._build(p.slice(),0,p.length-1,0);return this.data.children.length?this.data.height===y.height?this._splitRoot(this.data,y):(this.data.height<y.height&&(x=this.data,this.data=y,y=x),this._insert(y,this.data.height-y.height-1,!0)):this.data=y,this},insert:function(p){return p&&this._insert(p,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(p,v){if(!p)return this;for(var m,x,y,w,T=this.data,E=this.toBBox(p),S=[],A=[];T||S.length;){if(T||(T=S.pop(),x=S[S.length-1],m=A.pop(),w=!0),T.leaf&&-1!==(y=function(_,C,M){if(!M)return C.indexOf(_);for(var R=0;R<C.length;R++)if(M(_,C[R]))return R;return-1}(p,T.children,v)))return T.children.splice(y,1),S.push(T),this._condense(S),this;w||T.leaf||!a(T,E)?x?(m++,T=x.children[m],w=!1):T=null:(S.push(T),A.push(m),m=0,T=(x=T).children[0])}return this},toBBox:function(p){return{minX:p.left,minY:p.top,maxX:p.right,maxY:p.bottom}},compareMinX:function(p,v){return p.left-v.left},compareMinY:function(p,v){return p.top-v.top},toJSON:function(){return this.data},fromJSON:function(p){return this.data=p,this},_all:function(p,v){for(var m=[];p;)p.leaf?v.push.apply(v,p.children):m.push.apply(m,p.children),p=m.pop();return v},_build:function(p,v,m,x){var y,w=m-v+1,T=this._maxEntries;if(w<=T)return s(y=d(p.slice(v,m+1)),this.toBBox),y;x||(x=Math.ceil(Math.log(w)/Math.log(T)),T=Math.ceil(w/Math.pow(T,x-1))),(y=d([])).leaf=!1,y.height=x;var E,S,A,_,C=Math.ceil(w/T),M=C*Math.ceil(Math.sqrt(T));for(f(p,v,m,M,this.compareMinX),E=v;E<=m;E+=M)for(f(p,E,A=Math.min(E+M-1,m),C,this.compareMinY),S=E;S<=A;S+=C)_=Math.min(S+C-1,A),y.children.push(this._build(p,S,_,x-1));return s(y,this.toBBox),y},_chooseSubtree:function(p,v,m,x){for(var y,w,T,E,S,A,_,C,M,R;x.push(v),!v.leaf&&x.length-1!==m;){for(_=C=1/0,y=0,w=v.children.length;y<w;y++)S=l(T=v.children[y]),M=p,R=T,(A=(Math.max(R.maxX,M.maxX)-Math.min(R.minX,M.minX))*(Math.max(R.maxY,M.maxY)-Math.min(R.minY,M.minY))-S)<C?(C=A,_=S<_?S:_,E=T):A===C&&S<_&&(_=S,E=T);v=E||v.children[0]}return v},_insert:function(p,v,m){var y=m?p:(0,this.toBBox)(p),w=[],T=this._chooseSubtree(y,this.data,v,w);for(T.children.push(p),i(T,y);0<=v&&w[v].children.length>this._maxEntries;)this._split(w,v),v--;this._adjustParentBBoxes(y,w,v)},_split:function(p,v){var m=p[v],x=m.children.length,y=this._minEntries;this._chooseSplitAxis(m,y,x);var w=this._chooseSplitIndex(m,y,x),T=d(m.children.splice(w,m.children.length-w));T.height=m.height,T.leaf=m.leaf,s(m,this.toBBox),s(T,this.toBBox),v?p[v-1].children.push(T):this._splitRoot(m,T)},_splitRoot:function(p,v){this.data=d([p,v]),this.data.height=p.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(p,v,m){for(var x,y,w,T,E,S,A,_,C,M,R,L,D=E=1/0,F=v;F<=m-v;F++)A=x=u(p,0,F,this.toBBox),_=y=u(p,F,m,this.toBBox),C=Math.max(A.minX,_.minX),M=Math.max(A.minY,_.minY),R=Math.min(A.maxX,_.maxX),L=Math.min(A.maxY,_.maxY),w=Math.max(0,R-C)*Math.max(0,L-M),T=l(x)+l(y),w<D?(D=w,S=F,E=T<E?T:E):w===D&&T<E&&(E=T,S=F);return S},_chooseSplitAxis:function(p,v,m){var x=p.leaf?this.compareMinX:r,y=p.leaf?this.compareMinY:o;this._allDistMargin(p,v,m,x)<this._allDistMargin(p,v,m,y)&&p.children.sort(x)},_allDistMargin:function(p,v,m,x){p.children.sort(x);for(var y,w=this.toBBox,T=u(p,0,v,w),E=u(p,m-v,m,w),S=e(T)+e(E),A=v;A<m-v;A++)y=p.children[A],i(T,p.leaf?w(y):y),S+=e(T);for(A=m-v-1;v<=A;A--)y=p.children[A],i(E,p.leaf?w(y):y),S+=e(E);return S},_adjustParentBBoxes:function(p,v,m){for(var x=m;0<=x;x--)i(v[x],p)},_condense:function(p){for(var v,m=p.length-1;0<=m;m--)0===p[m].children.length?0<m?(v=p[m-1].children).splice(v.indexOf(p[m]),1):this.clear():s(p[m],this.toBBox)}},g.exports=n},function(g,b,t){var h=t(527),n=t(529),s=t(245);g.exports=function(u,i,r,o,l,e,a){var c=o.left,d=o.top,f=o.right,p=o.bottom,v=r.faceLeft||r.faceRight,m=r.faceTop||r.faceBottom;if(a||(m=v=!0),!v&&!m)return!1;var x=0,y=0,w=0,T=1;if(i.deltaAbsX()>i.deltaAbsY()?w=-1:i.deltaAbsX()<i.deltaAbsY()&&(T=-1),0!==i.deltaX()&&0!==i.deltaY()&&v&&m&&(w=Math.min(Math.abs(i.position.x-f),Math.abs(i.right-c)),T=Math.min(Math.abs(i.position.y-p),Math.abs(i.bottom-d))),w<T){if(v&&0!==(x=h(i,r,c,f,e,a))&&!s(o,i))return!0;m&&(y=n(i,r,d,p,e,a))}else{if(m&&0!==(y=n(i,r,d,p,e,a))&&!s(o,i))return!0;v&&(x=h(i,r,c,f,e,a))}return 0!==x||0!==y}},function(g,b,t){var h=t(528);g.exports=function(n,s,u,i,r,o){var l=0,e=s.faceLeft,a=s.faceRight,c=s.collideLeft,d=s.collideRight;return o||(d=c=a=e=!0),n.deltaX()<0&&d&&n.checkCollision.left?a&&n.x<i&&(l=n.x-i)<-r&&(l=0):0<n.deltaX()&&c&&n.checkCollision.right&&e&&n.right>u&&r<(l=n.right-u)&&(l=0),0!==l&&(n.customSeparateX?n.overlapX=l:h(n,l)),l}},function(g,b){g.exports=function(t,h){h<0?(t.blocked.none=!1,t.blocked.left=!0):0<h&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=h,t.velocity.x=0===t.bounce.x?0:-t.velocity.x*t.bounce.x}},function(g,b,t){var h=t(530);g.exports=function(n,s,u,i,r,o){var l=0,e=s.faceTop,a=s.faceBottom,c=s.collideUp,d=s.collideDown;return o||(d=c=a=e=!0),n.deltaY()<0&&d&&n.checkCollision.up?a&&n.y<i&&(l=n.y-i)<-r&&(l=0):0<n.deltaY()&&c&&n.checkCollision.down&&e&&n.bottom>u&&r<(l=n.bottom-u)&&(l=0),0!==l&&(n.customSeparateY?n.overlapY=l:h(n,l)),l}},function(g,b){g.exports=function(t,h){h<0?(t.blocked.none=!1,t.blocked.up=!0):0<h&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=h,t.velocity.y=0===t.bounce.y?0:-t.velocity.y*t.bounce.y}},function(g,b,t){var h=t(243),n=t(1383);g.exports=function(s,u,i,r){var o=h(s,u,i,r),l=s.immovable,e=u.immovable;if(i||0===o||l&&e||s.customSeparateX||u.customSeparateX)return 0!==o||s.embedded&&u.embedded;var a=n.Set(s,u,o);return l||e?(l?n.RunImmovableBody1(a):e&&n.RunImmovableBody2(a),!0):0<a||n.Check()}},function(g,b,t){var h=t(244),n=t(1384);g.exports=function(s,u,i,r){var o=h(s,u,i,r),l=s.immovable,e=u.immovable;if(i||0===o||l&&e||s.customSeparateY||u.customSeparateY)return 0!==o||s.embedded&&u.embedded;var a=n.Set(s,u,o);return l||e?(l?n.RunImmovableBody1(a):e&&n.RunImmovableBody2(a),!0):0<a||n.Check()}},function(g,b,t){var h=t(63),n=t(0),s=t(60),u=t(56),i=t(3),r=new n({initialize:function(o,l){var e=l.displayWidth?l.displayWidth:64,a=l.displayHeight?l.displayHeight:64;this.world=o,this.gameObject=l,this.debugShowBody=o.defaults.debugShowStaticBody,this.debugBodyColor=o.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(l.x-e*l.originX,l.y-a*l.originY),this.width=e,this.height=a,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=i.ZERO,this.allowGravity=!1,this.gravity=i.ZERO,this.bounce=i.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(o,l){return o&&o!==this.gameObject&&(this.gameObject.body=null,(o.body=this).gameObject=o),l&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var o=this.gameObject;return o.getTopLeft(this.position),this.width=o.displayWidth,this.height=o.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(o,l){return void 0===l&&(l=o),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(o,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(o,l,e){void 0===e&&(e=!0);var a,c,d=this.gameObject;return!o&&d.frame&&(o=d.frame.realWidth),!l&&d.frame&&(l=d.frame.realHeight),this.world.staticTree.remove(this),this.width=o,this.height=l,this.halfWidth=Math.floor(o/2),this.halfHeight=Math.floor(l/2),e&&d.getCenter&&(a=d.displayWidth/2,c=d.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a-this.halfWidth,c-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(o,l,e){return void 0===l&&(l=this.offset.x),void 0===e&&(e=this.offset.y),0<o?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=o,this.width=2*o,this.height=2*o,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,e),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(o,l){var e=this.gameObject;void 0===o&&(o=e.x),void 0===l&&(l=e.y),this.world.staticTree.remove(this),e.setPosition(o,l),e.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,l){return(this.isCircle?h:u)(this,o,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(o){var l=this.position,e=l.x+this.halfWidth,a=l.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?o.strokeCircle(e,a,this.width/2):o.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(o){return o<=0&&(o=.1),this.mass=o,this},x:{get:function(){return this.position.x},set:function(o){this.world.staticTree.remove(this),this.position.x=o,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(o){this.world.staticTree.remove(this),this.position.y=o,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});g.exports=r},function(g,b,t){g.exports={Bounce:t(1500),Collision:t(1501),Force:t(1502),Friction:t(1503),Gravity:t(1504),Mass:t(1505),Sensor:t(1506),SetBody:t(1507),Sleep:t(1508),Static:t(1525),Transform:t(1526),Velocity:t(1527)}},function(g,b){var t={};(g.exports=t).create=function(h,n){var s=h.bodyA,u=h.bodyB,i={id:t.id(s,u),bodyA:s,bodyB:u,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:s.isSensor||u.isSensor,timeCreated:n,timeUpdated:n,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(i,h,n),i},t.update=function(h,n,s){if((h.collision=n).collided){var u=n.supports,i=h.activeContacts,r=n.parentA,o=n.parentB;h.inverseMass=r.inverseMass+o.inverseMass,h.friction=Math.min(r.friction,o.friction),h.frictionStatic=Math.max(r.frictionStatic,o.frictionStatic),h.restitution=Math.max(r.restitution,o.restitution),h.slop=Math.max(r.slop,o.slop);for(var l=0;l<u.length;l++)i[l]=u[l].contact;var e=u.length;e<i.length&&(i.length=e),h.separation=n.depth,t.setActive(h,!0,s)}else!0===h.isActive&&t.setActive(h,!1,s)},t.setActive=function(h,n,s){n?(h.isActive=!0,h.timeUpdated=s):(h.isActive=!1,h.activeContacts.length=0)},t.id=function(h,n){return h.id<n.id?"A"+h.id+"B"+n.id:"A"+n.id+"B"+h.id}},function(g,b,t){var h=new(t(0))({initialize:function(n){this.pluginManager=n,this.game=n.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=h},function(g,b,t){var h=new(t(3));g.exports=function(n,s,u,i){var r=u.tilemapLayer,o=r.cullPaddingX,l=r.cullPaddingY,e=r.tilemap.tileToWorldXY(n,s,h,i,r);return e.x>i.worldView.x+r.scaleX*u.tileWidth*(-o-.5)&&e.x<i.worldView.right+r.scaleX*u.tileWidth*(o-.5)&&e.y>i.worldView.y+r.scaleY*u.tileHeight*(-l-1)&&e.y<i.worldView.bottom+r.scaleY*u.tileHeight*(l-.5)}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l){for(var e=h(u,i,r,o,null,l),a=0;a<e.length;a++)e[a]&&e[a].index===n&&(e[a].index=s)}},function(g,b,t){var h=t(10),n=t(137),s=t(76),u=new h;g.exports=function(i,r){var o=i.tilemapLayer.tilemap,l=i.tilemapLayer,e=Math.floor(o.tileWidth*l.scaleX),a=Math.floor(o.tileHeight*l.scaleY),c=s(r.worldView.x-l.x,e,0,!0)-l.cullPaddingX,d=n(r.worldView.right-l.x,e,0,!0)+l.cullPaddingX,f=s(r.worldView.y-l.y,a,0,!0)-l.cullPaddingY,p=n(r.worldView.bottom-l.y,a,0,!0)+l.cullPaddingY;return u.setTo(c,f,d-c,p-f)}},function(g,b,t){var h=t(539),n=t(157);g.exports=function(s,u,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var o=s.tilemapLayer,l=h(s,u);return!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY||(l.left=0,l.right=s.width,l.top=0,l.bottom=s.height),n(s,l,r,i),i}},function(g,b,t){var h=t(542),n=t(157);g.exports=function(s,u,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var o,l=s.tilemapLayer;return l.skipCull||1!==l.scrollFactorX||1!==l.scrollFactorY||(o=h(s,u),n(s,o,r,i)),i}},function(g,b,t){var h=t(137),n=t(76);g.exports=function(s,u){var i=s.tilemapLayer.tilemap,r=s.tilemapLayer,o=Math.floor(i.tileWidth*r.scaleX),l=Math.floor(i.tileHeight*r.scaleY),e=s.hexSideLength,a=(l-e)/2+e;return{left:n(u.worldView.x-r.x,o,0,!0)-r.cullPaddingX,right:h(u.worldView.right-r.x,o,0,!0)+r.cullPaddingX,top:n(u.worldView.y-r.y,a,0,!0)-r.cullPaddingY,bottom:h(u.worldView.bottom-r.y,a,0,!0)+r.cullPaddingY}}},function(g,b,t){var h=t(537);g.exports=function(n,s,u,i){void 0===u&&(u=[]),void 0===i&&(i=0),u.length=0;var r,o,l,e=n.tilemapLayer,a=n.data,c=n.width,d=n.height,f=c,p=d;if(!e.skipCull)if(0===i){for(o=0;o<p;o++)for(r=0;a[o]&&r<f;r++)if(h(r,o,n,s)){if(!(l=a[o][r])||-1===l.index||!l.visible||0===l.alpha)continue;u.push(l)}}else if(1===i){for(o=0;o<p;o++)for(r=f;a[o]&&0<=r;r--)if(h(r,o,n,s)){if(!(l=a[o][r])||-1===l.index||!l.visible||0===l.alpha)continue;u.push(l)}}else if(2===i){for(o=p;0<=o;o--)for(r=0;a[o]&&r<f;r++)if(h(r,o,n,s)){if(!(l=a[o][r])||-1===l.index||!l.visible||0===l.alpha)continue;u.push(l)}}else if(3===i)for(o=p;0<=o;o--)for(r=f;a[o]&&0<=r;r--)if(h(r,o,n,s)){if(!(l=a[o][r])||-1===l.index||!l.visible||0===l.alpha)continue;u.push(l)}return e.tilesDrawn=u.length,e.tilesTotal=c*d,u}},function(g,b,t){var h=t(545),n=t(157);g.exports=function(s,u,i,r){void 0===i&&(i=[]),void 0===r&&(r=0),i.length=0;var o,l=s.tilemapLayer;return l.skipCull||1!==l.scrollFactorX||1!==l.scrollFactorY||(o=h(s,u),n(s,o,r,i)),i}},function(g,b,t){var h=t(137),n=t(76);g.exports=function(s,u){var i=s.tilemapLayer.tilemap,r=s.tilemapLayer,o=Math.floor(i.tileWidth*r.scaleX),l=Math.floor(i.tileHeight*r.scaleY);return{left:n(u.worldView.x-r.x,o,0,!0)-r.cullPaddingX,right:h(u.worldView.right-r.x,o,0,!0)+r.cullPaddingX,top:n(u.worldView.y-r.y,l/2,0,!0)-r.cullPaddingY,bottom:h(u.worldView.bottom-r.y,l/2,0,!0)+r.cullPaddingY}}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r){u=u||new h;var o=r.baseTileWidth,l=r.baseTileHeight,e=r.tilemapLayer,a=0,c=0;e&&(a=e.x+(i=i||e.scene.cameras.main).scrollX*(1-e.scrollFactorX),o*=e.scaleX,c=e.y+i.scrollY*(1-e.scrollFactorY),l*=e.scaleY);var d=r.hexSideLength;return u.set(a+n*o+s%2*(o/2),c+s*((l-d)/2+d))}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r){u=u||new h;var o=r.baseTileWidth,l=r.baseTileHeight,e=r.tilemapLayer,a=0,c=0;return e&&(a=e.x+(i=i||e.scene.cameras.main).scrollX*(1-e.scrollFactorX),o*=e.scaleX,c=e.y+i.scrollY*(1-e.scrollFactorY),l*=e.scaleY),u.set(a+o/2*(n-s),c+(n+s)*(l/2))}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r){u=u||new h;var o=r.baseTileWidth,l=r.baseTileHeight,e=r.tilemapLayer,a=0,c=0;return e&&(a=e.x+(i=i||e.scene.cameras.main).scrollX*(1-e.scrollFactorX),o*=e.scaleX,c=e.y+i.scrollY*(1-e.scrollFactorY),l*=e.scaleY),u.set(a+n*o+s%2*(o/2),c+s*(l/2))}},function(g,b,t){var h=t(249),n=t(250),s=t(3);g.exports=function(u,i,r,o,l){return(r=r||new s(0,0)).x=h(u,o,l),r.y=n(i,o,l),r}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,u=n.tilemapLayer,i=0;u&&(void 0===h&&(h=u.scene.cameras.main),i=u.y+h.scrollY*(1-u.scrollFactorY),s*=u.scaleY);var r=u.tilemap.hexSideLength;return i+t*((s-r)/2+r)}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,u=n.tilemapLayer,i=0;return u&&(void 0===h&&(h=u.scene.cameras.main),i=u.y+h.scrollY*(1-u.scrollFactorY),s*=u.scaleY),i+t*(s/2)}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r,o){i=i||new h;var l=o.baseTileWidth,e=o.baseTileHeight,a=o.tilemapLayer;a&&(s-=a.y+(r=r||a.scene.cameras.main).scrollY*(1-a.scrollFactorY),e*=a.scaleY,n-=a.x+r.scrollX*(1-a.scrollFactorX),l*=a.scaleX);var c=o.hexSideLength,d=(e-c)/2+c,f=u?Math.floor(s/d):s/d,p=u?Math.floor((n-f%2*.5*l)/l):(n-f%2*.5*l)/l;return i.set(p,f)}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r,o){i=i||new h;var l=o.baseTileWidth,e=o.baseTileHeight,a=o.tilemapLayer;a&&(s-=a.y+(r=r||a.scene.cameras.main).scrollY*(1-a.scrollFactorY),e*=a.scaleY,n-=a.x+r.scrollX*(1-a.scrollFactorX),l*=a.scaleX),n-=l/2;var c=u?Math.floor((n/(l/2)+s/(e/2))/2):(n/(l/2)+s/(e/2))/2,d=u?Math.floor((s/(e/2)-n/(l/2))/2):(s/(e/2)-n/(l/2))/2;return i.set(c,d)}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r,o){i=i||new h;var l=o.baseTileWidth,e=o.baseTileHeight,a=o.tilemapLayer;a&&(s-=a.y+(r=r||a.scene.cameras.main).scrollY*(1-a.scrollFactorY),e*=a.scaleY,n-=a.x+r.scrollX*(1-a.scrollFactorX),l*=a.scaleX);var c=u?Math.floor(s/(e/2)):s/(e/2),d=u?Math.floor((n+c%2*.5*l)/l):(n+c%2*.5*l)/l;return i.set(d,c)}},function(g,b,t){var h=t(251),n=t(252),s=t(3);g.exports=function(u,i,r,o,l,e){return void 0===r&&(r=!0),(o=o||new s(0,0)).x=h(u,r,l,e),o.y=n(i,r,l,e),o}},function(g,b){g.exports=function(t,h,n,s){var u=s.baseTileHeight,i=s.tilemapLayer;i&&(t-=i.y+(n=n||i.scene.cameras.main).scrollY*(1-i.scrollFactorY),u*=i.scaleY);var r=s.hexSideLength,o=(u-r)/2+r;return h?Math.floor(t/o):t/o}},function(g,b){g.exports=function(t,h,n,s){var u=s.baseTileHeight,i=s.tilemapLayer;return i&&(t-=i.y+(n=n||i.scene.cameras.main).scrollY*(1-i.scrollFactorY),u*=i.scaleY),h?Math.floor(t/(u/2)):t/(u/2)}},function(g,b,t){var h=t(118);g.exports=function(n,s,u){if(h(n,s,u)){var i=u.data[s][n];return null!==i&&-1<i.index}return!1}},function(g,b,t){var h=t(83),n=t(118),s=t(248);g.exports=function(u,i,r,o,l){if(void 0===r&&(r=!0),void 0===o&&(o=!0),!n(u,i,l))return null;var e=l.data[i][u];return e?(l.data[i][u]=r?null:new h(l,-1,u,i,l.tileWidth,l.tileHeight),o&&e&&e.collides&&s(u,i,l),e):null}},function(g,b,t){var h=t(38),n=t(255),s=t(561),u=t(562),i=t(573);g.exports=function(r,o,l,e,a,c){var d;switch(o){case h.ARRAY_2D:d=n(r,l,e,a,c);break;case h.CSV:d=s(r,l,e,a,c);break;case h.TILED_JSON:d=u(r,l,c);break;case h.WELTMEISTER:d=i(r,l,c);break;default:console.warn("Unrecognized tilemap data format: "+o),d=null}return d}},function(g,b,t){var h=t(38),n=t(255);g.exports=function(s,u,i,r,o){var l=u.trim().split("\n").map(function(a){return a.split(",")}),e=n(s,l,i,r,o);return e.format=h.CSV,e}},function(g,b,t){var h=t(563),n=t(564),s=t(29),u=t(38),i=t(254),r=t(120),o=t(565),l=t(566),e=t(569),a=t(571);g.exports=function(c,d,f){var p=new r({width:d.width,height:d.height,name:c,tileWidth:d.tilewidth,tileHeight:d.tileheight,orientation:i(d.orientation),format:u.TILED_JSON,version:d.version,properties:d.properties,renderOrder:d.renderorder,infinite:d.infinite});p.orientation===s.HEXAGONAL&&(p.hexSideLength=d.hexsidelength),p.layers=e(d,f),p.images=o(d);var v=a(d);return p.tilesets=v.tilesets,p.imageCollections=v.imageCollections,p.objects=l(d),p.tiles=n(p),h(p),p}},function(g,b,t){var h=t(17);g.exports=function(n){for(var s,u,r,o,l=0;l<n.layers.length;l++){s=n.layers[l];for(var e=0;e<s.data.length;e++){o=s.data[e];for(var a=0;a<o.length;a++)null===(u=o[a])||u.index<0||(u.width=(r=n.tilesets[n.tiles[u.index][2]]).tileWidth,u.height=r.tileHeight,r.tileProperties&&r.tileProperties[u.index-r.firstgid]&&(u.properties=h(u.properties,r.tileProperties[u.index-r.firstgid])))}}}},function(g,b,t){var h=t(121);g.exports=function(n){for(var s=[],u=0;u<n.imageCollections.length;u++)for(var i=n.imageCollections[u],r=i.images,o=0;o<r.length;o++){var l,e=r[o];(l=new h(e.image,e.gid,i.imageWidth,i.imageHeight,0,0)).updateTileData(i.imageWidth,i.imageHeight),n.tilesets.push(l)}for(u=0;u<n.tilesets.length;u++)for(var a=(l=n.tilesets[u]).tileMargin,c=l.tileMargin,d=0,f=0,p=0,v=l.firstgid;v<l.firstgid+l.total&&(s[v]=[a,c,u],a+=l.tileWidth+l.tileSpacing,++d!==l.total)&&(++f!==l.columns||(a=l.tileMargin,c+=l.tileHeight+l.tileSpacing,f=0,++p!==l.rows));v++);return s}},function(g,b,t){var h=t(2),n=t(159);g.exports=function(s){for(var u=[],i=[],r=n(s);r.i<r.layers.length||0<i.length;)if(r.i>=r.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=i.pop()}else{var o,l,e,a=r.layers[r.i];r.i++,"imagelayer"===a.type?(o=h(a,"offsetx",0)+h(a,"startx",0),l=h(a,"offsety",0)+h(a,"starty",0),u.push({name:r.name+a.name,image:a.image,x:r.x+o+a.x,y:r.y+l+a.y,alpha:r.opacity*a.opacity,visible:r.visible&&a.visible,properties:h(a,"properties",{})})):"group"===a.type&&(e=n(s,a,r),i.push(r),r=e)}return u}},function(g,b,t){var h=t(2),n=t(256),s=t(568),u=t(159);g.exports=function(i){for(var r=[],o=[],l=u(i);l.i<l.layers.length||0<o.length;)if(l.i>=l.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=o.pop()}else{var e,a=l.layers[l.i];if(l.i++,a.opacity*=l.opacity,a.visible=l.visible&&a.visible,"objectgroup"===a.type){a.name=l.name+a.name;for(var c=l.x+h(a,"startx",0)+h(a,"offsetx",0),d=l.y+h(a,"starty",0)+h(a,"offsety",0),f=[],p=0;p<a.objects.length;p++){var v=n(a.objects[p],c,d);f.push(v)}var m=new s(a);m.objects=f,r.push(m)}else"group"===a.type&&(e=u(i,a,l),o.push(l),l=e)}return r}},function(g,b,t){var h=t(125);g.exports=function(n,s){for(var u={},i=0;i<s.length;i++){var r=s[i];h(n,r)&&(u[r]=n[r])}return u}},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(u){void 0===u&&(u={}),this.name=n(u,"name","object layer"),this.opacity=n(u,"opacity",1),this.properties=n(u,"properties",{}),this.propertyTypes=n(u,"propertytypes",{}),this.type=n(u,"type","objectgroup"),this.visible=n(u,"visible",!0),this.objects=n(u,"objects",[])}});g.exports=s},function(g,b,t){var h=t(570),n=t(29),s=t(159),u=t(254),i=t(2),r=t(119),o=t(257),l=t(83);g.exports=function(e,a){for(var c=i(e,"infinite",!1),d=[],f=[],p=s(e);p.i<p.layers.length||0<f.length;)if(p.i>=p.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}p=f.pop()}else{var v,m=p.layers[p.i];if(p.i++,"tilelayer"===m.type)if(m.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+m.name+"'");else{if(m.encoding&&"base64"===m.encoding){if(m.chunks)for(var x=0;x<m.chunks.length;x++)m.chunks[x].data=h(m.chunks[x].data);m.data&&(m.data=h(m.data)),delete m.encoding}var y,w,T=[],E=0;if(c){var S,A=i(m,"startx",0)+m.x,_=i(m,"starty",0)+m.y;(S=new r({name:p.name+m.name,x:p.x+i(m,"offsetx",0)+A*e.tilewidth,y:p.y+i(m,"offsety",0)+_*e.tileheight,width:m.width,height:m.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:p.opacity*m.opacity,visible:p.visible&&m.visible,properties:i(m,"properties",[]),orientation:u(e.orientation)})).orientation===n.HEXAGONAL&&(S.hexSideLength=e.hexsidelength);for(var C=0;C<m.height;C++){T.push([null]);for(var M=0;M<m.width;M++)T[C][M]=null}for(C=0,Y=m.chunks.length;C<Y;C++)for(var R=m.chunks[C],L=R.x-A,D=R.y-_,F=0,U=0,P=R.data.length;U<P;U++){var O,B=E+L,k=F+D;0<(O=o(R.data[U])).gid?((y=new l(S,O.gid,B,k,e.tilewidth,e.tileheight)).rotation=O.rotation,y.flipX=O.flipped,T[k][B]=y):(w=a?null:new l(S,-1,B,k,e.tilewidth,e.tileheight),T[k][B]=w),++E===R.width&&(F++,E=0)}}else{(S=new r({name:p.name+m.name,x:p.x+i(m,"offsetx",0)+m.x,y:p.y+i(m,"offsety",0)+m.y,width:m.width,height:m.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:p.opacity*m.opacity,visible:p.visible&&m.visible,properties:i(m,"properties",[]),orientation:u(e.orientation)})).orientation===n.HEXAGONAL&&(S.hexSideLength=e.hexsidelength);for(var I=[],N=0,Y=m.data.length;N<Y;N++)0<(O=o(m.data[N])).gid?((y=new l(S,O.gid,E,T.length,e.tilewidth,e.tileheight)).rotation=O.rotation,y.flipX=O.flipped,I.push(y)):(w=a?null:new l(S,-1,E,T.length,e.tilewidth,e.tileheight),I.push(w)),++E===m.width&&(T.push(I),E=0,I=[])}S.data=T,d.push(S)}else"group"===m.type&&(v=s(e,m,p),f.push(p),p=v)}return d}},function(g,b){g.exports=function(t){for(var h=window.atob(t),n=h.length,s=new Array(n/4),u=0;u<n;u+=4)s[u/4]=(h.charCodeAt(u)|h.charCodeAt(u+1)<<8|h.charCodeAt(u+2)<<16|h.charCodeAt(u+3)<<24)>>>0;return s}},function(g,b,t){var h=t(121),n=t(572),s=t(256);g.exports=function(u){for(var i,r=[],o=[],l=null,e=0;e<u.tilesets.length;e++){var a=u.tilesets[e];if(a.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(a.image){var c=new h(a.name,a.firstgid,a.tilewidth,a.tileheight,a.margin,a.spacing);if(1<u.version){if(Array.isArray(a.tiles)){for(var d={},f={},p=0;p<a.tiles.length;p++){var v,m,x=a.tiles[p];x.properties&&(v={},x.properties.forEach(function(C){v[C.name]=C.value}),f[x.id]=v),x.objectgroup&&(d[x.id]={objectgroup:x.objectgroup},x.objectgroup.objects&&(m=x.objectgroup.objects.map(function(C){return s(C)}),d[x.id].objectgroup.objects=m)),x.animation&&(d.hasOwnProperty(x.id)?d[x.id].animation=x.animation:d[x.id]={animation:x.animation})}c.tileData=d,c.tileProperties=f}}else if(a.tileproperties&&(c.tileProperties=a.tileproperties),a.tiles)for(i in c.tileData=a.tiles,c.tileData){var y,w=c.tileData[i].objectgroup;w&&w.objects&&(y=w.objects.map(function(C){return s(C)}),c.tileData[i].objectgroup.objects=y)}c.updateTileData(a.imagewidth,a.imageheight),r.push(c)}else{var T=new n(a.name,a.firstgid,a.tilewidth,a.tileheight,a.margin,a.spacing,a.properties),E=0;for(p=0;p<a.tiles.length;p++){var S=(x=a.tiles[p]).image,A=parseInt(x.id,10);T.addImage(a.firstgid+A,S),E=Math.max(A,E)}T.maxId=E,o.push(T)}l&&(l.lastgid=a.firstgid-1),l=a}return{tilesets:r,imageCollections:o}}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,u,i,r,o,l){(void 0===u||u<=0)&&(u=32),(void 0===i||i<=0)&&(i=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=n,this.firstgid=0|s,this.imageWidth=0|u,this.imageHeight=0|i,this.imageMargin=0|r,this.imageSpacing=0|o,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,s){return this.images.push({gid:n,image:s}),this.total++,this}});g.exports=h},function(g,b,t){var h=t(38),n=t(120),s=t(574),u=t(575);g.exports=function(i,r,o){if(0===r.layer.length)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var l=0,e=0,a=0;a<r.layer.length;a++)r.layer[a].width>l&&(l=r.layer[a].width),r.layer[a].height>e&&(e=r.layer[a].height);var c=new n({width:l,height:e,name:i,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:h.WELTMEISTER});return c.layers=s(r,o),c.tilesets=u(r),c}},function(g,b,t){var h=t(119),n=t(83);g.exports=function(s,u){for(var i=[],r=0;r<s.layer.length;r++){for(var o=s.layer[r],l=new h({name:o.name,width:o.width,height:o.height,tileWidth:o.tilesize,tileHeight:o.tilesize,visible:1===o.visible}),e=[],a=[],c=0;c<o.data.length;c++){for(var d=0;d<o.data[c].length;d++){var f=o.data[c][d]-1,p=-1<f?new n(l,f,d,c,o.tilesize,o.tilesize):u?null:new n(l,-1,d,c,o.tilesize,o.tilesize);e.push(p)}a.push(e),e=[]}l.data=a,i.push(l)}return i}},function(g,b,t){var h=t(121);g.exports=function(n){for(var s=[],u=[],i=0;i<n.layer.length;i++){var r=n.layer[i],o=r.tilesetName;""!==o&&-1===u.indexOf(o)&&(u.push(o),s.push(new h(o,0,r.tilesize,r.tilesize,0,0)))}return s}},function(g,b,t){var h=t(0),n=t(34),s=t(38),u=t(2),i=t(119),r=t(29),o=t(356),l=t(74),e=t(73),a=t(83),c=t(247),d=t(577),f=t(121),p=new h({initialize:function(v,m){this.scene=v,this.tileWidth=m.tileWidth,this.tileHeight=m.tileHeight,this.width=m.width,this.height=m.height,this.orientation=m.orientation,this.renderOrder=m.renderOrder,this.format=m.format,this.version=m.version,this.properties=m.properties,this.widthInPixels=m.widthInPixels,this.heightInPixels=m.heightInPixels,this.imageCollections=m.imageCollections,this.images=m.images,this.layers=m.layers,this.tilesets=m.tilesets,this.objects=m.objects,this.currentLayerIndex=0,this.hexSideLength=m.hexSideLength;var x=this.orientation;this._convert={WorldToTileXY:c.GetWorldToTileXYFunction(x),WorldToTileX:c.GetWorldToTileXFunction(x),WorldToTileY:c.GetWorldToTileYFunction(x),TileToWorldXY:c.GetTileToWorldXYFunction(x),TileToWorldX:c.GetTileToWorldXFunction(x),TileToWorldY:c.GetTileToWorldYFunction(x)}},createBlankDynamicLayer:function(v,m,x,y,w,T,E,S){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(v,m,x,y,w,T,E,S)},createDynamicLayer:function(v,m,x,y){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(v,m,x,y)},createStaticLayer:function(v,m,x,y){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(v,m,x,y)},setRenderOrder:function(v){var m=["right-down","left-down","right-up","left-up"];return"number"==typeof v&&(v=m[v]),-1<m.indexOf(v)&&(this.renderOrder=v),this},addTilesetImage:function(v,m,x,y,w,T,E){if(void 0===v)return null;if(null==m&&(m=v),!this.scene.sys.textures.exists(m))return console.warn("Invalid Tileset Image: "+m),null;var S=this.scene.sys.textures.get(m),A=this.getTilesetIndex(v);if(null===A&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+v),null;var _=this.tilesets[A];return _?(_.setTileSize(x,y),_.setSpacing(w,T),_.setImage(S)):(void 0===x&&(x=this.tileWidth),void 0===y&&(y=this.tileHeight),void 0===w&&(w=0),void 0===T&&(T=0),void 0===E&&(E=0),(_=new f(v,E,x,y,w,T)).setImage(S),this.tilesets.push(_)),_},copy:function(v,m,x,y,w,T,E,S){return null!==(S=this.getLayer(S))?(c.Copy(v,m,x,y,w,T,E,S),this):null},createBlankLayer:function(v,m,x,y,w,T,E,S){if(void 0===x&&(x=0),void 0===y&&(y=0),void 0===w&&(w=this.width),void 0===T&&(T=this.height),void 0===E&&(E=this.tileWidth),void 0===S&&(S=this.tileHeight),null!==this.getLayerIndex(v))return console.warn("Invalid Tilemap Layer ID: "+v),null;for(var A,_=new i({name:v,tileWidth:E,tileHeight:S,width:w,height:T,orientation:this.orientation}),C=0;C<T;C++){A=[];for(var M=0;M<w;M++)A.push(new a(_,-1,M,C,E,S,this.tileWidth,this.tileHeight));_.data.push(A)}this.layers.push(_),this.currentLayerIndex=this.layers.length-1;var R=new d(this.scene,this,this.currentLayerIndex,m,x,y);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createLayer:function(v,m,x,y){var w=this.getLayerIndex(v);if(null===w)return console.warn("Invalid Tilemap Layer ID: "+v),"string"==typeof v&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var T=this.layers[w];if(T.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+v),null;this.currentLayerIndex=w,void 0===x&&(x=T.x),void 0===y&&(y=T.y);var E=new d(this.scene,this,w,m,x,y);return E.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(E),E},createFromObjects:function(v,m){var x=[],y=this.getObjectLayer(v);if(!y)return console.warn("createFromObjects: Invalid objectLayerName given: "+v),x;Array.isArray(m)||(m=[m]);for(var w=y.objects,T=0;T<m.length;T++){for(var E,S=m[T],A=u(S,"id",null),_=u(S,"gid",null),C=u(S,"name",null),M=[],R=0;R<w.length;R++)E=w[R],(null===A&&null===_&&null===C||null!==A&&E.id===A||null!==_&&E.gid===_||null!==C&&E.name===C)&&M.push(E);for(var L=u(S,"classType",e),D=u(S,"scene",this.scene),F=u(S,"container",null),U=u(S,"key",null),P=u(S,"frame",null),O=0;O<M.length;O++){E=M[O];var B=new L(D);B.setName(E.name),B.setPosition(E.x,E.y),B.setTexture(U,P),E.width&&(B.displayWidth=E.width),E.height&&(B.displayHeight=E.height);var k,I={x:B.originX*E.width,y:(B.originY-1)*E.height};for(var N in E.rotation&&(k=n(E.rotation),o(I,k),B.rotation=k),B.x+=I.x,B.y+=I.y,void 0===E.flippedHorizontal&&void 0===E.flippedVertical||B.setFlip(E.flippedHorizontal,E.flippedVertical),E.visible||(B.visible=!1),E.properties)void 0!==B[N]?B[N]=E.properties[N]:B.setData(N,E.properties[N]);F?F.add(B):D.add.existing(B),x.push(B)}}return x},createFromTiles:function(v,m,x,y,w,T){return null===(T=this.getLayer(T))?null:c.CreateFromTiles(v,m,x,y,w,T)},fill:function(v,m,x,y,w,T,E){return void 0===T&&(T=!0),null===(E=this.getLayer(E))?null:(c.Fill(v,m,x,y,w,T,E),this)},filterObjects:function(v,m,x){if("string"==typeof v){var y=v;if(!(v=this.getObjectLayer(v)))return console.warn("No object layer found with the name: "+y),null}return v.objects.filter(m,x)},filterTiles:function(v,m,x,y,w,T,E,S){return null===(S=this.getLayer(S))?null:c.FilterTiles(v,m,x,y,w,T,E,S)},findByIndex:function(v,m,x,y){return null===(y=this.getLayer(y))?null:c.FindByIndex(v,m,x,y)},findObject:function(v,m,x){if("string"==typeof v){var y=v;if(!(v=this.getObjectLayer(v)))return console.warn("No object layer found with the name: "+y),null}return v.objects.find(m,x)||null},findTile:function(v,m,x,y,w,T,E,S){return null===(S=this.getLayer(S))?null:c.FindTile(v,m,x,y,w,T,E,S)},forEachTile:function(v,m,x,y,w,T,E,S){return null===(S=this.getLayer(S))?null:(c.ForEachTile(v,m,x,y,w,T,E,S),this)},getImageIndex:function(v){return this.getIndex(this.images,v)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(v){return v.name}):[]},getIndex:function(v,m){for(var x=0;x<v.length;x++)if(v[x].name===m)return x;return null},getLayer:function(v){var m=this.getLayerIndex(v);return null!==m?this.layers[m]:null},getObjectLayer:function(v){var m=this.getIndex(this.objects,v);return null!==m?this.objects[m]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(v){return v.name}):[]},getLayerIndex:function(v){return void 0===v?this.currentLayerIndex:"string"==typeof v?this.getLayerIndexByName(v):"number"==typeof v&&v<this.layers.length?v:v instanceof d?v.layerIndex:null},getLayerIndexByName:function(v){return this.getIndex(this.layers,v)},getTileAt:function(v,m,x,y){return null===(y=this.getLayer(y))?null:c.GetTileAt(v,m,x,y)},getTileAtWorldXY:function(v,m,x,y,w){return null===(w=this.getLayer(w))?null:c.GetTileAtWorldXY(v,m,x,y,w)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(v){return v.name}):[]},getTilesWithin:function(v,m,x,y,w,T){return null===(T=this.getLayer(T))?null:c.GetTilesWithin(v,m,x,y,w,T)},getTilesWithinShape:function(v,m,x,y){return null===(y=this.getLayer(y))?null:c.GetTilesWithinShape(v,m,x,y)},getTilesWithinWorldXY:function(v,m,x,y,w,T,E){return null===(E=this.getLayer(E))?null:c.GetTilesWithinWorldXY(v,m,x,y,w,T,E)},getTileset:function(v){var m=this.getIndex(this.tilesets,v);return null!==m?this.tilesets[m]:null},getTilesetIndex:function(v){return this.getIndex(this.tilesets,v)},hasTileAt:function(v,m,x){return null===(x=this.getLayer(x))?null:c.HasTileAt(v,m,x)},hasTileAtWorldXY:function(v,m,x,y){return null===(y=this.getLayer(y))?null:c.HasTileAtWorldXY(v,m,x,y)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(v){this.setLayer(v)}},putTileAt:function(v,m,x,y,w){return void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:c.PutTileAt(v,m,x,y,w)},putTileAtWorldXY:function(v,m,x,y,w,T){return void 0===y&&(y=!0),null===(T=this.getLayer(T))?null:c.PutTileAtWorldXY(v,m,x,y,w,T)},putTilesAt:function(v,m,x,y,w){return void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:(c.PutTilesAt(v,m,x,y,w),this)},randomize:function(v,m,x,y,w,T){return null===(T=this.getLayer(T))?null:(c.Randomize(v,m,x,y,w,T),this)},calculateFacesAt:function(v,m,x){return null===(x=this.getLayer(x))?null:(c.CalculateFacesAt(v,m,x),this)},calculateFacesWithin:function(v,m,x,y,w){return null===(w=this.getLayer(w))?null:(c.CalculateFacesWithin(v,m,x,y,w),this)},removeLayer:function(v){var m=this.getLayerIndex(v);if(null===m)return null;l(this.layers,m);for(var x=m;x<this.layers.length;x++)this.layers[x].tilemapLayer&&this.layers[x].tilemapLayer.layerIndex--;return this.currentLayerIndex===m&&(this.currentLayerIndex=0),this},destroyLayer:function(v){var m=this.getLayerIndex(v);return null!==m?((v=this.layers[m]).destroy(),l(this.layers,m),this.currentLayerIndex===m&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var v=this.layers,m=0;m<v.length;m++)v[m].tilemapLayer&&v[m].tilemapLayer.destroy(!1);return v.length=0,this.currentLayerIndex=0,this},removeTile:function(v,m,x){void 0===m&&(m=-1),void 0===x&&(x=!0);var y=[];Array.isArray(v)||(v=[v]);for(var w=0;w<v.length;w++){var T=v[w];y.push(this.removeTileAt(T.x,T.y,!0,x,T.tilemapLayer)),-1<m&&this.putTileAt(m,T.x,T.y,x,T.tilemapLayer)}return y},removeTileAt:function(v,m,x,y,w){return void 0===x&&(x=!0),void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:c.RemoveTileAt(v,m,x,y,w)},removeTileAtWorldXY:function(v,m,x,y,w,T){return void 0===x&&(x=!0),void 0===y&&(y=!0),null===(T=this.getLayer(T))?null:c.RemoveTileAtWorldXY(v,m,x,y,w,T)},renderDebug:function(v,m,x){return null===(x=this.getLayer(x))?null:(this.orientation===r.ORTHOGONAL&&c.RenderDebug(v,m,x),this)},renderDebugFull:function(v,m){for(var x=this.layers,y=0;y<x.length;y++)c.RenderDebug(v,m,x[y]);return this},replaceByIndex:function(v,m,x,y,w,T,E){return null===(E=this.getLayer(E))?null:(c.ReplaceByIndex(v,m,x,y,w,T,E),this)},setCollision:function(v,m,x,y,w){return void 0===m&&(m=!0),void 0===x&&(x=!0),void 0===w&&(w=!0),null===(y=this.getLayer(y))?null:(c.SetCollision(v,m,x,y,w),this)},setCollisionBetween:function(v,m,x,y,w){return void 0===x&&(x=!0),void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:(c.SetCollisionBetween(v,m,x,y,w),this)},setCollisionByProperty:function(v,m,x,y){return void 0===m&&(m=!0),void 0===x&&(x=!0),null===(y=this.getLayer(y))?null:(c.SetCollisionByProperty(v,m,x,y),this)},setCollisionByExclusion:function(v,m,x,y){return void 0===m&&(m=!0),void 0===x&&(x=!0),null===(y=this.getLayer(y))?null:(c.SetCollisionByExclusion(v,m,x,y),this)},setCollisionFromCollisionGroup:function(v,m,x){return void 0===v&&(v=!0),void 0===m&&(m=!0),null===(x=this.getLayer(x))?null:(c.SetCollisionFromCollisionGroup(v,m,x),this)},setTileIndexCallback:function(v,m,x,y){return null===(y=this.getLayer(y))?null:(c.SetTileIndexCallback(v,m,x,y),this)},setTileLocationCallback:function(v,m,x,y,w,T,E){return null===(E=this.getLayer(E))?null:(c.SetTileLocationCallback(v,m,x,y,w,T,E),this)},setLayer:function(v){var m=this.getLayerIndex(v);return null!==m&&(this.currentLayerIndex=m),this},setBaseTileSize:function(v,m){this.tileWidth=v,this.tileHeight=m,this.widthInPixels=this.width*v,this.heightInPixels=this.height*m;for(var x=0;x<this.layers.length;x++){this.layers[x].baseTileWidth=v,this.layers[x].baseTileHeight=m;for(var y=this.layers[x].data,w=this.layers[x].width,T=this.layers[x].height,E=0;E<T;E++)for(var S=0;S<w;S++){var A=y[E][S];null!==A&&A.setSize(void 0,void 0,v,m)}}return this},setLayerTileSize:function(v,m,x){if(null===(x=this.getLayer(x)))return this;x.tileWidth=v,x.tileHeight=m;for(var y=x.data,w=x.width,T=x.height,E=0;E<T;E++)for(var S=0;S<w;S++){var A=y[E][S];null!==A&&A.setSize(v,m)}return this},shuffle:function(v,m,x,y,w){return null===(w=this.getLayer(w))?null:(c.Shuffle(v,m,x,y,w),this)},swapByIndex:function(v,m,x,y,w,T,E){return null===(E=this.getLayer(E))?null:(c.SwapByIndex(v,m,x,y,w,T,E),this)},tileToWorldX:function(v,m,x){return null===(x=this.getLayer(x))?null:this._convert.TileToWorldX(v,m,x)},tileToWorldY:function(v,m,x){return null===(x=this.getLayer(x))?null:this._convert.TileToWorldY(v,m,x)},tileToWorldXY:function(v,m,x,y,w){return null===(w=this.getLayer(w))?null:this._convert.TileToWorldXY(v,m,x,y,w)},weightedRandomize:function(v,m,x,y,w,T){return null===(T=this.getLayer(T))?null:(c.WeightedRandomize(m,x,y,w,v,T),this)},worldToTileX:function(v,m,x,y){return null===(y=this.getLayer(y))?null:this._convert.WorldToTileX(v,m,x,y)},worldToTileY:function(v,m,x,y){return null===(y=this.getLayer(y))?null:this._convert.WorldToTileY(v,m,x,y)},worldToTileXY:function(v,m,x,y,w,T){return null===(T=this.getLayer(T))?null:this._convert.WorldToTileXY(v,m,x,y,w,T)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});g.exports=p},function(g,b,t){var h=t(0),n=t(11),s=t(15),u=t(247),i=t(1449),r=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,i],initialize:function(o,l,e,a,c,d){s.call(this,o,"TilemapLayer"),this.isTilemap=!0,this.tilemap=l,this.layerIndex=e,this.layer=l.layers[e],(this.layer.tilemapLayer=this).tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(a),this.setAlpha(this.layer.alpha),this.setPosition(c,d),this.setOrigin(),this.setSize(l.tileWidth*this.layer.width,l.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(o){var l=[],e=[],a=this.tilemap;Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var d=o[c];if("string"==typeof d&&(d=a.getTileset(d)),d){e.push(d);for(var f=d.firstgid,p=0;p<d.total;p++)l[f+p]=d}}this.gidMap=l,this.tileset=e},setRenderOrder:function(o){return"string"==typeof o&&(o=["right-down","left-down","right-up","left-up"].indexOf(o)),0<=o&&o<4&&(this._renderOrder=o),this},calculateFacesAt:function(o,l){return u.CalculateFacesAt(o,l,this.layer),this},calculateFacesWithin:function(o,l,e,a){return u.CalculateFacesWithin(o,l,e,a,this.layer),this},createFromTiles:function(o,l,e,a,c){return u.CreateFromTiles(o,l,e,a,c,this.layer)},cull:function(o){return this.cullCallback(this.layer,o,this.culledTiles,this._renderOrder)},copy:function(o,l,e,a,c,d,f){return u.Copy(o,l,e,a,c,d,f,this.layer),this},fill:function(o,l,e,a,c,d){return u.Fill(o,l,e,a,c,d,this.layer),this},filterTiles:function(o,l,e,a,c,d,f){return u.FilterTiles(o,l,e,a,c,d,f,this.layer)},findByIndex:function(o,l,e){return u.FindByIndex(o,l,e,this.layer)},findTile:function(o,l,e,a,c,d,f){return u.FindTile(o,l,e,a,c,d,f,this.layer)},forEachTile:function(o,l,e,a,c,d,f){return u.ForEachTile(o,l,e,a,c,d,f,this.layer),this},getTileAt:function(o,l,e){return u.GetTileAt(o,l,e,this.layer)},getTileAtWorldXY:function(o,l,e,a){return u.GetTileAtWorldXY(o,l,e,a,this.layer)},getTilesWithin:function(o,l,e,a,c){return u.GetTilesWithin(o,l,e,a,c,this.layer)},getTilesWithinShape:function(o,l,e){return u.GetTilesWithinShape(o,l,e,this.layer)},getTilesWithinWorldXY:function(o,l,e,a,c,d){return u.GetTilesWithinWorldXY(o,l,e,a,c,d,this.layer)},hasTileAt:function(o,l){return u.HasTileAt(o,l,this.layer)},hasTileAtWorldXY:function(o,l,e){return u.HasTileAtWorldXY(o,l,e,this.layer)},putTileAt:function(o,l,e,a){return u.PutTileAt(o,l,e,a,this.layer)},putTileAtWorldXY:function(o,l,e,a,c){return u.PutTileAtWorldXY(o,l,e,a,c,this.layer)},putTilesAt:function(o,l,e,a){return u.PutTilesAt(o,l,e,a,this.layer),this},randomize:function(o,l,e,a,c){return u.Randomize(o,l,e,a,c,this.layer),this},removeTileAt:function(o,l,e,a){return u.RemoveTileAt(o,l,e,a,this.layer)},removeTileAtWorldXY:function(o,l,e,a,c){return u.RemoveTileAtWorldXY(o,l,e,a,c,this.layer)},renderDebug:function(o,l){return u.RenderDebug(o,l,this.layer),this},replaceByIndex:function(o,l,e,a,c,d){return u.ReplaceByIndex(o,l,e,a,c,d,this.layer),this},setSkipCull:function(o){return void 0===o&&(o=!0),this.skipCull=o,this},setCullPadding:function(o,l){return void 0===o&&(o=1),void 0===l&&(l=1),this.cullPaddingX=o,this.cullPaddingY=l,this},setCollision:function(o,l,e,a){return u.SetCollision(o,l,e,this.layer,a),this},setCollisionBetween:function(o,l,e,a){return u.SetCollisionBetween(o,l,e,a,this.layer),this},setCollisionByProperty:function(o,l,e){return u.SetCollisionByProperty(o,l,e,this.layer),this},setCollisionByExclusion:function(o,l,e){return u.SetCollisionByExclusion(o,l,e,this.layer),this},setCollisionFromCollisionGroup:function(o,l){return u.SetCollisionFromCollisionGroup(o,l,this.layer),this},setTileIndexCallback:function(o,l,e){return u.SetTileIndexCallback(o,l,e,this.layer),this},setTileLocationCallback:function(o,l,e,a,c,d){return u.SetTileLocationCallback(o,l,e,a,c,d,this.layer),this},shuffle:function(o,l,e,a){return u.Shuffle(o,l,e,a,this.layer),this},swapByIndex:function(o,l,e,a,c,d){return u.SwapByIndex(o,l,e,a,c,d,this.layer),this},tileToWorldX:function(o,l){return this.tilemap.tileToWorldX(o,l,this)},tileToWorldY:function(o,l){return this.tilemap.tileToWorldY(o,l,this)},tileToWorldXY:function(o,l,e,a){return this.tilemap.tileToWorldXY(o,l,e,a,this)},weightedRandomize:function(o,l,e,a,c){return u.WeightedRandomize(o,l,e,a,c,this.layer),this},worldToTileX:function(o,l,e){return this.tilemap.worldToTileX(o,l,e,this)},worldToTileY:function(o,l,e){return this.tilemap.worldToTileY(o,l,e,this)},worldToTileXY:function(o,l,e,a,c){return this.tilemap.worldToTileXY(o,l,e,a,c,this)},destroy:function(o){void 0===o&&(o=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),o&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(u){return this.delay=n(u,"delay",0),this.repeat=n(u,"repeat",0),this.loop=n(u,"loop",!1),this.callback=n(u,"callback",void 0),this.callbackScope=n(u,"callbackScope",this.callback),this.args=n(u,"args",[]),this.timeScale=n(u,"timeScale",1),this.startAt=n(u,"startAt",0),this.paused=n(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){return 0<this.repeat?(this.elapsed+this.delay*(this.repeat-this.repeatCount))/(this.delay+this.delay*this.repeat):this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(u){void 0===u&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});g.exports=s},function(g,b,t){var h=t(1458);g.exports=function(n){var s,u=[];if(n.hasOwnProperty("props"))for(s in n.props)"_"!==s.substr(0,1)&&u.push({key:s,value:n.props[s]});else for(s in n)-1===h.indexOf(s)&&"_"!==s.substr(0,1)&&u.push({key:s,value:n[s]});return u}},function(g,b,t){var h=t(6);g.exports=function(n){var s=h(n,"tweens",null);return null===s?[]:("function"==typeof s&&(s=s.call()),Array.isArray(s)||(s=[s]),s)}},function(g,b,t){var h=t(261),n=t(13),s=t(96),u=t(80),i=t(160),r=t(6),o=t(260),l=t(262),e=t(264);g.exports=function(a,c,d){void 0===d&&(d=h);var f=r(c,"from",0),p=r(c,"to",1),v=[{value:f}],m=i(c,"delay",d.delay),x=i(c,"duration",d.duration),y=r(c,"easeParams",d.easeParams),w=u(r(c,"ease",d.ease),y),T=i(c,"hold",d.hold),E=i(c,"repeat",d.repeat),S=i(c,"repeatDelay",d.repeatDelay),A=s(c,"yoyo",d.yoyo),_=[],C=o("value",p),M=e(v[0],0,"value",C.getEnd,C.getStart,C.getActive,w,m,x,A,T,E,S,!1,!1);M.start=f,M.current=f,M.to=p,_.push(M);var R=new l(a,_,v);R.offset=n(c,"offset",null),R.completeDelay=n(c,"completeDelay",0),R.loop=Math.round(n(c,"loop",0)),R.loopDelay=Math.round(n(c,"loopDelay",0)),R.paused=s(c,"paused",!1),R.useFrames=s(c,"useFrames",!1);for(var L=r(c,"callbackScope",R),D=[R,null],F=l.TYPES,U=0;U<F.length;U++){var P,O,B=F[U],k=r(c,B,!1);k&&(P=r(c,B+"Scope",L),O=r(c,B+"Params",[]),R.setCallback(B,k,D.concat(O),P))}return R}},function(g,b,t){var h=t(80),n=t(6),s=t(14);g.exports=function(u,i){void 0===i&&(i={});var r=n(i,"start",0),o=n(i,"ease",null),l=n(i,"grid",null),e=n(i,"from",0),a="first"===e,c="center"===e,d="last"===e,f="number"==typeof e,p=Array.isArray(u),v=parseFloat(p?u[0]:u),m=p?parseFloat(u[1]):0,x=Math.max(v,m);if(p&&(r+=v),l){var y,w,T=l[0],E=l[1],S=0,A=0,_=[];d?(S=T-1,A=E-1):f?(S=e%T,A=Math.floor(e/T)):c&&(S=(T-1)/2,A=(E-1)/2);for(var C=s.MIN_SAFE_INTEGER,M=0;M<E;M++){_[M]=[];for(var R=0;R<T;R++){y=S-R,w=A-M;var L=Math.sqrt(y*y+w*w);C<L&&(C=L),_[M][R]=L}}}var D=o?h(o):null;return l?function(F,U,P,O){var B,k=0,I=O%T,N=Math.floor(O/T);return 0<=I&&I<T&&0<=N&&N<E&&(k=_[N][I]),(p?(B=m-v,D?k/C*B*D(k/C):k/C*B):D?k*v*D(k/C):k*v)+r}:function(F,U,P,O,B){var k,I;return B--,a?k=O:c?k=Math.abs(B/2-O):d?k=B-O:f&&(k=Math.abs(e-O)),(p?(I=c?(m-v)/B*(2*k):(m-v)/B*k,D?I*D(k/B):I):D?B*x*D(k/B):k*v)+r}}},function(g,b,t){var h=t(77),n=t(261),s=t(13),u=t(96),i=t(80),r=t(160),o=t(259),l=t(580),e=t(6),a=t(584),c=t(161);g.exports=function(d,f){var p=new a(d);p.completeDelay=s(f,"completeDelay",0),p.loop=Math.round(s(f,"loop",0)),p.loopDelay=Math.round(s(f,"loopDelay",0)),p.paused=u(f,"paused",!1),p.useFrames=u(f,"useFrames",!1);var v,m,x=e(f,"callbackScope",p),y=[p],w=e(f,"onStart",!1);w&&(v=e(f,"onStartScope",x),m=e(f,"onStartParams",[]),p.setCallback("onStart",w,y.concat(m),v));var T,E,S=e(f,"onUpdate",!1);S&&(T=e(f,"onUpdateScope",x),E=e(f,"onUpdateParams",[]),p.setCallback("onUpdate",S,y.concat(E),T));var A,_,C=e(f,"onLoop",!1);C&&(A=e(f,"onLoopScope",x),_=e(f,"onLoopParams",[]),p.setCallback("onLoop",C,y.concat(_),A));var M,R,L=e(f,"onYoyo",!1);L&&(M=e(f,"onYoyoScope",x),R=e(f,"onYoyoParams",[]),p.setCallback("onYoyo",L,y.concat(null,R),M));var D,F,U=e(f,"onComplete",!1);U&&(D=e(f,"onCompleteScope",x),F=e(f,"onCompleteParams",[]),p.setCallback("onComplete",U,y.concat(F),D));var P=l(f);if(0===P.length)return p.paused=!0,p;var O=h(n);O.targets=o(f);var B=s(f,"totalDuration",0);O.duration=0<B?Math.floor(B/P.length):r(f,"duration",O.duration),O.delay=r(f,"delay",O.delay),O.easeParams=e(f,"easeParams",O.easeParams),O.ease=i(e(f,"ease",O.ease),O.easeParams),O.hold=r(f,"hold",O.hold),O.repeat=r(f,"repeat",O.repeat),O.repeatDelay=r(f,"repeatDelay",O.repeatDelay),O.yoyo=u(f,"yoyo",O.yoyo),O.flipX=u(f,"flipX",O.flipX),O.flipY=u(f,"flipY",O.flipY);for(var k=0;k<P.length;k++)p.queue(c(p,P[k],O));return p}},function(g,b,t){var h=t(0),n=t(9),s=t(263),u=t(161),i=t(97),r=new h({Extends:n,initialize:function(o){n.call(this),this.manager=o,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=i.PENDING_ADD,this._pausedState=i.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null}},dispatchTimelineEvent:function(o,l){this.emit(o,this),l&&l.func.apply(l.scope,l.params)},setTimeScale:function(o){return this.timeScale=o,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},add:function(o){return this.queue(u(this,o))},queue:function(o){return this.isPlaying()||(o.parent=this,o.parentIsTimeline=!0,this.data.push(o),this.totalData=this.data.length),this},hasOffset:function(o){return null!==o.offset},isOffsetAbsolute:function(o){return"number"==typeof o},isOffsetRelative:function(o){if("string"==typeof o){var l=o[0];if("-"===l||"+"===l)return!0}return!1},getRelativeOffset:function(o,l){var e=o[0],a=parseFloat(o.substr(2)),c=l;switch(e){case"+":c+=a;break;case"-":c-=a}return Math.max(0,c)},calcDuration:function(){for(var o=0,l=0,e=0,a=0;a<this.totalData;a++){var c=this.data[a];c.init(),this.hasOffset(c)?this.isOffsetAbsolute(c.offset)?(c.calculatedOffset=c.offset,0===c.offset&&(e=0)):this.isOffsetRelative(c.offset)&&(c.calculatedOffset=this.getRelativeOffset(c.offset,o)):c.calculatedOffset=e,o=c.totalDuration+c.calculatedOffset,l+=c.totalDuration,e+=c.totalDuration}this.duration=l,this.loopCounter=-1===this.loop?999999999999:this.loop,this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=i.PAUSED,!1)},resetTweens:function(o){for(var l=0;l<this.totalData;l++)this.data[l].play(o)},setCallback:function(o,l,e,a){return-1!==r.TYPES.indexOf(o)&&(this.callbacks[o]={func:l,scope:a,params:e}),this},makeActive:function(o){return this.manager.makeActive(o)},play:function(){if(this.state!==i.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=i.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):(this.state=i.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=i.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(o,l){if(this.state!==i.PAUSED){switch(this.useFrames&&(l=+this.manager.timeScale),this.elapsed+=l*=this.timeScale,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=l,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:for(var e=this.totalData,a=0;a<this.totalData;a++)this.data[a].update(o,l)&&e--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===e&&this.nextState();break;case i.LOOP_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case i.COMPLETE_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===i.PENDING_REMOVE}},stop:function(){this.state=i.PENDING_REMOVE},pause:function(){if(this.state!==i.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===i.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(o){for(var l=0;l<this.data.length;l++)if(this.data[l].hasTarget(o))return!0;return!1},destroy:function(){for(var o=0;o<this.data.length;o++)this.data[o].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],g.exports=r},function(g,b,t){var h={};g.exports=h;var n=t(116),s=t(50);h.fromVertices=function(u){for(var i={},r=0;r<u.length;r++){var o=(r+1)%u.length,l=n.normalise({x:u[o].y-u[r].y,y:u[r].x-u[o].x});i[(0===l.y?1/0:l.x/l.y).toFixed(3).toString()]=l}return s.values(i)},h.rotate=function(u,i){if(0!==i)for(var r=Math.cos(i),o=Math.sin(i),l=0;l<u.length;l++){var e=u[l],a=e.x*r-e.y*o;e.y=e.x*o+e.y*r,e.x=a}}},function(g,b,t){g.exports={AFTER_ADD:t(1509),AFTER_REMOVE:t(1510),AFTER_UPDATE:t(1511),BEFORE_ADD:t(1512),BEFORE_REMOVE:t(1513),BEFORE_UPDATE:t(1514),COLLISION_ACTIVE:t(1515),COLLISION_END:t(1516),COLLISION_START:t(1517),DRAG_END:t(1518),DRAG:t(1519),DRAG_START:t(1520),PAUSE:t(1521),RESUME:t(1522),SLEEP_END:t(1523),SLEEP_START:t(1524)}},function(g,b,t){var h={};g.exports=h;var n=t(588),s=t(535),u=t(117);h.collisions=function(i,r){for(var o=[],l=r.pairs.table,e=r.metrics,a=0;a<i.length;a++){var c=i[a][0],d=i[a][1];if((!c.isStatic&&!c.isSleeping||!d.isStatic&&!d.isSleeping)&&h.canCollide(c.collisionFilter,d.collisionFilter)&&(e.midphaseTests+=1,u.overlaps(c.bounds,d.bounds)))for(var f=1<c.parts.length?1:0;f<c.parts.length;f++)for(var p=c.parts[f],v=1<d.parts.length?1:0;v<d.parts.length;v++){var m,x,y,w=d.parts[v];(p===c&&w===d||u.overlaps(p.bounds,w.bounds))&&(x=(m=l[s.id(p,w)])&&m.isActive?m.collision:null,y=n.collides(p,w,x),e.narrowphaseTests+=1,y.reused&&(e.narrowReuseCount+=1),y.collided&&(o.push(y),e.narrowDetections+=1))}}return o},h.canCollide=function(i,r){return i.group===r.group&&0!==i.group?0<i.group:0!=(i.mask&r.category)&&0!=(r.mask&i.category)}},function(g,b,t){var h={};g.exports=h;var n=t(94),s=t(116);h.collides=function(u,i,r){var o,l,e,a,d,f=!1;if(d=r?(e=u.parent,a=i.parent,f=r&&r.collided&&e.speed*e.speed+e.angularSpeed*e.angularSpeed+a.speed*a.speed+a.angularSpeed*a.angularSpeed<.2,r):{collided:!1,bodyA:u,bodyB:i},r&&f){var p=d.axisBody,x=h._overlapAxes(p.vertices,(p===u?i:u).vertices,[p.axes[r.axisNumber]]);if(d.reused=!0,x.overlap<=0)return d.collided=!1,d}else{if((o=h._overlapAxes(u.vertices,i.vertices,u.axes)).overlap<=0||(l=h._overlapAxes(i.vertices,u.vertices,i.axes)).overlap<=0)return d.collided=!1,d;o.overlap<l.overlap?(x=o,d.axisBody=u):(x=l,d.axisBody=i),d.axisNumber=x.axisNumber}d.bodyA=u.id<i.id?u:i,d.bodyB=u.id<i.id?i:u,d.collided=!0,d.depth=x.overlap,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent,d.normal=s.dot(x.axis,s.sub((i=d.bodyB).position,(u=d.bodyA).position))<0?{x:x.axis.x,y:x.axis.y}:{x:-x.axis.x,y:-x.axis.y},d.tangent=s.perp(d.normal),d.penetration=d.penetration||{},d.penetration.x=d.normal.x*d.depth,d.penetration.y=d.normal.y*d.depth;var y,w=h._findSupports(u,i,d.normal),T=[];return n.contains(u.vertices,w[0])&&T.push(w[0]),n.contains(u.vertices,w[1])&&T.push(w[1]),T.length<2&&(y=h._findSupports(i,u,s.neg(d.normal)),n.contains(i.vertices,y[0])&&T.push(y[0]),T.length<2&&n.contains(i.vertices,y[1])&&T.push(y[1])),T.length<1&&(T=[w[0]]),d.supports=T,d},h._overlapAxes=function(u,i,r){for(var o,l,e=s._temp[0],a=s._temp[1],c={overlap:Number.MAX_VALUE},d=0;d<r.length;d++){if(h._projectToAxis(e,u,l=r[d]),h._projectToAxis(a,i,l),(o=Math.min(e.max-a.min,a.max-e.min))<=0)return c.overlap=o,c;o<c.overlap&&(c.overlap=o,c.axis=l,c.axisNumber=d)}return c},h._projectToAxis=function(u,i,r){for(var o=s.dot(i[0],r),l=o,e=1;e<i.length;e+=1){var a=s.dot(i[e],r);l<a?l=a:a<o&&(o=a)}u.min=o,u.max=l},h._findSupports=function(u,i,r){for(var o,l,e,a=Number.MAX_VALUE,c=s._temp[0],d=i.vertices,f=u.position,p=0;p<d.length;p++)c.x=(v=d[p]).x-f.x,c.y=v.y-f.y,(o=-s.dot(r,c))<a&&(a=o,l=v);var v=d[0<=l.index-1?l.index-1:d.length-1];return c.x=v.x-f.x,c.y=v.y-f.y,a=-s.dot(r,c),e=v,c.x=(v=d[(l.index+1)%d.length]).x-f.x,c.y=v.y-f.y,(o=-s.dot(r,c))<a&&(e=v),[l,e]}},function(g,b){var t=function(){return this}();try{t=t||new Function("return this")()}catch(h){"object"==typeof window&&(t=window)}g.exports=t},function(g,b,t){t(591),t(592),t(593),t(594),t(595),t(596),t(597),t(598)},function(g,b){Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var h=Object(this),n=h.length>>>0;if("function"!=typeof t)throw new TypeError;for(var s=2<=arguments.length?arguments[1]:void 0,u=0;u<n;u++)u in h&&t.call(s,h[u],u,h)})},function(g,b){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})},function(g,b){function t(h){h&&(h.setTargetAtTime||(h.setTargetAtTime=h.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var h=this.internal_createGain();return t(h.gain),h},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(h){var n=h?this.internal_createDelay(h):this.internal_createDelay();return t(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var h=this.internal_createBufferSource();return h.start?(h.internal_start=h.start,h.start=function(n,s,u){void 0!==u?h.internal_start(n||0,s,u):h.internal_start(n||0,s||0)}):h.start=function(n,s,u){s||u?this.noteGrainOn(n||0,s,u):this.noteOn(n||0)},h.stop?(h.internal_stop=h.stop,h.stop=function(n){h.internal_stop(n||0)}):h.stop=function(n){this.noteOff(n||0)},t(h.playbackRate),h},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var h=this.internal_createDynamicsCompressor();return t(h.threshold),t(h.knee),t(h.ratio),t(h.reduction),t(h.attack),t(h.release),h},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var h=this.internal_createBiquadFilter();return t(h.frequency),t(h.detune),t(h.Q),t(h.gain),h},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var h=this.internal_createOscillator();return h.start?(h.internal_start=h.start,h.start=function(n){h.internal_start(n||0)}):h.start=function(n){this.noteOn(n||0)},h.stop?(h.internal_stop=h.stop,h.stop=function(n){h.internal_stop(n||0)}):h.stop=function(n){this.noteOff(n||0)},h.setPeriodicWave||(h.setPeriodicWave=h.setWaveTable),t(h.frequency),t(h.detune),h})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)},function(g,b){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(g,b){Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})},function(g,b){var t;!("performance"in window)&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},!("now"in window.performance)&&(t=Date.now(),performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t})},function(g,b){for(var t=Date.now(),h=["ms","moz","webkit","o"],n=0;n<h.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[h[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[h[n]+"CancelAnimationFrame"]||window[h[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(s){if("function"!=typeof s)throw new TypeError(s+"is not a function");var u=Date.now(),i=16+t-u;return i<0&&(i=0),t=u,setTimeout(function(){t=Date.now(),s(performance.now())},i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(s){clearTimeout(s)})},function(g,b){var t;"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array&&((t=function(h){var n=new Array;window[h]=function(s){if("number"==typeof s){Array.call(this,s),this.length=s;for(var u=0;u<this.length;u++)this[u]=0}else for(Array.call(this,s.length),this.length=s.length,u=0;u<this.length;u++)this[u]=s[u]},window[h].prototype=n,window[h].constructor=window[h]})("Float32Array"),t("Uint32Array"),t("Uint16Array"),t("Int16Array"),t("ArrayBuffer"))},function(g,b,t){var h=t(270);g.exports=function(n,s,u,i){for(var r=n[0],o=1;o<n.length;o++){var l=n[o];h(l,r,s,u,i),r=l}return n}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"angle",s,u,i,r)}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++)h.call(n,t[s]);return t}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=0);for(var s=n;s<t.length;s++){var u=t[s],i=!0;for(var r in h)u[r]!==h[r]&&(i=!1);if(i)return u}return null}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=0);for(var s=n;s<t.length;s++){var u=t[s],i=!0;for(var r in h)u[r]!==h[r]&&(i=!1);if(i)return u}return null}},function(g,b,t){var h=t(283),n=t(122),s=t(2),u=t(1),i=new(t(127))({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1);g.exports=function(r,o){void 0===o&&(o={});var l=o.hasOwnProperty("width"),e=o.hasOwnProperty("height"),a=s(o,"width",-1),c=s(o,"height",-1),d=s(o,"cellWidth",1),f=s(o,"cellHeight",d),p=s(o,"position",n.TOP_LEFT),v=s(o,"x",0),m=s(o,"y",0),x=0,y=0,w=a*d,T=c*f;i.setPosition(v,m),i.setSize(d,f);for(var E=0;E<r.length;E++)if(h(r[E],i,p),l&&-1===a)i.x+=d;else if(e&&-1===c)i.y+=f;else if(e&&!l){if(y+=f,i.y+=f,y===T&&(y=0,x+=d,i.y=m,i.x+=d,x===w))break}else if(x+=d,i.x+=d,x===w&&(x=0,y+=f,i.x=v,i.y+=f,y===T))break;return r}},function(g,b,t){var h=t(18);g.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s,u,i,r){return void 0===s&&(s=1),void 0===u?this.alpha=s:(this._alphaTL=h(s,0,1),this._alphaTR=h(u,0,1),this._alphaBL=h(i,0,1),this._alphaBR=h(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(s){var u=h(s,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,0===(this._alphaBR=u)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(s){var u=h(s,0,1);0!==(this._alphaTL=u)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(s){var u=h(s,0,1);0!==(this._alphaTR=u)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(s){var u=h(s,0,1);0!==(this._alphaBL=u)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(s){var u=h(s,0,1);0!==(this._alphaBR=u)&&(this.renderFlags|=2)}}}},function(g,b){g.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(h,n,s,u){return void 0===h?this.isCropped=!1:this.frame&&("number"==typeof h?this.frame.setCropUVs(this._crop,h,n,s,u,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(g,b){g.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,h){return this.flipX=t,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(g,b,t){var h=t(10),n=t(302),s=t(3);g.exports={prepareBoundsOutput:function(i,r){return void 0===r&&(r=!1),0!==this.rotation&&n(i,this.x,this.y,this.rotation),r&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(i.x,i.y,i),i},getCenter:function(i){return void 0===i&&(i=new s),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,i},getTopLeft:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,r)},getTopCenter:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,r)},getTopRight:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,r)},getLeftCenter:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,r)},getRightCenter:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,r)},getBottomLeft:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,r)},getBottomCenter:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,r)},getBottomRight:function(i,r){return(i=i||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,r)},getBounds:function(i){var r,o,l,e,a,c,d,f,p;return void 0===i&&(i=new h),this.parentContainer?(p=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(i),p.transformPoint(i.x,i.y,i),r=i.x,o=i.y,this.getTopRight(i),p.transformPoint(i.x,i.y,i),l=i.x,e=i.y,this.getBottomLeft(i),p.transformPoint(i.x,i.y,i),a=i.x,c=i.y,this.getBottomRight(i),p.transformPoint(i.x,i.y,i)):(this.getTopLeft(i),r=i.x,o=i.y,this.getTopRight(i),l=i.x,e=i.y,this.getBottomLeft(i),a=i.x,c=i.y,this.getBottomRight(i)),d=i.x,f=i.y,i.x=Math.min(r,l,a,d),i.y=Math.min(o,e,c,f),i.width=Math.max(r,l,a,d)-i.x,i.height=Math.max(o,e,c,f)-i.y,i}}},function(g,b){g.exports="blur"},function(g,b){g.exports="boot"},function(g,b){g.exports="contextlost"},function(g,b){g.exports="contextrestored"},function(g,b){g.exports="destroy"},function(g,b){g.exports="focus"},function(g,b){g.exports="hidden"},function(g,b){g.exports="pause"},function(g,b){g.exports="postrender"},function(g,b){g.exports="poststep"},function(g,b){g.exports="prerender"},function(g,b){g.exports="prestep"},function(g,b){g.exports="ready"},function(g,b){g.exports="resume"},function(g,b){g.exports="step"},function(g,b){g.exports="visible"},function(g,b){g.exports="postrender"},function(g,b){g.exports="prerender"},function(g,b){g.exports="render"},function(g,b){g.exports="resize"},function(g,b){g.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(h){this._displayOriginX=h,this.originX=h/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(h){this._displayOriginY=h,this.originY=h/this.height}},setOrigin:function(h,n){return void 0===h&&(h=.5),void 0===n&&(n=h),this.originX=h,this.originY=n,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(h,n){return void 0===h&&(h=0),void 0===n&&(n=h),this.displayOriginX=h,this.displayOriginY=n,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(g,b,t){var h=t(34),n=t(96),s=t(6),u=t(97),i=t(3);g.exports={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(o,l){void 0===l&&(l=this.pathConfig);var e=this.pathTween;return e&&e.isPlaying()&&e.stop(),this.path=o,l&&this.startFollow(l),this},setRotateToPath:function(o,l){return void 0===l&&(l=0),this.rotateToPath=o,this.pathRotationOffset=l,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,l){void 0===o&&(o={}),void 0===l&&(l=0);var e=this.pathTween;e&&e.isPlaying()&&e.stop(),"number"==typeof o&&(o={duration:o}),o.from=s(o,"from",0),o.to=s(o,"to",1);var a=n(o,"positionOnPath",!1);this.rotateToPath=n(o,"rotateToPath",!1),this.pathRotationOffset=s(o,"rotationOffset",0);var c,d=s(o,"startAt",l);return d&&(o.onStart=function(f){var p=f.data[0];p.progress=d,p.elapsed=p.duration*d;var v=p.ease(p.progress);p.current=p.start+(p.end-p.start)*v,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new i(this.x,this.y)),this.pathVector||(this.pathVector=new i),this.pathDelta||(this.pathDelta=new i),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),a&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath&&(c=this.path.getPoint(.1),this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+h(this.pathRotationOffset)),this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o){var l=o.data[0],e=this.pathDelta,a=this.pathVector;if(e.copy(a).negate(),l.state===u.COMPLETE)return this.path.getPoint(1,a),e.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(l.state!==u.PLAYING_FORWARD&&l.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),a),e.add(a),a.add(this.pathOffset);var c=this.x,d=this.y;this.setPosition(a.x,a.y);var f=this.x-c,p=this.y-d;if(0==f&&0==p)return;if(l.state!==this._prevDirection)return void(this._prevDirection=l.state);this.rotateToPath&&(this.rotation=Math.atan2(p,f)+h(this.pathRotationOffset))}}}},function(g,b){g.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(h){this.scaleX=h/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(h){this.scaleY=h/this.frame.realHeight}},setSizeToFrame:function(h){return void 0===h&&(h=this.frame),this.width=h.realWidth,this.height=h.realHeight,this},setSize:function(h,n){return this.width=h,this.height=n,this},setDisplaySize:function(h,n){return this.displayWidth=h,this.displayHeight=n,this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setTexture:function(h,n){return this.texture=this.scene.sys.textures.get(h),this.setFrame(n)},setFrame:function(h,n,s){return void 0===n&&(n=!0),void 0===s&&(s=!0),this.frame=this.texture.get(h),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(h,n,s,u){return void 0===h?this.isCropped=!1:this.frame&&("number"==typeof h?this.frame.setCropUVs(this._crop,h,n,s,u,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(h,n){return this.texture=this.scene.sys.textures.get(h),this.setFrame(n)},setFrame:function(h,n,s){return void 0===n&&(n=!0),void 0===s&&(s=!0),this.frame=this.texture.get(h),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(g,b){g.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(h,n,s,u){return void 0===h&&(h=16777215),void 0===n&&(u=s=n=h),this.tintTopLeft=h,this.tintTopRight=n,this.tintBottomLeft=s,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(h,n,s,u){return this.setTint(h,n,s,u),this.tintFill=!0,this},tint:{set:function(h){this.setTint(h,h,h,h)}},isTinted:{get:function(){var h=16777215;return this.tintFill||this.tintTopLeft!==h||this.tintTopRight!==h||this.tintBottomLeft!==h||this.tintBottomRight!==h}}}},function(g,b){g.exports="changedata"},function(g,b){g.exports="changedata-"},function(g,b){g.exports="destroy"},function(g,b){g.exports="removedata"},function(g,b){g.exports="setdata"},function(g,b){g.exports="addedtoscene"},function(g,b){g.exports="destroy"},function(g,b){g.exports="removedfromscene"},function(g,b){g.exports="complete"},function(g,b){g.exports="created"},function(g,b){g.exports="error"},function(g,b){g.exports="loop"},function(g,b){g.exports="play"},function(g,b){g.exports="seeked"},function(g,b){g.exports="seeking"},function(g,b){g.exports="stop"},function(g,b){g.exports="timeout"},function(g,b){g.exports="unlocked"},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"alpha",s,u,i,r)}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"x",s,u,i,r)}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"x",s,i,o,l),h(n,"y",u,r,o,l)}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"y",s,u,i,r)}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=0),void 0===s&&(s=6.28);for(var u=n,i=(s-n)/t.length,r=0;r<t.length;r++)t[r].x=h.x+h.radius*Math.cos(u),t[r].y=h.y+h.radius*Math.sin(u),u+=i;return t}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=0),void 0===s&&(s=6.28);for(var u=n,i=(s-n)/t.length,r=h.width/2,o=h.height/2,l=0;l<t.length;l++)t[l].x=h.x+r*Math.cos(u),t[l].y=h.y+o*Math.sin(u),u+=i;return t}},function(g,b,t){var h=t(168);g.exports=function(n,s){for(var u=h(s,n.length),i=0;i<n.length;i++){var r=n[i],o=u[i];r.x=o.x,r.y=o.y}return n}},function(g,b,t){var h=t(310),n=t(175),s=t(176);g.exports=function(u,i,r){void 0===r&&(r=0);var o=h(i,!1,u.length);0<r?n(o,r):r<0&&s(o,Math.abs(r));for(var l=0;l<u.length;l++)u[l].x=o[l].x,u[l].y=o[l].y;return u}},function(g,b,t){var h=t(311);g.exports=function(n,s,u){var i=h({x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2},u),r=h({x1:s.x2,y1:s.y2,x2:s.x3,y2:s.y3},u),o=h({x1:s.x3,y1:s.y3,x2:s.x1,y2:s.y1},u);i.pop(),r.pop(),o.pop();for(var l=(i=i.concat(r,o)).length/n.length,e=0,a=0;a<n.length;a++){var c=n[a],d=i[Math.floor(e)];c.x=d.x,c.y=d.y,e+=l}return n}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++)t[s].anims.play(h,n);return t}},function(g,b,t){var h=t(166);g.exports=function(n,s){for(var u=0;u<n.length;u++)h(s,n[u]);return n}},function(g,b,t){var h=t(177);g.exports=function(n,s){for(var u=0;u<n.length;u++)h(s,n[u]);return n}},function(g,b,t){var h=t(169);g.exports=function(n,s){for(var u=0;u<n.length;u++)h(s,n[u]);return n}},function(g,b,t){var h=t(170);g.exports=function(n,s){for(var u=0;u<n.length;u++)h(s,n[u]);return n}},function(g,b,t){var h=t(178);g.exports=function(n,s){for(var u=0;u<n.length;u++)h(s,n[u]);return n}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"rotation",s,u,i,r)}},function(g,b,t){var h=t(179),n=t(48);g.exports=function(s,u,i){for(var r=u.x,o=u.y,l=0;l<s.length;l++){var e=s[l];h(e,r,o,i,Math.max(1,n(e.x,e.y,r,o)))}return s}},function(g,b,t){var h=t(179);g.exports=function(n,s,u,i){var r=s.x,o=s.y;if(0===i)return n;for(var l=0;l<n.length;l++)h(n[l],r,o,u,i);return n}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"scaleX",s,u,i,r)}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"scaleX",s,i,o,l),h(n,"scaleY",u,r,o,l)}},function(g,b,t){var h=t(44);g.exports=function(n,s,u,i,r){return h(n,"scaleY",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"alpha",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i){return h(n,"blendMode",s,0,u,i)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"depth",s,u,i,r)}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++)t[s].setInteractive(h,n);return t}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"originX",s,i,o,l),h(n,"originY",u,r,o,l),n.forEach(function(e){e.updateDisplayOrigin()}),n}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"rotation",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"scaleX",s,i,o,l),h(n,"scaleY",u,r,o,l)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"scaleX",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"scaleY",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"scrollFactorX",s,i,o,l),h(n,"scrollFactorY",u,r,o,l)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"scrollFactorX",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"scrollFactorY",s,u,i,r)}},function(g,b){g.exports=function(t,h,n,s,u){for(var i=0;i<t.length;i++)t[i].setTint(h,n,s,u);return t}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i){return h(n,"visible",s,0,u,i)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"x",s,u,i,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r,o,l){return null==u&&(u=s),h(n,"x",s,i,o,l),h(n,"y",u,r,o,l)}},function(g,b,t){var h=t(27);g.exports=function(n,s,u,i,r){return h(n,"y",s,u,i,r)}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i,r){var o,l,e;if(void 0===i&&(i=0),void 0===r&&(r=new h),1<n.length)if(0===i){for(var a=n.length-1,c=n[a].x,d=n[a].y,f=a-1;0<=f;f--)o=(e=n[f]).x,l=e.y,e.x=c,e.y=d,c=o,d=l;n[a].x=s,n[a].y=u}else{for(c=n[0].x,d=n[0].y,f=1;f<n.length;f++)o=(e=n[f]).x,l=e.y,e.x=c,e.y=d,c=o,d=l;n[0].x=s,n[0].y=u}else c=n[0].x,d=n[0].y,n[0].x=s,n[0].y=u;return r.x=c,r.y=d,r}},function(g,b,t){var h=t(129);g.exports=function(n){return h(n)}},function(g,b,t){var h=t(180);g.exports=function(n,s,u,i,r){void 0===r&&(r=!1);var o,l=Math.abs(i-u)/n.length;if(r)for(o=0;o<n.length;o++)n[o][s]+=h(o*l,u,i);else for(o=0;o<n.length;o++)n[o][s]=h(o*l,u,i);return n}},function(g,b,t){var h=t(181);g.exports=function(n,s,u,i,r){void 0===r&&(r=!1);var o,l=Math.abs(i-u)/n.length;if(r)for(o=0;o<n.length;o++)n[o][s]+=h(o*l,u,i);else for(o=0;o<n.length;o++)n[o][s]=h(o*l,u,i);return n}},function(g,b){g.exports=function(t,h,n,s,u){void 0===u&&(u=!1);var i,r=Math.abs(s-n)/t.length;if(u)for(i=0;i<t.length;i++)t[i][h]+=i*r+n;else for(i=0;i<t.length;i++)t[i][h]=i*r+n;return t}},function(g,b){g.exports=function(t){for(var h=0;h<t.length;h++)t[h].visible=!t[h].visible;return t}},function(g,b,t){var h=t(66);g.exports=function(n,s,u){void 0===u&&(u=0);for(var i=0;i<n.length;i++){var r=n[i];r.x=h(r.x,s.left-u,s.right+u),r.y=h(r.y,s.top-u,s.bottom+u)}return n}},function(g,b,t){g.exports={Animation:t(182),AnimationFrame:t(313),AnimationManager:t(315),AnimationState:t(162),Events:t(130)}},function(g,b){g.exports="add"},function(g,b){g.exports="animationcomplete"},function(g,b){g.exports="animationcomplete-"},function(g,b){g.exports="animationrepeat"},function(g,b){g.exports="animationrestart"},function(g,b){g.exports="animationstart"},function(g,b){g.exports="animationstop"},function(g,b){g.exports="animationupdate"},function(g,b){g.exports="pauseall"},function(g,b){g.exports="remove"},function(g,b){g.exports="resumeall"},function(g,b,t){g.exports={BaseCache:t(317),CacheManager:t(319),Events:t(318)}},function(g,b){g.exports="add"},function(g,b){g.exports="remove"},function(g,b,t){g.exports={Controls:t(715),Scene2D:t(718)}},function(g,b,t){g.exports={FixedKeyControl:t(716),SmoothedKeyControl:t(717)}},function(g,b,t){var h=t(0),n=t(6),s=new h({initialize:function(u){this.camera=n(u,"camera",null),this.left=n(u,"left",null),this.right=n(u,"right",null),this.up=n(u,"up",null),this.down=n(u,"down",null),this.zoomIn=n(u,"zoomIn",null),this.zoomOut=n(u,"zoomOut",null),this.zoomSpeed=n(u,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var i=n(u,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=n(u,"speed.x",0),this.speedY=n(u,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){var i;this.active&&(void 0===u&&(u=1),i=this.camera,this.up&&this.up.isDown?i.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<.1&&(i.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=s},function(g,b,t){var h=t(0),n=t(6),s=new h({initialize:function(u){this.camera=n(u,"camera",null),this.left=n(u,"left",null),this.right=n(u,"right",null),this.up=n(u,"up",null),this.down=n(u,"down",null),this.zoomIn=n(u,"zoomIn",null),this.zoomOut=n(u,"zoomOut",null),this.zoomSpeed=n(u,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var i=n(u,"acceleration",null);"number"==typeof i?(this.accelX=i,this.accelY=i):(this.accelX=n(u,"acceleration.x",0),this.accelY=n(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=n(u,"drag",null);"number"==typeof r?(this.dragX=r,this.dragY=r):(this.dragX=n(u,"drag.x",0),this.dragY=n(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var o=n(u,"maxSpeed",null);"number"==typeof o?(this.maxSpeedX=o,this.maxSpeedY=o):(this.maxSpeedX=n(u,"maxSpeed.x",0),this.maxSpeedY=n(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){var i;this.active&&(void 0===u&&(u=1),i=this.camera,0<this._speedX?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,0<this._speedX&&(this._speedX=0)),0<this._speedY?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,0<this._speedY&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this._zoom=this.zoomIn&&this.zoomIn.isDown?-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this.zoomSpeed:0,0!==this._speedX&&(i.scrollX-=this._speedX*u|0),0!==this._speedY&&(i.scrollY-=this._speedY*u|0),0!==this._zoom&&(i.zoom+=this._zoom,i.zoom<.001&&(i.zoom=.001)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=s},function(g,b,t){g.exports={Camera:t(320),BaseCamera:t(131),CameraManager:t(775),Effects:t(327),Events:t(35)}},function(g,b){g.exports="cameradestroy"},function(g,b){g.exports="camerafadeincomplete"},function(g,b){g.exports="camerafadeinstart"},function(g,b){g.exports="camerafadeoutcomplete"},function(g,b){g.exports="camerafadeoutstart"},function(g,b){g.exports="cameraflashcomplete"},function(g,b){g.exports="cameraflashstart"},function(g,b){g.exports="followupdate"},function(g,b){g.exports="camerapancomplete"},function(g,b){g.exports="camerapanstart"},function(g,b){g.exports="postrender"},function(g,b){g.exports="prerender"},function(g,b){g.exports="camerarotatecomplete"},function(g,b){g.exports="camerarotatestart"},function(g,b){g.exports="camerashakecomplete"},function(g,b){g.exports="camerashakestart"},function(g,b){g.exports="camerazoomcomplete"},function(g,b){g.exports="camerazoomstart"},function(g,b,t){var h=t(18),n=t(0),s=t(35),u=new n({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0},start:function(i,r,o,l,e,a,c,d){return void 0===i&&(i=!0),void 0===r&&(r=1e3),void 0===o&&(o=0),void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=!1),void 0===c&&(c=null),void 0===d&&(d=this.camera.scene),!a&&this.isRunning||(this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=i,this.progress=0,this.red=o,this.green=l,this.blue=e,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.camera.emit(i?s.FADE_OUT_START:s.FADE_IN_START,this.camera,this,r,o,l,e)),this.camera},update:function(i,r){this.isRunning&&(this._elapsed+=r,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(i,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera;return i.drawFillRect(o.x,o.y,o.width,o.height,r(this.blue/255,this.green/255,this.red/255,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0,this.camera.emit(this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=u},function(g,b,t){var h=t(18),n=t(0),s=t(35),u=new n({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0},start:function(i,r,o,l,e,a,c){return void 0===i&&(i=250),void 0===r&&(r=255),void 0===o&&(o=255),void 0===l&&(l=255),void 0===e&&(e=!1),void 0===a&&(a=null),void 0===c&&(c=this.camera.scene),!e&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.red=r,this.green=o,this.blue=l,this.alpha=1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(s.FLASH_START,this.camera,this,i,r,o,l)),this.camera},update:function(i,r){this.isRunning&&(this._elapsed+=r,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var r=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(i,r){if(!this.isRunning)return!1;var o=this.camera;return i.drawFillRect(o.x,o.y,o.width,o.height,r(this.blue/255,this.green/255,this.red/255,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=u},function(g,b,t){var h=t(18),n=t(0),s=t(132),u=t(35),i=t(3),r=new n({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=new i,this.current=new i,this.destination=new i,this.progress=0,this._elapsed=0},start:function(o,l,e,a,c,d,f){void 0===e&&(e=1e3),void 0===a&&(a=s.Linear),void 0===c&&(c=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene);var p=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(o,l),p.getScroll(o,l,this.current),"string"==typeof a&&s.hasOwnProperty(a)?this.ease=s[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(u.PAN_START,this.camera,this,e,o,l)),p},update:function(o,l){var e,a,c,d,f;this.isRunning&&(this._elapsed+=l,e=h(this._elapsed/this.duration,0,1),this.progress=e,a=this.camera,this._elapsed<this.duration?(c=this.ease(e),a.getScroll(this.destination.x,this.destination.y,this.current),a.setScroll(d=this.source.x+(this.current.x-this.source.x)*c,f=this.source.y+(this.current.y-this.source.y)*c),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,e,d,f)):(a.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,e,a.scrollX,a.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=r},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1.70158),t*t*((h+1)*t-h)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1.70158),--t*t*((h+1)*t+h)+1}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1.70158);var n=1.525*h;return(t*=2)<1?t*t*((1+n)*t-n)*.5:.5*((t-=2)*t*((1+n)*t+n)+2)}},function(g,b){g.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(g,b){g.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(g,b){g.exports=function(t){var h=!1;return t<.5?(t=1-2*t,h=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,h?.5*(1-t):.5*t+.5}},function(g,b){g.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(g,b){g.exports=function(t){return Math.sqrt(1- --t*t)}},function(g,b){g.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(g,b){g.exports=function(t){return t*t*t}},function(g,b){g.exports=function(t){return--t*t*t+1}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),-h*Math.pow(2,10*--t)*Math.sin((t-s)*(2*Math.PI)/n)}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/n)+1}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),(t*=2)<1?h*Math.pow(2,10*--t)*Math.sin((t-s)*(2*Math.PI)/n)*-.5:h*Math.pow(2,-10*--t)*Math.sin((t-s)*(2*Math.PI)/n)*.5+1}},function(g,b){g.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(g,b){g.exports=function(t){return 1-Math.pow(2,-10*t)}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(g,b){g.exports=function(t){return t}},function(g,b){g.exports=function(t){return t*t}},function(g,b){g.exports=function(t){return t*(2-t)}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(g,b){g.exports=function(t){return t*t*t*t}},function(g,b){g.exports=function(t){return 1- --t*t*t*t}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(g,b){g.exports=function(t){return t*t*t*t*t}},function(g,b){g.exports=function(t){return--t*t*t*t*t+1}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1),t<=0?0:1<=t?1:1/h*(1+(h*t|0))}},function(g,b,t){var h=t(18),n=t(0),s=t(35),u=t(3),i=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0},start:function(r,o,l,e,a){return void 0===r&&(r=100),void 0===o&&(o=.05),void 0===l&&(l=!1),void 0===e&&(e=null),void 0===a&&(a=this.camera.scene),!l&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,"number"==typeof o?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=e,this._onUpdateScope=a,this.camera.emit(s.SHAKE_START,this.camera,this,r,o)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,o){var l,e,a,c;this.isRunning&&(this._elapsed+=o,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(l=this.intensity,e=this.camera.width,a=this.camera.height,c=this.camera.zoom,this._offsetX=(Math.random()*l.x*e*2-l.x*e)*c,this._offsetY=(Math.random()*l.y*a*2-l.y*a)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});g.exports=i},function(g,b,t){var h=t(18),n=t(0),s=t(35),u=t(132),i=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.progress=0,this._elapsed=0,this.clockwise=!0,this.shortestPath=!1},start:function(r,o,l,e,a,c,d){void 0===l&&(l=1e3),void 0===e&&(e=u.Linear),void 0===a&&(a=!1),void 0===c&&(c=null),void 0===d&&(d=this.camera.scene),void 0===o&&(o=!1),this.shortestPath=o;var f=r;r<0?(f=-1*r,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;f-=Math.floor(f/p)*p;var v,m,x=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source=x.rotation,this.destination=f,"string"==typeof e&&u.hasOwnProperty(e)?this.ease=u[e]:"function"==typeof e&&(this.ease=e),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.shortestPath&&((v=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+p)-this.source)<(m=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+p)-this.destination)?this.clockwise=!0:m<v&&(this.clockwise=!1)),this.camera.emit(s.ROTATE_START,this.camera,this,l,f)),x},update:function(r,o){var l,e,a,c,d,f,p,v;this.isRunning&&(this._elapsed+=o,l=h(this._elapsed/this.duration,0,1),this.progress=l,e=this.camera,this._elapsed<this.duration?(a=this.ease(l),this.current=e.rotation,d=360*Math.PI/180,f=this.destination,p=this.current,!1===this.clockwise&&(f=this.current,p=this.destination),c=p<=f?Math.abs(f-p):Math.abs(f+d)-p,e.rotation=v=this.clockwise?e.rotation+c*a:e.rotation-c*a,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,e,l,v)):(e.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,e,l,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=i},function(g,b,t){var h=t(18),n=t(0),s=t(132),u=t(35),i=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.progress=0,this._elapsed=0},start:function(r,o,l,e,a,c){void 0===o&&(o=1e3),void 0===l&&(l=s.Linear),void 0===e&&(e=!1),void 0===a&&(a=null),void 0===c&&(c=this.camera.scene);var d=this.camera;return!e&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=d.zoom,this.destination=r,"string"==typeof l&&s.hasOwnProperty(l)?this.ease=s[l]:"function"==typeof l&&(this.ease=l),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(u.ZOOM_START,this.camera,this,o,r)),d},update:function(r,o){this.isRunning&&(this._elapsed+=o,this.progress=h(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=i},function(g,b,t){var h=t(320),n=t(0),s=t(2),u=t(24),i=t(56),r=t(101),o=t(21),l=new n({initialize:function(e){this.scene=e,this.systems=e.sys,this.roundPixels=e.sys.game.config.roundPixels,this.cameras=[],e.sys.events.once(o.BOOT,this.boot,this),e.sys.events.on(o.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new h(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var e;this.main||((e=this.systems).settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0]);var a=this.systems.events;a.on(o.UPDATE,this.update,this),a.once(o.SHUTDOWN,this.shutdown,this)},add:function(e,a,c,d,f,p){void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=this.scene.sys.scale.width),void 0===d&&(d=this.scene.sys.scale.height),void 0===f&&(f=!1),void 0===p&&(p="");var v=new h(e,a,c,d);return v.setName(p),v.setScene(this.scene),v.setRoundPixels(this.roundPixels),v.id=this.getNextID(),this.cameras.push(v),f&&(this.main=v),v},addExisting:function(e,a){return void 0===a&&(a=!1),-1===this.cameras.indexOf(e)?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),a&&(this.main=e),e):null},getNextID:function(){for(var e=this.cameras,a=1,c=0;c<32;c++){for(var d=!1,f=0;f<e.length;f++){var p=e[f];p&&p.id===a&&(d=!0)}if(!d)return a;a<<=1}return 0},getTotal:function(e){void 0===e&&(e=!1);for(var a=0,c=this.cameras,d=0;d<c.length;d++)(!e||e&&c[d].visible)&&a++;return a},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var a=this.scene.sys.scale.width,c=this.scene.sys.scale.height,d=0;d<e.length;d++){var f=e[d],p=s(f,"x",0),v=s(f,"y",0),m=s(f,"width",a),x=s(f,"height",c),y=this.add(p,v,m,x);y.name=s(f,"name",""),y.zoom=s(f,"zoom",1),y.rotation=s(f,"rotation",0),y.scrollX=s(f,"scrollX",0),y.scrollY=s(f,"scrollY",0),y.roundPixels=s(f,"roundPixels",!1),y.visible=s(f,"visible",!0);var w=s(f,"backgroundColor",!1);w&&y.setBackgroundColor(w);var T,E,S,A,_=s(f,"bounds",null);_&&(T=s(_,"x",0),E=s(_,"y",0),S=s(_,"width",a),A=s(_,"height",c),y.setBounds(T,E,S,A))}return this},getCamera:function(e){for(var a=this.cameras,c=0;c<a.length;c++)if(a[c].name===e)return a[c];return null},getCamerasBelowPointer:function(e){for(var a=this.cameras,c=e.x,d=e.y,f=[],p=0;p<a.length;p++){var v=a[p];v.visible&&v.inputEnabled&&i(v,c,d)&&f.unshift(v)}return f},remove:function(e,a){void 0===a&&(a=!0),Array.isArray(e)||(e=[e]);for(var c=0,d=this.cameras,f=0;f<e.length;f++){var p=d.indexOf(e[f]);-1!==p&&(a&&d[p].destroy(),d.splice(p,1),c++)}return!this.main&&d[0]&&(this.main=d[0]),c},render:function(e,a){for(var c=this.scene,d=this.cameras,f=0;f<this.cameras.length;f++){var p,v=d[f];v.visible&&0<v.alpha&&(v.preRender(),p=this.getVisibleChildren(a.getChildren(),v),e.render(c,p,v))}},getVisibleChildren:function(e,a){for(var c=[],d=0;d<e.length;d++){var f=e[d];f.willRender(a)&&c.push(f)}return c},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(e,a){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(e,a)},onResize:function(e,a,c,d,f){for(var p=0;p<this.cameras.length;p++){var v=this.cameras[p];0===v._x&&0===v._y&&v._width===d&&v._height===f&&v.setSize(a.width,a.height)}},resize:function(e,a){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(e,a)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];var a=this.systems.events;a.off(o.UPDATE,this.update,this),a.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});u.register("CameraManager",l,"cameras"),g.exports=l},function(g,b){g.exports="enterfullscreen"},function(g,b){g.exports="fullscreenfailed"},function(g,b){g.exports="fullscreenunsupported"},function(g,b){g.exports="leavefullscreen"},function(g,b){g.exports="orientationchange"},function(g,b){g.exports="resize"},function(g,b){g.exports="addedtoscene"},function(g,b){g.exports="boot"},function(g,b){g.exports="create"},function(g,b){g.exports="destroy"},function(g,b){g.exports="pause"},function(g,b){g.exports="postupdate"},function(g,b){g.exports="preupdate"},function(g,b){g.exports="ready"},function(g,b){g.exports="removedfromscene"},function(g,b){g.exports="render"},function(g,b){g.exports="resume"},function(g,b){g.exports="shutdown"},function(g,b){g.exports="sleep"},function(g,b){g.exports="start"},function(g,b){g.exports="transitioncomplete"},function(g,b){g.exports="transitioninit"},function(g,b){g.exports="transitionout"},function(g,b){g.exports="transitionstart"},function(g,b){g.exports="transitionwake"},function(g,b){g.exports="update"},function(g,b){g.exports="wake"},function(g,b,t){g.exports={Config:t(340),CreateRenderer:t(360),DebugHeader:t(378),Events:t(22),TimeStep:t(379),VisibilityHandler:t(381)}},function(g,b){var t,h,n=g.exports={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function i(p){if(t===setTimeout)return setTimeout(p,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(p,0);try{return t(p,0)}catch(v){try{return t.call(null,p,0)}catch(m){return t.call(this,p,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(p){t=s}try{h="function"==typeof clearTimeout?clearTimeout:u}catch(p){h=u}}();var r,o=[],l=!1,e=-1;function a(){l&&r&&(l=!1,r.length?o=r.concat(o):e=-1,o.length&&c())}function c(){if(!l){var p=i(a);l=!0;for(var v=o.length;v;){for(r=o,o=[];++e<v;)r&&r[e].run();e=-1,v=o.length}r=null,l=!1,function(m){if(h===clearTimeout)return clearTimeout(m);if((h===u||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(m);try{h(m)}catch(x){try{return h.call(null,m)}catch(y){return h.call(this,m)}}}(p)}}function d(p,v){this.fun=p,this.array=v}function f(){}n.nextTick=function(p){var v=new Array(arguments.length-1);if(1<arguments.length)for(var m=1;m<arguments.length;m++)v[m-1]=arguments[m];o.push(new d(p,v)),1!==o.length||l||i(c)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(p){return[]},n.binding=function(p){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(p){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(g,b,t){var h=t(134),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};g.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||h.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":h.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll"),n)},function(g,b,t){var h=t(134),n={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};g.exports=function(){n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var s,u,i=document.createElement("audio"),r=!!i.canPlayType;try{r&&(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(n.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(n.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(n.mp3=!0),i.canPlayType("audio/wav").replace(/^no$/,"")&&(n.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(n.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(n.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"')&&(h.edge?n.dolby=!0:h.safari&&9<=h.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(s=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10),(10===s&&11<=u||10<s)&&(n.dolby=!0))))}catch(o){}return n}()},function(g,b){var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};g.exports=function(){var h=document.createElement("video"),n=!!h.canPlayType;try{n&&(h.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch(s){}return t}()},function(g,b){var t={available:!1,cancel:"",keyboard:!1,request:""};g.exports=function(){for(var h="Fullscreen",n="FullScreen",s=["request"+h,"request"+n,"webkitRequest"+h,"webkitRequest"+n,"msRequest"+h,"msRequest"+n,"mozRequest"+n,"mozRequest"+h],u=0;u<s.length;u++)if(document.documentElement[s[u]]){t.available=!0,t.request=s[u];break}var i=["cancel"+n,"exit"+h,"webkitCancel"+n,"webkitExit"+h,"msCancel"+n,"msExit"+h,"mozCancel"+n,"mozExit"+h];if(t.available)for(u=0;u<i.length;u++)if(document[i[u]]){t.cancel=i[u];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}()},function(g,b,t){g.exports={Between:t(343),BetweenPoints:t(344),BetweenPointsY:t(810),BetweenY:t(811),CounterClockwise:t(812),Normalize:t(345),Random:t(813),RandomDegrees:t(814),Reverse:t(815),RotateTo:t(816),ShortestBetween:t(817),Wrap:t(265),WrapDegrees:t(266)}},function(g,b){g.exports=function(t,h){return Math.atan2(h.x-t.x,h.y-t.y)}},function(g,b){g.exports=function(t,h,n,s){return Math.atan2(n-t,s-h)}},function(g,b,t){var h=t(14);g.exports=function(n){return n>Math.PI&&(n-=h.PI2),Math.abs(((n+h.TAU)%h.PI2-h.PI2)%h.PI2)}},function(g,b,t){var h=t(135);g.exports=function(){return h(-Math.PI,Math.PI)}},function(g,b,t){var h=t(135);g.exports=function(){return h(-180,180)}},function(g,b,t){var h=t(345);g.exports=function(n){return h(n+Math.PI)}},function(g,b,t){var h=t(14);g.exports=function(n,s,u){return void 0===u&&(u=.05),n===s||(Math.abs(s-n)<=u||Math.abs(s-n)>=h.PI2-u?n=s:(Math.abs(s-n)>Math.PI&&(s<n?s+=h.PI2:s-=h.PI2),n<s?n+=u:s<n&&(n-=u))),n}},function(g,b){g.exports=function(t,h){var n=h-t;return 0==n?0:n-360*Math.floor((n+180)/360)}},function(g,b,t){g.exports={Between:t(48),BetweenPoints:t(346),BetweenPointsSquared:t(819),Chebyshev:t(820),Power:t(821),Snake:t(822),Squared:t(347)}},function(g,b){g.exports=function(t,h){var n=t.x-h.x,s=t.y-h.y;return n*n+s*s}},function(g,b){g.exports=function(t,h,n,s){return Math.max(Math.abs(t-n),Math.abs(h-s))}},function(g,b){g.exports=function(t,h,n,s,u){return void 0===u&&(u=2),Math.sqrt(Math.pow(n-t,u)+Math.pow(s-h,u))}},function(g,b){g.exports=function(t,h,n,s){return Math.abs(t-n)+Math.abs(h-s)}},function(g,b,t){g.exports={Back:t(328),Bounce:t(329),Circular:t(330),Cubic:t(331),Elastic:t(332),Expo:t(333),Linear:t(334),Quadratic:t(335),Quartic:t(336),Quintic:t(337),Sine:t(338),Stepped:t(339)}},function(g,b,t){g.exports={Ceil:t(825),Equal:t(123),Floor:t(826),GreaterThan:t(348),LessThan:t(349)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1e-4),Math.ceil(t-h)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1e-4),Math.floor(t+h)}},function(g,b,t){g.exports={Bezier:t(828),CatmullRom:t(829),CubicBezier:t(352),Linear:t(830),QuadraticBezier:t(353),SmoothStep:t(354),SmootherStep:t(831)}},function(g,b,t){var h=t(350);g.exports=function(n,s){for(var u=0,i=n.length-1,r=0;r<=i;r++)u+=Math.pow(1-s,i-r)*Math.pow(s,r)*n[r]*h(i,r);return u}},function(g,b,t){var h=t(191);g.exports=function(n,s){var u=n.length-1,i=u*s,r=Math.floor(i);return n[0]===n[u]?(s<0&&(r=Math.floor(i=u*(1+s))),h(i-r,n[(r-1+u)%u],n[r],n[(r+1)%u],n[(r+2)%u])):s<0?n[0]-(h(-i,n[0],n[0],n[1],n[1])-n[0]):1<s?n[u]-(h(i-u,n[u],n[u],n[u-1],n[u-1])-n[u]):h(i-r,n[r?r-1:0],n[r],n[u<r+1?u:r+1],n[u<r+2?u:r+2])}},function(g,b,t){var h=t(133);g.exports=function(n,s){var u=n.length-1,i=u*s,r=Math.floor(i);return s<0?h(n[0],n[1],i):1<s?h(n[u],n[u-1],u-i):h(n[r],n[u<r+1?u:r+1],i-r)}},function(g,b,t){var h=t(180);g.exports=function(n,s,u){return s+(u-s)*h(n,0,1)}},function(g,b,t){g.exports={GetNext:t(355),IsSize:t(136),IsValue:t(833)}},function(g,b){g.exports=function(t){return 0<t&&0==(t&t-1)}},function(g,b,t){g.exports={Ceil:t(137),Floor:t(76),To:t(835)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.round(t/h),s?(n+t)/h:n+t)}},function(g,b,t){var h=new(t(0))({initialize:function(n){void 0===n&&(n=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],n&&this.init(n)},rnd:function(){var n=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|n,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var s,u=this.n;n=n.toString();for(var i=0;i<n.length;i++)s=.02519603282416938*(u+=n.charCodeAt(i)),s-=u=s>>>0,u=(s*=u)>>>0,u+=4294967296*(s-=u);return 2.3283064365386963e-10*((this.n=u)>>>0)},init:function(n){"string"==typeof n?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,n)for(var s=0;s<n.length&&null!=n[s];s++){var u=n[s];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(n,s){return Math.floor(this.realInRange(0,s-n+1)+n)},between:function(n,s){return Math.floor(this.realInRange(0,s-n+1)+n)},realInRange:function(n,s){return this.frac()*(s-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",s="";for(s=n="";n++<36;s+=~n%5|3*n&4?(15^n?8^this.frac()*(20^n?16:4):4).toString(16):"-");return s},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,s){return this.realInRange(n||9466848e5,s||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return"string"==typeof n&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var s=n.length-1;0<s;s--){var u=Math.floor(this.frac()*(s+1)),i=n[u];n[u]=n[s],n[s]=i}return n}});g.exports=h},function(g,b){g.exports=function(t){for(var h=0,n=0;n<t.length;n++)h+=+t[n];return h/t.length}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.ceil(t*s)/s}},function(g,b){g.exports=function(t,h){return Math.abs(t-h)}},function(g,b,t){var h=t(18),n=t(0),s=t(67),u=t(1),i=new s,r=new n({initialize:function o(l,e,a,c){void 0===l&&(l=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===c&&(c=o.DefaultOrder),this._x=l,this._y=e,this._z=a,this._order=c,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,l,e,a){return void 0===a&&(a=this._order),this._x=o,this._y=l,this._z=e,this._order=a,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,l,e){return void 0===l&&(l=this._order),void 0===e&&(e=!1),i.fromQuat(o),this.setFromRotationMatrix(i,l,e)},setFromRotationMatrix:function(o,l,e){void 0===l&&(l=this._order),void 0===e&&(e=!1);var a=o.val,c=a[0],d=a[4],f=a[8],p=a[1],v=a[5],m=a[9],x=a[2],y=a[6],w=a[10],T=0,E=0,S=0,A=.99999;switch(l){case"XYZ":E=Math.asin(h(f,-1,1)),Math.abs(f)<A?(T=Math.atan2(-m,w),S=Math.atan2(-d,c)):T=Math.atan2(y,v);break;case"YXZ":T=Math.asin(-h(m,-1,1)),Math.abs(m)<A?(E=Math.atan2(f,w),S=Math.atan2(p,v)):E=Math.atan2(-x,c);break;case"ZXY":T=Math.asin(h(y,-1,1)),S=Math.abs(y)<A?(E=Math.atan2(-x,w),Math.atan2(-d,v)):Math.atan2(p,c);break;case"ZYX":E=Math.asin(-h(x,-1,1)),S=Math.abs(x)<A?(T=Math.atan2(y,w),Math.atan2(p,c)):Math.atan2(-d,v);break;case"YZX":S=Math.asin(h(p,-1,1)),E=Math.abs(p)<A?(T=Math.atan2(-m,v),Math.atan2(-x,c)):Math.atan2(f,w);break;case"XZY":S=Math.asin(-h(d,-1,1)),Math.abs(d)<A?(T=Math.atan2(y,v),E=Math.atan2(f,c)):T=Math.atan2(-m,w)}return this._x=T,this._y=E,this._z=S,this._order=l,e&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",g.exports=r},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.floor(t*s)/s}},function(g,b){g.exports=function(t,h){return t/h/1e3}},function(g,b){g.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(g,b){g.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(g,b){g.exports=function(t,h,n){return Math.min(t+h,n)}},function(g,b){g.exports=function(t,h,n){return Math.max(t-h,n)}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=h+1);var u=(t-h)/(n-h);return 1<u?void 0!==s?(u=(s-t)/(s-n))<0&&(u=0):u=1:u<0&&(u=0),u}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*h,t.y=Math.sin(n)*h,t}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);var n=2*Math.random()*Math.PI,s=2*Math.random()-1,u=Math.sqrt(1-s*s)*h;return t.x=Math.cos(n)*u,t.y=Math.sin(n)*u,t.z=s*h,t}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1),t.x=(2*Math.random()-1)*h,t.y=(2*Math.random()-1)*h,t.z=(2*Math.random()-1)*h,t.w=(2*Math.random()-1)*h,t}},function(g,b){g.exports=function(t,h,n,s,u){return t.x=h+u*Math.cos(s),t.y=n+u*Math.sin(s),t}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.round(t*s)/s}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=1),void 0===n&&(n=1),void 0===s&&(s=1),s*=Math.PI/t;for(var u=[],i=[],r=0;r<t;r++)h+=(n-=h*s)*s,u[r]=n,i[r]=h;return{sin:i,cos:u,length:t}}},function(g,b,t){var h=t(3);g.exports=function(n,s,u,i){void 0===i&&(i=new h);var r=0,o=0;return 0<n&&n<=s*u&&(r=s-1<n?n-(o=Math.floor(n/s))*s:n,i.set(r,o)),i}},function(g,b){g.exports=function(t,h,n){return Math.abs(t-h)<=n}},function(g,b,t){var h=t(37),n=t(67),s=t(359),u=new n,i=new s,r=new h;g.exports=function(o,l,e){return i.setAxisAngle(l,e),u.fromRotationTranslation(i,r.set(0,0,0)),o.transformMat4(u)}},function(g,b){g.exports="addtexture"},function(g,b){g.exports="onerror"},function(g,b){g.exports="onload"},function(g,b){g.exports="ready"},function(g,b){g.exports="removetexture"},function(g,b){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(g,b){g.exports="pipelineafterflush"},function(g,b){g.exports="pipelinebeforeflush"},function(g,b){g.exports="pipelinebind"},function(g,b){g.exports="pipelineboot"},function(g,b){g.exports="pipelinedestroy"},function(g,b){g.exports="pipelinerebind"},function(g,b){g.exports="pipelineresize"},function(g,b){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(g,b,t){g.exports={GenerateTexture:t(382),Palettes:t(885)}},function(g,b,t){g.exports={ARNE16:t(383),C64:t(886),CGA:t(887),JMP:t(888),MSX:t(889)}},function(g,b){g.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(g,b){g.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(g,b){g.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(g,b){g.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(g,b,t){g.exports={Path:t(891),MoveTo:t(387),CubicBezier:t(384),Curve:t(90),Ellipse:t(385),Line:t(386),QuadraticBezier:t(388),Spline:t(389)}},function(g,b,t){var h=t(0),n=t(384),s=t(385),u=t(5),i=t(386),r=t(387),o=t(388),l=t(10),e=t(389),a=t(3),c=t(14),d=new h({initialize:function(f,p){void 0===f&&(f=0),void 0===p&&(p=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new a,this._tmpVec2A=new a,this._tmpVec2B=new a,"object"==typeof f?this.fromJSON(f):this.startPoint.set(f,p)},add:function(f){return this.curves.push(f),this},circleTo:function(f,p,v){return void 0===p&&(p=!1),this.ellipseTo(f,f,0,360,p,v)},closePath:function(){var f=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return f.equals(p)||this.curves.push(new i(p,f)),this},cubicBezierTo:function(f,p,v,m,x,y){var w,T,E=this.getEndPoint(),S=f instanceof a?(w=f,T=p,v):(w=new a(v,m),T=new a(x,y),new a(f,p));return this.add(new n(E,w,T,S))},quadraticBezierTo:function(f,p,v,m){var x,y=this.getEndPoint(),w=f instanceof a?(x=f,p):(x=new a(v,m),new a(f,p));return this.add(new o(y,x,w))},draw:function(f,p){for(var v=0;v<this.curves.length;v++){var m=this.curves[v];m.active&&m.draw(f,p)}return f},ellipseTo:function(f,p,v,m,x,y){var w=new s(0,0,f,p,v,m,x,y),T=this.getEndPoint(this._tmpVec2A),E=w.getStartPoint(this._tmpVec2B);return T.subtract(E),w.x=T.x,w.y=T.y,this.add(w)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var p=0;p<f.curves.length;p++){var v=f.curves[p];switch(v.type){case"LineCurve":this.add(i.fromJSON(v));break;case"EllipseCurve":this.add(s.fromJSON(v));break;case"SplineCurve":this.add(e.fromJSON(v));break;case"CubicBezierCurve":this.add(n.fromJSON(v));break;case"QuadraticBezierCurve":this.add(o.fromJSON(v))}}return this},getBounds:function(f,p){void 0===f&&(f=new l),void 0===p&&(p=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var v=new l,m=c.MIN_SAFE_INTEGER,x=c.MIN_SAFE_INTEGER,y=0;y<this.curves.length;y++){var w=this.curves[y];w.active&&(w.getBounds(v,p),f.x=Math.min(f.x,v.x),f.y=Math.min(f.y,v.y),m=Math.max(m,v.right),x=Math.max(x,v.bottom))}return f.right=m,f.bottom=x,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],p=0,v=0;v<this.curves.length;v++)p+=this.curves[v].getLength(),f.push(p);return this.cacheLengths=f},getEndPoint:function(f){return void 0===f&&(f=new a),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,p){void 0===p&&(p=new a);for(var v=f*this.getLength(),m=this.getCurveLengths(),x=0;x<m.length;){if(m[x]>=v){var y=m[x]-v,w=this.curves[x],T=w.getLength();return w.getPointAt(0===T?0:1-y/T,p)}x++}return null},getPoints:function(f){void 0===f&&(f=12);for(var p,v=[],m=0;m<this.curves.length;m++){var x=this.curves[m];if(x.active)for(var y=x.getResolution(f),w=x.getPoints(y),T=0;T<w.length;T++){var E=w[T];p&&p.equals(E)||(v.push(E),p=E)}}return this.autoClose&&1<v.length&&!v[v.length-1].equals(v[0])&&v.push(v[0]),v},getRandomPoint:function(f){return void 0===f&&(f=new a),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){void 0===f&&(f=40);for(var p=[],v=0;v<=f;v++)p.push(this.getPoint(v/f));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(f){return void 0===f&&(f=new a),f.copy(this.startPoint)},getTangent:function(f,p){void 0===p&&(p=new a);for(var v=f*this.getLength(),m=this.getCurveLengths(),x=0;x<m.length;){if(m[x]>=v){var y=m[x]-v,w=this.curves[x],T=w.getLength();return w.getTangentAt(0===T?0:1-y/T,p)}x++}return null},lineTo:function(f,p){f instanceof a?this._tmpVec2B.copy(f):this._tmpVec2B.set(f,p);var v=this.getEndPoint(this._tmpVec2A);return this.add(new i([v.x,v.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new e(f))},moveTo:function(f,p){return this.add(f instanceof a?new r(f.x,f.y):new r(f,p))},toJSON:function(){for(var f=[],p=0;p<this.curves.length;p++)f.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(f,p){return new d(f,p)}),g.exports=d},function(g,b,t){g.exports={DataManager:t(98),DataManagerPlugin:t(893),Events:t(309)}},function(g,b,t){var h=t(0),n=t(98),s=t(24),u=t(21),i=new h({Extends:n,initialize:function(r){n.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(u.BOOT,this.boot,this),r.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",i,"data"),g.exports=i},function(g,b,t){g.exports={Align:t(895),BaseShader:t(390),Bounds:t(898),Canvas:t(902),Color:t(391),ColorMatrix:t(195),Masks:t(912),RGB:t(197)}},function(g,b,t){var h=t(122),n=t(17)(!1,n={In:t(896),To:t(897)},h);g.exports=n},function(g,b,t){g.exports={BottomCenter:t(284),BottomLeft:t(285),BottomRight:t(286),Center:t(287),LeftCenter:t(289),QuickSet:t(283),RightCenter:t(290),TopCenter:t(291),TopLeft:t(292),TopRight:t(293)}},function(g,b,t){g.exports={BottomCenter:t(271),BottomLeft:t(272),BottomRight:t(273),LeftBottom:t(274),LeftCenter:t(275),LeftTop:t(276),QuickSet:t(270),RightBottom:t(277),RightCenter:t(278),RightTop:t(279),TopCenter:t(280),TopLeft:t(281),TopRight:t(282)}},function(g,b,t){g.exports={CenterOn:t(288),GetBottom:t(40),GetBounds:t(899),GetCenterX:t(84),GetCenterY:t(86),GetLeft:t(41),GetOffsetX:t(900),GetOffsetY:t(901),GetRight:t(42),GetTop:t(43),SetBottom:t(54),SetCenterX:t(85),SetCenterY:t(87),SetLeft:t(52),SetRight:t(53),SetTop:t(51)}},function(g,b,t){var h=t(40),n=t(41),s=t(42),u=t(43);g.exports=function(i,r){void 0===r&&(r={});var o=n(i),l=u(i);return r.x=o,r.y=l,r.width=s(i)-o,r.height=h(i)-l,r}},function(g,b){g.exports=function(t){return t.width*t.originX}},function(g,b){g.exports=function(t){return t.height*t.originY}},function(g,b,t){g.exports={CanvasInterpolation:t(361),CanvasPool:t(31),Smoothing:t(189),TouchAction:t(903),UserSelect:t(904)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h="none"),t.style.msTouchAction=h,t.style["ms-touch-action"]=h,t.style["touch-action"]=h,t}},function(g,b){g.exports=function(t,h){return void 0===h&&(h="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(n){t.style[n+"user-select"]=h}),t.style["-webkit-touch-callout"]=h,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(g,b,t){var h=t(100);g.exports=function(n){void 0===n&&(n=1024);var s=[],u=255,i=0,r=0;for(a=0;a<=255;a++)s.push({r:u,g:a,b:r,color:h(u,a,r)});for(a=i=255;0<=a;a--)s.push({r:a,g:i,b:r,color:h(a,i,r)});for(a=u=0;a<=255;a++,i--)s.push({r:u,g:i,b:a,color:h(u,i,a)});for(r=255,a=i=0;a<=255;a++,r--,u++)s.push({r:u,g:i,b:r,color:h(u,i,r)});if(1024===n)return s;for(var o=[],l=0,e=1024/n,a=0;a<n;a++)o.push(s[Math.floor(l)]),l+=e;return o}},function(g,b){g.exports=function(t){var h={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return 16777215<t&&(h.a=t>>>24),h}},function(g,b,t){var h=t(36),n=t(393);g.exports=function(s,u,i){var r,o,l=i,e=i,a=i;return 0!==u&&(l=n(o=2*i-(r=i<.5?i*(1+u):i+u-i*u),r,s+1/3),e=n(o,r,s),a=n(o,r,s-1/3)),(new h).setGLTo(l,e,a,1)}},function(g,b,t){var h=t(185);g.exports=function(n,s){void 0===n&&(n=1),void 0===s&&(s=1);for(var u=[],i=0;i<=359;i++)u.push(h(i/359,n,s));return u}},function(g,b,t){function h(s,u,i,r,o,l,e,a){void 0===e&&(e=100),void 0===a&&(a=0);var c=a/e;return{r:n(s,r,c),g:n(u,o,c),b:n(i,l,c)}}var n=t(133);g.exports={RGBWithRGB:h,ColorWithRGB:function(s,u,i,r,o,l){return void 0===o&&(o=100),void 0===l&&(l=0),h(s.r,s.g,s.b,u,i,r,o,l)},ColorWithColor:function(s,u,i,r){return void 0===i&&(i=100),void 0===r&&(r=0),h(s.r,s.g,s.b,u.r,u.g,u.b,i,r)}}},function(g,b,t){var h=t(192),n=t(36);g.exports=function(s,u){return void 0===s&&(s=0),void 0===u&&(u=255),new n(h(s,u),h(s,u),h(s,u))}},function(g,b,t){var h=t(392);g.exports=function(n,s,u,i,r){return void 0===i&&(i=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(n<<16)+(s<<8)+u).toString(16).slice(1):"0x"+h(i)+h(n)+h(s)+h(u)}},function(g,b,t){g.exports={BitmapMask:t(304),GeometryMask:t(305)}},function(g,b,t){var h={AddToDOM:t(140),DOMContentLoaded:t(394),GetInnerHeight:t(395),GetScreenOrientation:t(396),GetTarget:t(401),ParseXML:t(402),RemoveFromDOM:t(199),RequestAnimationFrame:t(380)};g.exports=h},function(g,b,t){g.exports={EventEmitter:t(915)}},function(g,b,t){var h=t(0),n=t(9),s=t(24),u=new h({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",u,"events"),g.exports=u},function(g,b,t){var h=t(140),n=t(315),s=t(319),u=t(31),i=t(0),r=t(340),o=t(917),l=t(360),e=t(98),a=t(378),c=t(341),d=t(394),f=t(9),p=t(22),v=t(403),m=t(24),x=t(408),y=t(409),w=t(411),T=t(103),E=t(416),S=t(379),A=t(381),_=t(420),C=new i({initialize:function(M){this.config=new r(M),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new n(this),this.textures=new E(this),this.cache=new s(this),this.registry=new e(this),this.input=new v(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=c,this.scale=new y(this,this.config),this.sound=null,this.sound=_.create(this),this.loop=new S(this,this.config.fps),this.plugins=new x(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){m.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),l(this),o(this),a(this),h(this.canvas,this.config.parent),this.textures.once(T.READY,this.texturesReady,this),this.events.emit(p.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.loop.start(this.renderer?this.step.bind(this):this.headlessStep.bind(this)),A(this);var M=this.events;M.on(p.HIDDEN,this.onHidden,this),M.on(p.VISIBLE,this.onVisible,this),M.on(p.BLUR,this.onBlur,this),M.on(p.FOCUS,this.onFocus,this)},step:function(M,R){if(this.pendingDestroy)return this.runDestroy();var L=this.events;L.emit(p.PRE_STEP,M,R),L.emit(p.STEP,M,R),this.scene.update(M,R),L.emit(p.POST_STEP,M,R);var D=this.renderer;D.preRender(),L.emit(p.PRE_RENDER,D,M,R),this.scene.render(D),D.postRender(),L.emit(p.POST_RENDER,D,M,R)},headlessStep:function(M,R){if(this.pendingDestroy)return this.runDestroy();var L=this.events;L.emit(p.PRE_STEP,M,R),L.emit(p.STEP,M,R),this.scene.update(M,R),L.emit(p.POST_STEP,M,R),L.emit(p.PRE_RENDER),L.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(M,R){void 0===R&&(R=!1),this.pendingDestroy=!0,this.removeCanvas=M,this.noReturn=R},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});g.exports=C},function(g,b,t){var h=t(140);g.exports=function(n){var s,u=n.config;u.parent&&u.domCreateContainer&&((s=document.createElement("div")).style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=s,h(s,u.parent))}},function(g,b){g.exports="boot"},function(g,b){g.exports="destroy"},function(g,b){g.exports="dragend"},function(g,b){g.exports="dragenter"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragleave"},function(g,b){g.exports="dragover"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="drop"},function(g,b){g.exports="gameout"},function(g,b){g.exports="gameover"},function(g,b){g.exports="gameobjectdown"},function(g,b){g.exports="dragend"},function(g,b){g.exports="dragenter"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragleave"},function(g,b){g.exports="dragover"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="drop"},function(g,b){g.exports="gameobjectmove"},function(g,b){g.exports="gameobjectout"},function(g,b){g.exports="gameobjectover"},function(g,b){g.exports="pointerdown"},function(g,b){g.exports="pointermove"},function(g,b){g.exports="pointerout"},function(g,b){g.exports="pointerover"},function(g,b){g.exports="pointerup"},function(g,b){g.exports="wheel"},function(g,b){g.exports="gameobjectup"},function(g,b){g.exports="gameobjectwheel"},function(g,b){g.exports="boot"},function(g,b){g.exports="process"},function(g,b){g.exports="update"},function(g,b){g.exports="pointerdown"},function(g,b){g.exports="pointerdownoutside"},function(g,b){g.exports="pointermove"},function(g,b){g.exports="pointerout"},function(g,b){g.exports="pointerover"},function(g,b){g.exports="pointerup"},function(g,b){g.exports="pointerupoutside"},function(g,b){g.exports="wheel"},function(g,b){g.exports="pointerlockchange"},function(g,b){g.exports="preupdate"},function(g,b){g.exports="shutdown"},function(g,b){g.exports="start"},function(g,b){g.exports="update"},function(g,b){g.exports="addfile"},function(g,b){g.exports="complete"},function(g,b){g.exports="filecomplete"},function(g,b){g.exports="filecomplete-"},function(g,b){g.exports="loaderror"},function(g,b){g.exports="load"},function(g,b){g.exports="fileprogress"},function(g,b){g.exports="postprocess"},function(g,b){g.exports="progress"},function(g,b){g.exports="start"},function(g,b,t){g.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(g,b){g.exports=function(t,h,n){if(n.getElementsByTagName("TextureAtlas")){var s=t.source[h];t.add("__BASE",h,0,0,s.width,s.height);for(var u=n.getElementsByTagName("SubTexture"),i=0;i<u.length;i++){var r,o,l,e,a=u[i].attributes,c=a.name.value,d=parseInt(a.x.value,10),f=parseInt(a.y.value,10),p=parseInt(a.width.value,10),v=parseInt(a.height.value,10),m=t.add(c,h,d,f,p,v);a.frameX&&(r=Math.abs(parseInt(a.frameX.value,10)),o=Math.abs(parseInt(a.frameY.value,10)),l=parseInt(a.frameWidth.value,10),e=parseInt(a.frameHeight.value,10),m.setTrim(p,v,r,o,l,e))}return t}console.warn("Invalid Texture Atlas XML given")}},function(g,b){g.exports=function(t,h){var n=t.source[h];return t.add("__BASE",h,0,0,n.width,n.height),t}},function(g,b){g.exports=function(t,h){var n=t.source[h];return t.add("__BASE",h,0,0,n.width,n.height),t}},function(g,b,t){var h=t(77);g.exports=function(n,s,u){if(u.frames||u.textures){var i=n.source[s];n.add("__BASE",s,0,0,i.width,i.height);for(var r=Array.isArray(u.textures)?u.textures[s].frames:u.frames,o=0;o<r.length;o++){var l=r[o],e=n.add(l.filename,s,l.frame.x,l.frame.y,l.frame.w,l.frame.h);l.trimmed&&e.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(e.rotated=!0,e.updateUVsInverted());var a=l.anchor||l.pivot;a&&(e.customPivot=!0,e.pivotX=a.x,e.pivotY=a.y),e.customData=h(l)}for(var c in u)"frames"!==c&&(n.customData[c]=Array.isArray(u[c])?u[c].slice(0):u[c]);return n}console.warn("Invalid Texture Atlas JSON Array")}},function(g,b,t){var h=t(77);g.exports=function(n,s,u){if(u.frames){var i=n.source[s];n.add("__BASE",s,0,0,i.width,i.height);var r,o,l,e=u.frames;for(var a in e)e.hasOwnProperty(a)&&(o=n.add(a,s,(r=e[a]).frame.x,r.frame.y,r.frame.w,r.frame.h),r.trimmed&&o.setTrim(r.sourceSize.w,r.sourceSize.h,r.spriteSourceSize.x,r.spriteSourceSize.y,r.spriteSourceSize.w,r.spriteSourceSize.h),r.rotated&&(o.rotated=!0,o.updateUVsInverted()),(l=r.anchor||r.pivot)&&(o.customPivot=!0,o.pivotX=l.x,o.pivotY=l.y),o.customData=h(r));for(var c in u)"frames"!==c&&(n.customData[c]=Array.isArray(u[c])?u[c].slice(0):u[c]);return n}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(g,b,t){var h=t(2);g.exports=function(n,s,u,i,r,o,l){var e=h(l,"frameWidth",null),a=h(l,"frameHeight",e);if(null===e)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=n.source[s];n.add("__BASE",s,0,0,c.width,c.height);var d=h(l,"startFrame",0),f=h(l,"endFrame",-1),p=h(l,"margin",0),v=h(l,"spacing",0),m=Math.floor((r-p+v)/(e+v))*Math.floor((o-p+v)/(a+v));0===m&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(m<d||d<-m)&&(d=0),d<0&&(d=m+d),-1!==f&&(m=d+(f+1));for(var x=p,y=p,w=0,T=0,E=0;E<m;E++){T=w=0;var S=x+e,A=y+a;r<S&&(w=S-r),o<A&&(T=A-o),n.add(E,s,u+x,i+y,e-w,a-T),r<(x+=e+v)+e&&(x=p,y+=a+v)}return n}},function(g,b,t){var h=t(2);g.exports=function(n,s,u){var i=h(u,"frameWidth",null),r=h(u,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=n.source[0];n.add("__BASE",0,0,0,o.width,o.height);var l=h(u,"startFrame",0),e=h(u,"endFrame",-1),a=h(u,"margin",0),c=h(u,"spacing",0),d=s.cutX,f=s.cutY,p=s.cutWidth,v=s.cutHeight,m=s.realWidth,x=s.realHeight,y=Math.floor((m-a+c)/(i+c)),w=Math.floor((x-a+c)/(r+c)),T=y*w,E=s.x,S=i-E,A=i-(m-p-E),_=s.y,C=r-_,M=r-(x-v-_);(T<l||l<-T)&&(l=0),l<0&&(l=T+l),-1!==e&&(T=l+(e+1));for(var R=a,L=a,D=0,F=s.sourceIndex,U=0;U<w;U++){for(var P=0===U,O=U===w-1,B=0;B<y;B++){var k,I,N,Y,X,W,G=0===B,z=B===y-1,V=n.add(D,F,d+R,f+L,i,r);(G||P||z||O)&&(k=G?E:0,I=P?_:0,Y=N=0,G&&(N+=i-S),z&&(N+=i-A),P&&(Y+=r-C),O&&(Y+=r-M),W=r-Y,V.cutWidth=X=i-N,V.cutHeight=W,V.setTrim(i,r,k,I,X,W)),R+=c,R+=G?S:z?A:i,D++}R=a,L+=c,L+=P?C:O?M:r}return n}},function(g,b){function t(n,s,u,i){n.add(u,s,i.x,h-i.y-i.height,i.width,i.height)}var h=0;g.exports=function(n,s,u){var i=n.source[s];n.add("__BASE",s,0,0,i.width,i.height),h=i.height;for(var r=u.split("\n"),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",e="",a={x:0,y:0,width:0,height:0},c=0;c<r.length;c++){var d=r[c].match(o);if(d){var p=d[2],v=d[3];if("- "===d[1]&&(e!==l&&(t(n,s,e,a),l=e),a={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":a[p]=parseInt(v,10)}else e=v}}return e!==l&&t(n,s,e,a),n}},function(g,b){g.exports="complete"},function(g,b){g.exports="decoded"},function(g,b){g.exports="decodedall"},function(g,b){g.exports="destroy"},function(g,b){g.exports="detune"},function(g,b){g.exports="detune"},function(g,b){g.exports="mute"},function(g,b){g.exports="rate"},function(g,b){g.exports="volume"},function(g,b){g.exports="loop"},function(g,b){g.exports="looped"},function(g,b){g.exports="mute"},function(g,b){g.exports="pan"},function(g,b){g.exports="pauseall"},function(g,b){g.exports="pause"},function(g,b){g.exports="play"},function(g,b){g.exports="rate"},function(g,b){g.exports="resumeall"},function(g,b){g.exports="resume"},function(g,b){g.exports="seek"},function(g,b){g.exports="stopall"},function(g,b){g.exports="stop"},function(g,b){g.exports="unlocked"},function(g,b){g.exports="volume"},function(g,b,t){var h={Events:t(75),DisplayList:t(1008),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1034),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(433),GameObject:t(15),BitmapText:t(147),Blitter:t(210),Bob:t(434),Container:t(211),DOMElement:t(436),DynamicBitmapText:t(212),Extern:t(438),Graphics:t(213),Group:t(110),Image:t(124),Layer:t(216),Particles:t(1068),PathFollower:t(451),RenderTexture:t(218),RetroFont:t(1076),Rope:t(220),Sprite:t(73),Text:t(221),GetTextSize:t(452),MeasureText:t(454),TextStyle:t(453),TileSprite:t(222),Zone:t(127),Video:t(223),Shape:t(32),Arc:t(455),Curve:t(456),Ellipse:t(457),Grid:t(458),IsoBox:t(459),IsoTriangle:t(460),Line:t(461),Polygon:t(462),Rectangle:t(467),Star:t(468),Triangle:t(469),Factories:{Blitter:t(1124),Container:t(1125),DOMElement:t(1126),DynamicBitmapText:t(1127),Extern:t(1128),Graphics:t(1129),Group:t(1130),Image:t(1131),Layer:t(1132),Particles:t(1133),PathFollower:t(1134),RenderTexture:t(1135),Rope:t(1136),Sprite:t(1137),StaticBitmapText:t(1138),Text:t(1139),TileSprite:t(1140),Zone:t(1141),Video:t(1142),Arc:t(1143),Curve:t(1144),Ellipse:t(1145),Grid:t(1146),IsoBox:t(1147),IsoTriangle:t(1148),Line:t(1149),Polygon:t(1150),Rectangle:t(1151),Star:t(1152),Triangle:t(1153)},Creators:{Blitter:t(1154),Container:t(1155),DynamicBitmapText:t(1156),Graphics:t(1157),Group:t(1158),Image:t(1159),Layer:t(1160),Particles:t(1161),RenderTexture:t(1162),Rope:t(1163),Sprite:t(1164),StaticBitmapText:t(1165),Text:t(1166),TileSprite:t(1167),Zone:t(1168),Video:t(1169)}};h.Shader=t(226),h.Mesh=t(227),h.PointLight=t(149),h.Factories.Shader=t(1178),h.Factories.Mesh=t(1179),h.Factories.PointLight=t(1180),h.Creators.Shader=t(1181),h.Creators.Mesh=t(1182),h.Creators.PointLight=t(1183),h.Light=t(475),h.LightsManager=t(476),h.LightsPlugin=t(1184),g.exports=h},function(g,b,t){var h=t(0),n=t(107),s=t(24),u=t(75),i=t(21),r=t(79),o=new h({Extends:n,initialize:function(l){n.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(i.BOOT,this.boot,this),this.events.on(i.START,this.start,this)},boot:function(){this.events.once(i.DESTROY,this.destroy,this)},addChildCallback:function(l){l.emit(u.ADDED_TO_SCENE,l,this.scene),l.displayList&&l.displayList.remove(l),(l.displayList=this).queueDepthSort(),this.events.emit(i.ADDED_TO_SCENE,l,this.scene)},removeChildCallback:function(l){l.emit(u.REMOVED_FROM_SCENE,l,this.scene),l.displayList=null,this.queueDepthSort(),this.events.emit(i.REMOVED_FROM_SCENE,l,this.scene)},start:function(){this.events.once(i.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(l,e){return l._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var l=this.list,e=l.length;e--;)l[e].destroy(!0);l.length=0,this.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(i.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",o,"displayList"),g.exports=o},function(g,b,t){g.exports={CheckMatrix:t(206),MatrixToString:t(1010),ReverseColumns:t(1011),ReverseRows:t(1012),Rotate180:t(1013),RotateLeft:t(1014),RotateMatrix:t(146),RotateRight:t(1015),Translate:t(1016),TransposeMatrix:t(429)}},function(g,b,t){var h=t(183),n=t(206);g.exports=function(s){var u="";if(!n(s))return u;for(var i=0;i<s.length;i++){for(var r=0;r<s[i].length;r++){var o=s[i][r].toString();u+="undefined"!==o?h(o,2):"?",r<s[i].length-1&&(u+=" |")}if(i<s.length-1){u+="\n";for(var l=0;l<s[i].length;l++)u+="---",l<s[i].length-1&&(u+="+");u+="\n"}}return u}},function(g,b){g.exports=function(t){return t.reverse()}},function(g,b){g.exports=function(t){for(var h=0;h<t.length;h++)t[h].reverse();return t}},function(g,b,t){var h=t(146);g.exports=function(n){return h(n,180)}},function(g,b,t){var h=t(146);g.exports=function(n){return h(n,90)}},function(g,b,t){var h=t(146);g.exports=function(n){return h(n,-90)}},function(g,b,t){var h=t(175),n=t(176);g.exports=function(s,u,i){if(void 0===u&&(u=0),void 0===i&&(i=0),0!==i&&(i<0?h(s,Math.abs(i)):n(s,i)),0!==u)for(var r=0;r<s.length;r++){var o=s[r];u<0?h(o,Math.abs(u)):n(o,u)}return s}},function(g,b){g.exports=function(t,h,n,s,u){if(void 0===u&&(u=t),0<n){var i=n-t.length;if(i<=0)return null}if(!Array.isArray(h))return-1===t.indexOf(h)?(t.push(h),s&&s.call(u,h),h):null;for(var r=h.length-1;0<=r;)-1!==t.indexOf(h[r])&&h.splice(r,1),r--;if(0===(r=h.length))return null;0<n&&i<r&&(h.splice(i),r=i);for(var o=0;o<r;o++){var l=h[o];t.push(l),s&&s.call(u,l)}return h}},function(g,b){g.exports=function(t,h,n,s,u,i){if(void 0===n&&(n=0),void 0===i&&(i=t),0<s){var r=s-t.length;if(r<=0)return null}if(!Array.isArray(h))return-1===t.indexOf(h)?(t.splice(n,0,h),u&&u.call(i,h),h):null;for(var o=h.length-1;0<=o;)-1!==t.indexOf(h[o])&&h.pop(),o--;if(0===(o=h.length))return null;0<s&&r<o&&(h.splice(r),o=r);for(var l=o-1;0<=l;l--){var e=h[l];t.splice(n,0,e),u&&u.call(i,e)}return h}},function(g,b){g.exports=function(t,h){var n=t.indexOf(h);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(h)),h}},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){void 0===i&&(i=0),void 0===r&&(r=n.length);var o=0;if(h(n,i,r))for(var l=i;l<r;l++)n[l][s]===u&&o++;return o}},function(g,b){g.exports=function(t,h,n){for(var s=[null],u=3;u<arguments.length;u++)s.push(arguments[u]);for(u=0;u<t.length;u++)s[0]=t[u],h.apply(n,s);return t}},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=n.length),h(n,i,r)){for(var o=[null],l=5;l<arguments.length;l++)o.push(arguments[l]);for(l=i;l<r;l++)o[0]=n[l],s.apply(u,o)}return n}},function(g,b){g.exports=function(t,h){var n,s,u=t.indexOf(h);return 0<u&&(s=t.indexOf(n=t[u-1]),t[u]=n,t[s]=h),t}},function(g,b){g.exports=function(t,h,n){var s=t.indexOf(h);if(-1===s||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return s!==n&&(t.splice(s,1),t.splice(n,0,h)),h}},function(g,b){g.exports=function(t,h){var n,s,u=t.indexOf(h);return-1!==u&&u<t.length-1&&(s=t.indexOf(n=t[u+1]),t[u]=n,t[s]=h),t}},function(g,b,t){var h=t(357);g.exports=function(n,s,u){void 0===n&&(n=0),void 0===s&&(s=null),void 0===u&&(u=1),null===s&&(s=n,n=0);for(var i=[],r=Math.max(h((s-n)/(u||1)),0),o=0;o<r;o++)i.push(n),n+=u;return i}},function(g,b,t){var h=t(74);g.exports=function(n,s,u,i){if(void 0===i&&(i=n),s<0||s>n.length-1)throw new Error("Index out of bounds");var r=h(n,s);return u&&u.call(i,r),r}},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){if(void 0===s&&(s=0),void 0===u&&(u=n.length),void 0===r&&(r=n),h(n,s,u)){var l=n.splice(s,u-s);if(i)for(var e=0;e<l.length;e++)i.call(r,l[e]);return l}return[]}},function(g,b,t){var h=t(74);g.exports=function(n,s,u){void 0===s&&(s=0),void 0===u&&(u=n.length);var i=s+Math.floor(Math.random()*u);return h(n,i)}},function(g,b){g.exports=function(t,h,n){var s=t.indexOf(h),u=t.indexOf(n);return-1!==s&&-1===u&&(t[s]=n,!0)}},function(g,b){g.exports=function(t,h){var n=t.indexOf(h);return-1!==n&&0<n&&(t.splice(n,1),t.unshift(h)),h}},function(g,b,t){var h=t(78);g.exports=function(n,s,u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=n.length),h(n,i,r))for(var o=i;o<r;o++){var l=n[o];l.hasOwnProperty(s)&&(l[s]=u)}return n}},function(g,b){g.exports=function(t,h,n){if(h!==n){var s=t.indexOf(h),u=t.indexOf(n);if(s<0||u<0)throw new Error("Supplied items must be elements of the same array");return t[s]=n,t[u]=h,t}}},function(g,b,t){var h=t(0),n=t(208),s=t(24),u=t(21),i=new h({Extends:n,initialize:function(r){n.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(u.BOOT,this.boot,this),r.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(u.PRE_UPDATE,this.update,this),r.on(u.UPDATE,this.sceneUpdate,this),r.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,o){for(var l=this._active,e=l.length,a=0;a<e;a++){var c=l[a];c.active&&c.preUpdate.call(c,r,o)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(u.PRE_UPDATE,this.preUpdate,this),o.off(u.UPDATE,this.sceneUpdate,this),o.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",i,"updateList"),g.exports=i},function(g,b){g.exports="add"},function(g,b){g.exports="remove"},function(g,b){g.exports=function(t,h,n,s){if(void 0===n&&(n=!1),void 0===s)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var u,i,r,l=t.text,e=l.length,a=t.maxWidth,c=t.wordWrapCharCode,d=Number.MAX_VALUE,f=Number.MAX_VALUE,p=0,v=0,m=t.fontData.chars,x=t.fontData.lineHeight,y=t.letterSpacing,w=0,T=0,E=0,S=null,A=t._align,_=0,C=t.fontSize/t.fontData.size,M=C*t.scaleX,R=C*t.scaleY,L=null,D=0,F=[],U=Number.MAX_VALUE,P=0,O=0,B=0,k=[],I=[],N=null;if(0<a){for(W=0;W<e;W++)10!==(E=l.charCodeAt(W))?(S=m[E])&&(null!==L&&(u=S.kerning[D]),E===c?null!==N&&(k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R,cr:!1}),N=null):(null===N&&(N={word:"",i:W,x:w,y:T,w:0,h:x,cr:!1}),N.word=N.word.concat(l[W]),N.w+=S.xOffset+S.xAdvance+(void 0!==u?u:0)),w+=S.xAdvance+y,L=S,D=E):(null!==N&&(k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R,cr:!0}),N=null),w=0,T+=x,L=null);null!==N&&k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R,cr:!1}),L=null;for(var Y=D=T=w=0,X=[],W=0;W<k.length;W++){var G,z=k[W],V=z.x;G&&(Y=V-(V-(G.x+G.w)+G.w),G=null),a<V-Y||a<z.x+z.w-Y?(X.push(z.i-1),G=z.cr?(X.push(z.i+z.word.length),Y=0,null):z):z.cr&&(X.push(z.i+z.word.length),Y=0,G=null)}for(W=X.length-1;0<=W;W--)l=(i=l).substr(0,r=X[W])+"\n"+i.substr(r+1);e=(s.wrappedText=l).length,k=[],N=null}var j,K,Q,Z,J=0;for(W=0;W<e;W++)10!==(E=l.charCodeAt(W))?(S=m[E])&&(_=w,null!==L&&(_+=void 0!==(j=S.kerning[D])?j:0),_<d&&(d=_),T<f&&(f=T),p<(K=_+S.xAdvance)&&(p=K),v<(Q=T+x)&&(v=Q),Z=S.xOffset+S.xAdvance+(void 0!==j?j:0),E===c?null!==N&&(k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R}),N=null):(null===N&&(N={word:"",i:J,x:w,y:T,w:0,h:x}),N.word=N.word.concat(l[W]),N.w+=Z),I.push({i:J,char:l[W],code:E,x:(S.xOffset+w)*C,y:(S.yOffset+T)*C,w:S.width*C,h:S.height*C,t:T*C,r:K*C,b:x*C,line:O,glyph:S}),w+=S.xAdvance+y,L=S,D=E,B=K*C,J++):(null!==N&&(k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R}),N=null),w=0,T+=x,L=null,P<(F[O]=B)&&(P=B),B<U&&(U=B),O++,B=0);if(null!==N&&k.push({word:N.word,i:N.i,x:N.x*M,y:N.y*R,w:N.w*M,h:N.h*R}),P<(F[O]=B)&&(P=B),B<U&&(U=B),0<A)for(var q=0;q<I.length;q++){var tt,st,ot=I[q];1===A?(ot.x+=tt=(P-F[ot.line])/2,ot.r+=tt):2===A&&(ot.x+=st=P-F[ot.line],ot.r+=st)}var et=s.local,$=s.global,it=s.lines;return et.x=d*C,et.y=f*C,et.width=p*C,et.height=v*C,$.x=t.x-t._displayOriginX+d*M,$.y=t.y-t._displayOriginY+f*R,$.width=p*M,$.height=v*R,it.shortest=U,it.longest=P,it.lengths=F,h&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),$.x=Math.ceil($.x),$.y=Math.ceil($.y),$.width=Math.ceil($.width),$.height=Math.ceil($.height),it.shortest=Math.ceil(U),it.longest=Math.ceil(P)),n&&(t._displayOriginX=t.originX*et.width,t._displayOriginY=t.originY*et.height,$.x=t.x-t._displayOriginX*t.scaleX,$.y=t.y-t._displayOriginY*t.scaleY,h&&($.x=Math.ceil($.x),$.y=Math.ceil($.y))),s.words=k,s.characters=I,s.lines.height=x,s.scale=C,s.scaleX=t.scaleX,s.scaleY=t.scaleY,s}},function(g,b,t){var h=t(209);g.exports=function(n,s,u,i,r,o,l){var e=n.sys.textures.get(u),a=e.get(i),c=n.sys.cache.xml.get(r);if(a&&c){var d=h(c,a,o,l,e);return n.sys.cache.bitmapFont.add(s,{data:d,texture:u,frame:i}),!0}return!1}},function(g,b,t){var h=t(1),n=t(1);h=t(1040),n=t(1042),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(1041),n=t(19),s=t(12);g.exports=function(u,i,r,o){if(0!==i._text.length){var l,e=u.pipelines.set(i.pipeline,i),a=n(i,r,o).calc,c=r.roundPixels,d=r.alpha,f=i.charColors,p=i.tintFill,v=s.getTintAppendFloatAlpha,m=v(i.tintTopLeft,d*i._alphaTL),x=v(i.tintTopRight,d*i._alphaTR),y=v(i.tintBottomLeft,d*i._alphaBL),w=v(i.tintBottomRight,d*i._alphaBR),T=i.frame.glTexture,E=e.setGameObject(i),S=i.getTextBounds(!1).characters,A=i.dropShadowX,_=i.dropShadowY,C=0!==A||0!==_;if(u.pipelines.preBatch(i),C)for(var M=i.dropShadowColor,R=i.dropShadowAlpha,L=v(M,d*R*i._alphaTL),D=v(M,d*R*i._alphaTR),F=v(M,d*R*i._alphaBL),U=v(M,d*R*i._alphaBR),P=0;P<S.length;P++)X=(l=S[P]).glyph,32!==l.code&&0!==X.width&&0!==X.height&&h(e,i,l,X,A,_,a,c,L,D,F,U,1,T,E);for(P=0;P<S.length;P++){var O,B,k,I,N,Y,X=(l=S[P]).glyph;32!==l.code&&0!==X.width&&0!==X.height&&(f[l.i]?(B=(O=f[l.i]).tintEffect,k=v(O.tintTL,d*i._alphaTL),I=v(O.tintTR,d*i._alphaTR),N=v(O.tintBL,d*i._alphaBL),Y=v(O.tintBR,d*i._alphaBR),h(e,i,l,X,0,0,a,c,k,I,N,Y,B,T,E)):h(e,i,l,X,0,0,a,c,m,x,y,w,p,T,E))}u.pipelines.postBatch(i)}}},function(g,b){g.exports=function(t,h,n,s,u,i,r,o,l,e,a,c,d,f,p){var v=n.x-h.displayOriginX+u,m=n.y-h.displayOriginY+i,x=v+n.w,y=m+n.h,w=r.getXRound(v,m,o),T=r.getYRound(v,m,o),E=r.getXRound(v,y,o),S=r.getYRound(v,y,o),A=r.getXRound(x,y,o),_=r.getYRound(x,y,o),C=r.getXRound(x,m,o),M=r.getYRound(x,m,o);t.batchQuad(h,w,T,E,S,A,_,C,M,s.u0,s.v0,s.u1,s.v1,l,e,a,c,d,f,p)}},function(g,b,t){var h=t(30);g.exports=function(n,s,u,i){var r=s._text,o=r.length,l=n.currentContext;if(0!==o&&h(n,l,s,u,i)){var e,a=s.frame,c=s.fontData.chars,d=s.fontData.lineHeight,f=s._letterSpacing,p=0,v=0,m=null,x=0,y=0,w=0,T=0,E=0,S=0,A=null,_=0,C=s.frame.source.image,M=a.cutX,R=a.cutY,L=s._fontSize/s.fontData.size,D=s._align,F=0,U=0,P=s.getTextBounds(!1);0<s.maxWidth&&(o=(r=P.wrappedText).length);var O=s._bounds.lines;1===D?U=(O.longest-O.lengths[0])/2:2===D&&(U=O.longest-O.lengths[0]),l.translate(-s.displayOriginX,-s.displayOriginY);for(var B,k=u.roundPixels,I=0;I<o;I++)10!==(e=r.charCodeAt(I))?(m=c[e])&&(x=M+m.x,y=R+m.y,T=m.height,E=m.xOffset+p,S=m.yOffset+v,null!==A&&(E+=void 0!==(B=m.kerning[_])?B:0),E*=L,S*=L,E+=U,p+=m.xAdvance+f,A=m,_=e,0!==(w=m.width)&&0!==T&&32!==e&&(k&&(E=Math.round(E),S=Math.round(S)),l.save(),l.translate(E,S),l.scale(L,L),l.drawImage(C,x,y,w,T,0,0,w,T),l.restore())):(F++,1===D?U=(O.longest-O.lengths[F])/2:2===D&&(U=O.longest-O.lengths[F]),p=0,v+=d,A=null);l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1044),n=t(1045),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(25),n=t(12),s=new h;g.exports=function(u,i,r,o){var l=i.getRenderList();if(0!==l.length){var e=u.pipelines.set(this.pipeline,i),a=r.scrollX*i.scrollFactorX,c=r.scrollY*i.scrollFactorY,d=s.copyFrom(r.matrix);o&&(d.multiplyWithOffset(o,-a,-c),c=a=0);var f=i.x-a,p=i.y-c,v=-1,m=r.alpha*i.alpha,x=r.roundPixels;u.pipelines.preBatch(i);for(var y=0;y<l.length;y++){var w,T,E,S,A,_,C,M,R,L,D,F,U=l[y],P=U.frame,O=U.alpha*m;0!=O&&(w=P.width,T=P.height,E=f+U.x+P.x,S=p+U.y+P.y,U.flipX&&(w*=-1,E+=P.width),U.flipY&&(T*=-1,S+=P.height),A=E+w,_=S+T,C=d.getX(E,S),M=d.getY(E,S),R=d.getX(A,_),L=d.getY(A,_),D=n.getTintAppendFloatAlpha(U.tint,O),P.sourceIndex!==v&&(F=e.setGameObject(i,P),v=P.sourceIndex),x&&(C=Math.round(C),M=Math.round(M),R=Math.round(R),L=Math.round(L)),e.batchQuad(i,C,M,C,L,R,L,R,M,P.u0,P.v0,P.u1,P.v1,D,D,D,D,!1,P.glTexture,F)&&(v=-1))}u.pipelines.postBatch(i)}}},function(g,b){g.exports=function(t,h,n,s){var u=h.getRenderList();if(0!==u.length){var i=t.currentContext,r=n.alpha*h.alpha;if(0!=r){i.globalCompositeOperation=t.blendModes[h.blendMode],i.imageSmoothingEnabled=!(!t.antialias||h.frame.source.scaleMode);var o=h.x-n.scrollX*h.scrollFactorX,l=h.y-n.scrollY*h.scrollFactorY;i.save(),s&&s.copyToContext(i);for(var e=n.roundPixels,a=0;a<u.length;a++){var c=u[a],d=c.flipX||c.flipY,f=c.frame,p=f.canvasData,v=f.x,m=f.y,x=1,y=1,w=c.alpha*r;0!=w&&(i.globalAlpha=w,d?(c.flipX&&(x=-1,v-=p.width),c.flipY&&(y=-1,m-=p.height),i.save(),i.translate(c.x+o,c.y+l),i.scale(x,y),i.drawImage(f.source.image,p.x,p.y,p.width,p.height,v,m,p.width,p.height),i.restore()):(e&&(v=Math.round(v),m=Math.round(m)),i.drawImage(f.source.image,p.x,p.y,p.width,p.height,v+c.x+o,m+c.y+l,p.width,p.height)))}i.restore()}}}},function(g,b,t){var h=t(1),n=t(1);h=t(1047),n=t(1048),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){var u=h.list,i=u.length;if(0!==i){var r=h.localTransform;s?(r.loadIdentity(),r.multiply(s),r.translate(h.x,h.y),r.rotate(h.rotation),r.scale(h.scaleX,h.scaleY)):r.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),t.pipelines.preBatch(h);var o=-1!==h.blendMode;o||t.setBlendMode(0);for(var l=h.alpha,e=h.scrollFactorX,a=h.scrollFactorY,c=0;c<i;c++){var d,f,p,v,m,x,y,w,T=u[c];T.willRender(n)&&(v=void 0!==T.alphaTopLeft?(d=T.alphaTopLeft,f=T.alphaTopRight,p=T.alphaBottomLeft,T.alphaBottomRight):p=f=d=T.alpha,m=T.scrollFactorX,x=T.scrollFactorY,o||T.blendMode===t.currentBlendMode||t.setBlendMode(T.blendMode),(y=T.mask)&&y.preRenderWebGL(t,T,n),(w=T.type)!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=c<i-1&&u[c+1].type===t.currentType,T.setScrollFactor(m*e,x*a),T.setAlpha(d*l,f*l,p*l,v*l),T.renderWebGL(t,T,n,r),T.setAlpha(d,f,p,v),T.setScrollFactor(m,x),y&&y.postRenderWebGL(t,n),t.newType=!1)}t.pipelines.postBatch(h)}}},function(g,b){g.exports=function(t,h,n,s){var u=h.list;if(0!==u.length){var i=h.localTransform;s?(i.loadIdentity(),i.multiply(s),i.translate(h.x,h.y),i.rotate(h.rotation),i.scale(h.scaleX,h.scaleY)):i.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var r=-1!==h.blendMode;r||t.setBlendMode(0);var o=h._alpha,l=h.scrollFactorX,e=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(t,null,n);for(var a=0;a<u.length;a++){var c,d,f,p=u[a];p.willRender(n)&&(c=p.alpha,d=p.scrollFactorX,f=p.scrollFactorY,r||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),p.setScrollFactor(d*l,f*e),p.setAlpha(c*o),p.renderCanvas(t,p,n,i),p.setAlpha(c),p.setScrollFactor(d,f))}h.mask&&h.mask.postRenderCanvas(t)}}},function(g,b,t){var h=t(1),n=t(1);h=t(437),n=t(437),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(g,b,t){var h=t(1),n=t(1);h=t(1052),n=t(1053),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(25),s=t(12),u=new n;g.exports=function(i,r,o,l){var e=r.text,a=e.length;if(0!==a){var c=i.pipelines.set(r.pipeline,r),d=h(r,o,l),f=d.sprite,p=d.calc,v=u,m=0<r.cropWidth||0<r.cropHeight;m&&(c.flush(),i.pushScissor(p.tx,p.ty,r.cropWidth*p.scaleX,r.cropHeight*p.scaleY));var x,y,w,T,E=r.frame.glTexture,S=r.tintFill,A=s.getTintAppendFloatAlpha(r.tintTopLeft,o.alpha*r._alphaTL),_=s.getTintAppendFloatAlpha(r.tintTopRight,o.alpha*r._alphaTR),C=s.getTintAppendFloatAlpha(r.tintBottomLeft,o.alpha*r._alphaBL),M=s.getTintAppendFloatAlpha(r.tintBottomRight,o.alpha*r._alphaBR),R=c.setGameObject(r),L=0,D=0,F=0,U=r.letterSpacing,P=r.scrollX,O=r.scrollY,B=r.fontData,k=B.chars,I=B.lineHeight,N=r.fontSize/B.size,Y=0,X=r._align,W=0,G=0,z=r.getTextBounds(!1);0<r.maxWidth&&(a=(e=z.wrappedText).length);var V=r._bounds.lines;1===X?G=(V.longest-V.lengths[0])/2:2===X&&(G=V.longest-V.lengths[0]);var H=o.roundPixels,j=r.displayCallback,K=r.callbackData;i.pipelines.preBatch(r);for(var Q,Z,J,q,tt,st,ot,et,$,it,rt,ut,at,nt,ct,dt,ht,ft=0;ft<a;ft++)10!==(x=e.charCodeAt(ft))?(ht=k[x])&&(w=ht.height,J=ht.xOffset+L-P,q=ht.yOffset+D-O,null!==T&&(J+=void 0!==(Q=ht.kerning[F])?Q:0),L+=ht.xAdvance+U,T=ht,F=x,0!==(y=ht.width)&&0!==w&&32!==x&&(N=r.fontSize/r.fontData.size,Y=0,j&&(K.color=0,K.tint.topLeft=A,K.tint.topRight=_,K.tint.bottomLeft=C,K.tint.bottomRight=M,K.index=ft,K.charCode=x,K.x=J,K.y=q,K.scale=N,K.rotation=Y,K.data=ht.data,J=(Z=j(K)).x,q=Z.y,N=Z.scale,Y=Z.rotation,M=Z.color?(A=Z.color,_=Z.color,C=Z.color,Z.color):(A=Z.tint.topLeft,_=Z.tint.topRight,C=Z.tint.bottomLeft,Z.tint.bottomRight),A=s.getTintAppendFloatAlpha(A,o.alpha*r._alphaTL),_=s.getTintAppendFloatAlpha(_,o.alpha*r._alphaTR),C=s.getTintAppendFloatAlpha(C,o.alpha*r._alphaBL),M=s.getTintAppendFloatAlpha(M,o.alpha*r._alphaBR)),J*=N,q*=N,J-=r.displayOriginX,v.applyITRS(J+=G,q-=r.displayOriginY,Y,N,N),p.multiply(v,f),tt=ht.u0,st=ht.v0,ot=ht.u1,et=ht.v1,$=f.e,it=f.f,rt=w*f.c+f.e,ut=w*f.d+f.f,at=y*f.a+w*f.c+f.e,nt=y*f.b+w*f.d+f.f,ct=y*f.a+f.e,dt=y*f.b+f.f,H&&($=Math.round($),it=Math.round(it),rt=Math.round(rt),ut=Math.round(ut),at=Math.round(at),nt=Math.round(nt),ct=Math.round(ct),dt=Math.round(dt)),c.batchQuad(r,$,it,rt,ut,at,nt,ct,dt,tt,st,ot,et,A,_,C,M,S,E,R))):(W++,1===X?G=(V.longest-V.lengths[W])/2:2===X&&(G=V.longest-V.lengths[W]),L=0,D+=I,T=null);m&&(c.flush(),i.popScissor()),i.pipelines.postBatch(r)}}},function(g,b,t){var h=t(30);g.exports=function(n,s,u,i){var r=s._text,o=r.length,l=n.currentContext;if(0!==o&&h(n,l,s,u,i)){var e,a=s.frame,c=s.displayCallback,d=s.callbackData,f=s.fontData.chars,p=s.fontData.lineHeight,v=s._letterSpacing,m=0,x=0,y=null,w=0,T=0,E=0,S=0,A=0,_=0,C=null,M=0,R=s.frame.source.image,L=a.cutX,D=a.cutY,F=0,U=0,P=s._fontSize/s.fontData.size,O=s._align,B=0,k=0;s.getTextBounds(!1);var I=s._bounds.lines;1===O?k=(I.longest-I.lengths[0])/2:2===O&&(k=I.longest-I.lengths[0]),l.translate(-s.displayOriginX,-s.displayOriginY);var N=u.roundPixels;0<s.cropWidth&&0<s.cropHeight&&(l.beginPath(),l.rect(0,0,s.cropWidth,s.cropHeight),l.clip());for(var Y,X,W=0;W<o;W++)U=P,F=0,10!==(e=r.charCodeAt(W))?(y=f[e])&&(w=L+y.x,T=D+y.y,E=y.width,S=y.height,A=y.xOffset+m-s.scrollX,_=y.yOffset+x-s.scrollY,null!==C&&(A+=void 0!==(Y=y.kerning[M])?Y:0),c&&(d.index=W,d.charCode=e,d.x=A,d.y=_,d.scale=U,d.rotation=F,d.data=y.data,A=(X=c(d)).x,_=X.y,U=X.scale,F=X.rotation),A*=U,_*=U,A+=k,m+=y.xAdvance+v,C=y,M=e,0!==E&&0!==S&&32!==e&&(N&&(A=Math.round(A),_=Math.round(_)),l.save(),l.translate(A,_),l.rotate(F),l.scale(U,U),l.drawImage(R,w,T,E,S,0,0,E,S),l.restore())):(B++,1===O?k=(I.longest-I.lengths[B])/2:2===O&&(k=I.longest-I.lengths[B]),m=0,x+=p,C=null);l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1055),n=t(1056),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,u,i){n.pipelines.clear();var r=h(s,u,i).calc;s.render.call(s,n,u,r),n.pipelines.rebind()}},function(g,b){},function(g,b,t){var h=t(1),n=t(1);h=t(1058),t(442),n=t(442),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){function h(e,a,c){this.x=e,this.y=a,this.width=c}function n(e,a,c){this.points=[],this.pointsLength=1,this.points[0]=new h(e,a,c)}var s=t(214),u=t(19),i=t(25),r=t(12),o=[],l=new i;g.exports=function(e,a,c,d){if(0!==a.commandBuffer.length){var f=e.pipelines.set(a.pipeline,a);e.pipelines.preBatch(a);for(var p=u(a,c,d).calc,v=l.loadIdentity(),m=a.commandBuffer,x=c.alpha*a.alpha,y=1,w=f.fillTint,T=f.strokeTint,E=0,S=0,A=0,_=2*Math.PI,C=[],M=0,R=!0,L=null,D=r.getTintAppendFloatAlpha,F=0;F<m.length;F++)switch(m[F]){case s.BEGIN_PATH:C.length=0,R=!(L=null);break;case s.CLOSE_PATH:R=!1,L&&L.points.length&&L.points.push(L.points[0]);break;case s.FILL_PATH:for(M=0;M<C.length;M++)f.batchFillPath(C[M].points,v,p);break;case s.STROKE_PATH:for(M=0;M<C.length;M++)f.batchStrokePath(C[M].points,y,R,v,p);break;case s.LINE_STYLE:y=m[++F];var U=D(m[++F],m[++F]*x);T.TL=U,T.TR=U,T.BL=U,T.BR=U;break;case s.FILL_STYLE:var P=D(m[++F],m[++F]*x);w.TL=P,w.TR=P,w.BL=P,w.BR=P;break;case s.GRADIENT_FILL_STYLE:var O=m[++F]*x,B=m[++F]*x,k=m[++F]*x,I=m[++F]*x;w.TL=D(m[++F],O),w.TR=D(m[++F],B),w.BL=D(m[++F],k),w.BR=D(m[++F],I);break;case s.GRADIENT_LINE_STYLE:y=m[++F];var N=m[++F]*x;T.TL=D(m[++F],N),T.TR=D(m[++F],N),T.BL=D(m[++F],N),T.BR=D(m[++F],N);break;case s.ARC:var Y=0,X=m[++F],W=m[++F],G=m[++F],z=m[++F],V=m[++F],H=m[++F],j=m[++F];for(V-=z,H?V<-_?V=-_:0<V&&(V=V%_-_):_<V?V=_:V<0&&(V=_+V%_),null===L&&(L=new n(X+Math.cos(z)*G,W+Math.sin(z)*G,y),C.push(L),Y+=.01);Y<1+j;)A=V*Y+z,E=X+Math.cos(A)*G,S=W+Math.sin(A)*G,L.points.push(new h(E,S,y)),Y+=.01;A=V+z,E=X+Math.cos(A)*G,S=W+Math.sin(A)*G,L.points.push(new h(E,S,y));break;case s.FILL_RECT:f.batchFillRect(m[++F],m[++F],m[++F],m[++F],v,p);break;case s.FILL_TRIANGLE:f.batchFillTriangle(m[++F],m[++F],m[++F],m[++F],m[++F],m[++F],v,p);break;case s.STROKE_TRIANGLE:f.batchStrokeTriangle(m[++F],m[++F],m[++F],m[++F],m[++F],m[++F],y,v,p);break;case s.LINE_TO:null!==L?L.points.push(new h(m[++F],m[++F],y)):(L=new n(m[++F],m[++F],y),C.push(L));break;case s.MOVE_TO:L=new n(m[++F],m[++F],y),C.push(L);break;case s.SAVE:o.push(v.copyToArray());break;case s.RESTORE:v.copyFromArray(o.pop());break;case s.TRANSLATE:X=m[++F],W=m[++F],v.translate(X,W);break;case s.SCALE:X=m[++F],W=m[++F],v.scale(X,W);break;case s.ROTATE:v.rotate(m[++F])}e.pipelines.postBatch(a)}}},function(g,b,t){var h=t(1),n=t(1);h=t(1060),n=t(1061),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){h.pipeline.batchSprite(h,n,s)}},function(g,b){g.exports=function(t,h,n,s){t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1063),n=t(1064),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){this.pipeline.batchSprite(h,n,s)}},function(g,b){g.exports=function(t,h,n,s){t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1066),n=t(1067),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n){var s=h.list,u=s.length;if(0!==u){h.depthSort(),t.pipelines.preBatch(h);var i=-1!==h.blendMode;i||t.setBlendMode(0);for(var r=h.alpha,o=0;o<u;o++){var l,e,a,c,d,f,p=s[o];p.willRender(n)&&(c=void 0!==p.alphaTopLeft?(l=p.alphaTopLeft,e=p.alphaTopRight,a=p.alphaBottomLeft,p.alphaBottomRight):a=e=l=p.alpha,i||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),(d=p.mask)&&d.preRenderWebGL(t,p,n),(f=p.type)!==t.currentType&&(t.newType=!0,t.currentType=f),t.nextTypeMatch=o<u-1&&s[o+1].type===t.currentType,p.setAlpha(l*r,e*r,a*r,c*r),p.renderWebGL(t,p,n),p.setAlpha(l,e,a,c),d&&d.postRenderWebGL(t,n),t.newType=!1)}t.pipelines.postBatch(h)}}},function(g,b){g.exports=function(t,h,n){var s=h.list;if(0!==s.length){h.depthSort();var u=-1!==h.blendMode;u||t.setBlendMode(0);var i=h._alpha;h.mask&&h.mask.preRenderCanvas(t,null,n);for(var r=0;r<s.length;r++){var o,l=s[r];l.willRender(n)&&(o=l.alpha,u||l.blendMode===t.currentBlendMode||t.setBlendMode(l.blendMode),l.setAlpha(o*i),l.renderCanvas(t,l,n),l.setAlpha(o))}h.mask&&h.mask.postRenderCanvas(t)}}},function(g,b,t){g.exports={EmitterOp:t(443),GravityWell:t(444),Particle:t(445),ParticleEmitter:t(446),ParticleEmitterManager:t(217),Zones:t(1072)}},function(g,b,t){var h=t(1),n=t(1);h=t(1070),n=t(1071),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(25),n=t(12),s=new h,u=new h,i=new h,r=new h;g.exports=function(o,l,e,a){var c=l.emitters.list,d=c.length;if(0!==d){var f=o.pipelines.set(l.pipeline),p=s,v=u,m=i,x=r;a?(x.loadIdentity(),x.multiply(a),x.translate(l.x,l.y),x.rotate(l.rotation),x.scale(l.scaleX,l.scaleY)):x.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var y=e.roundPixels,w=l.defaultFrame.glTexture,T=n.getTintAppendFloatAlpha,E=f.setGameObject(l,l.defaultFrame);o.pipelines.preBatch(l);for(var S=0;S<d;S++){var A=c[S],_=A.alive,C=_.length;if(A.visible&&0!==C){var M=A.scrollFactorX,R=A.scrollFactorY;o.setBlendMode(A.blendMode),A.mask&&(A.mask.preRenderWebGL(o,A,e),o.pipelines.set(l.pipeline));for(var L=0;L<C;L++){var D,F,U,P,O,B,k,I,N,Y,X,W,G,z,V=_[L],H=V.alpha*e.alpha;H<=0||(m.applyITRS(V.x,V.y,V.rotation,V.scaleX,V.scaleY),p.copyFrom(e.matrix),p.multiplyWithOffset(x,-e.scrollX*M,-e.scrollY*R),m.e=V.x,m.f=V.y,p.multiply(m,v),P=(F=-(D=V.frame).halfWidth)+D.width,O=(U=-D.halfHeight)+D.height,B=v.getXRound(F,U,y),k=v.getYRound(F,U,y),I=v.getXRound(F,O,y),N=v.getYRound(F,O,y),Y=v.getXRound(P,O,y),X=v.getYRound(P,O,y),W=v.getXRound(P,U,y),G=v.getYRound(P,U,y),z=T(V.tint,H),f.batchQuad(A,B,k,I,N,Y,X,W,G,D.u0,D.v0,D.u1,D.v1,z,z,z,z,0,w,E))}A.mask&&A.mask.postRenderWebGL(o,e)}}o.pipelines.postBatch(l)}}},function(g,b,t){var h=t(25),n=new h,s=new h,u=new h,i=new h;g.exports=function(r,o,l,e){var a=o.emitters.list,c=a.length;if(0!==c){var d=n.copyFrom(l.matrix),f=s,p=u,v=i;e?(v.loadIdentity(),v.multiply(e),v.translate(o.x,o.y),v.rotate(o.rotation),v.scale(o.scaleX,o.scaleY)):v.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);for(var m=r.currentContext,x=l.roundPixels,y=0;y<c;y++){var w=a[y],T=w.alive,E=T.length;if(w.visible&&0!==E){var S=w.follow?w.follow.x+w.followOffset.x:0,A=w.follow?w.follow.y+w.followOffset.y:0,_=w.scrollFactorX,C=w.scrollFactorY;m.save(),m.globalCompositeOperation=r.blendModes[w.blendMode];for(var M=0;M<E;M++){var R,L,D,F,U=T[M],P=U.alpha*l.alpha;P<=0||(p.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),d.copyFrom(l.matrix),d.multiplyWithOffset(v,S+-l.scrollX*_,A+-l.scrollY*C),p.e=U.x,p.f=U.y,d.multiply(p,f),L=(R=U.frame).canvasData,D=-R.halfWidth,F=-R.halfHeight,m.globalAlpha=P,m.save(),f.setToContext(m),x&&(D=Math.round(D),F=Math.round(F)),m.imageSmoothingEnabled=!(!r.antialias||R.source.scaleMode),m.drawImage(R.source.image,L.x,L.y,L.width,L.height,D,F,L.width,L.height),m.restore())}m.restore()}}}}},function(g,b,t){g.exports={DeathZone:t(447),EdgeZone:t(448),RandomZone:t(450)}},function(g,b,t){var h=t(1),n=t(1);h=t(1074),n=t(1075),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,u,i){var r=u.alpha,o=s.renderTarget,l=o.width,e=o.height,a=h.getTintAppendFloatAlpha,c=n.pipelines.set(s.pipeline),d=c.setTexture2D(o.texture);n.pipelines.preBatch(s),c.batchTexture(s,o.texture,l,e,s.x,s.y,l,e,s.scaleX,s.scaleY,s.rotation,s.flipX,!s.flipY,s.scrollFactorX,s.scrollFactorY,s.displayOriginX,s.displayOriginY,0,0,l,e,a(s.tintTopLeft,r*s._alphaTL),a(s.tintTopRight,r*s._alphaTR),a(s.tintBottomLeft,r*s._alphaBL),a(s.tintBottomRight,r*s._alphaBR),s.tintFill,0,0,u,i,!0,d),n.resetTextures(),n.pipelines.postBatch(s)}},function(g,b){g.exports=function(t,h,n,s){t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1077),n=t(17)(!1,n={Parse:t(1078)},h);g.exports=n},function(g,b){g.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(g,b,t){var h=t(6);g.exports=function(n,s){var u=s.width,i=s.height,r=Math.floor(u/2),o=Math.floor(i/2),l=h(s,"chars","");if(""!==l){var e=h(s,"image",""),a=n.sys.textures.getFrame(e),c=a.cutX,d=a.cutY,f=a.source.width,p=a.source.height,v=h(s,"offset.x",0),m=h(s,"offset.y",0),x=h(s,"spacing.x",0),y=h(s,"spacing.y",0),w=h(s,"lineSpacing",0),T=h(s,"charsPerRow",null);null===T&&(T=f/u)>l.length&&(T=l.length);for(var E=v,S=m,A={retroFont:!0,font:e,size:u,lineHeight:i+w,chars:{}},_=0,C=0;C<l.length;C++){var M=l.charCodeAt(C);A.chars[M]={x:E,y:S,width:u,height:i,centerX:r,centerY:o,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:(c+E)/f,v0:(d+S)/p,u1:(c+E+u)/f,v1:(d+S+i)/p},++_===T?(_=0,E=v,S+=i+y):E+=u+x}return{data:A,frame:null,texture:e}}}},function(g,b,t){var h=t(1),n=t(1);h=t(1080),n=t(1081),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,u,i,r){var o=s.pipelines.set(u.pipeline,u),l=h(u,i,r).calc,e=u.vertices,a=u.uv,c=u.colors,d=u.alphas,f=u.alpha,p=n.getTintAppendFloatAlpha,v=i.roundPixels,m=e.length,x=Math.floor(.5*m);o.flush(),s.pipelines.preBatch(u);var y=o.setGameObject(u),w=o.vertexViewF32,T=o.vertexViewU32,E=o.vertexCount*o.currentShader.vertexComponentCount-1,S=0,A=u.tintFill;u.dirty&&u.updateVertices();for(var _=u.debugCallback,C=[],M=0;M<m;M+=2){var R=e[M+0],L=e[M+1],D=R*l.a+L*l.c+l.e,F=R*l.b+L*l.d+l.f;v&&(D=Math.round(D),F=Math.round(F)),w[++E]=D,w[++E]=F,w[++E]=a[M+0],w[++E]=a[M+1],w[++E]=y,w[++E]=A,T[++E]=p(c[S],i.alpha*(d[S]*f)),S++,_&&(C[M+0]=D,C[M+1]=F)}_&&_.call(u,u,m,C),o.vertexCount+=x,s.pipelines.postBatch(u)}},function(g,b){g.exports=function(){}},function(g,b,t){var h=t(1),n=t(1);h=t(1083),n=t(1084),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,u,i){var r,o,l,e,a,c;0!==s.width&&0!==s.height&&(o=(r=s.frame).width,l=r.height,e=h.getTintAppendFloatAlpha,c=(a=n.pipelines.set(s.pipeline,s)).setTexture2D(r.glTexture,s),n.pipelines.preBatch(s),a.batchTexture(s,r.glTexture,o,l,s.x,s.y,o/s.style.resolution,l/s.style.resolution,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.displayOriginX,s.displayOriginY,0,0,o,l,e(s.tintTopLeft,u.alpha*s._alphaTL),e(s.tintTopRight,u.alpha*s._alphaTR),e(s.tintBottomLeft,u.alpha*s._alphaBL),e(s.tintBottomRight,u.alpha*s._alphaBR),s.tintFill,0,0,u,i,!1,c),n.pipelines.postBatch(s))}},function(g,b){g.exports=function(t,h,n,s){0!==h.width&&0!==h.height&&t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1086),n=t(1087),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,u,i){s.updateCanvas();var r,o,l,e=s.width,a=s.height;0!==e&&0!==a&&(n.pipelines.preBatch(s),r=h.getTintAppendFloatAlpha,l=(o=n.pipelines.set(s.pipeline,s)).setTexture2D(s.fillPattern,s),o.batchTexture(s,s.fillPattern,s.displayFrame.width*s.tileScaleX,s.displayFrame.height*s.tileScaleY,s.x,s.y,e,a,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.originX*e,s.originY*a,0,0,e,a,r(s.tintTopLeft,u.alpha*s._alphaTL),r(s.tintTopRight,u.alpha*s._alphaTR),r(s.tintBottomLeft,u.alpha*s._alphaBL),r(s.tintBottomRight,u.alpha*s._alphaBR),s.tintFill,s.tilePositionX%s.displayFrame.width/s.displayFrame.width,s.tilePositionY%s.displayFrame.height/s.displayFrame.height,u,i,!1,l),n.pipelines.postBatch(s))}},function(g,b){g.exports=function(t,h,n,s){h.updateCanvas(),t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1089),n=t(1090),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){h.videoTexture&&h.pipeline.batchSprite(h,n,s)}},function(g,b){g.exports=function(t,h,n,s){h.videoTexture&&t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1092),n=t(1093),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(111),s=t(81);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=h(i,r,o),a=l.calcMatrix.copyFrom(e.calc),c=i._displayOriginX,d=i._displayOriginY,f=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&n(l,a,i,f,c,d),i.isStroked&&s(l,i,f,c,d),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(34),n=t(46),s=t(58),u=t(30);g.exports=function(i,r,o,l){var e,a=i.currentContext;u(i,a,r,o,l)&&(e=r.radius,a.beginPath(),a.arc(e-r.originX*(2*e),e-r.originY*(2*e),e,h(r._startAngle),h(r._endAngle),r.anticlockwise),r.closePath&&a.closePath(),r.isFilled&&(n(a,r),a.fill()),r.isStroked&&(s(a,r),a.stroke()),a.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1095),n=t(1096),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(111),n=t(19),s=t(81);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=n(i,r,o),a=l.calcMatrix.copyFrom(e.calc),c=i._displayOriginX+i._curveBounds.x,d=i._displayOriginY+i._curveBounds.y,f=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&h(l,a,i,f,c,d),i.isStroked&&s(l,i,f,c,d),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l=u.currentContext;if(s(u,l,i,r,o)){var e=i._displayOriginX+i._curveBounds.x,a=i._displayOriginY+i._curveBounds.y,c=i.pathData,d=c.length-1,f=c[0]-e,p=c[1]-a;l.beginPath(),l.moveTo(f,p),i.closePath||(d-=2);for(var v=2;v<d;v+=2)l.lineTo(c[v]-e,c[v+1]-a);i.closePath&&l.closePath(),i.isFilled&&(h(l,i),l.fill()),i.isStroked&&(n(l,i),l.stroke()),l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1098),n=t(1099),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(111),n=t(19),s=t(81);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=n(i,r,o),a=l.calcMatrix.copyFrom(e.calc),c=i._displayOriginX,d=i._displayOriginY,f=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&h(l,a,i,f,c,d),i.isStroked&&s(l,i,f,c,d),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l=u.currentContext;if(s(u,l,i,r,o)){var e=i._displayOriginX,a=i._displayOriginY,c=i.pathData,d=c.length-1,f=c[0]-e,p=c[1]-a;l.beginPath(),l.moveTo(f,p),i.closePath||(d-=2);for(var v=2;v<d;v+=2)l.lineTo(c[v]-e,c[v+1]-a);l.closePath(),i.isFilled&&(h(l,i),l.fill()),i.isStroked&&(n(l,i),l.stroke()),l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1101),n=t(1102),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,u,i,r){var o=s.pipelines.set(u.pipeline),l=h(u,i,r);o.calcMatrix.copyFrom(l.calc).translate(-u._displayOriginX,-u._displayOriginY);var e,a,c=i.alpha*u.alpha,d=u.width,f=u.height,p=u.cellWidth,v=u.cellHeight,m=Math.ceil(d/p),x=Math.ceil(f/v),y=p,w=v,T=p-(m*p-d),E=v-(x*v-f),S=u.showCells,A=u.showAltCells,_=u.showOutline,C=0,M=0,R=0;if(_&&(y--,w--,T===p&&T--,E===v&&E--),s.pipelines.preBatch(u),S&&0<u.fillAlpha)for(e=o.fillTint,a=n.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*c),e.TL=a,e.TR=a,e.BL=a,e.BR=a,M=0;M<x;M++)for(A&&(R=M%2),C=0;C<m;C++)A&&R?R=0:(R++,o.batchFillRect(C*p,M*v,C<m-1?y:T,M<x-1?w:E));if(A&&0<u.altFillAlpha)for(e=o.fillTint,a=n.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*c),e.TL=a,e.TR=a,e.BL=a,e.BR=a,M=0;M<x;M++)for(A&&(R=M%2),C=0;C<m;C++)!A||R?(R=0,o.batchFillRect(C*p,M*v,C<m-1?y:T,M<x-1?w:E)):R=1;if(_&&0<u.outlineFillAlpha){var F=o.strokeTint,U=n.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*c);for(F.TL=U,F.TR=U,F.BL=U,F.BR=U,C=1;C<m;C++){var P=C*p;o.batchLine(P,0,P,f,1,1,1,0,!1)}for(M=1;M<x;M++){var O=M*v;o.batchLine(0,O,d,O,1,1,1,0,!1)}}s.pipelines.postBatch(u)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l=u.currentContext;if(s(u,l,i,r,o)){var e=-i._displayOriginX,a=-i._displayOriginY,c=r.alpha*i.alpha,d=i.width,f=i.height,p=i.cellWidth,v=i.cellHeight,m=Math.ceil(d/p),x=Math.ceil(f/v),y=p,w=v,T=p-(m*p-d),E=v-(x*v-f),A=i.showAltCells,_=i.showOutline,C=0,M=0,R=0;if(_&&(y--,w--,T===p&&T--,E===v&&E--),i.showCells&&0<i.fillAlpha)for(h(l,i),M=0;M<x;M++)for(A&&(R=M%2),C=0;C<m;C++)A&&R?R=0:(R++,l.fillRect(e+C*p,a+M*v,C<m-1?y:T,M<x-1?w:E));if(A&&0<i.altFillAlpha)for(h(l,i,i.altFillColor,i.altFillAlpha*c),M=0;M<x;M++)for(A&&(R=M%2),C=0;C<m;C++)!A||R?(R=0,l.fillRect(e+C*p,a+M*v,C<m-1?y:T,M<x-1?w:E)):R=1;if(_&&0<i.outlineFillAlpha){for(n(l,i,i.outlineFillColor,i.outlineFillAlpha*c),C=1;C<m;C++){var F=C*p;l.beginPath(),l.moveTo(F+e,a),l.lineTo(F+e,f+a),l.stroke()}for(M=1;M<x;M++){var U=M*v;l.beginPath(),l.moveTo(e,U+a),l.lineTo(e+d,U+a),l.stroke()}}l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1104),n=t(1105),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,u,i,r){var o,l,e,a,c,d,f,p,v,m=s.pipelines.set(u.pipeline),x=h(u,i,r),y=m.calcMatrix.copyFrom(x.calc),w=u.width,T=u.height,E=w/2,S=w/u.projection,A=i.alpha*u.alpha;u.isFilled&&(s.pipelines.preBatch(u),u.showTop&&(o=n.getTintAppendFloatAlpha(u.fillTop,A),l=y.getX(-E,-T),e=y.getY(-E,-T),a=y.getX(0,-S-T),c=y.getY(0,-S-T),d=y.getX(E,-T),f=y.getY(E,-T),p=y.getX(0,S-T),v=y.getY(0,S-T),m.batchQuad(l,e,a,c,d,f,p,v,o,o,o,o)),u.showLeft&&(o=n.getTintAppendFloatAlpha(u.fillLeft,A),l=y.getX(-E,0),e=y.getY(-E,0),a=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-T),f=y.getY(0,S-T),p=y.getX(-E,-T),v=y.getY(-E,-T),m.batchQuad(l,e,a,c,d,f,p,v,o,o,o,o)),u.showRight&&(o=n.getTintAppendFloatAlpha(u.fillRight,A),l=y.getX(E,0),e=y.getY(E,0),a=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-T),f=y.getY(0,S-T),p=y.getX(E,-T),v=y.getY(E,-T),m.batchQuad(l,e,a,c,d,f,p,v,o,o,o,o)),s.pipelines.postBatch(u))}},function(g,b,t){var h=t(46),n=t(30);g.exports=function(s,u,i,r){var o,l,e,a,c=s.currentContext;n(s,c,u,i,r)&&u.isFilled&&(l=u.height,e=(o=u.width)/2,a=o/u.projection,u.showTop&&(h(c,u,u.fillTop),c.beginPath(),c.moveTo(-e,-l),c.lineTo(0,-a-l),c.lineTo(e,-l),c.lineTo(e,-1),c.lineTo(0,a-1),c.lineTo(-e,-1),c.lineTo(-e,-l),c.fill()),u.showLeft&&(h(c,u,u.fillLeft),c.beginPath(),c.moveTo(-e,0),c.lineTo(0,a),c.lineTo(0,a-l),c.lineTo(-e,-l),c.lineTo(-e,0),c.fill()),u.showRight&&(h(c,u,u.fillRight),c.beginPath(),c.moveTo(e,0),c.lineTo(0,a),c.lineTo(0,a-l),c.lineTo(e,-l),c.lineTo(e,0),c.fill()),c.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1107),n=t(1108),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,u,i,r){var o,l,e,a,c,d,f,p,v,m=s.pipelines.set(u.pipeline),x=h(u,i,r),y=m.calcMatrix.copyFrom(x.calc),w=u.width,T=u.height,E=w/2,S=w/u.projection,A=u.isReversed,_=i.alpha*u.alpha;u.isFilled&&(s.pipelines.preBatch(u),u.showTop&&A&&(o=n.getTintAppendFloatAlpha(u.fillTop,_),l=y.getX(-E,-T),e=y.getY(-E,-T),a=y.getX(0,-S-T),c=y.getY(0,-S-T),d=y.getX(E,-T),f=y.getY(E,-T),p=y.getX(0,S-T),v=y.getY(0,S-T),m.batchQuad(l,e,a,c,d,f,p,v,o,o,o,o)),u.showLeft&&(o=n.getTintAppendFloatAlpha(u.fillLeft,_),e=A?(l=y.getX(-E,-T),y.getY(-E,-T)):(l=y.getX(-E,0),y.getY(-E,0)),a=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-T),f=y.getY(0,S-T),m.batchTri(l,e,a,c,d,f,o,o,o)),u.showRight&&(o=n.getTintAppendFloatAlpha(u.fillRight,_),e=A?(l=y.getX(E,-T),y.getY(E,-T)):(l=y.getX(E,0),y.getY(E,0)),a=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-T),f=y.getY(0,S-T),m.batchTri(l,e,a,c,d,f,o,o,o)),s.pipelines.postBatch(u))}},function(g,b,t){var h=t(46),n=t(30);g.exports=function(s,u,i,r){var o,l,e,a,c,d=s.currentContext;n(s,d,u,i,r)&&u.isFilled&&(l=u.height,e=(o=u.width)/2,a=o/u.projection,c=u.isReversed,u.showTop&&c&&(h(d,u,u.fillTop),d.beginPath(),d.moveTo(-e,-l),d.lineTo(0,-a-l),d.lineTo(e,-l),d.lineTo(0,a-l),d.fill()),u.showLeft&&(h(d,u,u.fillLeft),d.beginPath(),d.moveTo(-e,c?-l:0),d.lineTo(0,a),d.lineTo(0,a-l),d.fill()),u.showRight&&(h(d,u,u.fillRight),d.beginPath(),d.moveTo(e,c?-l:0),d.lineTo(0,a),d.lineTo(0,a-l),d.fill()),d.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1110),n=t(1111),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,u,i,r){var o=s.pipelines.set(u.pipeline),l=h(u,i,r);o.calcMatrix.copyFrom(l.calc);var e,a,f=u._displayOriginX,p=u._displayOriginY,v=i.alpha*u.alpha;s.pipelines.preBatch(u),u.isStroked&&(e=o.strokeTint,a=n.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*v),e.TL=a,e.TR=a,e.BL=a,e.BR=a,o.batchLine(u.geom.x1-f,u.geom.y1-p,u.geom.x2-f,u.geom.y2-p,u._startWidth,u._endWidth,1,0,!1,l.sprite,l.camera)),s.pipelines.postBatch(u)}},function(g,b,t){var h=t(58),n=t(30);g.exports=function(s,u,i,r){var o,l,e=s.currentContext;n(s,e,u,i,r)&&(o=u._displayOriginX,l=u._displayOriginY,u.isStroked&&(h(e,u),e.beginPath(),e.moveTo(u.geom.x1-o,u.geom.y1-l),e.lineTo(u.geom.x2-o,u.geom.y2-l),e.stroke()),e.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1113),n=t(1114),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(111),n=t(19),s=t(81);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=n(i,r,o),a=l.calcMatrix.copyFrom(e.calc),c=i._displayOriginX,d=i._displayOriginY,f=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&h(l,a,i,f,c,d),i.isStroked&&s(l,i,f,c,d),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l=u.currentContext;if(s(u,l,i,r,o)){var e=i._displayOriginX,a=i._displayOriginY,c=i.pathData,d=c.length-1,f=c[0]-e,p=c[1]-a;l.beginPath(),l.moveTo(f,p),i.closePath||(d-=2);for(var v=2;v<d;v+=2)l.lineTo(c[v]-e,c[v+1]-a);l.closePath(),i.isFilled&&(h(l,i),l.fill()),i.isStroked&&(n(l,i),l.stroke()),l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1116),n=t(1117),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(81),s=t(12);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=h(i,r,o);l.calcMatrix.copyFrom(e.calc);var a,c,d=i._displayOriginX,f=i._displayOriginY,p=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&(a=l.fillTint,c=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*p),a.TL=c,a.TR=c,a.BL=c,a.BR=c,l.batchFillRect(-d,-f,i.width,i.height)),i.isStroked&&n(l,i,p,d,f),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l,e,a=u.currentContext;s(u,a,i,r,o)&&(l=i._displayOriginX,e=i._displayOriginY,i.isFilled&&(h(a,i),a.fillRect(-l,-e,i.width,i.height)),i.isStroked&&(n(a,i),a.beginPath(),a.rect(-l,-e,i.width,i.height),a.stroke()),a.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1119),n=t(1120),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(111),n=t(19),s=t(81);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=n(i,r,o),a=l.calcMatrix.copyFrom(e.calc),c=i._displayOriginX,d=i._displayOriginY,f=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&h(l,a,i,f,c,d),i.isStroked&&s(l,i,f,c,d),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l=u.currentContext;if(s(u,l,i,r,o)){var e=i._displayOriginX,a=i._displayOriginY,c=i.pathData,d=c.length-1,f=c[0]-e,p=c[1]-a;l.beginPath(),l.moveTo(f,p),i.closePath||(d-=2);for(var v=2;v<d;v+=2)l.lineTo(c[v]-e,c[v+1]-a);l.closePath(),i.isFilled&&(h(l,i),l.fill()),i.isStroked&&(n(l,i),l.stroke()),l.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1122),n=t(1123),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(81),s=t(12);g.exports=function(u,i,r,o){var l=u.pipelines.set(i.pipeline),e=h(i,r,o);l.calcMatrix.copyFrom(e.calc);var a,c,y=i._displayOriginX,w=i._displayOriginY,T=r.alpha*i.alpha;u.pipelines.preBatch(i),i.isFilled&&(a=l.fillTint,c=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*T),a.TL=c,a.TR=c,a.BL=c,a.BR=c,l.batchFillTriangle(i.geom.x1-y,i.geom.y1-w,i.geom.x2-y,i.geom.y2-w,i.geom.x3-y,i.geom.y3-w,e.sprite,e.camera)),i.isStroked&&n(l,i,T,y,w),u.pipelines.postBatch(i)}},function(g,b,t){var h=t(46),n=t(58),s=t(30);g.exports=function(u,i,r,o){var l,e,a,c,d,f,p,v,m=u.currentContext;s(u,m,i,r,o)&&(a=i.geom.x1-(l=i._displayOriginX),c=i.geom.y1-(e=i._displayOriginY),d=i.geom.x2-l,f=i.geom.y2-e,p=i.geom.x3-l,v=i.geom.y3-e,m.beginPath(),m.moveTo(a,c),m.lineTo(d,f),m.lineTo(p,v),m.closePath(),i.isFilled&&(h(m,i),m.fill()),i.isStroked&&(n(m,i),m.stroke()),m.restore())}},function(g,b,t){var h=t(210);t(5).register("blitter",function(n,s,u,i){return this.displayList.add(new h(this.scene,n,s,u,i))})},function(g,b,t){var h=t(211);t(5).register("container",function(n,s,u){return this.displayList.add(new h(this.scene,n,s,u))})},function(g,b,t){var h=t(436);t(5).register("dom",function(n,s,u,i,r){var o=new h(this.scene,n,s,u,i,r);return this.displayList.add(o),o})},function(g,b,t){var h=t(212);t(5).register("dynamicBitmapText",function(n,s,u,i,r){return this.displayList.add(new h(this.scene,n,s,u,i,r))})},function(g,b,t){var h=t(438);t(5).register("extern",function(){var n=new h(this.scene);return this.displayList.add(n),n})},function(g,b,t){var h=t(213);t(5).register("graphics",function(n){return this.displayList.add(new h(this.scene,n))})},function(g,b,t){var h=t(110);t(5).register("group",function(n,s){return this.updateList.add(new h(this.scene,n,s))})},function(g,b,t){var h=t(124);t(5).register("image",function(n,s,u,i){return this.displayList.add(new h(this.scene,n,s,u,i))})},function(g,b,t){var h=t(216);t(5).register("layer",function(n){return this.displayList.add(new h(this.scene,n))})},function(g,b,t){var h=t(5),n=t(217);h.register("particles",function(s,u,i){return this.displayList.add(new n(this.scene,s,u,i))})},function(g,b,t){var h=t(5),n=t(451);h.register("follower",function(s,u,i,r,o){var l=new n(this.scene,s,u,i,r,o);return this.displayList.add(l),this.updateList.add(l),l})},function(g,b,t){var h=t(5),n=t(218);h.register("renderTexture",function(s,u,i,r,o,l){return this.displayList.add(new n(this.scene,s,u,i,r,o,l))})},function(g,b,t){var h=t(220);t(5).register("rope",function(n,s,u,i,r,o,l,e){return this.displayList.add(new h(this.scene,n,s,u,i,r,o,l,e))})},function(g,b,t){var h=t(5),n=t(73);h.register("sprite",function(s,u,i,r){var o=new n(this.scene,s,u,i,r);return this.displayList.add(o),o})},function(g,b,t){var h=t(147);t(5).register("bitmapText",function(n,s,u,i,r,o){return this.displayList.add(new h(this.scene,n,s,u,i,r,o))})},function(g,b,t){var h=t(221);t(5).register("text",function(n,s,u,i){return this.displayList.add(new h(this.scene,n,s,u,i))})},function(g,b,t){var h=t(222);t(5).register("tileSprite",function(n,s,u,i,r,o){return this.displayList.add(new h(this.scene,n,s,u,i,r,o))})},function(g,b,t){var h=t(127);t(5).register("zone",function(n,s,u,i){return this.displayList.add(new h(this.scene,n,s,u,i))})},function(g,b,t){var h=t(223);t(5).register("video",function(n,s,u){return this.displayList.add(new h(this.scene,n,s,u))})},function(g,b,t){var h=t(455),n=t(5);n.register("arc",function(s,u,i,r,o,l,e,a){return this.displayList.add(new h(this.scene,s,u,i,r,o,l,e,a))}),n.register("circle",function(s,u,i,r,o){return this.displayList.add(new h(this.scene,s,u,i,0,360,!1,r,o))})},function(g,b,t){var h=t(5),n=t(456);h.register("curve",function(s,u,i,r,o){return this.displayList.add(new n(this.scene,s,u,i,r,o))})},function(g,b,t){var h=t(457);t(5).register("ellipse",function(n,s,u,i,r,o){return this.displayList.add(new h(this.scene,n,s,u,i,r,o))})},function(g,b,t){var h=t(5),n=t(458);h.register("grid",function(s,u,i,r,o,l,e,a,c,d){return this.displayList.add(new n(this.scene,s,u,i,r,o,l,e,a,c,d))})},function(g,b,t){var h=t(5),n=t(459);h.register("isobox",function(s,u,i,r,o,l,e){return this.displayList.add(new n(this.scene,s,u,i,r,o,l,e))})},function(g,b,t){var h=t(5),n=t(460);h.register("isotriangle",function(s,u,i,r,o,l,e,a){return this.displayList.add(new n(this.scene,s,u,i,r,o,l,e,a))})},function(g,b,t){var h=t(5),n=t(461);h.register("line",function(s,u,i,r,o,l,e,a){return this.displayList.add(new n(this.scene,s,u,i,r,o,l,e,a))})},function(g,b,t){var h=t(5),n=t(462);h.register("polygon",function(s,u,i,r,o){return this.displayList.add(new n(this.scene,s,u,i,r,o))})},function(g,b,t){var h=t(5),n=t(467);h.register("rectangle",function(s,u,i,r,o,l){return this.displayList.add(new n(this.scene,s,u,i,r,o,l))})},function(g,b,t){var h=t(468);t(5).register("star",function(n,s,u,i,r,o,l){return this.displayList.add(new h(this.scene,n,s,u,i,r,o,l))})},function(g,b,t){var h=t(5),n=t(469);h.register("triangle",function(s,u,i,r,o,l,e,a,c,d){return this.displayList.add(new n(this.scene,s,u,i,r,o,l,e,a,c,d))})},function(g,b,t){var h=t(210),n=t(28),s=t(16),u=t(13);s.register("blitter",function(i,r){void 0===i&&(i={});var o=u(i,"key",null),l=u(i,"frame",null),e=new h(this.scene,0,0,o,l);return void 0!==r&&(i.add=r),n(this.scene,e,i),e})},function(g,b,t){var h=t(28),n=t(211),s=t(16),u=t(13);s.register("container",function(i,r){void 0===i&&(i={});var o=u(i,"x",0),l=u(i,"y",0),e=u(i,"children",null),a=new n(this.scene,o,l,e);return void 0!==r&&(i.add=r),h(this.scene,a,i),a})},function(g,b,t){var h=t(212),n=t(28),s=t(16),u=t(13);s.register("dynamicBitmapText",function(i,r){void 0===i&&(i={});var o=u(i,"font",""),l=u(i,"text",""),e=u(i,"size",!1),a=new h(this.scene,0,0,o,l,e);return void 0!==r&&(i.add=r),n(this.scene,a,i),a})},function(g,b,t){var h=t(16),n=t(213);h.register("graphics",function(s,u){void 0===s&&(s={}),void 0!==u&&(s.add=u);var i=new n(this.scene,s);return s.add&&this.scene.sys.displayList.add(i),i})},function(g,b,t){var h=t(16),n=t(110);h.register("group",function(s){return new n(this.scene,null,s)})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(124);n.register("image",function(i,r){void 0===i&&(i={});var o=s(i,"key",null),l=s(i,"frame",null),e=new u(this.scene,0,0,o,l);return void 0!==r&&(i.add=r),h(this.scene,e,i),e})},function(g,b,t){var h=t(28),n=t(216),s=t(16),u=t(13);s.register("layer",function(i,r){void 0===i&&(i={});var o=u(i,"children",null),l=new n(this.scene,o);return void 0!==r&&(i.add=r),h(this.scene,l,i),l})},function(g,b,t){var h=t(16),n=t(13),s=t(2),u=t(217);h.register("particles",function(i,r){void 0===i&&(i={});var o=n(i,"key",null),l=n(i,"frame",null),e=s(i,"emitters",null),a=new u(this.scene,o,l,e);return void 0!==r&&(i.add=r),s(i,"add",!1)?this.displayList.add(a):this.updateList.add(a),a})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(218);n.register("renderTexture",function(i,r){void 0===i&&(i={});var o=s(i,"x",0),l=s(i,"y",0),e=s(i,"width",32),a=s(i,"height",32),c=s(i,"key",void 0),d=s(i,"frame",void 0),f=new u(this.scene,o,l,e,a,c,d);return void 0!==r&&(i.add=r),h(this.scene,f,i),f})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(6),i=t(220);n.register("rope",function(r,o){void 0===r&&(r={});var l=s(r,"key",null),e=s(r,"frame",null),a=s(r,"horizontal",!0),c=u(r,"points",void 0),d=u(r,"colors",void 0),f=u(r,"alphas",void 0),p=new i(this.scene,0,0,l,e,c,a,d,f);return void 0!==o&&(r.add=o),h(this.scene,p,r),r.add||this.updateList.add(p),p})},function(g,b,t){var h=t(28),n=t(433),s=t(16),u=t(13),i=t(73);s.register("sprite",function(r,o){void 0===r&&(r={});var l=u(r,"key",null),e=u(r,"frame",null),a=new i(this.scene,0,0,l,e);return void 0!==o&&(r.add=o),h(this.scene,a,r),n(a,r),a})},function(g,b,t){var h=t(147),n=t(28),s=t(16),u=t(13),i=t(6);s.register("bitmapText",function(r,o){void 0===r&&(r={});var l=i(r,"font",""),e=u(r,"text",""),a=u(r,"size",!1),c=i(r,"align",0),d=new h(this.scene,0,0,l,e,a,c);return void 0!==o&&(r.add=o),n(this.scene,d,r),d})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(221);n.register("text",function(i,r){void 0===i&&(i={});var o=s(i,"text",""),l=s(i,"style",null),e=s(i,"padding",null);null!==e&&(l.padding=e);var a=new u(this.scene,0,0,o,l);return void 0!==r&&(i.add=r),h(this.scene,a,i),a.autoRound=s(i,"autoRound",!0),a.resolution=s(i,"resolution",1),a})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(222);n.register("tileSprite",function(i,r){void 0===i&&(i={});var o=s(i,"x",0),l=s(i,"y",0),e=s(i,"width",512),a=s(i,"height",512),c=s(i,"key",""),d=s(i,"frame",""),f=new u(this.scene,o,l,e,a,c,d);return void 0!==r&&(i.add=r),h(this.scene,f,i),f})},function(g,b,t){var h=t(16),n=t(13),s=t(127);h.register("zone",function(u){var i=n(u,"x",0),r=n(u,"y",0),o=n(u,"width",1),l=n(u,"height",o);return new s(this.scene,i,r,o,l)})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(223);n.register("video",function(i,r){void 0===i&&(i={});var o=s(i,"key",null),l=new u(this.scene,0,0,o);return void 0!==r&&(i.add=r),h(this.scene,l,i),i.add||this.updateList.add(l),l})},function(g,b,t){var h=t(1),n=t(1);h=t(1171),n=t(1172),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,u,i){var r;s.shader&&(n.pipelines.clear(),s.renderToTexture?s.load():(r=h(s,u,i).calc,n.width===s._rendererWidth&&n.height===s._rendererHeight||s.projOrtho(0,n.width,n.height,0),s.load(r.matrix)),s.flush(),n.pipelines.rebind())}},function(g,b){g.exports=function(){}},function(g,b,t){var h=t(1),n=t(1);h=t(1174),n=t(1175),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,u,i){var r=s.faces,o=r.length;if(0!==o){var l=n.pipelines.set(s.pipeline,s),e=h(s,u,i).calc,a=l.setGameObject(s),c=l.vertexViewF32,d=l.vertexViewU32,f=l.vertexCount*l.currentShader.vertexComponentCount-1,p=s.tintFill,v=[],m=s.debugCallback,x=e.a,y=e.b,w=e.c,T=e.d,E=e.e,S=e.f,A=s.viewPosition.z,_=s.hideCCW,C=u.roundPixels,M=u.alpha*s.alpha,R=0;n.pipelines.preBatch(s);for(var L=0;L<o;L++){var D=r[L];D.isInView(u,_,A,M,x,y,w,T,E,S,C)&&(l.shouldFlush(3)&&(l.flush(),f=0),f=D.load(c,d,f,a,p),R++,l.vertexCount+=3,m&&v.push(D))}s.totalFrame+=R,m&&m.call(s,s,v),n.pipelines.postBatch(s)}}},function(g,b){g.exports=function(){}},function(g,b,t){var n=t(1),h=t(1);n=t(1177),g.exports={renderWebGL:n,renderCanvas:h}},function(g,b,t){var h=t(19);g.exports=function(n,s,u,i){var r=n.pipelines.set(s.pipeline),o=h(s,u,i).calc,a=-s._radius,c=-s._radius,d=a+s.width,f=c+s.height,p=o.getX(0,0),v=o.getY(0,0),m=o.getX(a,c),x=o.getY(a,c),y=o.getX(a,f),w=o.getY(a,f),T=o.getX(d,f),E=o.getY(d,f),S=o.getX(d,c),A=o.getY(d,c);n.pipelines.preBatch(s),r.batchPointLight(s,u,m,x,y,w,T,E,S,A,p,v),n.pipelines.postBatch(s)}},function(g,b,t){var h=t(226);t(5).register("shader",function(n,s,u,i,r,o,l){return this.displayList.add(new h(this.scene,n,s,u,i,r,o,l))})},function(g,b,t){var h=t(227);t(5).register("mesh",function(n,s,u,i,r,o,l,e,a,c,d){return this.displayList.add(new h(this.scene,n,s,u,i,r,o,l,e,a,c,d))})},function(g,b,t){var h=t(5),n=t(149);h.register("pointlight",function(s,u,i,r,o,l){return this.displayList.add(new n(this.scene,s,u,i,r,o,l))})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(226);n.register("shader",function(i,r){void 0===i&&(i={});var o=s(i,"key",null),l=s(i,"x",0),e=s(i,"y",0),a=s(i,"width",128),c=s(i,"height",128),d=new u(this.scene,o,l,e,a,c);return void 0!==r&&(i.add=r),h(this.scene,d,i),d})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(6),i=t(227);n.register("mesh",function(r,o){void 0===r&&(r={});var l=s(r,"key",null),e=s(r,"frame",null),a=u(r,"vertices",[]),c=u(r,"uvs",[]),d=u(r,"indicies",[]),f=u(r,"containsZ",!1),p=u(r,"normals",[]),v=u(r,"colors",16777215),m=u(r,"alphas",1),x=new i(this.scene,0,0,l,e,a,c,d,f,p,v,m);return void 0!==o&&(r.add=o),h(this.scene,x,r),x})},function(g,b,t){var h=t(28),n=t(16),s=t(13),u=t(149);n.register("pointlight",function(i,r){void 0===i&&(i={});var o=s(i,"color",16777215),l=s(i,"radius",128),e=s(i,"intensity",1),a=s(i,"attenuation",.1),c=new u(this.scene,0,0,o,l,e,a);return void 0!==r&&(i.add=r),h(this.scene,c,i),c})},function(g,b,t){var h=t(0),n=t(476),s=t(24),u=t(21),i=new h({Extends:n,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(u.BOOT,this.boot,this),n.call(this)},boot:function(){var r=this.systems.events;r.on(u.SHUTDOWN,this.shutdown,this),r.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",i,"lights"),g.exports=i},function(g,b,t){var h=t(62);h.Area=t(1186),h.Circumference=t(296),h.CircumferencePoint=t(165),h.Clone=t(1187),h.Contains=t(63),h.ContainsPoint=t(1188),h.ContainsRect=t(1189),h.CopyFrom=t(1190),h.Equals=t(1191),h.GetBounds=t(1192),h.GetPoint=t(294),h.GetPoints=t(295),h.Offset=t(1193),h.OffsetPoint=t(1194),h.Random=t(166),g.exports=h},function(g,b){g.exports=function(t){return 0<t.radius?Math.PI*t.radius*t.radius:0}},function(g,b,t){var h=t(62);g.exports=function(n){return new h(n.x,n.y,n.radius)}},function(g,b,t){var h=t(63);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b,t){var h=t(63);g.exports=function(n,s){return h(n,s.x,s.y)&&h(n,s.right,s.y)&&h(n,s.x,s.bottom)&&h(n,s.right,s.bottom)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.radius)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.radius===h.radius}},function(g,b,t){var h=t(10);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.left,s.y=n.top,s.width=n.diameter,s.height=n.diameter,s}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b,t){var h=t(108);h.Area=t(1196),h.Circumference=t(441),h.CircumferencePoint=t(215),h.Clone=t(1197),h.Contains=t(109),h.ContainsPoint=t(1198),h.ContainsRect=t(1199),h.CopyFrom=t(1200),h.Equals=t(1201),h.GetBounds=t(1202),h.GetPoint=t(439),h.GetPoints=t(440),h.Offset=t(1203),h.OffsetPoint=t(1204),h.Random=t(177),g.exports=h},function(g,b){g.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(g,b,t){var h=t(108);g.exports=function(n){return new h(n.x,n.y,n.width,n.height)}},function(g,b,t){var h=t(109);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b,t){var h=t(109);g.exports=function(n,s){return h(n,s.x,s.y)&&h(n,s.right,s.y)&&h(n,s.x,s.bottom)&&h(n,s.right,s.bottom)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height}},function(g,b,t){var h=t(10);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.left,s.y=n.top,s.width=n.width,s.height=n.height,s}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b,t){var h=t(4),n=t(228);g.exports=function(s,u,i){var r,o,l,e,a,c,d,f,p,v,m,x;return void 0===i&&(i=[]),n(s,u)&&(r=s.x,l=s.radius,e=u.x,c=u.radius,(o=s.y)===(a=u.y)?0==(x=(m=-2*a)*m-4*(v=1)*(e*e+(d=(c*c-l*l-e*e+r*r)/(2*(r-e)))*d-2*e*d+a*a-c*c))?i.push(new h(d,-m/(2*v))):0<x&&(i.push(new h(d,(-m+Math.sqrt(x))/(2*v))),i.push(new h(d,(-m-Math.sqrt(x))/(2*v)))):0==(x=(m=2*o*(f=(r-e)/(o-a))-2*(p=(c*c-l*l-e*e+r*r-a*a+o*o)/(2*(o-a)))*f-2*r)*m-4*(v=f*f+1)*(r*r+o*o+p*p-l*l-2*o*p))?i.push(new h(d=-m/(2*v),p-d*f)):0<x&&(d=(-m+Math.sqrt(x))/(2*v),i.push(new h(d,p-d*f)),d=(-m-Math.sqrt(x))/(2*v),i.push(new h(d,p-d*f)))),i}},function(g,b,t){var h=t(229),n=t(150);g.exports=function(s,u,i){var r,o,l,e;return void 0===i&&(i=[]),n(s,u)&&(r=u.getLineA(),o=u.getLineB(),l=u.getLineC(),e=u.getLineD(),h(r,s,i),h(o,s,i),h(l,s,i),h(e,s,i)),i}},function(g,b,t){var h=t(138),n=t(481),s=new(t(45));function u(r,o,l,e,a){var c=Math.cos(r),d=Math.sin(r);s.setTo(o,l,o+c,l+d);var f=n(s,e);f&&a.push(new h(f.x,f.y,r,f.w))}function i(r,o){return r.z-o.z}g.exports=function(r,o,l){Array.isArray(l)||(l=[l]);for(var e=[],a=[],c=0;c<l.length;c++)for(var d=l[c].points,f=0;f<d.length;f++){var p=Math.atan2(d[f].y-o,d[f].x-r);-1===a.indexOf(p)&&(u(p,r,o,l,e),u(p-1e-5,r,o,l,e),u(p+1e-5,r,o,l,e),a.push(p))}return e.sort(i)}},function(g,b,t){var h=t(10),n=t(114);g.exports=function(s,u,i){return void 0===i&&(i=new h),n(s,u)&&(i.x=Math.max(s.x,u.x),i.y=Math.max(s.y,u.y),i.width=Math.min(s.right,u.right)-i.x,i.height=Math.min(s.bottom,u.bottom)-i.y),i}},function(g,b,t){var h=t(231),n=t(114);g.exports=function(s,u,i){var r,o,l,e;return void 0===i&&(i=[]),n(s,u)&&(r=s.getLineA(),o=s.getLineB(),l=s.getLineC(),e=s.getLineD(),h(r,u,i),h(o,u,i),h(l,u,i),h(e,u,i)),i}},function(g,b,t){var h=t(483),n=t(231);g.exports=function(s,u,i){var r,o,l;return void 0===i&&(i=[]),h(s,u)&&(r=u.getLineA(),o=u.getLineB(),l=u.getLineC(),n(r,s,i),n(o,s,i),n(l,s,i)),i}},function(g,b,t){var h=t(229),n=t(485);g.exports=function(s,u,i){var r,o,l;return void 0===i&&(i=[]),n(s,u)&&(r=s.getLineA(),o=s.getLineB(),l=s.getLineC(),h(r,u,i),h(o,u,i),h(l,u,i)),i}},function(g,b,t){var h=t(488),n=t(486);g.exports=function(s,u,i){var r,o,l;return void 0===i&&(i=[]),h(s,u)&&(r=u.getLineA(),o=u.getLineB(),l=u.getLineC(),n(s,r,i),n(s,o,i),n(s,l,i)),i}},function(g,b,t){var h=t(490);g.exports=function(n,s){if(!h(n,s))return!1;var u=Math.min(s.x1,s.x2),i=Math.max(s.x1,s.x2),r=Math.min(s.y1,s.y2),o=Math.max(s.y1,s.y2);return n.x>=u&&n.x<=i&&n.y>=r&&n.y<=o}},function(g,b){g.exports=function(t,h,n,s,u,i){return void 0===i&&(i=0),!(h>t.right+i||n<t.left-i||s>t.bottom+i||u<t.top-i)}},function(g,b,t){var h=t(45);h.Angle=t(93),h.BresenhamPoints=t(311),h.CenterOn=t(1216),h.Clone=t(1217),h.CopyFrom=t(1218),h.Equals=t(1219),h.Extend=t(1220),h.GetEasedPoints=t(1221),h.GetMidPoint=t(1222),h.GetNearestPoint=t(1223),h.GetNormal=t(1224),h.GetPoint=t(301),h.GetPoints=t(168),h.GetShortestDistance=t(1225),h.Height=t(1226),h.Length=t(64),h.NormalAngle=t(491),h.NormalX=t(1227),h.NormalY=t(1228),h.Offset=t(1229),h.PerpSlope=t(1230),h.Random=t(169),h.ReflectAngle=t(1231),h.Rotate=t(1232),h.RotateAroundPoint=t(1233),h.RotateAroundXY=t(233),h.SetToAngle=t(1234),h.Slope=t(1235),h.Width=t(1236),g.exports=h},function(g,b){g.exports=function(t,h,n){var s=h-(t.x1+t.x2)/2,u=n-(t.y1+t.y2)/2;return t.x1+=s,t.y1+=u,t.x2+=s,t.y2+=u,t}},function(g,b,t){var h=t(45);g.exports=function(n){return new h(n.x1,n.y1,n.x2,n.y2)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2)}},function(g,b){g.exports=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2}},function(g,b,t){var h=t(64);g.exports=function(n,s,u){void 0===u&&(u=s);var i=h(n),r=n.x2-n.x1,o=n.y2-n.y1;return s&&(n.x1=n.x1-r/i*s,n.y1=n.y1-o/i*s),u&&(n.x2=n.x2+r/i*u,n.y2=n.y2+o/i*u),n}},function(g,b,t){var h=t(346),n=t(80),s=t(4);g.exports=function(u,i,r,o,l){void 0===o&&(o=0),void 0===l&&(l=[]);var e,a=[],c=u.x1,d=u.y1,f=u.x2-c,p=u.y2-d,v=n(i,l),m=r-1;for(w=0;w<m;w++)e=v(w/m),a.push(new s(c+f*e,d+p*e));if(e=v(1),a.push(new s(c+f*e,d+p*e)),0<o){for(var x=a[0],y=[x],w=1;w<a.length-1;w++){var T=a[w];h(x,T)>=o&&(y.push(T),x=T)}var E=a[a.length-1];return h(x,E)<o&&y.pop(),y.push(E),y}return a}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=(n.x1+n.x2)/2,s.y=(n.y1+n.y2)/2,s}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){void 0===u&&(u=new h);var i=n.x1,r=n.y1,o=n.x2,l=n.y2,e=(o-i)*(o-i)+(l-r)*(l-r);if(0==e)return u;var a=((s.x-i)*(o-i)+(s.y-r)*(l-r))/e;return u.x=i+a*(o-i),u.y=r+a*(l-r),u}},function(g,b,t){var h=t(14),n=t(93),s=t(4);g.exports=function(u,i){void 0===i&&(i=new s);var r=n(u)-h.TAU;return i.x=Math.cos(r),i.y=Math.sin(r),i}},function(g,b){g.exports=function(t,h){var n=t.x1,s=t.y1,u=t.x2,i=t.y2,r=(u-n)*(u-n)+(i-s)*(i-s);return 0!=r&&Math.abs(((s-h.y)*(u-n)-(n-h.x)*(i-s))/r)*Math.sqrt(r)}},function(g,b){g.exports=function(t){return Math.abs(t.y1-t.y2)}},function(g,b,t){var h=t(14),n=t(93);g.exports=function(s){return Math.cos(n(s)-h.TAU)}},function(g,b,t){var h=t(14),n=t(93);g.exports=function(s){return Math.sin(n(s)-h.TAU)}},function(g,b){g.exports=function(t,h,n){return t.x1+=h,t.y1+=n,t.x2+=h,t.y2+=n,t}},function(g,b){g.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(g,b,t){var h=t(93),n=t(491);g.exports=function(s,u){return 2*n(u)-Math.PI-h(s)}},function(g,b,t){var h=t(233);g.exports=function(n,s){return h(n,(n.x1+n.x2)/2,(n.y1+n.y2)/2,s)}},function(g,b,t){var h=t(233);g.exports=function(n,s,u){return h(n,s.x,s.y,u)}},function(g,b){g.exports=function(t,h,n,s,u){return t.x1=h,t.y1=n,t.x2=h+Math.cos(s)*u,t.y2=n+Math.sin(s)*u,t}},function(g,b){g.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(g,b){g.exports=function(t){return Math.abs(t.x1-t.x2)}},function(g,b,t){var h={Face:t(113),GenerateGridVerts:t(1238),GenerateObjVerts:t(474),GenerateVerts:t(473),ParseObj:t(492),ParseObjMaterial:t(493),RotateFace:t(1239),Vertex:t(115)};g.exports=h},function(g,b,t){var h=t(113),n=t(2),s=t(67),u=t(37),i=t(115),r=new u,o=new u,l=new s;g.exports=function(e){var a=n(e,"mesh"),c=n(e,"texture",null),d=n(e,"frame"),f=n(e,"width",1),p=n(e,"height",f),v=n(e,"widthSegments",1),m=n(e,"heightSegments",v),x=n(e,"x",0),y=n(e,"y",0),w=n(e,"z",0),T=n(e,"rotateX",0),E=n(e,"rotateY",0),S=n(e,"rotateZ",0),A=n(e,"zIsUp",!0),_=n(e,"isOrtho",!!a&&a.dirtyCache[11]),C=n(e,"colors",[16777215]),M=n(e,"alphas",[1]),R=n(e,"tile",!1),L=n(e,"flipY",!1),D=n(e,"width",null),F={faces:[],verts:[]};if(r.set(x,y,w),o.set(T,E,S),l.fromRotationXYTranslation(o,r,A),!c&&a)c=a.texture;else{if(!a||"string"!=typeof c)return F;c=a.scene.sys.textures.get(c)}var U=c.get(d);!D&&_&&c&&a&&(f=U.width/a.height,p=U.height/a.height);var P=f/2,O=p/2,B=Math.floor(v),k=Math.floor(m),I=B+1,N=k+1,Y=f/B,X=p/k,W=[],G=[],z=0,V=1,H=0,j=1;U&&(z=U.u0,V=U.u1,j=L?(H=U.v1,U.v0):(H=U.v0,U.v1));for(var K=V-z,Q=j-H,Z=0;Z<N;Z++)for(var J=Z*X-O,q=0;q<I;q++)G.push(q*Y-P,-J),W.push(z+q/B*K,H+Z/k*Q);Array.isArray(C)||(C=[C]),Array.isArray(M)||(M=[M]);var et=0,$=0;for(Z=0;Z<k;Z++)for(q=0;q<B;q++){var it=2*(q+I*Z),rt=2*(q+I*(Z+1)),ut=2*(q+1+I*(Z+1)),at=2*(q+1+I*Z),nt=C[$],ct=M[et],dt=new i(G[it],G[1+it],0,W[it],W[1+it],nt,ct).transformMat4(l),ht=new i(G[rt],G[1+rt],0,W[rt],W[1+rt],nt,ct).transformMat4(l),ft=new i(G[at],G[1+at],0,W[at],W[1+at],nt,ct).transformMat4(l),vt=new i(G[rt],G[1+rt],0,W[rt],W[1+rt],nt,ct).transformMat4(l),mt=new i(G[ut],G[1+ut],0,W[ut],W[1+ut],nt,ct).transformMat4(l),yt=new i(G[at],G[1+at],0,W[at],W[1+at],nt,ct).transformMat4(l);R&&(dt.setUVs(z,j),ht.setUVs(z,H),ft.setUVs(V,j),vt.setUVs(z,H),mt.setUVs(V,H),yt.setUVs(V,j)),++$===C.length&&($=0),++et===M.length&&(et=0),F.verts.push(dt,ht,ft,vt,mt,yt),F.faces.push(new h(dt,ht,ft),new h(vt,mt,yt))}return a&&(a.faces=a.faces.concat(F.faces),a.vertices=a.vertices.concat(F.verts)),F}},function(g,b){g.exports=function(t,h,n,s){var u,i,r;void 0===n&&void 0===s&&(i=(u=t.getInCenter()).x,r=u.y);var o=Math.cos(h),l=Math.sin(h),e=t.vertex1,a=t.vertex2,c=t.vertex3,d=e.x-i,f=e.y-r;e.set(d*o-f*l+i,d*l+f*o+r),a.set((d=a.x-i)*o-(f=a.y-r)*l+i,d*l+f*o+r),c.set((d=c.x-i)*o-(f=c.y-r)*l+i,d*l+f*o+r)}},function(g,b,t){var h=t(4);h.Ceil=t(1241),h.Clone=t(1242),h.CopyFrom=t(1243),h.Equals=t(1244),h.Floor=t(1245),h.GetCentroid=t(1246),h.GetMagnitude=t(494),h.GetMagnitudeSq=t(495),h.GetRectangleFromPoints=t(1247),h.Interpolate=t(1248),h.Invert=t(1249),h.Negative=t(1250),h.Project=t(1251),h.ProjectUnit=t(1252),h.SetMagnitude=t(1253),g.exports=h},function(g,b){g.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(g,b,t){var h=t(4);g.exports=function(n){return new h(n.x,n.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y}},function(g,b){g.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(g,b,t){var h=t(4);g.exports=function(n,s){if(void 0===s&&(s=new h),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var u=n.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(1===u)s.x=n[0].x,s.y=n[0].y;else{for(var i=0;i<u;i++)s.x+=n[i].x,s.y+=n[i].y;s.x/=u,s.y/=u}return s}},function(g,b,t){var h=t(10);g.exports=function(n,s){void 0===s&&(s=new h);for(var u=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=0;l<n.length;l++){var e=n[l];e.x>u&&(u=e.x),e.x<i&&(i=e.x),e.y>r&&(r=e.y),e.y<o&&(o=e.y)}return s.x=i,s.y=o,s.width=u-i,s.height=r-o,s}},function(g,b,t){var h=t(4);g.exports=function(n,s,u,i){return void 0===u&&(u=0),void 0===i&&(i=new h),i.x=n.x+(s.x-n.x)*u,i.y=n.y+(s.y-n.y)*u,i}},function(g,b){g.exports=function(t){return t.setTo(t.y,t.x)}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.setTo(-n.x,-n.y)}},function(g,b,t){var h=t(4),n=t(495);g.exports=function(s,u,i){void 0===i&&(i=new h);var r=(s.x*u.x+s.y*u.y)/n(u);return 0!=r&&(i.x=r*u.x,i.y=r*u.y),i}},function(g,b,t){var h=t(4);g.exports=function(n,s,u){void 0===u&&(u=new h);var i=n.x*s.x+n.y*s.y;return 0!=i&&(u.x=i*s.x,u.y=i*s.y),u}},function(g,b,t){var h=t(494);g.exports=function(n,s){var u;return 0===n.x&&0===n.y||(u=h(n),n.x/=u,n.y/=u),n.x*=s,n.y*=s,n}},function(g,b,t){var h=t(224);h.Clone=t(1255),h.Contains=t(225),h.ContainsPoint=t(1256),h.Earcut=t(68),h.GetAABB=t(463),h.GetNumberArray=t(1257),h.GetPoints=t(464),h.Perimeter=t(465),h.Reverse=t(1258),h.Simplify=t(1259),h.Smooth=t(466),h.Translate=t(1260),g.exports=h},function(g,b,t){var h=t(224);g.exports=function(n){return new h(n.points)}},function(g,b,t){var h=t(225);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){void 0===h&&(h=[]);for(var n=0;n<t.points.length;n++)h.push(t.points[n].x),h.push(t.points[n].y);return h}},function(g,b){g.exports=function(t){return t.points.reverse(),t}},function(g,b){g.exports=function(h,n,s){void 0===n&&(n=1),void 0===s&&(s=!1);var u,i=h.points;return 2<i.length&&(u=n*n,s||(i=function(r,o){for(var l,e,a,c,d,f=r[0],p=[f],v=1,m=r.length;v<m;v++)o<(c=(e=l=r[v]).x-(a=f).x)*c+(d=e.y-a.y)*d&&(p.push(l),f=l);return f!==l&&p.push(l),p}(i,u)),h.setTo(function t(h,n){var s=h.length-1,u=[h[0]];return function i(r,o,l,e,a){for(var c,d,f,p,v,m,x,y,w,T=e,E=o+1;E<l;E++){var S=(d=r[E],w=y=x=m=v=void 0,w=(p=r[l]).y-(x=(f=r[o]).y),0==(y=p.x-(m=f.x))&&0===w||(1<(v=((d.x-m)*y+(d.y-x)*w)/(y*y+w*w))?(m=p.x,x=p.y):0<v&&(m+=y*v,x+=w*v)),(y=d.x-m)*y+(w=d.y-x)*w);T<S&&(c=E,T=S)}e<T&&(1<c-o&&i(r,o,c,e,a),a.push(r[c]),1<l-c&&i(r,c,l,e,a))}(h,0,s,n,u),u.push(h[s]),u}(i,u))),h}},function(g,b){g.exports=function(t,h,n){for(var s=t.points,u=0;u<s.length;u++)s[u].x+=h,s[u].y+=n;return t}},function(g,b){g.exports=function(t){return t.width*t.height}},function(g,b){g.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(g,b){g.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(g,b,t){var h=t(10);g.exports=function(n){return new h(n.x,n.y,n.width,n.height)}},function(g,b,t){var h=t(56);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height}},function(g,b,t){var h=t(234);g.exports=function(n,s){var u=h(n);return u<h(s)?n.setSize(s.height*u,s.height):n.setSize(s.width,s.width/u),n.setPosition(s.centerX-n.width/2,s.centerY-n.height/2)}},function(g,b,t){var h=t(234);g.exports=function(n,s){var u=h(n);return u>h(s)?n.setSize(s.height*u,s.height):n.setSize(s.width,s.width/u),n.setPosition(s.centerX-n.width/2,s.centerY-n.height/2)}},function(g,b){g.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(g,b){g.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(g,b,t){var h=t(10);g.exports=function(n,s,u,i,r){return void 0===r&&(r=new h),r.setTo(Math.min(n,u),Math.min(s,i),Math.abs(n-u),Math.abs(s-i))}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.centerX,s.y=n.centerY,s}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.width,s.y=n.height,s}},function(g,b,t){var h=t(187);g.exports=function(n,s,u){var i=n.centerX,r=n.centerY;return n.setSize(n.width+2*s,n.height+2*u),h(n,i,r)}},function(g,b,t){var h=t(10),n=t(114);g.exports=function(s,u,i){return void 0===i&&(i=new h),n(s,u)?(i.x=Math.max(s.x,u.x),i.y=Math.max(s.y,u.y),i.width=Math.min(s.right,u.right)-i.x,i.height=Math.min(s.bottom,u.bottom)-i.y):i.setEmpty(),i}},function(g,b){g.exports=function(t,h){for(var n=t.x,s=t.right,u=t.y,i=t.bottom,r=0;r<h.length;r++)n=Math.min(n,h[r].x),s=Math.max(s,h[r].x),u=Math.min(u,h[r].y),i=Math.max(i,h[r].y);return t.x=n,t.y=u,t.width=s-n,t.height=i-u,t}},function(g,b){g.exports=function(t,h){var n=Math.min(t.x,h.x),s=Math.max(t.right,h.right);t.x=n,t.width=s-n;var u=Math.min(t.y,h.y),i=Math.max(t.bottom,h.bottom);return t.y=u,t.height=i-u,t}},function(g,b){g.exports=function(t,h,n){var s=Math.min(t.x,h),u=Math.max(t.right,h);t.x=s,t.width=u-s;var i=Math.min(t.y,n),r=Math.max(t.bottom,n);return t.y=i,t.height=r-i,t}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b){g.exports=function(t,h){return t.x<h.right&&t.right>h.x&&t.y<h.bottom&&t.bottom>h.y}},function(g,b,t){var h=t(4),n=t(34);g.exports=function(s,u,i){void 0===i&&(i=new h),u=n(u);var r=Math.sin(u),o=Math.cos(u),l=0<o?s.width/2:s.width/-2,e=0<r?s.height/2:s.height/-2;return Math.abs(l*r)<Math.abs(e*o)?e=l*r/o:l=e*o/r,i.x=l+s.centerX,i.y=e+s.centerY,i}},function(g,b,t){var h=t(192),n=t(497),s=t(4);g.exports=function(u,i,r){if(void 0===r&&(r=new s),n(u,i))switch(h(0,3)){case 0:r.x=u.x+Math.random()*(i.right-u.x),r.y=u.y+Math.random()*(i.top-u.y);break;case 1:r.x=i.x+Math.random()*(u.right-i.x),r.y=i.bottom+Math.random()*(u.bottom-i.bottom);break;case 2:r.x=u.x+Math.random()*(i.x-u.x),r.y=i.y+Math.random()*(u.bottom-i.y);break;case 3:r.x=i.right+Math.random()*(u.right-i.right),r.y=u.y+Math.random()*(i.bottom-u.y)}return r}},function(g,b){g.exports=function(t,h){return t.width===h.width&&t.height===h.height}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=h),t.width*=h,t.height*=n,t}},function(g,b,t){var h=t(82);h.Area=t(1288),h.BuildEquilateral=t(1289),h.BuildFromPolygon=t(1290),h.BuildRight=t(1291),h.CenterOn=t(1292),h.Centroid=t(498),h.CircumCenter=t(1293),h.CircumCircle=t(1294),h.Clone=t(1295),h.Contains=t(112),h.ContainsArray=t(232),h.ContainsPoint=t(1296),h.CopyFrom=t(1297),h.Decompose=t(489),h.Equals=t(1298),h.GetPoint=t(470),h.GetPoints=t(471),h.InCenter=t(500),h.Perimeter=t(1299),h.Offset=t(499),h.Random=t(178),h.Rotate=t(1300),h.RotateAroundPoint=t(1301),h.RotateAroundXY=t(235),g.exports=h},function(g,b){g.exports=function(t){var h=t.x1,n=t.y1;return Math.abs(((t.x3-h)*(t.y2-n)-(t.x2-h)*(t.y3-n))/2)}},function(g,b,t){var h=t(82);g.exports=function(n,s,u){var i=u*(Math.sqrt(3)/2);return new h(n,s,n+u/2,s+i,n-u/2,s+i)}},function(g,b,t){var h=t(68),n=t(82);g.exports=function(s,u,i,r,o){void 0===u&&(u=null),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=[]);for(var l,e,a,x=h(s,u),y=0;y<x.length;y+=3)o.push(new n(s[2*(l=x[y])]*i,s[2*l+1]*r,s[2*(e=x[y+1])]*i,s[2*e+1]*r,s[2*(a=x[y+2])]*i,s[2*a+1]*r));return o}},function(g,b,t){var h=t(82);g.exports=function(n,s,u,i){return void 0===i&&(i=u),new h(n,s,n,s-i,n+u,s)}},function(g,b,t){var h=t(498),n=t(499);g.exports=function(s,u,i,r){void 0===r&&(r=h);var o=r(s);return n(s,u-o.x,i-o.y)}},function(g,b,t){var h=t(3);g.exports=function(n,s){void 0===s&&(s=new h);var u=n.x3,i=n.y3,r=n.x1-u,o=n.y1-i,l=n.x2-u,e=n.y2-i,a=2*(r*e-o*l),d=r*(l*l+e*e)-(r*r+o*o)*l;return s.x=u-(o*(l*l+e*e)-(r*r+o*o)*e)/a,s.y=i+d/a,s}},function(g,b,t){var h=t(62);g.exports=function(n,s){void 0===s&&(s=new h);var u,i,r,o,l=n.x1,e=n.y1,a=n.x2,c=n.y2,d=n.x3,f=n.y3,p=a-l,v=c-e,m=d-l,x=f-e,y=p*(l+a)+v*(e+c),w=m*(l+d)+x*(e+f),T=2*(p*(f-c)-v*(d-a));return Math.abs(T)<1e-6?(u=Math.min(l,a,d),i=Math.min(e,c,f),r=.5*(Math.max(l,a,d)-u),o=.5*(Math.max(e,c,f)-i),s.x=u+r,s.y=i+o):(s.x=(x*y-v*w)/T,s.y=(p*w-m*y)/T,r=s.x-l,o=s.y-e),s.radius=Math.sqrt(r*r+o*o),s}},function(g,b,t){var h=t(82);g.exports=function(n){return new h(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}},function(g,b,t){var h=t(112);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(g,b){g.exports=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2&&t.x3===h.x3&&t.y3===h.y3}},function(g,b,t){var h=t(64);g.exports=function(n){var s=n.getLineA(),u=n.getLineB(),i=n.getLineC();return h(s)+h(u)+h(i)}},function(g,b,t){var h=t(235),n=t(500);g.exports=function(s,u){var i=n(s);return h(s,i.x,i.y,u)}},function(g,b,t){var h=t(235);g.exports=function(n,s,u){return h(n,s.x,s.y,u)}},function(g,b,t){var h=t(200),n=t(17)(!1,n={CreatePixelPerfectHandler:t(501),CreateInteractiveObject:t(502),Events:t(49),Gamepad:t(1303),InputManager:t(403),InputPlugin:t(1315),InputPluginCache:t(151),Keyboard:t(1316),Mouse:t(1330),Pointer:t(406),Touch:t(1331)},h);g.exports=n},function(g,b,t){g.exports={Axis:t(503),Button:t(504),Events:t(236),Gamepad:t(505),GamepadPlugin:t(1310),Configs:t(1311)}},function(g,b){g.exports="down"},function(g,b){g.exports="up"},function(g,b){g.exports="connected"},function(g,b){g.exports="disconnected"},function(g,b){g.exports="down"},function(g,b){g.exports="up"},function(g,b,t){var h=t(0),n=t(9),s=t(236),u=t(505),i=t(6),r=t(151),o=t(49),l=new h({Extends:n,initialize:function(e){n.call(this),this.scene=e.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=e,this.enabled=!0,this.gamepads=[],this.queue=[],e.pluginEvents.once(o.BOOT,this.boot,this),e.pluginEvents.on(o.START,this.start,this)},boot:function(){var e=this.scene.sys.game,a=this.settings.input,c=e.config;this.enabled=i(a,"gamepad",c.inputGamepad)&&e.device.input.gamepads,this.target=i(a,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function e(d){!d.defaultPrevented&&a.isActive()&&(a.refreshPads(),a.queue.push(d))}var a=this,c=this.target;this.onGamepadHandler=e,c.addEventListener("gamepadconnected",e,!1),c.addEventListener("gamepaddisconnected",e,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(e)for(var a=this.gamepads,c=0;c<e.length;c++){var f,p,v,m=e[c];m&&((p=a[f=m.index])?p.id!==m.id?(p.destroy(),a[f]=new u(this,m)):p.update(m):(v=new u(this,m),a[f]=v,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=v):this._pad3=v:this._pad2=v:this._pad1=v))}else this.disconnectAll()},getAll:function(){for(var e=[],a=this.gamepads,c=0;c<a.length;c++)a[c]&&e.push(a[c]);return e},getPad:function(e){for(var a=this.gamepads,c=0;c<a.length;c++)if(a[c]&&a[c].index===e)return a[c]},update:function(){if(this.enabled){this.refreshPads();var e=this.queue.length;if(0!==e)for(var a=this.queue.splice(0,e),c=0;c<e;c++){var d=a[c],f=this.getPad(d.gamepad.index);"gamepadconnected"===d.type?this.emit(s.CONNECTED,f,d):"gamepaddisconnected"===d.type&&this.emit(s.DISCONNECTED,f,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",l,"gamepad","gamepad","inputGamepad"),g.exports=l},function(g,b,t){g.exports={DUALSHOCK_4:t(1312),SNES_USB:t(1313),XBOX_360:t(1314)}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(g,b,t){var h=t(62),n=t(63),s=t(0),u=t(200),i=t(502),r=t(501),o=t(48),l=t(108),e=t(109),a=t(49),c=t(9),d=t(2),f=t(55),p=t(151),v=t(7),m=t(24),x=t(10),y=t(56),w=t(21),T=t(82),E=t(112),S=new s({Extends:c,initialize:function(A){c.call(this),this.scene=A,this.systems=A.sys,this.settings=A.sys.settings,this.manager=A.sys.game.input,this.pluginEvents=new c,this.enabled=!0,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var _={cancelled:!1};this._eventContainer={stopPropagation:function(){_.cancelled=!0}},this._eventData=_,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,A.sys.events.once(w.BOOT,this.boot,this),A.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(a.BOOT)},start:function(){var A=this.systems.events;A.on(w.TRANSITION_START,this.transitionIn,this),A.on(w.TRANSITION_OUT,this.transitionOut,this),A.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(w.PRE_UPDATE,this.preUpdate,this),A.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(a.GAME_OUT,this.onGameOut,this),this.manager.events.on(a.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(a.START)},onGameOver:function(A){this.isActive()&&this.emit(a.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(a.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(a.PRE_UPDATE);var A=this._pendingRemoval,_=this._pendingInsertion,C=A.length;if(0!==C||0!==_.length){for(var R=this._list,L=0;L<C;L++){var D=A[L],F=R.indexOf(D);-1<F&&(R.splice(F,1),this.clear(D,!0))}A.length=0,this._pendingRemoval.length=0,this._list=R.concat(_.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,_){if(!this.isActive())return!1;if(this.pluginEvents.emit(a.UPDATE,A,_),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var C=this.manager,M=C.pointers,R=C.pointersTotal,L=0;L<R;L++)M[L].updateMotion();if(0===this._list.length)return!1;var D=this.pollRate;if(-1===D)return!1;if(0<D){if(this._pollTimer-=_,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var F=!1;for(L=0;L<R;L++){var U=0,P=M[L];this._tempZones=[],this._temp=this.hitTestPointer(P),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),U+=this.processOverOutEvents(P),2===this.getDragState(P)&&this.processDragThresholdEvent(P,A),0<U&&(F=!0)}return F},update:function(A,_){if(!this.isActive())return!1;for(var C=_.length,M=!1,R=0;R<C;R++){var L=0,D=_[R];switch(this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case u.MOUSE_DOWN:L+=this.processDragDownEvent(D),L+=this.processDownEvents(D),L+=this.processOverOutEvents(D);break;case u.MOUSE_UP:L+=this.processDragUpEvent(D),L+=this.processUpEvents(D),L+=this.processOverOutEvents(D);break;case u.TOUCH_START:L+=this.processDragDownEvent(D),L+=this.processDownEvents(D),L+=this.processOverEvents(D);break;case u.TOUCH_END:case u.TOUCH_CANCEL:L+=this.processDragUpEvent(D),L+=this.processUpEvents(D),L+=this.processOutEvents(D);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:L+=this.processDragMoveEvent(D),L+=this.processMoveEvents(D),L+=this.processOverOutEvents(D);break;case u.MOUSE_WHEEL:L+=this.processWheelEvent(D)}0<L&&(M=!0)}return this._updatedThisFrame=!0,M},clear:function(A,_){void 0===_&&(_=!1);var C=A.input;if(C){_||this.queueForRemoval(A),C.gameObject=void 0,C.target=void 0,C.hitArea=void 0,C.hitAreaCallback=void 0,C.callbackContext=void 0,A.input=null;var M=this._draggable.indexOf(A);return-1<M&&this._draggable.splice(M,1),-1<(M=this._drag[0].indexOf(A))&&this._drag[0].splice(M,1),-1<(M=this._over[0].indexOf(A))&&(this._over[0].splice(M,1),this.manager.resetCursor(C)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,_,C,M){return void 0===M&&(M=!1),A.input?A.input.enabled=!0:this.setHitArea(A,_,C),A.input&&M&&!A.input.dropZone&&(A.input.dropZone=M),this},hitTestPointer:function(A){for(var _=this.cameras.getCamerasBelowPointer(A),C=0;C<_.length;C++){for(var M=_[C],R=this.manager.hitTest(A,this._list,M),L=0;L<R.length;L++){var D=R[L];D.input.dropZone&&this._tempZones.push(D)}if(0<R.length)return A.camera=M,R}return A.camera=_[0],[]},processDownEvents:function(A){for(var _=0,C=this._temp,M=this._eventData,R=this._eventContainer,L=M.cancelled=!1,D=0;D<C.length;D++){var F=C[D];if(F.input){if(_++,F.emit(a.GAMEOBJECT_POINTER_DOWN,A,F.input.localX,F.input.localY,R),M.cancelled||!F.input){L=!0;break}if(this.emit(a.GAMEOBJECT_DOWN,A,F,R),M.cancelled||!F.input){L=!0;break}}}return!L&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(a.POINTER_DOWN,A,C):this.emit(a.POINTER_DOWN_OUTSIDE,A)),_},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,_){this._dragState[A.id]=_},processDragThresholdEvent:function(A,_){var C=!1,M=this.dragTimeThreshold,R=this.dragDistanceThreshold;if((0<R&&o(A.x,A.y,A.downX,A.downY)>=R||0<M&&_>=A.downTime+M)&&(C=!0),C)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(3!==this.getDragState(A))return 0;for(var _=this._drag[A.id],C=0;C<_.length;C++){var M=_[C],R=M.input;R.dragState=2,R.dragStartX=M.x,R.dragStartY=M.y,R.dragStartXGlobal=A.worldX,R.dragStartYGlobal=A.worldY,R.dragX=R.dragStartXGlobal-R.dragStartX,R.dragY=R.dragStartYGlobal-R.dragStartY,M.emit(a.GAMEOBJECT_DRAG_START,A,R.dragX,R.dragY),this.emit(a.DRAG_START,A,M)}return this.setDragState(A,4),_.length},processDragDownEvent:function(A){var _=this._temp;if(0===this._draggable.length||0===_.length||!A.primaryDown||0!==this.getDragState(A))return 0;this.setDragState(A,1);for(var C=[],M=0;M<_.length;M++){var R=_[M];R.input.draggable&&0===R.input.dragState&&C.push(R)}return 0===C.length?(this.setDragState(A,0),0):(1<C.length&&(this.sortGameObjects(C),this.topOnly&&C.splice(1)),this._drag[A.id]=C,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(2===this.getDragState(A)&&this.processDragThresholdEvent(A,this.manager.game.loop.now),4!==this.getDragState(A))return 0;for(var _=this._tempZones,C=this._drag[A.id],M=0;M<C.length;M++){var R,L,D,F,U,P,O,B,k=C[M],I=k.input,N=I.target;N?0===(R=_.indexOf(N))?(k.emit(a.GAMEOBJECT_DRAG_OVER,A,N),this.emit(a.DRAG_OVER,A,k,N)):0<R?(k.emit(a.GAMEOBJECT_DRAG_LEAVE,A,N),this.emit(a.DRAG_LEAVE,A,k,N),I.target=_[0],k.emit(a.GAMEOBJECT_DRAG_ENTER,A,N=I.target),this.emit(a.DRAG_ENTER,A,k,N)):(k.emit(a.GAMEOBJECT_DRAG_LEAVE,A,N),this.emit(a.DRAG_LEAVE,A,k,N),_[0]?(I.target=_[0],k.emit(a.GAMEOBJECT_DRAG_ENTER,A,N=I.target),this.emit(a.DRAG_ENTER,A,k,N)):I.target=null):!N&&_[0]&&(I.target=_[0],k.emit(a.GAMEOBJECT_DRAG_ENTER,A,N=I.target),this.emit(a.DRAG_ENTER,A,k,N)),D=k.parentContainer?(F=A.worldX-I.dragStartXGlobal,U=A.worldY-I.dragStartYGlobal,P=k.getParentRotation(),O=F*Math.cos(P)+U*Math.sin(P),B=U*Math.cos(P)-F*Math.sin(P),L=(O*=1/k.parentContainer.scaleX)+I.dragStartX,(B*=1/k.parentContainer.scaleY)+I.dragStartY):(L=A.worldX-I.dragX,A.worldY-I.dragY),k.emit(a.GAMEOBJECT_DRAG,A,L,D),this.emit(a.DRAG,A,k,L,D)}return C.length},processDragUpEvent:function(A){for(var _=this._drag[A.id],C=0;C<_.length;C++){var M,R,L=_[C],D=L.input;D&&2===D.dragState&&(D.dragState=0,D.dragX=D.localX-L.displayOriginX,D.dragY=D.localY-L.displayOriginY,M=!1,(R=D.target)&&(L.emit(a.GAMEOBJECT_DROP,A,R),this.emit(a.DROP,A,L,R),M=!(D.target=null)),L.input&&(L.emit(a.GAMEOBJECT_DRAG_END,A,D.dragX,D.dragY,M),this.emit(a.DRAG_END,A,L,M)))}return this.setDragState(A,0),_.splice(0),0},processMoveEvents:function(A){for(var _=0,C=this._temp,M=this._eventData,R=this._eventContainer,L=M.cancelled=!1,D=0;D<C.length;D++){var F=C[D];if(F.input){if(_++,F.emit(a.GAMEOBJECT_POINTER_MOVE,A,F.input.localX,F.input.localY,R),M.cancelled||!F.input){L=!0;break}if(this.emit(a.GAMEOBJECT_MOVE,A,F,R),M.cancelled||!F.input){L=!0;break}if(this.topOnly)break}}return L||this.emit(a.POINTER_MOVE,A,C),_},processWheelEvent:function(A){for(var _=0,C=this._temp,M=this._eventData,R=this._eventContainer,L=M.cancelled=!1,D=A.deltaX,F=A.deltaY,U=A.deltaZ,P=0;P<C.length;P++){var O=C[P];if(O.input){if(_++,O.emit(a.GAMEOBJECT_POINTER_WHEEL,A,D,F,U,R),M.cancelled||!O.input){L=!0;break}if(this.emit(a.GAMEOBJECT_WHEEL,A,O,D,F,U,R),M.cancelled||!O.input){L=!0;break}}}return L||this.emit(a.POINTER_WHEEL,A,C,D,F,U),_},processOverEvents:function(A){var _=this._temp,C=0,M=_.length,R=[];if(0<M){for(var L=this.manager,D=this._eventData,F=this._eventContainer,U=D.cancelled=!1,P=0;P<M;P++){var O=_[P];if(O.input){if(R.push(O),L.setCursor(O.input),O.emit(a.GAMEOBJECT_POINTER_OVER,A,O.input.localX,O.input.localY,F),C++,D.cancelled||!O.input){U=!0;break}if(this.emit(a.GAMEOBJECT_OVER,A,O,F),D.cancelled||!O.input){U=!0;break}}}U||this.emit(a.POINTER_OVER,A,R)}return this._over[A.id]=R,C},processOutEvents:function(A){var _=this._over[A.id],C=0,M=_.length;if(0<M){var R=this.manager,L=this._eventData,D=this._eventContainer,F=L.cancelled=!1;this.sortGameObjects(_);for(var U=0;U<M;U++){var P=_[U];if((P=_[U]).input){if(R.resetCursor(P.input),P.emit(a.GAMEOBJECT_POINTER_OUT,A,D),C++,L.cancelled||!P.input){F=!0;break}if(this.emit(a.GAMEOBJECT_OUT,A,P,D),L.cancelled||!P.input){F=!0;break}F||this.emit(a.POINTER_OUT,A,_)}}this._over[A.id]=[]}return C},processOverOutEvents:function(A){for(var _,C=this._temp,M=[],R=[],L=[],D=this._over[A.id],F=this._drag[A.id],U=this.manager,P=0;P<D.length;P++)-1===C.indexOf(_=D[P])&&-1===F.indexOf(_)?M.push(_):L.push(_);for(P=0;P<C.length;P++)-1===D.indexOf(_=C[P])&&R.push(_);var O=M.length,B=0,k=this._eventData,I=this._eventContainer,N=k.cancelled=!1;if(0<O){for(this.sortGameObjects(M),P=0;P<O;P++)if((_=M[P]).input){if(U.resetCursor(_.input),_.emit(a.GAMEOBJECT_POINTER_OUT,A,I),B++,k.cancelled||!_.input){N=!0;break}if(this.emit(a.GAMEOBJECT_OUT,A,_,I),k.cancelled||!_.input){N=!0;break}}N||this.emit(a.POINTER_OUT,A,M)}if(O=R.length,N=k.cancelled=!1,0<O){for(this.sortGameObjects(R),P=0;P<O;P++)if((_=R[P]).input){if(U.setCursor(_.input),_.emit(a.GAMEOBJECT_POINTER_OVER,A,_.input.localX,_.input.localY,I),B++,k.cancelled||!_.input){N=!0;break}if(this.emit(a.GAMEOBJECT_OVER,A,_,I),k.cancelled||!_.input){N=!0;break}}N||this.emit(a.POINTER_OVER,A,R)}return D=L.concat(R),this._over[A.id]=this.sortGameObjects(D),B},processUpEvents:function(A){for(var _=this._temp,C=this._eventData,M=this._eventContainer,R=C.cancelled=!1,L=0;L<_.length;L++){var D=_[L];if(D.input){if(D.emit(a.GAMEOBJECT_POINTER_UP,A,D.input.localX,D.input.localY,M),C.cancelled||!D.input){R=!0;break}if(this.emit(a.GAMEOBJECT_UP,A,D,M),C.cancelled||!D.input){R=!0;break}}}return!R&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(a.POINTER_UP,A,_):this.emit(a.POINTER_UP_OUTSIDE,A)),_.length},queueForInsertion:function(A){return-1===this._pendingInsertion.indexOf(A)&&-1===this._list.indexOf(A)&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,_){void 0===_&&(_=!0),Array.isArray(A)||(A=[A]);for(var C=0;C<A.length;C++){var M=A[C];M.input.draggable=_;var R=this._draggable.indexOf(M);_&&-1===R?this._draggable.push(M):!_&&-1<R&&this._draggable.splice(R,1)}return this},makePixelPerfect:function(A){return void 0===A&&(A=1),r(this.systems.textures,A)},setHitArea:function(A,_,C){if(void 0===_)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var M,R,L=!1,D=!1,F=!1,U=!1,P=!1,O=!0;v(_)?(_=d(M=_,"hitArea",null),C=d(M,"hitAreaCallback",null),L=d(M,"draggable",!1),D=d(M,"dropZone",!1),F=d(M,"cursor",!1),U=d(M,"useHandCursor",!1),P=d(M,"pixelPerfect",!1),R=d(M,"alphaTolerance",1),P&&(_={},C=this.makePixelPerfect(R)),_&&C||(this.setHitAreaFromTexture(A),O=!1)):"function"!=typeof _||C||(C=_,_={});for(var B=0;B<A.length;B++){var k,I=A[B];P&&"Container"===I.type?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((k=I.input?I.input:i(I,_,C)).customHitArea=O,k.dropZone=D,k.cursor=U?"pointer":F,I.input=k,L&&this.setDraggable(I),this.queueForInsertion(I))}return this},setHitAreaCircle:function(A,_,C,M,R){void 0===R&&(R=n);var L=new h(_,C,M);return this.setHitArea(A,L,R)},setHitAreaEllipse:function(A,_,C,M,R,L){void 0===L&&(L=e);var D=new l(_,C,M,R);return this.setHitArea(A,D,L)},setHitAreaFromTexture:function(A,_){void 0===_&&(_=y),Array.isArray(A)||(A=[A]);for(var C=0;C<A.length;C++){var M=A[C],R=M.frame,L=0,D=0;M.width?(L=M.width,D=M.height):R&&(L=R.realWidth,D=R.realHeight),"Container"!==M.type||0!==L&&0!==D?0!==L&&0!==D&&(M.input=i(M,new x(0,0,L,D),_),this.queueForInsertion(M)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(A,_,C,M,R,L){void 0===L&&(L=y);var D=new x(_,C,M,R);return this.setHitArea(A,D,L)},setHitAreaTriangle:function(A,_,C,M,R,L,D,F){void 0===F&&(F=E);var U=new T(_,C,M,R,L,D);return this.setHitArea(A,U,F)},enableDebug:function(A,_){void 0===_&&(_=65280);var C=A.input;if(!C||!C.hitArea)return this;var M=C.hitArea,R=M.type,L=C.hitAreaDebug,D=this.systems.add,F=this.systems.updateList;L&&(F.remove(L),L.destroy(),L=null);var U=0,P=0;switch(R){case f.CIRCLE:L=D.arc(0,0,M.radius),U=M.x-M.radius,P=M.y-M.radius;break;case f.ELLIPSE:L=D.ellipse(0,0,M.width,M.height),U=M.x-M.width/2,P=M.y-M.height/2;break;case f.LINE:L=D.line(0,0,M.x1,M.y1,M.x2,M.y2);break;case f.POLYGON:L=D.polygon(0,0,M.points);break;case f.RECTANGLE:L=D.rectangle(0,0,M.width,M.height),U=M.x,P=M.y;break;case f.TRIANGLE:L=D.triangle(0,0,M.x1,M.y1,M.x2,M.y2,M.x3,M.y3)}return L&&(L.isFilled=!1,L.preUpdate=function(){L.setStrokeStyle(1/A.scale,_),L.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var O,B=A.x,k=A.y,I=A.rotation,N=A.scaleX,Y=A.scaleY;A.parentContainer&&(B=(O=A.getWorldTransformMatrix()).tx,k=O.ty,I=O.rotation,N=O.scaleX,Y=O.scaleY),L.setRotation(I),L.setScale(N,Y),L.setPosition(B+U,k+P),L.setScrollFactor(A.scrollFactorX,A.scrollFactorY),L.setDepth(A.depth)},F.add(L),C.hitAreaDebug=L),this},removeDebug:function(A){var _,C=A.input;return C&&C.hitAreaDebug&&(this.systems.updateList.remove(_=C.hitAreaDebug),_.destroy(),C.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(A,_){if(A.parentContainer||_.parentContainer){if(A.parentContainer===_.parentContainer)return _.parentContainer.getIndex(_)-A.parentContainer.getIndex(A);if(A.parentContainer===_)return-1;if(_.parentContainer===A)return 1;for(var C=A.getIndexList(),M=_.getIndexList(),R=Math.min(C.length,M.length),L=0;L<R;L++){var D=C[L],F=M[L];if(D!==F)return F-D}return M.length-C.length}return this.displayList.getIndex(_)-this.displayList.getIndex(A)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(a.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var A=this._dragState.length=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var _=this.manager;_.canvas.style.cursor=_.defaultCursor;var C=this.systems.events;C.off(w.TRANSITION_START,this.transitionIn,this),C.off(w.TRANSITION_OUT,this.transitionOut,this),C.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),C.off(w.PRE_UPDATE,this.preUpdate,this),_.events.off(a.GAME_OUT,this.onGameOut,this),_.events.off(a.GAME_OVER,this.onGameOver,this),C.off(w.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(a.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});m.register("InputPlugin",S,"input"),g.exports=S},function(g,b,t){g.exports={Events:t(152),KeyboardManager:t(404),KeyboardPlugin:t(1324),Key:t(506),KeyCodes:t(141),KeyCombo:t(507),AdvanceKeyCombo:t(509),ProcessKeyCombo:t(508),ResetKeyCombo:t(510),JustDown:t(1326),JustUp:t(1327),DownDuration:t(1328),UpDuration:t(1329)}},function(g,b){g.exports="keydown"},function(g,b){g.exports="keyup"},function(g,b){g.exports="keycombomatch"},function(g,b){g.exports="down"},function(g,b){g.exports="keydown-"},function(g,b){g.exports="keyup-"},function(g,b){g.exports="up"},function(g,b,t){var h=t(0),n=t(9),s=t(152),u=t(22),i=t(6),r=t(49),o=t(151),l=t(506),e=t(141),a=t(507),c=t(1325),d=t(21),f=t(76),p=new h({Extends:n,initialize:function(v){n.call(this),this.game=v.systems.game,this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.manager=v.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,v.pluginEvents.once(r.BOOT,this.boot,this),v.pluginEvents.on(r.START,this.start,this)},boot:function(){var v=this.settings.input;this.enabled=i(v,"keyboard",!0);var m=i(v,"keyboard.capture",null);m&&this.addCaptures(m),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(v){return this.manager.addCapture(v),this},removeCapture:function(v){return this.manager.removeCapture(v),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:e.UP,down:e.DOWN,left:e.LEFT,right:e.RIGHT,space:e.SPACE,shift:e.SHIFT})},addKeys:function(v,m,x){void 0===m&&(m=!0),void 0===x&&(x=!1);var y={};if("string"==typeof v){v=v.split(",");for(var w=0;w<v.length;w++){var T=v[w].trim();T&&(y[T]=this.addKey(T,m,x))}}else for(var E in v)y[E]=this.addKey(v[E],m,x);return y},addKey:function(v,m,x){void 0===m&&(m=!0),void 0===x&&(x=!1);var y=this.keys;if(v instanceof l){var w=y.indexOf(v);return-1<w?y[w]=v:y[v.keyCode]=v,m&&this.addCapture(v.keyCode),v.setEmitOnRepeat(x),v}return"string"==typeof v&&(v=e[v.toUpperCase()]),y[v]||(y[v]=new l(this,v),m&&this.addCapture(v),y[v].setEmitOnRepeat(x)),y[v]},removeKey:function(v,m){void 0===m&&(m=!1);var x,y,w=this.keys;return v instanceof l?-1<(y=w.indexOf(v))&&(x=this.keys[y],this.keys[y]=void 0):"string"==typeof v&&(v=e[v.toUpperCase()]),w[v]&&(x=w[v],w[v]=void 0),x&&(x.plugin=null,m&&x.destroy()),this},removeAllKeys:function(v){for(var m=this.keys,x=0;x<m.length;x++){var y=m[x];y&&(m[x]=void 0,v&&y.destroy())}return this},createCombo:function(v,m){return new a(this,v,m)},checkDown:function(v,m){if(void 0===m&&(m=0),this.enabled&&v.isDown){var x=f(this.time-v.timeDown,m);if(x>v._tick)return v._tick=x,!0}return!1},update:function(){var v=this.manager.queue,m=v.length;if(this.isActive()&&0!==m)for(var x=this.keys,y=0;y<m;y++){var w=v[y],T=w.keyCode,E=x[T],S=!1;void 0===w.cancelled&&(w.cancelled=0,w.stopImmediatePropagation=function(){w.cancelled=1},w.stopPropagation=function(){w.cancelled=-1}),-1!==w.cancelled&&(T===this.prevCode&&w.timeStamp===this.prevTime||(this.prevCode=T,this.prevTime=w.timeStamp,"keydown"===w.type?(E&&(S=E.isDown,E.onDown(w)),w.cancelled||E&&S||(c[T]&&this.emit(s.KEY_DOWN+c[T],w),w.cancelled||this.emit(s.ANY_KEY_DOWN,w))):(E&&E.onUp(w),w.cancelled||(c[T]&&this.emit(s.KEY_UP+c[T],w),w.cancelled||this.emit(s.ANY_KEY_UP,w))),1===w.cancelled&&(w.cancelled=0)))}},resetKeys:function(){for(var v=this.keys,m=0;m<v.length;m++)v[m]&&v[m].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var v=this.keys,m=0;m<v.length;m++)v[m]&&v[m].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),g.exports=p},function(g,b,t){var h=t(141),n={};for(var s in h)n[h[s]]=s;g.exports=n},function(g,b){g.exports=function(t){return!!t._justDown&&!(t._justDown=!1)}},function(g,b){g.exports=function(t){return!!t._justUp&&!(t._justUp=!1)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=50),t.isDown&&t.plugin.game.loop.time-t.timeDown<h}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=50),t.isUp&&t.plugin.game.loop.time-t.timeUp<h}},function(g,b,t){g.exports={MouseManager:t(405)}},function(g,b,t){g.exports={TouchManager:t(407)}},function(g,b,t){var h=t(20),n=t(17)(!1,n={Events:t(91),FileTypes:t(1333),File:t(23),FileTypesManager:t(8),GetURL:t(153),LoaderPlugin:t(1359),MergeXHRSettings:t(237),MultiFile:t(47),XHRLoader:t(511),XHRSettings:t(154)},h);g.exports=n},function(g,b,t){g.exports={AnimationJSONFile:t(1334),AsepriteFile:t(1335),AtlasJSONFile:t(1336),AtlasXMLFile:t(1337),AudioFile:t(512),AudioSpriteFile:t(1338),BinaryFile:t(1339),BitmapFontFile:t(1340),CSSFile:t(1341),GLSLFile:t(1342),HTML5AudioFile:t(513),HTMLFile:t(1343),HTMLTextureFile:t(1344),ImageFile:t(70),JSONFile:t(59),MultiAtlasFile:t(1345),MultiScriptFile:t(1346),OBJFile:t(1347),PackFile:t(1348),PluginFile:t(1349),SceneFile:t(1350),ScenePluginFile:t(1351),ScriptFile:t(514),SpriteSheetFile:t(1352),SVGFile:t(1353),TextFile:t(239),TilemapCSVFile:t(1354),TilemapImpactFile:t(1355),TilemapJSONFile:t(1356),UnityAtlasFile:t(1357),VideoFile:t(1358),XMLFile:t(238)}},function(g,b,t){var h=t(0),n=t(8),s=t(59),u=t(91),i=new h({Extends:s,initialize:function(r,o,l,e,a){s.call(this,r,o,l,e,a),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",function(r,o,l,e){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new i(this,r[a]));else this.addFile(new i(this,r,o,e,l));return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(59),o=t(47),l=new h({Extends:o,initialize:function(e,a,c,d,f,p){var v,m,x=i(a)?(a=s(m=a,"key"),v=new u(e,{key:a,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new r(e,{key:a,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","json"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new u(e,a,c,f),new r(e,a,d,p));o.call(this,e,"atlasjson",a,v.linkFile?[v,x,v.linkFile]:[v,x])},addToCache:function(){var e,a;this.isReadyToProcess()&&(this.loader.textureManager.addAtlas((e=this.files[0]).key,e.data,(a=this.files[1]).data,this.files[2]?this.files[2].data:null),a.addToCache(),this.complete=!0)}});n.register("aseprite",function(e,a,c,d,f){var p;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=new l(this,e[v]),this.addFile(p.files);else p=new l(this,e,a,c,d,f),this.addFile(p.files);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(59),o=t(47),l=new h({Extends:o,initialize:function(e,a,c,d,f,p){var v,m,x=i(a)?(a=s(m=a,"key"),v=new u(e,{key:a,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new r(e,{key:a,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","json"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new u(e,a,c,f),new r(e,a,d,p));o.call(this,e,"atlasjson",a,v.linkFile?[v,x,v.linkFile]:[v,x])},addToCache:function(){var e;this.isReadyToProcess()&&(this.loader.textureManager.addAtlas((e=this.files[0]).key,e.data,this.files[1].data,this.files[2]?this.files[2].data:null),this.complete=!0)}});n.register("atlas",function(e,a,c,d,f){var p;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=new l(this,e[v]),this.addFile(p.files);else p=new l(this,e,a,c,d,f),this.addFile(p.files);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(47),o=t(238),l=new h({Extends:r,initialize:function(e,a,c,d,f,p){var v,m,x=i(a)?(a=s(m=a,"key"),v=new u(e,{key:a,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new o(e,{key:a,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","xml"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new u(e,a,c,f),new o(e,a,d,p));r.call(this,e,"atlasxml",a,v.linkFile?[v,x,v.linkFile]:[v,x])},addToCache:function(){var e;this.isReadyToProcess()&&(this.loader.textureManager.addAtlasXML((e=this.files[0]).key,e.data,this.files[1].data,this.files[2]?this.files[2].data:null),this.complete=!0)}});n.register("atlasXML",function(e,a,c,d,f){var p;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=new l(this,e[v]),this.addFile(p.files);else p=new l(this,e,a,c,d,f),this.addFile(p.files);return this}),g.exports=l},function(g,b,t){var h=t(512),n=t(0),s=t(8),u=t(2),i=t(7),r=t(59),o=t(47),l=new n({Extends:o,initialize:function(e,a,c,d,f,p,v){var m,x,y;i(a)&&(a=u(m=a,"key"),c=u(m,"jsonURL"),d=u(m,"audioURL"),f=u(m,"audioConfig"),p=u(m,"audioXhrSettings"),v=u(m,"jsonXhrSettings")),d?(y=h.create(e,a,d,f,p))&&(x=new r(e,a,c,v),o.call(this,e,"audiosprite",a,[y,x]),this.config.resourceLoad=!1):(x=new r(e,a,c,v),o.call(this,e,"audiosprite",a,[x]),this.config.resourceLoad=!0,this.config.audioConfig=f,this.config.audioXhrSettings=p)},onFileComplete:function(e){var a,c,d,f;-1!==this.files.indexOf(e)&&(this.pending--,this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources")&&(a=e.data.resources,c=u(this.config,"audioConfig"),d=u(this.config,"audioXhrSettings"),(f=h.create(this.loader,e.key,a,c,d))&&(this.addToMultiFile(f),this.loader.addFile(f))))},addToCache:function(){var a;this.isReadyToProcess()&&(a=this.files[1],this.files[0].addToCache(),a.addToCache(),this.complete=!0)}});s.register("audioSprite",function(e,a,c,d,f,p){var v,m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x&&x.noAudio||!y.webAudio&&!y.audioData)return this;if(Array.isArray(e))for(var w=0;w<e.length;w++)(v=new l(this,e[w])).files&&this.addFile(v.files);else(v=new l(this,e,a,c,d,f,p)).files&&this.addFile(v.files);return this})},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c,d){var f,p="bin";r(e)&&(e=i(f=e,"key"),a=i(f,"url"),c=i(f,"xhrSettings"),p=i(f,"extension",p),d=i(f,"dataType",d)),s.call(this,l,{type:"binary",cache:l.cacheManager.binary,extension:p,responseType:"arraybuffer",key:e,url:a,xhrSettings:c,config:{dataType:d}})},onProcess:function(){this.state=n.FILE_PROCESSING;var l=this.config.dataType;this.data=l?new l(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(l,e,a,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new o(this,l[d]));else this.addFile(new o(this,l,e,c,a));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(47),o=t(209),l=t(238),e=new h({Extends:r,initialize:function(a,c,d,f,p,v){var m,x,y=i(c)?(c=s(x=c,"key"),m=new u(a,{key:c,url:s(x,"textureURL"),extension:s(x,"textureExtension","png"),normalMap:s(x,"normalMap"),xhrSettings:s(x,"textureXhrSettings")}),new l(a,{key:c,url:s(x,"fontDataURL"),extension:s(x,"fontDataExtension","xml"),xhrSettings:s(x,"fontDataXhrSettings")})):(m=new u(a,c,d,p),new l(a,c,f,v));r.call(this,a,"bitmapfont",c,m.linkFile?[m,y,m.linkFile]:[m,y])},addToCache:function(){var a,c,d,f;this.isReadyToProcess()&&(c=this.files[1],(a=this.files[0]).addToCache(),d=a.cache.get(a.key),f=o(c.data,a.cache.getFrame(a.key),0,0,d),this.loader.cacheManager.bitmapFont.add(a.key,{data:f,texture:a.key,frame:null}),this.complete=!0)}});n.register("bitmapFont",function(a,c,d,f,p){var v;if(Array.isArray(a))for(var m=0;m<a.length;m++)v=new e(this,a[m]),this.addFile(v.files);else v=new e(this,a,c,d,f,p),this.addFile(v.files);return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d,f="css";r(e)&&(e=i(d=e,"key"),a=i(d,"url"),c=i(d,"xhrSettings"),f=i(d,"extension",f)),s.call(this,l,{type:"script",cache:!1,extension:f,responseType:"text",key:e,url:a,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=t(390),l=new h({Extends:s,initialize:function(e,a,c,d,f){var p,v="glsl";r(a)?(a=i(p=a,"key"),c=i(p,"url"),d=i(p,"shaderType","fragment"),f=i(p,"xhrSettings"),v=i(p,"extension",v)):void 0===d&&(d="fragment"),s.call(this,e,{type:"glsl",cache:e.cacheManager.shader,extension:v,responseType:"text",key:a,url:c,config:{shaderType:d},xhrSettings:f})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split("\n"),a=this.extractBlock(e,0);if(a)for(;a;){var c,d=this.getShaderName(a.header),f=this.getShaderType(a.header),p=this.getShaderUniforms(a.header),v=a.shader;this.cache.has(d)?(c=this.cache.get(d),"fragment"===f?c.fragmentSrc=v:c.vertexSrc=v,c.uniforms||(c.uniforms=p)):this.cache.add(d,"fragment"===f?new o(d,v,"",p):new o(d,"",v,p)),a=this.extractBlock(e,a.offset)}else this.cache.add(this.key,"fragment"===this.config.shaderType?new o(this.key,this.data):new o(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var a=0;a<e.length;a++){var c=e[a].trim();if("name:"===c.substring(0,5))return c.substring(5).trim()}return this.key},getShaderType:function(e){for(var a=0;a<e.length;a++){var c=e[a].trim();if("type:"===c.substring(0,5))return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var a={},c=0;c<e.length;c++){var d=e[c].trim();if("uniform."===d.substring(0,8)){var f=d.indexOf(":");if(f){var p=d.substring(8,f);try{a[p]=JSON.parse(d.substring(f+1))}catch(v){console.warn("Invalid uniform JSON: "+p)}}}}return a},extractBlock:function(e,a){for(var c=-1,d=-1,f=-1,p=!1,v=!1,m=[],x=[],y=a;y<e.length;y++){var w=e[y].trim();if("---"===w)if(-1===c)c=y,p=!0;else{if(!p){v=!1;break}d=y,v=!(p=!1)}else p?m.push(w):v&&(x.push(w),f=y)}return p||-1===d?null:{header:m,shader:x.join("\n"),offset:f}}});u.register("glsl",function(e,a,c,d){if(Array.isArray(e))for(var f=0;f<e.length;f++)this.addFile(new l(this,e[f]));else this.addFile(new l(this,e,a,c,d));return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d,f="html";r(e)&&(e=i(d=e,"key"),a=i(d,"url"),c=i(d,"xhrSettings"),f=i(d,"extension",f)),s.call(this,l,{type:"text",cache:l.cacheManager.html,extension:f,responseType:"text",key:e,url:a,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c,d,f){void 0===c&&(c=512),void 0===d&&(d=512);var p,v="html";r(e)&&(e=i(p=e,"key"),a=i(p,"url"),f=i(p,"xhrSettings"),v=i(p,"extension",v),c=i(p,"width",c),d=i(p,"height",d)),s.call(this,l,{type:"html",cache:l.textureManager,extension:v,responseType:"text",key:e,url:a,xhrSettings:f,config:{width:c,height:d}})},onProcess:function(){this.state=n.FILE_PROCESSING;var l=this.config.width,e=this.config.height,a=[];a.push('<svg width="'+l+'px" height="'+e+'px" viewBox="0 0 '+l+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),a.push('<foreignObject width="100%" height="100%">'),a.push('<body xmlns="http://www.w3.org/1999/xhtml">'),a.push(this.xhrLoader.responseText),a.push("</body>"),a.push("</foreignObject>"),a.push("</svg>");var c=[a.join("\n")],d=this;try{var f=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch(p){return d.state=n.FILE_ERRORED,void d.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(d.data),d.onProcessError()},s.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var l=this.cache.addImage(this.key,this.data);this.pendingDestroy(l)}});u.register("htmlTexture",function(l,e,a,c,d){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new o(this,l[f]));else this.addFile(new o(this,l,e,a,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(59),o=t(47),l=new h({Extends:o,initialize:function(e,a,c,d,f,p,v){var m;i(a)&&(a=s(m=a,"key"),c=s(m,"url",!1)?s(m,"url"):s(m,"atlasURL"),p=s(m,"xhrSettings"),d=s(m,"path"),f=s(m,"baseURL"),v=s(m,"textureXhrSettings"));var x=new r(e,a,c,p);o.call(this,e,"multiatlas",a,[x]),this.config.path=d,this.config.baseURL=f,this.config.textureXhrSettings=v},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,"json"===e.type&&e.data.hasOwnProperty("textures"))){var a=e.data.textures,c=this.config,d=this.loader,f=d.baseURL,p=d.path,v=d.prefix,m=s(c,"baseURL",this.baseURL),x=s(c,"path",this.path),y=s(c,"prefix",this.prefix),w=s(c,"textureXhrSettings");d.setBaseURL(m),d.setPath(x),d.setPrefix(y);for(var T=0;T<a.length;T++){var E,S=a[T].image,A="MA"+this.multiKeyIndex+"_"+S,_=new u(d,A,S,w);this.addToMultiFile(_),d.addFile(_),a[T].normalMap&&((E=new u(d,A,a[T].normalMap,w)).type="normalMap",_.setLink(E),this.addToMultiFile(E),d.addFile(E))}d.setBaseURL(f),d.setPath(p),d.setPrefix(v)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],a=[],c=[],d=[],f=1;f<this.files.length;f++){var p=this.files[f];if("normalMap"!==p.type)for(var v=p.key.indexOf("_"),m=p.key.substr(v+1),x=p.data,y=0;y<e.data.textures.length;y++){var w=e.data.textures[y];if(w.image===m){c.push(x),a.push(w),p.linkFile&&d.push(p.linkFile.data);break}}}for(0===d.length&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,a,d),this.complete=!0,f=0;f<this.files.length;f++)this.files[f].pendingDestroy()}}});n.register("multiatlas",function(e,a,c,d,f){var p;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=new l(this,e[v]),this.addFile(p.files);else p=new l(this,e,a,c,d,f),this.addFile(p.files);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(7),i=t(47),r=t(514),o=new h({Extends:i,initialize:function(l,e,a,c){var d,f="js",p=[];u(e)&&(e=s(d=e,"key"),a=s(d,"url"),c=s(d,"xhrSettings"),f=s(d,"extension",f)),Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var m=new r(l,{key:e+"_"+v.toString(),url:a[v],extension:f,xhrSettings:c});m.onProcess=function(){this.onProcessComplete()},p.push(m)}i.call(this,l,"scripts",e,p)},addToCache:function(){if(this.isReadyToProcess()){for(var l=0;l<this.files.length;l++){var e=this.files[l];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});n.register("scripts",function(l,e,a){var c;if(Array.isArray(l))for(var d=0;d<l.length;d++)c=new o(this,l[d]),this.addFile(c.files);else c=new o(this,l,e,a),this.addFile(c.files);return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(7),i=t(47),r=t(492),o=t(493),l=t(239),e=new h({Extends:i,initialize:function(a,c,d,f,p,v){var m,x,y,w=a.cacheManager.obj;u(c)?(c=s(y=c,"key"),m=new l(a,{key:c,type:"obj",cache:w,url:s(y,"url"),extension:s(y,"extension","obj"),xhrSettings:s(y,"xhrSettings"),config:{flipUV:s(y,"flipUV",p)}}),(f=s(y,"matURL"))&&(x=new l(a,{key:c,type:"mat",cache:w,url:f,extension:s(y,"matExtension","mat"),xhrSettings:s(y,"xhrSettings")}))):(m=new l(a,{key:c,url:d,type:"obj",cache:w,extension:"obj",xhrSettings:v,config:{flipUV:p}}),f&&(x=new l(a,{key:c,url:f,type:"mat",cache:w,extension:"mat",xhrSettings:v}))),i.call(this,a,"obj",c,[m,x])},addToCache:function(){var a,c,d;this.isReadyToProcess()&&(c=this.files[1],d=r((a=this.files[0]).data,a.config.flipUV),c&&(d.materials=o(c.data)),a.cache.add(a.key,d),this.complete=!0)}});n.register("obj",function(a,c,d,f,p){var v;if(Array.isArray(a))for(var m=0;m<a.length;m++)v=new e(this,a[m]),this.addFile(v.files);else v=new e(this,a,c,d,f,p),this.addFile(v.files);return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(20),s=t(8),u=t(59),i=new h({Extends:u,initialize:function(r,o,l,e,a){u.call(this,r,o,l,e,a),this.type="packfile"},onProcess:function(){this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(r,o,l,e){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new i(this,r[a]));else this.addFile(new i(this,r,o,e,l));return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c,d,f){var p,v="js";r(e)&&(e=i(p=e,"key"),a=i(p,"url"),f=i(p,"xhrSettings"),v=i(p,"extension",v),c=i(p,"start"),d=i(p,"mapping")),s.call(this,l,{type:"plugin",cache:!1,extension:v,responseType:"text",key:e,url:a,xhrSettings:f,config:{start:c,mapping:d}}),"function"==typeof a&&(this.data=a,this.state=n.FILE_POPULATED)},onProcess:function(){var l,e=this.loader.systems.plugins,a=this.config,c=i(a,"start",!1),d=i(a,"mapping",null);this.state===n.FILE_POPULATED?e.install(this.key,this.data,c,d):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),l=e.install(this.key,window[this.key],c,d),(c||d)&&(this.loader.systems[d]=l,this.loader.scene[d]=l)),this.onProcessComplete()}});u.register("plugin",function(l,e,a,c,d){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new o(this,l[f]));else this.addFile(new o(this,l,e,a,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c){var d,f="js";r(e)&&(e=i(d=e,"key"),a=i(d,"url"),c=i(d,"xhrSettings"),f=i(d,"extension",f)),s.call(this,l,{type:"text",extension:f,responseType:"text",key:e,url:a,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(l)),this.complete=!0}});u.register("sceneFile",function(l,e,a){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new o(this,l[c]));else this.addFile(new o(this,l,e,a));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c,d,f){var p,v="js";r(e)&&(e=i(p=e,"key"),a=i(p,"url"),f=i(p,"xhrSettings"),v=i(p,"extension",v),c=i(p,"systemKey"),d=i(p,"sceneKey")),s.call(this,l,{type:"scenePlugin",cache:!1,extension:v,responseType:"text",key:e,url:a,xhrSettings:f,config:{systemKey:c,sceneKey:d}}),"function"==typeof a&&(this.data=a,this.state=n.FILE_POPULATED)},onProcess:function(){var l=this.loader.systems.plugins,e=this.config,a=this.key,c=i(e,"systemKey",a),d=i(e,"sceneKey",a);this.state===n.FILE_POPULATED?l.installScenePlugin(c,this.data,d,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),l.installScenePlugin(c,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(l,e,a,c,d){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new o(this,l[f]));else this.addFile(new o(this,l,e,a,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(70),u=new h({Extends:s,initialize:function(i,r,o,l,e){s.call(this,i,r,o,e,l),this.type="spritesheet"},addToCache:function(){var i=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(i)}});n.register("spritesheet",function(i,r,o,l){if(Array.isArray(i))for(var e=0;e<i.length;e++)this.addFile(new u(this,i[e]));else this.addFile(new u(this,i,r,o,l));return this}),g.exports=u},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=new h({Extends:s,initialize:function(l,e,a,c,d){var f,p="svg";r(e)&&(e=i(f=e,"key"),a=i(f,"url"),c=i(f,"svgConfig",{}),d=i(f,"xhrSettings"),p=i(f,"extension",p));var v={type:"svg",cache:l.textureManager,extension:p,responseType:"text",key:e,url:a,xhrSettings:d,config:{width:i(c,"width"),height:i(c,"height"),scale:i(c,"scale")}};s.call(this,l,v)},onProcess:function(){this.state=n.FILE_PROCESSING;var l=this.xhrLoader.responseText,e=[l],a=this.config.width,c=this.config.height,d=this.config.scale;t:if(a&&c||d){var f,p=(new DOMParser).parseFromString(l,"text/xml").getElementsByTagName("svg")[0],v=p.hasAttribute("viewBox"),m=parseFloat(p.getAttribute("width")),x=parseFloat(p.getAttribute("height"));if(!v&&m&&x?p.setAttribute("viewBox","0  0 "+m+" "+x):!v||m||x||(m=(f=p.getAttribute("viewBox").split(/\s+|,/))[2],x=f[3]),d){if(!m||!x)break t;a=m*d,c=x*d}p.setAttribute("width",a.toString()+"px"),p.setAttribute("height",c.toString()+"px"),e=[(new XMLSerializer).serializeToString(p)]}try{var y=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(E){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var w=this,T=!1;this.data.onload=function(){T||s.revokeObjectURL(w.data),w.onProcessComplete()},this.data.onerror=function(){T?w.onProcessError():(T=!0,s.revokeObjectURL(w.data),w.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},s.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){var l=this.cache.addImage(this.key,this.data);this.pendingDestroy(l)}});u.register("svg",function(l,e,a,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new o(this,l[d]));else this.addFile(new o(this,l,e,a,c));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(2),r=t(7),o=t(38),l=new h({Extends:s,initialize:function(e,a,c,d){var f,p="csv";r(a)&&(a=i(f=a,"key"),c=i(f,"url"),d=i(f,"xhrSettings"),p=i(f,"extension",p)),s.call(this,e,{type:"tilemapCSV",cache:e.cacheManager.tilemap,extension:p,responseType:"text",key:a,url:c,xhrSettings:d}),this.tilemapFormat=o.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});u.register("tilemapCSV",function(e,a,c){if(Array.isArray(e))for(var d=0;d<e.length;d++)this.addFile(new l(this,e[d]));else this.addFile(new l(this,e,a,c));return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(8),s=t(59),u=t(38),i=new h({Extends:s,initialize:function(r,o,l,e){s.call(this,r,o,l,e),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});n.register("tilemapImpact",function(r,o,l){if(Array.isArray(r))for(var e=0;e<r.length;e++)this.addFile(new i(this,r[e]));else this.addFile(new i(this,r,o,l));return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(8),s=t(59),u=t(38),i=new h({Extends:s,initialize:function(r,o,l,e){s.call(this,r,o,l,e),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});n.register("tilemapTiledJSON",function(r,o,l){if(Array.isArray(r))for(var e=0;e<r.length;e++)this.addFile(new i(this,r[e]));else this.addFile(new i(this,r,o,l));return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(8),s=t(2),u=t(70),i=t(7),r=t(47),o=t(239),l=new h({Extends:r,initialize:function(e,a,c,d,f,p){var v,m,x=i(a)?(a=s(m=a,"key"),v=new u(e,{key:a,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new o(e,{key:a,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","txt"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new u(e,a,c,f),new o(e,a,d,p));r.call(this,e,"unityatlas",a,v.linkFile?[v,x,v.linkFile]:[v,x])},addToCache:function(){var e;this.isReadyToProcess()&&(this.loader.textureManager.addUnityAtlas((e=this.files[0]).key,e.data,this.files[1].data,this.files[2]?this.files[2].data:null),this.complete=!0)}});n.register("unityAtlas",function(e,a,c,d,f){var p;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=new l(this,e[v]),this.addFile(p.files);else p=new l(this,e,a,c,d,f),this.addFile(p.files);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(20),s=t(23),u=t(8),i=t(153),r=t(2),o=t(7),l=new h({Extends:s,initialize:function(e,a,c,d,f,p,v){void 0===d&&(d="loadeddata"),void 0===f&&(f=!1),void 0===p&&(p=!1),"loadeddata"!==d&&"canplay"!==d&&"canplaythrough"!==d&&(d="loadeddata");var m={type:"video",cache:e.cacheManager.video,extension:c.type,responseType:"blob",key:a,url:c.url,xhrSettings:v,config:{loadEvent:d,asBlob:f,noAudio:p}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,e,m)},onProcess:function(){var e,a;this.state=n.FILE_PROCESSING,this.config.asBlob?(e=this.createVideoElement(),this.data=e,(a=this).data.onloadeddata=function(){a.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(a.data),a.onProcessError()},s.createObjectURL(e,this.xhrLoader.response,""),e.load()):this.onProcessComplete()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var a=e.target;a.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),a.removeEventListener("error",this.onErrorCallback,!0),this.data=a,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var a=e.target;a&&(a.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),a.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e,a=this.config.loadEvent;this.config.asBlob?s.prototype.load.call(this):(this.percentComplete=0,(e=this.createVideoElement()).addEventListener(a,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=i(this,this.loader.baseURL),e.load())}});l.create=function(e,a,c,d,f,p,v){var m=e.systems.game;o(a)&&(c=r(a,"url",[]),d=r(a,"loadEvent","loadeddata"),f=r(a,"asBlob",!1),p=r(a,"noAudio",!1),v=r(a,"xhrSettings"));var x=l.getVideoURL(m,c);if(x)return new l(e,a,x,d,f,p,v)},l.getVideoURL=function(e,a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d,f=r(a[c],"url",a[c]);if(0===f.indexOf("blob:"))return{url:f,type:""};if(d=0===f.indexOf("data:")?f.split(",")[0].match(/\/(.*?);/):f.match(/\.([a-zA-Z0-9]+)($|\?)/),d=r(a[c],"type",d?d[1]:"").toLowerCase(),e.device.video[d])return{url:f,type:d}}return null},u.register("video",function(e,a,c,d,f,p){var v;if(Array.isArray(e))for(var m=0;m<e.length;m++)(v=l.create(this,e[m]))&&this.addFile(v);else(v=l.create(this,e,a,c,d,f,p))&&this.addFile(v);return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(20),s=t(148),u=t(9),i=t(91),r=t(8),o=t(2),l=t(24),e=t(21),a=t(154),c=new h({Extends:u,initialize:function(d){u.call(this);var f=d.sys.game.config,p=d.sys.settings.loader;this.scene=d,this.systems=d.sys,this.cacheManager=d.sys.cache,this.textureManager=d.sys.textures,this.sceneManager=d.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(p,"baseURL",f.loaderBaseURL)),this.setPath(o(p,"path",f.loaderPath)),this.setPrefix(o(p,"prefix",f.loaderPrefix)),this.maxParallelDownloads=o(p,"maxParallelDownloads",f.loaderMaxParallelDownloads),this.xhr=a(o(p,"responseType",f.loaderResponseType),o(p,"async",f.loaderAsync),o(p,"user",f.loaderUser),o(p,"password",f.loaderPassword),o(p,"timeout",f.loaderTimeout),o(p,"withCredentials",f.loaderWithCredentials)),this.crossOrigin=o(p,"crossOrigin",f.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,d.sys.events.once(e.BOOT,this.boot,this),d.sys.events.on(e.START,this.pluginStart,this)},boot:function(){this.systems.events.once(e.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(e.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return void 0===d&&(d=""),""!==d&&"/"!==d.substr(-1)&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return void 0===d&&(d=""),""!==d&&"/"!==d.substr(-1)&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return void 0===d&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++){var p=d[f];this.keyExists(p)||(this.list.set(p),this.emit(i.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var f=d.hasCacheConflict();return f||this.list.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)}),!f&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)}),this.queue.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)})),f},addPack:function(d,f){f&&d.hasOwnProperty(f)&&(d={packKey:d[f]});var p=0,v=this.baseURL,m=this.path,x=this.prefix;for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)){var w=d[y],T=o(w,"baseURL",v),E=o(w,"path",m),S=o(w,"prefix",x),A=o(w,"files",null),_=o(w,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(T),this.setPath(E),this.setPrefix(S);for(var C=0;C<A.length;C++){var M=A[C],R=M.hasOwnProperty("type")?M.type:_;this[R]&&(this[R](M),p++)}}}return this.setBaseURL(v),this.setPath(m),this.setPrefix(x),0<p},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(i.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(e.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(i.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===n.FILE_POPULATED||d.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,f){this.inflight&&(this.inflight.delete(d),this.updateProgress(),f?(this.totalComplete++,this.queue.set(d),this.emit(i.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(i.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(d.state===n.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===n.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&d.multiFile.addToCache():d.addToCache()),this.queue.delete(d),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(i.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(e.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(i.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,f){return this.save(JSON.stringify(d),f)},save:function(d,f,p){void 0===f&&(f="file.json"),void 0===p&&(p="application/json");var v=new Blob([d],{type:p}),m=URL.createObjectURL(v),x=document.createElement("a");return x.download=f,x.textContent="Download "+f,x.href=m,x.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,f=this.systems.settings.loader;this.setBaseURL(o(f,"baseURL",d.loaderBaseURL)),this.setPath(o(f,"path",d.loaderPath)),this.setPrefix(o(f,"prefix",d.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.systems.events.off(e.UPDATE,this.update,this),this.systems.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(e.UPDATE,this.update,this),this.systems.events.off(e.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",c,"load"),g.exports=c},function(g,b,t){var h=t(60),n=t(17)(!1,n={ArcadePhysics:t(1361),Body:t(521),Collider:t(522),Components:t(240),Events:t(242),Factory:t(515),GetOverlapX:t(243),GetOverlapY:t(244),SeparateX:t(531),SeparateY:t(532),Group:t(518),Image:t(516),Sprite:t(155),StaticBody:t(533),StaticGroup:t(519),Tilemap:t(1385),World:t(520)},h);g.exports=n},function(g,b,t){var h=t(0),n=t(34),s=t(48),u=t(347),i=t(515),r=t(2),o=t(143),l=t(517),e=t(241),a=t(24),c=t(21),d=t(3),f=t(520),p=new h({initialize:function(v){this.scene=v,this.systems=v.sys,this.config=this.getConfig(),v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new f(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new f(this.scene,this.config),this.add=new i(this.world));var v=this.systems.events;r(this.config,"customUpdate",!1)||v.on(c.UPDATE,this.world.update,this.world),v.on(c.POST_UPDATE,this.world.postUpdate,this.world),v.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var v=this.systems.game.config.physics;return o(r(this.systems.settings.physics,"arcade",{}),r(v,"arcade",{}))},overlap:function(v,m,x,y,w){return void 0===x&&(x=null),void 0===y&&(y=null),void 0===w&&(w=x),this.world.collideObjects(v,m,x,y,w,!0)},collide:function(v,m,x,y,w){return void 0===x&&(x=null),void 0===y&&(y=null),void 0===w&&(w=x),this.world.collideObjects(v,m,x,y,w,!1)},collideTiles:function(v,m,x,y,w){return this.world.collideTiles(v,m,x,y,w)},overlapTiles:function(v,m,x,y,w){return this.world.overlapTiles(v,m,x,y,w)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(v,m,x,y,w,T){void 0===y&&(y=60);var E=Math.atan2(x-v.y,m-v.x);return v.body.acceleration.setToPolar(E,y),void 0!==w&&void 0!==T&&v.body.maxVelocity.set(w,T),E},accelerateToObject:function(v,m,x,y,w){return this.accelerateTo(v,m.x,m.y,x,y,w)},closest:function(v,m){m=m||this.world.bodies.entries;for(var x=Number.MAX_VALUE,y=null,w=v.x,T=v.y,E=m.length,S=0;S<E;S++){var A,_=m[S],C=_.body||_;v!==_&&v!==C&&v!==C.gameObject&&v!==C.center&&(A=u(w,T,C.center.x,C.center.y))<x&&(y=_,x=A)}return y},furthest:function(v,m){for(var x=-1,y=null,w=v.x,T=v.y,E=(m=m||this.world.bodies.entries).length,S=0;S<E;S++){var A,_=m[S],C=_.body||_;v!==_&&v!==C&&v!==C.gameObject&&v!==C.center&&x<(A=u(w,T,C.center.x,C.center.y))&&(y=_,x=A)}return y},moveTo:function(v,m,x,y,w){void 0===y&&(y=60),void 0===w&&(w=0);var T=Math.atan2(x-v.y,m-v.x);return 0<w&&(y=s(v.x,v.y,m,x)/(w/1e3)),v.body.velocity.setToPolar(T,y),T},moveToObject:function(v,m,x,y){return this.moveTo(v,m.x,m.y,x,y)},velocityFromAngle:function(v,m,x){return void 0===m&&(m=60),void 0===x&&(x=new d),x.setToPolar(n(v),m)},velocityFromRotation:function(v,m,x){return void 0===m&&(m=60),void 0===x&&(x=new d),x.setToPolar(v,m)},overlapRect:function(v,m,x,y,w,T){return e(this.world,v,m,x,y,w,T)},overlapCirc:function(v,m,x,y,w){return l(this.world,v,m,x,y,w)},shutdown:function(){var v;this.world&&((v=this.systems.events).off(c.UPDATE,this.world.update,this.world),v.off(c.POST_UPDATE,this.world.postUpdate,this.world),v.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});a.register("ArcadePhysics",p,"arcadePhysics"),g.exports=p},function(g,b){g.exports={setAcceleration:function(t,h){return this.body.acceleration.set(t,h),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(g,b){g.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(g,b){g.exports={setBounce:function(t,h){return this.body.bounce.set(t,h),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,h,n){return this.body.setCollideWorldBounds(t,h,n),this}}},function(g,b){g.exports={setDebug:function(t,h,n){return this.debugShowBody=t,this.debugShowVelocity=h,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(g,b){g.exports={setDrag:function(t,h){return this.body.drag.set(t,h),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(g,b){g.exports={enableBody:function(h,n,s,u,i){return h&&this.body.reset(n,s),u&&(this.body.gameObject.active=!0),i&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(h,n){return void 0===h&&(h=!1),void 0===n&&(n=!1),this.body.stop(),this.body.enable=!1,h&&(this.body.gameObject.active=!1),n&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(g,b){g.exports={setFriction:function(t,h){return this.body.friction.set(t,h),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(g,b){g.exports={setGravity:function(t,h){return this.body.gravity.set(t,h),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(g,b){g.exports={setImmovable:function(h){return void 0===h&&(h=!0),this.body.immovable=h,this}}},function(g,b){g.exports={setMass:function(t){return this.body.mass=t,this}}},function(g,b){g.exports={setPushable:function(h){return void 0===h&&(h=!0),this.body.pushable=h,this}}},function(g,b){g.exports={setOffset:function(t,h){return this.body.setOffset(t,h),this},setSize:function(t,h,n){return this.body.setSize(t,h,n),this},setBodySize:function(t,h,n){return this.body.setSize(t,h,n),this},setCircle:function(t,h,n){return this.body.setCircle(t,h,n),this}}},function(g,b){g.exports={setVelocity:function(t,h){return this.body.setVelocity(t,h),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,h){return this.body.maxVelocity.set(t,h),this}}},function(g,b){g.exports="collide"},function(g,b){g.exports="overlap"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="tilecollide"},function(g,b){g.exports="tileoverlap"},function(g,b){g.exports="worldbounds"},function(g,b){g.exports="worldstep"},function(g,b){var t,h,n,s,u,i,r,o,l,e,a,c,d,f,p,v,m,x=function(){return e&&p&&h.blocked.right?(t.processX(-m,r,!1,!0),1):l&&v&&h.blocked.left?(t.processX(m,r,!0),1):d&&v&&t.blocked.right?(h.processX(-m,o,!1,!0),2):c&&p&&t.blocked.left?(h.processX(m,o,!0),2):0},y=function(w){var T;return n&&s?(m*=.5,0===w||3===w?(t.processX(m,u),h.processX(-m,i)):(t.processX(-m,u),h.processX(m,i))):n&&!s?0===w||3===w?t.processX(m,r,!0):t.processX(-m,r,!1,!0):!n&&s?0===w||3===w?h.processX(-m,o,!1,!0):h.processX(m,o,!0):(T=.5*m,0===w?f?(t.processX(m,0,!0),h.processX(0,null,!1,!0)):d?(t.processX(T,0,!0),h.processX(-T,0,!1,!0)):(t.processX(T,h.velocity.x,!0),h.processX(-T,null,!1,!0)):1===w?a?(t.processX(0,null,!1,!0),h.processX(m,0,!0)):e?(t.processX(-T,0,!1,!0),h.processX(T,0,!0)):(t.processX(-T,null,!1,!0),h.processX(T,t.velocity.x,!0)):2===w?f?(t.processX(-m,0,!1,!0),h.processX(0,null,!0)):c?(t.processX(-T,0,!1,!0),h.processX(T,0,!0)):(t.processX(-T,h.velocity.x,!1,!0),h.processX(T,null,!0)):3===w&&(a?(t.processX(0,null,!0),h.processX(-m,0,!1,!0)):l?(t.processX(T,0,!0),h.processX(-T,0,!1,!0)):(t.processX(T,h.velocity.y,!0),h.processX(-T,null,!1,!0)))),!0};g.exports={BlockCheck:x,Check:function(){var w=t.velocity.x,T=h.velocity.x,E=Math.sqrt(T*T*h.mass/t.mass)*(0<T?1:-1),S=Math.sqrt(w*w*t.mass/h.mass)*(0<w?1:-1),A=.5*(E+S);return u=A+(E-=A)*t.bounce.x,i=A+(S-=A)*h.bounce.x,l&&v?y(0):c&&p?y(1):e&&p?y(2):!(!d||!v)&&y(3)},Set:function(w,T,E){var S=(t=w).velocity.x,A=(h=T).velocity.x;return n=t.pushable,l=t._dx<0,e=0<t._dx,a=0===t._dx,p=Math.abs(t.right-h.x)<=Math.abs(h.right-t.x),r=A-S*t.bounce.x,s=h.pushable,c=h._dx<0,d=0<h._dx,f=0===h._dx,v=!p,o=S-A*h.bounce.x,m=Math.abs(E),x()},Run:y,RunImmovableBody1:function(w){1===w?h.velocity.x=0:p?h.processX(m,o,!0):h.processX(-m,o,!1,!0),t.moves&&(h.y+=(t.y-t.prev.y)*t.friction.y,h._dy=h.y-h.prev.y)},RunImmovableBody2:function(w){2===w&&(t.velocity.x=0),v?t.processX(m,r,!0):t.processX(-m,r,!1,!0),h.moves&&(t.y+=(h.y-h.prev.y)*h.friction.y,t._dy=t.y-t.prev.y)}}},function(g,b){var t,h,n,s,u,i,r,o,l,e,a,c,d,f,p,v,m,x=function(){return e&&p&&h.blocked.down?(t.processY(-m,r,!1,!0),1):l&&v&&h.blocked.up?(t.processY(m,r,!0),1):d&&v&&t.blocked.down?(h.processY(-m,o,!1,!0),2):c&&p&&t.blocked.up?(h.processY(m,o,!0),2):0},y=function(w){var T;return n&&s?(m*=.5,0===w||3===w?(t.processY(m,u),h.processY(-m,i)):(t.processY(-m,u),h.processY(m,i))):n&&!s?0===w||3===w?t.processY(m,r,!0):t.processY(-m,r,!1,!0):!n&&s?0===w||3===w?h.processY(-m,o,!1,!0):h.processY(m,o,!0):(T=.5*m,0===w?f?(t.processY(m,0,!0),h.processY(0,null,!1,!0)):d?(t.processY(T,0,!0),h.processY(-T,0,!1,!0)):(t.processY(T,h.velocity.y,!0),h.processY(-T,null,!1,!0)):1===w?a?(t.processY(0,null,!1,!0),h.processY(m,0,!0)):e?(t.processY(-T,0,!1,!0),h.processY(T,0,!0)):(t.processY(-T,null,!1,!0),h.processY(T,t.velocity.y,!0)):2===w?f?(t.processY(-m,0,!1,!0),h.processY(0,null,!0)):c?(t.processY(-T,0,!1,!0),h.processY(T,0,!0)):(t.processY(-T,h.velocity.y,!1,!0),h.processY(T,null,!0)):3===w&&(a?(t.processY(0,null,!0),h.processY(-m,0,!1,!0)):l?(t.processY(T,0,!0),h.processY(-T,0,!1,!0)):(t.processY(T,h.velocity.y,!0),h.processY(-T,null,!1,!0)))),!0};g.exports={BlockCheck:x,Check:function(){var w=t.velocity.y,T=h.velocity.y,E=Math.sqrt(T*T*h.mass/t.mass)*(0<T?1:-1),S=Math.sqrt(w*w*t.mass/h.mass)*(0<w?1:-1),A=.5*(E+S);return u=A+(E-=A)*t.bounce.y,i=A+(S-=A)*h.bounce.y,l&&v?y(0):c&&p?y(1):e&&p?y(2):!(!d||!v)&&y(3)},Set:function(w,T,E){var S=(t=w).velocity.y,A=(h=T).velocity.y;return n=t.pushable,l=t._dy<0,e=0<t._dy,a=0===t._dy,p=Math.abs(t.bottom-h.y)<=Math.abs(h.bottom-t.y),r=A-S*t.bounce.y,s=h.pushable,c=h._dy<0,d=0<h._dy,f=0===h._dy,v=!p,o=S-A*h.bounce.y,m=Math.abs(E),x()},Run:y,RunImmovableBody1:function(w){1===w?h.velocity.y=0:p?h.processY(m,o,!0):h.processY(-m,o,!1,!0),t.moves&&(h.x+=(t.x-t.prev.x)*t.friction.x,h._dx=h.x-h.prev.x)},RunImmovableBody2:function(w){2===w?t.velocity.y=0:v?t.processY(m,r,!0):t.processY(-m,r,!1,!0),h.moves&&(t.x+=(h.x-h.prev.x)*h.friction.x,t._dx=t.x-t.prev.x)}}},function(g,b,t){var h={ProcessTileCallbacks:t(524),ProcessTileSeparationX:t(528),ProcessTileSeparationY:t(530),SeparateTile:t(526),TileCheckX:t(527),TileCheckY:t(529),TileIntersectsBody:t(245)};g.exports=h},function(g,b,t){var h=t(126),n=t(71),s=t(50),u=t(2),i=t(94);g.exports={parseBody:function(o,l,e,a){void 0===a&&(a={});for(var c=u(e,"fixtures",[]),d=[],f=0;f<c.length;f++)for(var p=this.parseFixture(c[f]),v=0;v<p.length;v++)d.push(p[v]);var m=s.clone(e,!0);s.extend(m,a,!0),delete m.fixtures,delete m.type;var x=n.create(m);return n.setParts(x,d),n.setPosition(x,{x:o,y:l}),x},parseFixture:function(o){var l,e,a,c,d=s.extend({},!1,o);return delete d.circle,delete d.vertices,o.circle?(l=u(o.circle,"x"),e=u(o.circle,"y"),a=u(o.circle,"radius"),c=[h.circle(l,e,a,d)]):o.vertices&&(c=this.parseVertices(o.vertices,d)),c},parseVertices:function(o,l){void 0===l&&(l={});for(var e=[],a=0;a<o.length;a++)i.clockwiseSort(o[a]),e.push(n.create(s.extend({position:i.centre(o[a]),vertices:o[a]},l)));return h.flagCoincidentParts(e)}}},function(g,b,t){var h=t(126),n=t(71);g.exports={parseBody:function(u,i,r,o){var l;void 0===o&&(o={});var e=r.vertices;if(1===e.length)o.vertices=e[0],l=n.create(o),h.flagCoincidentParts(l.parts);else{for(var a=[],c=0;c<e.length;c++){var d=n.create({vertices:e[c]});a.push(d)}h.flagCoincidentParts(a),o.parts=a,l=n.create(o)}return l.label=r.label,n.setPosition(l,{x:u,y:i}),l}}},function(g,b,t){var h={};g.exports=h;var n=t(163),s=t(246),u=t(50),i=t(71),r=t(126);h.stack=function(o,l,e,a,c,d,f){for(var p,v=n.create({label:"Stack"}),m=o,x=l,y=0,w=0;w<a;w++){for(var T=0,E=0;E<e;E++){var S,_=f(m,x,E,w,p,y);_?(T<(S=_.bounds.max.y-_.bounds.min.y)&&(T=S),i.translate(_,{x:.5*(_.bounds.max.x-_.bounds.min.x),y:.5*S}),m=_.bounds.max.x+c,n.addBody(v,_),p=_,y+=1):m+=c}x+=T+d,m=o}return v},h.chain=function(o,l,e,a,c,d){for(var f=o.bodies,p=1;p<f.length;p++){var v=f[p-1],m=f[p],E=u.extend({bodyA:v,pointA:{x:(v.bounds.max.x-v.bounds.min.x)*l,y:(v.bounds.max.y-v.bounds.min.y)*e},bodyB:m,pointB:{x:(m.bounds.max.x-m.bounds.min.x)*a,y:(m.bounds.max.y-m.bounds.min.y)*c}},d);n.addConstraint(o,s.create(E))}return o.label+=" Chain",o},h.mesh=function(o,l,e,a,c){for(var d,p,m=o.bodies,x=0;x<e;x++){for(d=1;d<l;d++)n.addConstraint(o,s.create(u.extend({bodyA:m[d-1+x*l],bodyB:p=m[d+x*l]},c)));if(0<x)for(d=0;d<l;d++)n.addConstraint(o,s.create(u.extend({bodyA:m[d+(x-1)*l],bodyB:p=m[d+x*l]},c))),a&&0<d&&n.addConstraint(o,s.create(u.extend({bodyA:m[d-1+(x-1)*l],bodyB:p},c))),a&&d<l-1&&n.addConstraint(o,s.create(u.extend({bodyA:m[d+1+(x-1)*l],bodyB:p},c)))}return o.label+=" Mesh",o},h.pyramid=function(o,l,e,a,c,d,f){return h.stack(o,l,e,a,c,d,function(p,v,m,x,y,w){var T=Math.min(a,Math.ceil(e/2)),E=y?y.bounds.max.x-y.bounds.min.x:0;if(!(T<x||m<(x=T-x)||e-1-x<m))return 1===w&&i.translate(y,{x:(m+(e%2==1?1:-1))*E,y:0}),f(o+(y?m*E:0)+m*c,v,m,x,y,w)})},h.newtonsCradle=function(o,l,e,a,c){for(var d=n.create({label:"Newtons Cradle"}),f=0;f<e;f++){var p=r.circle(o+f*(1.9*a),l+c,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=s.create({pointA:{x:o+f*(1.9*a),y:l},bodyB:p});n.addBody(d,p),n.addConstraint(d,v)}return d},h.car=function(o,l,e,a,c){var d=i.nextGroup(!0),f=.5*-e+20,p=.5*e-20,v=n.create({label:"Car"}),m=r.rectangle(o,l,e,a,{collisionFilter:{group:d},chamfer:{radius:.5*a},density:2e-4}),x=r.circle(o+f,l+0,c,{collisionFilter:{group:d},friction:.8}),y=r.circle(o+p,l+0,c,{collisionFilter:{group:d},friction:.8}),w=s.create({bodyB:m,pointB:{x:f,y:0},bodyA:x,stiffness:1,length:0}),T=s.create({bodyB:m,pointB:{x:p,y:0},bodyA:y,stiffness:1,length:0});return n.addBody(v,m),n.addBody(v,x),n.addBody(v,y),n.addConstraint(v,w),n.addConstraint(v,T),v},h.softBody=function(o,l,e,a,c,d,f,p,v,m){v=u.extend({inertia:1/0},v),m=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var x=h.stack(o,l,e,a,c,d,function(y,w){return r.circle(y,w,p,v)});return h.mesh(x,e,a,f,m),x.label="Soft Body",x}},function(g,b,t){var h={};g.exports=h,t(117);var n=t(50);h.pathToVertices=function(s,u){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,r,o,l,e,a,c,d,f,p,v,m=[],x=0,y=0,w=0;function T(S,A,_){var C,M=_%2==1&&1<_;f&&S==f.x&&A==f.y||(v=f&&M?(p=f.x,f.y):p=0,C={x:p+S,y:v+A},!M&&f||(f=C),m.push(C),y=p+S,w=v+A)}function E(S){var A=S.pathSegTypeAsLetter.toUpperCase();if("Z"!==A){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":y=S.x,w=S.y;break;case"H":y=S.x;break;case"V":w=S.y}T(y,w,S.pathSegType)}}for(u=u||15,h._svgPathToAbsolute(s),o=s.getTotalLength(),a=[],i=0;i<s.pathSegList.numberOfItems;i+=1)a.push(s.pathSegList.getItem(i));for(c=a.concat();x<o;){if((e=a[s.getPathSegAtLength(x)])!=d){for(;c.length&&c[0]!=e;)E(c.shift());d=e}switch(e.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":T((l=s.getPointAtLength(x)).x,l.y,0)}x+=u}for(i=0,r=c.length;i<r;++i)E(c[i]);return m},h._svgPathToAbsolute=function(s){for(var u,i,r,o,l,e,a=s.pathSegList,c=0,d=0,f=a.numberOfItems,p=0;p<f;++p){var v=a.getItem(p),m=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(m))"x"in v&&(c=v.x),"y"in v&&(d=v.y);else switch("x1"in v&&(r=c+v.x1),"x2"in v&&(l=c+v.x2),"y1"in v&&(o=d+v.y1),"y2"in v&&(e=d+v.y2),"x"in v&&(c+=v.x),"y"in v&&(d+=v.y),m){case"m":a.replaceItem(s.createSVGPathSegMovetoAbs(c,d),p);break;case"l":a.replaceItem(s.createSVGPathSegLinetoAbs(c,d),p);break;case"h":a.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(c),p);break;case"v":a.replaceItem(s.createSVGPathSegLinetoVerticalAbs(d),p);break;case"c":a.replaceItem(s.createSVGPathSegCurvetoCubicAbs(c,d,r,o,l,e),p);break;case"s":a.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(c,d,l,e),p);break;case"q":a.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(c,d,r,o),p);break;case"t":a.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d),p);break;case"a":a.replaceItem(s.createSVGPathSegArcAbs(c,d,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),p);break;case"z":case"Z":c=u,d=i}"M"!=m&&"m"!=m||(u=c,i=d)}}},function(g,b,t){var h=t(126),n=t(71),s=t(0),u=t(534),i=t(9),r=t(2),o=t(125),l=t(94),e=new s({Extends:i,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(a,c,d){i.call(this),this.tile=c,this.world=a,c.physics.matterBody&&c.physics.matterBody.destroy(),c.physics.matterBody=this;var f,p=r(d,"body",null),v=r(d,"addToWorld",!0);p?this.setBody(p,v):(f=c.getCollisionGroup(),0<r(f,"objects",[]).length?this.setFromTileCollision(d):this.setFromTileRectangle(d))},setFromTileRectangle:function(a){void 0===a&&(a={}),o(a,"isStatic")||(a.isStatic=!0),o(a,"addToWorld")||(a.addToWorld=!0);var c=this.tile.getBounds(),p=h.rectangle(c.x+c.width/2,c.y+c.height/2,c.width,c.height,a);return this.setBody(p,a.addToWorld),this},setFromTileCollision:function(a){void 0===a&&(a={}),o(a,"isStatic")||(a.isStatic=!0),o(a,"addToWorld")||(a.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,f=this.tile.getLeft(),p=this.tile.getTop(),v=this.tile.getCollisionGroup(),m=r(v,"objects",[]),x=[],y=0;y<m.length;y++){var w,T,E,S=m[y],A=f+S.x*c,_=p+S.y*d,C=S.width*c,M=S.height*d,R=null;S.rectangle?R=h.rectangle(A+C/2,_+M/2,C,M,a):S.ellipse?R=h.circle(A+C/2,_+M/2,C/2,a):(S.polygon||S.polyline)&&(w=(S.polygon?S.polygon:S.polyline).map(function(L){return{x:L.x*c,y:L.y*d}}),T=l.create(w),A+=(E=l.centre(T)).x,R=h.fromVertices(A,_+=E.y,T,a)),R&&x.push(R)}return 1===x.length?this.setBody(x[0],a.addToWorld):1<x.length&&(a.parts=x,this.setBody(n.create(a),a.addToWorld)),this},setBody:function(a,c){return void 0===c&&(c=!0),this.body&&this.removeBody(),this.body=a,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});g.exports=e},function(g,b,t){var h=t(1493);h.Body=t(71),h.Composite=t(163),h.World=t(1393),h.Detector=t(587),h.Grid=t(1394),h.Pairs=t(1395),h.Pair=t(535),h.Query=t(1494),h.Resolver=t(1396),h.SAT=t(588),h.Constraint=t(246),h.Common=t(50),h.Engine=t(1495),h.Events=t(268),h.Sleeping=t(267),h.Plugin=t(1392),h.Bodies=t(126),h.Composites=t(1388),h.Axes=t(585),h.Bounds=t(117),h.Svg=t(1389),h.Vector=t(116),h.Vertices=t(94),h.World.add=h.Composite.add,h.World.remove=h.Composite.remove,h.World.addComposite=h.Composite.addComposite,h.World.addBody=h.Composite.addBody,h.World.addConstraint=h.Composite.addConstraint,h.World.clear=h.Composite.clear,g.exports=h},function(g,b,t){var h={};g.exports=h;var n=t(50);h._registry={},h.register=function(s){var u,i,r;return h.isPlugin(s)||n.warn("Plugin.register:",h.toString(s),"does not implement all required fields."),s.name in h._registry?(u=h._registry[s.name],i=h.versionParse(s.version).number,(r=h.versionParse(u.version).number)<i?(n.warn("Plugin.register:",h.toString(u),"was upgraded to",h.toString(s)),h._registry[s.name]=s):i<r?n.warn("Plugin.register:",h.toString(u),"can not be downgraded to",h.toString(s)):s!==u&&n.warn("Plugin.register:",h.toString(s),"is already registered to different plugin object")):h._registry[s.name]=s,s},h.resolve=function(s){return h._registry[h.dependencyParse(s).name]},h.toString=function(s){return"string"==typeof s?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},h.isPlugin=function(s){return s&&s.name&&s.version&&s.install},h.isUsed=function(s,u){return-1<s.used.indexOf(u)},h.isFor=function(s,u){var i=s.for&&h.dependencyParse(s.for);return!s.for||u.name===i.name&&h.versionSatisfies(u.version,i.range)},h.use=function(s,u){if(s.uses=(s.uses||[]).concat(u||[]),0!==s.uses.length){for(var i,r=h.dependencies(s),o=n.topologicalSort(r),l=[],e=0;e<o.length;e+=1)o[e]!==s.name&&((i=h.resolve(o[e]))?h.isUsed(s,i.name)||(h.isFor(i,s)||(n.warn("Plugin.use:",h.toString(i),"is for",i.for,"but installed on",h.toString(s)+"."),i._warned=!0),i.install?i.install(s):(n.warn("Plugin.use:",h.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(l.push("\u{1f536} "+h.toString(i)),delete i._warned):l.push("\u2705 "+h.toString(i)),s.used.push(i.name)):l.push("\u274c "+o[e]));0<l.length&&!i.silent&&n.info(l.join("  "))}else n.warn("Plugin.use:",h.toString(s),"does not specify any dependencies to install.")},h.dependencies=function(s,u){var i=h.dependencyParse(s),r=i.name;if(!(r in(u=u||{}))){s=h.resolve(s)||s,u[r]=n.map(s.uses||[],function(l){h.isPlugin(l)&&h.register(l);var e=h.dependencyParse(l),a=h.resolve(l);return a&&!h.versionSatisfies(a.version,e.range)?(n.warn("Plugin.dependencies:",h.toString(a),"does not satisfy",h.toString(e),"used by",h.toString(i)+"."),a._warned=!0,s._warned=!0):a||(n.warn("Plugin.dependencies:",h.toString(l),"used by",h.toString(i),"could not be resolved."),s._warned=!0),e.name});for(var o=0;o<u[r].length;o+=1)h.dependencies(u[r][o],u);return u}},h.dependencyParse=function(s){return n.isString(s)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(s)||n.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}):{name:s.name,range:s.range||s.version}},h.versionParse=function(s){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(s)||n.warn("Plugin.versionParse:",s,"is not a valid version or range.");var u=s.split("-");s=u[0];var i=isNaN(Number(s[0])),r=i?s.substr(1):s,o=n.map(r.split("."),function(l){return Number(l)});return{isRange:i,version:r,range:s,operator:i?s[0]:"",parts:o,prerelease:u[1],number:1e8*o[0]+1e4*o[1]+o[2]}},h.versionSatisfies=function(s,u){var i=h.versionParse(u=u||"*"),r=i.parts,o=h.versionParse(s),l=o.parts;if(i.isRange){if("*"===i.operator||"*"===s)return!0;if("~"===i.operator)return l[0]===r[0]&&l[1]===r[1]&&l[2]>=r[2];if("^"===i.operator)return 0<r[0]?l[0]===r[0]&&o.number>=i.number:0<r[1]?l[1]===r[1]&&l[2]>=r[2]:l[2]===r[2]}return s===u||"*"===s}},function(g,b,t){var h={};g.exports=h;var n=t(163),s=(t(246),t(50));h.create=function(u){var i=n.create();return s.extend(i,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},u)}},function(g,b,t){var h={};g.exports=h;var n=t(535),s=t(587),u=t(50);h.create=function(i){return u.extend({controller:h,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},i)},h.update=function(i,r,o,l){for(var e,a,c,d=o.world,f=i.buckets,p=!1,v=o.metrics,m=v.broadphaseTests=0;m<r.length;m++){var x=r[m];if((!x.isSleeping||l)&&!(x.bounds.max.x<d.bounds.min.x||x.bounds.min.x>d.bounds.max.x||x.bounds.max.y<d.bounds.min.y||x.bounds.min.y>d.bounds.max.y)){var y=h._getRegion(i,x);if(!x.region||y.id!==x.region.id||l){v.broadphaseTests+=1,x.region&&!l||(x.region=y);for(var w=h._regionUnion(y,x.region),T=w.startCol;T<=w.endCol;T++)for(e=w.startRow;e<=w.endRow;e++){a=f[c=h._getBucketId(T,e)];var E=T>=y.startCol&&T<=y.endCol&&e>=y.startRow&&e<=y.endRow,S=T>=x.region.startCol&&T<=x.region.endCol&&e>=x.region.startRow&&e<=x.region.endRow;!E&&S&&S&&a&&h._bucketRemoveBody(i,a,x),(x.region===y||E&&!S||l)&&(a=a||h._createBucket(f,c),h._bucketAddBody(i,a,x))}x.region=y,p=!0}}}p&&(i.pairsList=h._createActivePairsList(i))},h.clear=function(i){i.buckets={},i.pairs={},i.pairsList=[]},h._regionUnion=function(i,r){var o=Math.min(i.startCol,r.startCol),l=Math.max(i.endCol,r.endCol),e=Math.min(i.startRow,r.startRow),a=Math.max(i.endRow,r.endRow);return h._createRegion(o,l,e,a)},h._getRegion=function(i,r){var o=r.bounds,l=Math.floor(o.min.x/i.bucketWidth),e=Math.floor(o.max.x/i.bucketWidth),a=Math.floor(o.min.y/i.bucketHeight),c=Math.floor(o.max.y/i.bucketHeight);return h._createRegion(l,e,a,c)},h._createRegion=function(i,r,o,l){return{id:i+","+r+","+o+","+l,startCol:i,endCol:r,startRow:o,endRow:l}},h._getBucketId=function(i,r){return"C"+i+"R"+r},h._createBucket=function(i,r){return i[r]=[]},h._bucketAddBody=function(i,r,o){for(var l=0;l<r.length;l++){var e,a,c=r[l];o.id===c.id||o.isStatic&&c.isStatic||(e=n.id(o,c),(a=i.pairs[e])?a[2]+=1:i.pairs[e]=[o,c,1])}r.push(o)},h._bucketRemoveBody=function(i,r,o){r.splice(r.indexOf(o),1);for(var l=0;l<r.length;l++){var a=n.id(o,r[l]),c=i.pairs[a];c&&--c[2]}},h._createActivePairsList=function(i){for(var r,o=[],l=u.keys(i.pairs),e=0;e<l.length;e++)0<(r=i.pairs[l[e]])[2]?o.push(r):delete i.pairs[l[e]];return o}},function(g,b,t){var h={};g.exports=h;var n=t(535),s=t(50);h._pairMaxIdleLife=1e3,h.create=function(u){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},h.update=function(u,i,r){var o,l,e,a,c=u.list,d=u.table,f=u.collisionStart,p=u.collisionEnd,v=u.collisionActive;for(f.length=0,p.length=0,a=v.length=0;a<c.length;a++)c[a].confirmedActive=!1;for(a=0;a<i.length;a++)(o=i[a]).collided&&((e=d[l=n.id(o.bodyA,o.bodyB)])?(e.isActive?v.push(e):f.push(e),n.update(e,o,r),e.confirmedActive=!0):(e=n.create(o,r),d[l]=e,f.push(e),c.push(e)));for(a=0;a<c.length;a++)(e=c[a]).isActive&&!e.confirmedActive&&(n.setActive(e,!1,r),p.push(e))},h.removeOld=function(u,i){for(var r,o,l,e=u.list,a=u.table,c=[],d=0;d<e.length;d++)(o=(r=e[d]).collision).bodyA.isSleeping||o.bodyB.isSleeping?r.timeUpdated=i:i-r.timeUpdated>h._pairMaxIdleLife&&c.push(d);for(d=0;d<c.length;d++)delete a[(r=e[l=c[d]-d]).id],e.splice(l,1)},h.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}},function(g,b,t){var h={};g.exports=h;var n=t(94),s=t(116),u=t(50),i=t(117);h._restingThresh=4,h._restingThreshTangent=6,h._positionDampen=.9,h._positionWarming=.8,h._frictionNormalMultiplier=5,h.preSolvePosition=function(r){for(var o,l,e=0;e<r.length;e++)(o=r[e]).isActive&&(o.collision.parentA.totalContacts+=l=o.activeContacts.length,o.collision.parentB.totalContacts+=l)},h.solvePosition=function(r,o,l){for(var e,a,c,d,f,p,v,m,x,y,w,T,A,_=l*h._positionDampen,C=0;C<o.length;C++){var M=o[C];M.previousPositionImpulse.x=M.positionImpulse.x,M.previousPositionImpulse.y=M.positionImpulse.y}for(C=0;C<r.length;C++)(c=r[C]).isActive&&!c.isSensor&&(f=(d=c.collision).parentA,m=(e=(v=d.normal).x)*((w=(p=d.parentB).previousPositionImpulse).x-(y=f.previousPositionImpulse).x+(x=d.penetration).x)+(a=v.y)*(w.y-y.y+x.y),A=((c.separation=m)-c.slop)*_,(f.isStatic||p.isStatic)&&(A*=2),f.isStatic||f.isSleeping||(f.positionImpulse.x+=e*(T=A/f.totalContacts),f.positionImpulse.y+=a*T),p.isStatic||p.isSleeping||(p.positionImpulse.x-=e*(T=A/p.totalContacts),p.positionImpulse.y-=a*T))},h.postSolvePosition=function(r){for(var o=0;o<r.length;o++){var l=r[o];if((l.totalContacts=0)!==l.positionImpulse.x||0!==l.positionImpulse.y){for(var e=0;e<l.parts.length;e++){var a=l.parts[e];n.translate(a.vertices,l.positionImpulse),i.update(a.bounds,a.vertices,l.velocity),a.position.x+=l.positionImpulse.x,a.position.y+=l.positionImpulse.y}l.positionPrev.x+=l.positionImpulse.x,l.positionPrev.y+=l.positionImpulse.y,s.dot(l.positionImpulse,l.velocity)<0?(l.positionImpulse.x=0,l.positionImpulse.y=0):(l.positionImpulse.x*=h._positionWarming,l.positionImpulse.y*=h._positionWarming)}}},h.preSolveVelocity=function(r){for(var o,l,e,a,c,d,f,p,v,m,x,y,w,T=s._temp[0],E=s._temp[1],S=0;S<r.length;S++)if((l=r[S]).isActive&&!l.isSensor)for(e=l.activeContacts,c=(a=l.collision).parentA,d=a.parentB,f=a.normal,p=a.tangent,o=0;o<e.length;o++)m=(v=e[o]).vertex,y=v.tangentImpulse,0===(x=v.normalImpulse)&&0===y||(T.x=f.x*x+p.x*y,T.y=f.y*x+p.y*y,c.isStatic||c.isSleeping||(w=s.sub(m,c.position,E),c.positionPrev.x+=T.x*c.inverseMass,c.positionPrev.y+=T.y*c.inverseMass,c.anglePrev+=s.cross(w,T)*c.inverseInertia),d.isStatic||d.isSleeping||(w=s.sub(m,d.position,E),d.positionPrev.x-=T.x*d.inverseMass,d.positionPrev.y-=T.y*d.inverseMass,d.anglePrev-=s.cross(w,T)*d.inverseInertia))},h.solveVelocity=function(r,o){for(var l=o*o,e=s._temp[0],a=s._temp[1],c=s._temp[2],d=s._temp[3],f=s._temp[4],p=s._temp[5],v=0;v<r.length;v++){var m=r[v];if(m.isActive&&!m.isSensor){var x=m.collision,y=x.parentA,w=x.parentB,T=x.normal,E=x.tangent,S=m.activeContacts,A=1/S.length;y.velocity.x=y.position.x-y.positionPrev.x,y.velocity.y=y.position.y-y.positionPrev.y,w.velocity.x=w.position.x-w.positionPrev.x,w.velocity.y=w.position.y-w.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,w.angularVelocity=w.angle-w.anglePrev;for(var _=0;_<S.length;_++){var C=S[_],M=C.vertex,R=s.sub(M,y.position,a),L=s.sub(M,w.position,c),D=s.add(y.velocity,s.mult(s.perp(R),y.angularVelocity),d),F=s.add(w.velocity,s.mult(s.perp(L),w.angularVelocity),f),U=s.sub(D,F,p),P=s.dot(T,U),O=s.dot(E,U),B=Math.abs(O),k=u.sign(O),I=(1+m.restitution)*P,N=u.clamp(m.separation+P,0,1)*h._frictionNormalMultiplier,Y=O,X=1/0;B>m.friction*m.frictionStatic*N*l&&(Y=u.clamp(m.friction*k*l,-(X=B),X));var W,G,z=s.cross(R,T),V=s.cross(L,T),H=A/(y.inverseMass+w.inverseMass+y.inverseInertia*z*z+w.inverseInertia*V*V);I*=H,Y*=H,P<0&&P*P>h._restingThresh*l?C.normalImpulse=0:(W=C.normalImpulse,C.normalImpulse=Math.min(C.normalImpulse+I,0),I=C.normalImpulse-W),O*O>h._restingThreshTangent*l?C.tangentImpulse=0:(G=C.tangentImpulse,C.tangentImpulse=u.clamp(C.tangentImpulse+Y,-X,X),Y=C.tangentImpulse-G),e.x=T.x*I+E.x*Y,e.y=T.y*I+E.y*Y,y.isStatic||y.isSleeping||(y.positionPrev.x+=e.x*y.inverseMass,y.positionPrev.y+=e.y*y.inverseMass,y.anglePrev+=s.cross(R,e)*y.inverseInertia),w.isStatic||w.isSleeping||(w.positionPrev.x-=e.x*w.inverseMass,w.positionPrev.y-=e.y*w.inverseMass,w.anglePrev-=s.cross(L,e)*w.inverseInertia)}}}}},function(g,b,t){g.exports={BasePlugin:t(536),DefaultPlugins:t(194),PluginCache:t(24),PluginManager:t(408),ScenePlugin:t(1398)}},function(g,b,t){var h=t(536),n=t(0),s=t(21),u=new n({Extends:h,initialize:function(i,r){h.call(this,r),this.scene=i,this.systems=i.sys,i.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=u},function(g,b,t){g.exports={Canvas:t(1400),Events:t(88),Snapshot:t(1401),WebGL:t(1402)}},function(g,b,t){g.exports={CanvasRenderer:t(362),GetBlendModes:t(364),SetTransform:t(30)}},function(g,b,t){g.exports={Canvas:t(363),WebGL:t(377)}},function(g,b,t){var h=t(104),n=t(17)(!1,n={PipelineManager:t(366),Pipelines:t(1403),RenderTarget:t(139),Utils:t(12),WebGLPipeline:t(57),WebGLRenderer:t(365),WebGLShader:t(369)},h);g.exports=n},function(g,b,t){var h=t(65),n=t(17)(!1,n={BitmapMaskPipeline:t(367),Events:t(368),GraphicsPipeline:t(370),LightPipeline:t(371),MultiPipeline:t(105),PointLightPipeline:t(372),PostFXPipeline:t(1404),RopePipeline:t(373),SinglePipeline:t(374),UtilityPipeline:t(375)},h);g.exports=n},function(g,b,t){var h=t(0),n=t(195),s=t(2),u=t(1405),i=t(376),r=t(57),o=new h({Extends:r,initialize:function(l){l.renderTarget=s(l,"renderTarget",1),l.fragShader=s(l,"fragShader",u),l.vertShader=s(l,"vertShader",i),l.attributes=s(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.colorMatrix=new n,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var l=this.manager.UTILITY_PIPELINE;this.fullFrame1=l.fullFrame1,this.fullFrame2=l.fullFrame2,this.halfFrame1=l.halfFrame1,this.halfFrame2=l.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(l){this.bindAndDraw(l)},copyFrame:function(l,e,a,c,d){this.manager.copyFrame(l,e,a,c,d)},copyToGame:function(l){this.manager.copyToGame(l)},drawFrame:function(l,e,a){this.manager.drawFrame(l,e,a,this.colorMatrix)},blendFrames:function(l,e,a,c,d){this.manager.blendFrames(l,e,a,c,d)},blendFramesAdditive:function(l,e,a,c,d){this.manager.blendFramesAdditive(l,e,a,c,d)},clearFrame:function(l,e){this.manager.clearFrame(l,e)},blitFrame:function(l,e,a,c,d,f){this.manager.blitFrame(l,e,a,c,d,f)},copyFrameRect:function(l,e,a,c,d,f,p,v){this.manager.copyFrameRect(l,e,a,c,d,f,p,v)},bindAndDraw:function(l,e,a,c,d){void 0===a&&(a=!0),void 0===c&&(c=!0);var f=this.gl,p=this.renderer;this.bind(d),this.set1i("uMainSampler",0),e?(f.viewport(0,0,e.width,e.height),f.bindFramebuffer(f.FRAMEBUFFER,e.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,e.texture,0),a&&(f.clearColor(0,0,0,c?0:1),f.clear(f.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1,!1),p.currentFramebuffer||f.viewport(0,0,p.width,p.height)),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,l.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),e?(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,null)):p.resetTextures()}});g.exports=o},function(g,b){g.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(g,b,t){var h=t(17),n=t(198),s=h(!1,s={Center:t(397),Events:t(101),Orientation:t(398),ScaleManager:t(409),ScaleModes:t(399),Zoom:t(400)},n.CENTER);s=h(!1,s,n.ORIENTATION),s=h(!1,s,n.SCALE_MODE),s=h(!1,s,n.ZOOM),g.exports=s},function(g,b,t){var h=t(142),n=t(17)(!1,n={Events:t(21),GetPhysicsPlugins:t(413),GetScenePlugins:t(414),SceneManager:t(411),ScenePlugin:t(1408),Settings:t(415),Systems:t(201)},h);g.exports=n},function(g,b,t){var h=t(18),n=t(0),s=t(21),u=t(2),i=t(24),r=new n({initialize:function(o){this.scene=o,this.systems=o.sys,this.settings=o.sys.settings,this.key=o.sys.settings.key,this.manager=o.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._willSleep=!1,this._willRemove=!1,o.sys.events.once(s.BOOT,this.boot,this),o.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,l),this},restart:function(o){var l=this.key;return this.manager.queueOp("stop",l),this.manager.queueOp("start",l,o),this},transition:function(o){void 0===o&&(o={});var l=u(o,"target",!1),e=this.manager.getScene(l);if(!l||!this.checkValidTransition(e))return!1;var a=u(o,"duration",1e3);this._elapsed=0,this._target=e,this._duration=a,this._willSleep=u(o,"sleep",!1),this._willRemove=u(o,"remove",!1);var c=u(o,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=u(o,"onUpdateScope",this.scene));var d=u(o,"allowInput",!1);this.settings.transitionAllowInput=d;var f=e.sys.settings;return f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=a,f.transitionAllowInput=d,u(o,"moveAbove",!1)?this.manager.moveAbove(this.key,l):u(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,l),e.sys.isSleeping()?e.sys.wake(u(o,"data")):this.manager.start(l,u(o,"data")),this.systems.events.emit(s.TRANSITION_OUT,e,a),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,l){this._elapsed+=l,this.transitionProgress=h(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,l=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),o.events.emit(s.TRANSITION_COMPLETE,this.scene),l.isTransition=!1,l.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,l,e,a){return this.manager.add(o,l,e,a)},launch:function(o,l){return o&&o!==this.key&&this.manager.queueOp("start",o,l),this},run:function(o,l){return o&&o!==this.key&&this.manager.queueOp("run",o,l),this},pause:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("pause",o,l),this},resume:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("resume",o,l),this},sleep:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("sleep",o,l),this},wake:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("wake",o,l),this},switch:function(o){return o!==this.key&&this.manager.queueOp("switch",this.key,o),this},stop:function(o,l){return void 0===o&&(o=this.key),this.manager.queueOp("stop",o,l),this},setActive:function(o,l,e){void 0===l&&(l=this.key);var a=this.manager.getScene(l);return a&&a.sys.setActive(o,e),this},setVisible:function(o,l){void 0===l&&(l=this.key);var e=this.manager.getScene(l);return e&&e.sys.setVisible(o),this},isSleeping:function(o){return void 0===o&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return void 0===o&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return void 0===o&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return void 0===o&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,l){return void 0===l&&(l=this.key),o!==l&&this.manager.swapPosition(o,l),this},moveAbove:function(o,l){return void 0===l&&(l=this.key),o!==l&&this.manager.moveAbove(o,l),this},moveBelow:function(o,l){return void 0===l&&(l=this.key),o!==l&&this.manager.moveBelow(o,l),this},remove:function(o){return void 0===o&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return void 0===o&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return void 0===o&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return void 0===o&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return void 0===o&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getIndex:function(o){return void 0===o&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(s.SHUTDOWN,this.shutdown,this),o.off(s.POST_UPDATE,this.step,this),o.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",r,"scenePlugin"),g.exports=r},function(g,b,t){g.exports={Events:t(432),List:t(107),Map:t(99),ProcessQueue:t(208),RTree:t(525),Set:t(148),Size:t(410)}},function(g,b,t){var h=t(17),n=t(1411),s=h(!1,s={CanvasTexture:t(417),Events:t(103),FilterMode:n,Frame:t(106),Parsers:t(419),Texture:t(203),TextureManager:t(416),TextureSource:t(418)},n);g.exports=s},function(g,b){g.exports={LINEAR:0,NEAREST:1}},function(g,b,t){var h=t(17),n=t(1413),s=h(!1,s={Components:t(247),Parsers:t(1446),Formats:t(38),ImageCollection:t(572),ParseToTilemap:t(258),Tile:t(83),Tilemap:t(576),TilemapCreator:t(1452),TilemapFactory:t(1453),Tileset:t(121),TilemapLayer:t(577),Orientation:t(29),LayerData:t(119),MapData:t(120),ObjectLayer:t(568)},n.ORIENTATION);g.exports=s},function(g,b,t){var h={ORIENTATION:t(29)};g.exports=h},function(g,b,t){var h=t(26),n=t(61);g.exports=function(s,u,i,r,o,l,e,a){void 0===e&&(e=!0),s<0&&(s=0),u<0&&(u=0);for(var c=h(s,u,i,r,null,a),d=o-s,f=l-u,p=0;p<c.length;p++){var v=c[p].x+d,m=c[p].y+f;0<=v&&v<a.width&&0<=m&&m<a.height&&a.data[m][v]&&a.data[m][v].copy(c[p])}e&&n(o-1,l-1,i+2,r+2,a)}},function(g,b,t){var h=t(26),n=t(538);g.exports=function(s,u,i,r,o,l){i=i||{},Array.isArray(s)||(s=[s]);var e=l.tilemapLayer;r=r||e.scene,o=o||r.cameras.main;for(var a=h(0,0,l.width,l.height,null,l),c=[],d=0;d<a.length;d++){var f,p=a[d];-1!==s.indexOf(p.index)&&(f=e.tileToWorldXY(p.x,p.y,void 0,o,l),i.x=f.x,i.y=f.y,c.push(r.make.sprite(i)))}if("number"==typeof u)for(d=0;d<s.length;d++)n(s[d],u,0,0,l.width,l.height,l);else if(Array.isArray(u))for(d=0;d<s.length;d++)n(s[d],u[d],0,0,l.width,l.height,l);return c}},function(g,b,t){var h=t(26),n=t(61),s=t(72);g.exports=function(u,i,r,o,l,e,a){for(var c=-1!==a.collideIndexes.indexOf(u),d=h(i,r,o,l,null,a),f=0;f<d.length;f++)d[f].index=u,s(d[f],c);e&&n(i-1,r-1,o+2,l+2,a)}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l,e){return h(u,i,r,o,l,e).filter(n,s)}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=0),void 0===n&&(n=!1);var u,i,r,o=0;if(n){for(i=s.height-1;0<=i;i--)for(u=s.width-1;0<=u;u--)if((r=s.data[i][u])&&r.index===t){if(o===h)return r;o+=1}}else for(i=0;i<s.height;i++)for(u=0;u<s.width;u++)if((r=s.data[i][u])&&r.index===t){if(o===h)return r;o+=1}return null}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l,e){return h(u,i,r,o,l,e).find(n,s)||null}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l,e){h(u,i,r,o,l,e).forEach(n,s)}},function(g,b,t){var h=t(29),n=t(540),s=t(541),u=t(543),i=t(1),r=t(544);g.exports=function(o){return o===h.ORTHOGONAL?n:o===h.HEXAGONAL?s:o===h.STAGGERED?r:o===h.ISOMETRIC?u:i}},function(g,b,t){var h=t(156),n=new(t(3));g.exports=function(s,u,i,r,o){return o.tilemapLayer.worldToTileXY(s,u,!0,n,r),h(n.x,n.y,i,o)}},function(g,b,t){function h(a,c){return u.RectangleToTriangle(c,a)}var n=t(477),s=t(26),u=t(478),i=t(1),r=t(3),o=new r,l=new r,e=new r;g.exports=function(a,c,d,f){if(void 0===a)return[];var p=i;a instanceof n.Circle?p=u.CircleToRectangle:a instanceof n.Rectangle?p=u.RectangleToRectangle:a instanceof n.Triangle?p=h:a instanceof n.Line&&(p=u.LineToRectangle),f.tilemapLayer.worldToTileXY(a.left,a.top,!0,l,d);var v=l.x,m=l.y;f.tilemapLayer.worldToTileXY(a.right,a.bottom,!0,e,d);var x=Math.ceil(e.x),y=Math.ceil(e.y),w=Math.max(x-v,1),T=Math.max(y-m,1),E=s(v,m,w,T,c,f),S=f.tileWidth,A=f.tileHeight;f.tilemapLayer&&(S*=f.tilemapLayer.scaleX,A*=f.tilemapLayer.scaleY);for(var _=[],C=new n.Rectangle(0,0,S,A),M=0;M<E.length;M++){var R=E[M];f.tilemapLayer.tileToWorldXY(R.x,R.y,o,d),C.x=o.x,C.y=o.y,p(a,C)&&_.push(R)}return _}},function(g,b,t){var h=t(29),n=t(1),s=t(249);g.exports=function(u){return u===h.ORTHOGONAL?s:n}},function(g,b,t){var h=t(29),n=t(546),s=t(547),u=t(1),i=t(548),r=t(549);g.exports=function(o){return o===h.ORTHOGONAL?r:o===h.ISOMETRIC?s:o===h.HEXAGONAL?n:o===h.STAGGERED?i:u}},function(g,b,t){var h=t(29),n=t(550),s=t(1),u=t(551),i=t(250);g.exports=function(r){return r===h.ORTHOGONAL?i:r===h.HEXAGONAL?n:r===h.STAGGERED?u:s}},function(g,b,t){var h=t(29),n=t(1),s=t(251);g.exports=function(u){return u===h.ORTHOGONAL?s:n}},function(g,b,t){var h=t(29),n=t(552),s=t(553),u=t(1),i=t(554),r=t(555);g.exports=function(o){return o===h.ORTHOGONAL?r:o===h.ISOMETRIC?s:o===h.HEXAGONAL?n:o===h.STAGGERED?i:u}},function(g,b,t){var h=t(29),n=t(556),s=t(1),u=t(557),i=t(252);g.exports=function(r){return r===h.ORTHOGONAL?i:r===h.HEXAGONAL?n:r===h.STAGGERED?u:s}},function(g,b,t){var h=t(558),n=new(t(3));g.exports=function(s,u,i,r){return r.tilemapLayer.worldToTileXY(s,u,!0,n,i),h(n.x,n.y,r)}},function(g,b,t){var h=t(253),n=new(t(3));g.exports=function(s,u,i,r,o,l){return l.tilemapLayer.worldToTileXY(u,i,!0,n,o,l),h(s,n.x,n.y,r,l)}},function(g,b,t){var h=t(61),n=t(253);g.exports=function(s,u,i,r,o){if(void 0===r&&(r=!0),!Array.isArray(s))return null;Array.isArray(s[0])||(s=[s]);for(var l=s.length,e=s[0].length,a=0;a<l;a++)for(var c=0;c<e;c++)n(s[a][c],u+c,i+a,!1,o);r&&h(u-1,i-1,e+2,l+2,o)}},function(g,b,t){var h=t(26),n=t(207);g.exports=function(s,u,i,r,o,l){var e,a=h(s,u,i,r,{},l);if(!o)for(o=[],e=0;e<a.length;e++)-1===o.indexOf(a[e].index)&&o.push(a[e].index);for(e=0;e<a.length;e++)a[e].index=n(o)}},function(g,b,t){var h=t(559),n=new(t(3));g.exports=function(s,u,i,r,o,l){return l.tilemapLayer.worldToTileXY(s,u,!0,n,o,l),h(n.x,n.y,i,r,l)}},function(g,b,t){var h=t(26),n=t(391),s=new n(105,210,231,150),u=new n(243,134,48,200),i=new n(40,39,37,150);g.exports=function(r,o,l){void 0===o&&(o={});var e=void 0!==o.tileColor?o.tileColor:s,a=void 0!==o.collidingTileColor?o.collidingTileColor:u,c=void 0!==o.faceColor?o.faceColor:i,d=h(0,0,l.width,l.height,null,l);r.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),r.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var f=0;f<d.length;f++){var p=d[f],v=p.width,m=p.height,x=p.pixelX,y=p.pixelY,w=p.collides?a:e;null!==w&&(r.fillStyle(w.color,w.alpha/255),r.fillRect(x,y,v,m)),x+=1,y+=1,v-=2,m-=2,null!==c&&(r.lineStyle(1,c.color,c.alpha/255),p.faceTop&&r.lineBetween(x,y,x+v,y),p.faceRight&&r.lineBetween(x+v,y,x+v,y+m),p.faceBottom&&r.lineBetween(x,y+m,x+v,y+m),p.faceLeft&&r.lineBetween(x,y,x,y+m))}}},function(g,b,t){var h=t(72),n=t(61),s=t(158);g.exports=function(u,i,r,o,l){void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===l&&(l=!0),Array.isArray(u)||(u=[u]);for(var e=0;e<u.length;e++)s(u[e],i,o);if(l)for(var a=0;a<o.height;a++)for(var c=0;c<o.width;c++){var d=o.data[a][c];d&&-1!==u.indexOf(d.index)&&h(d,i)}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(61),s=t(158);g.exports=function(u,i,r,o,l,e){if(void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===e&&(e=!0),!(i<u)){for(var a=u;a<=i;a++)s(a,r,l);if(e)for(var c=0;c<l.height;c++)for(var d=0;d<l.width;d++){var f=l.data[c][d];f&&f.index>=u&&f.index<=i&&h(f,r)}o&&n(0,0,l.width,l.height,l)}}},function(g,b,t){var h=t(72),n=t(61),s=t(158);g.exports=function(u,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=!0),Array.isArray(u)||(u=[u]);for(var l=0;l<o.height;l++)for(var e=0;e<o.width;e++){var a=o.data[l][e];a&&-1===u.indexOf(a.index)&&(h(a,i),s(a.index,i,o))}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(61),s=t(125);g.exports=function(u,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=!0);for(var l=0;l<o.height;l++)for(var e=0;e<o.width;e++){var a=o.data[l][e];if(a)for(var c in u)if(s(a.properties,c)){var d=u[c];Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)a.properties[c]===d[f]&&h(a,i)}}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(61);g.exports=function(s,u,i){void 0===s&&(s=!0),void 0===u&&(u=!0);for(var r=0;r<i.height;r++)for(var o=0;o<i.width;o++){var l,e=i.data[r][o];e&&(l=e.getCollisionGroup())&&l.objects&&0<l.objects.length&&h(e,s)}u&&n(0,0,i.width,i.height,i)}},function(g,b){g.exports=function(t,h,n,s){if("number"==typeof t)s.callbacks[t]=null!==h?{callback:h,callbackContext:n}:void 0;else for(var u=0,i=t.length;u<i;u++)s.callbacks[t[u]]=null!==h?{callback:h,callbackContext:n}:void 0}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l){for(var e=h(n,s,u,i,null,l),a=0;a<e.length;a++)e[a].setCollisionCallback(r,o)}},function(g,b,t){var h=t(26),n=t(129);g.exports=function(s,u,i,r,o){var l=h(s,u,i,r,null,o),e=l.map(function(c){return c.index});n(e);for(var a=0;a<l.length;a++)l[a].index=e[a]}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o,l){for(var e=h(u,i,r,o,null,l),a=0;a<e.length;a++)e[a]&&(e[a].index===n?e[a].index=s:e[a].index===s&&(e[a].index=n))}},function(g,b,t){var h=t(26);g.exports=function(n,s,u,i,r,o){if(r){for(var l=h(n,s,u,i,null,o),e=0,a=0;a<r.length;a++)e+=r[a].weight;if(!(e<=0))for(a=0;a<l.length;a++){for(var c=Math.random()*e,d=0,f=-1,p=0;p<r.length;p++)if(c<=(d+=r[p].weight)){var v=r[p].index;f=Array.isArray(v)?v[Math.floor(Math.random()*v.length)]:v;break}l[a].index=f}}}},function(g,b,t){g.exports={FromOrientationString:t(254),Parse:t(560),Parse2DArray:t(255),ParseCSV:t(561),Impact:t(1447),Tiled:t(1448)}},function(g,b,t){g.exports={ParseTileLayers:t(574),ParseTilesets:t(575),ParseWeltmeister:t(573)}},function(g,b,t){g.exports={AssignTileProperties:t(563),Base64Decode:t(570),BuildTilesetIndex:t(564),CreateGroupLayer:t(159),ParseGID:t(257),ParseImageLayers:t(565),ParseJSONTiled:t(562),ParseObject:t(256),ParseObjectLayers:t(566),ParseTileLayers:t(569),ParseTilesets:t(571)}},function(g,b,t){var h=t(1),n=t(1);h=t(1450),n=t(1451),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,u){var i=s.cull(u),r=i.length,o=u.alpha*s.alpha;if(!(0===r||o<=0)){var l=s.gidMap,e=n.pipelines.set(s.pipeline,s),a=h.getTintAppendFloatAlpha,c=s.scrollFactorX,d=s.scrollFactorY,f=s.x,p=s.y,v=s.scaleX,m=s.scaleY;n.pipelines.preBatch(s);for(var x=0;x<r;x++){var y,w,T,E,S,A,_,C,M,R,L=i[x],D=l[L.index];D&&null!==(y=D.getTileTextureCoordinates(L.index))&&(T=e.setTexture2D(w=D.glTexture,s),E=D.tileWidth,S=D.tileHeight,A=y.x,_=y.y,C=.5*D.tileWidth,M=.5*D.tileHeight,R=a(L.tint,o*L.alpha),e.batchTexture(s,w,w.width,w.height,f+(C+L.pixelX)*v,p+(M+L.pixelY)*m,L.width,L.height,v,m,L.rotation,L.flipX,L.flipY,c,d,C,M,A,_,E,S,R,R,R,R,!1,0,0,u,null,!0,T))}n.pipelines.postBatch(s)}}},function(g,b,t){var h=t(25),n=new h,s=new h,u=new h;g.exports=function(i,r,o,l){var e=r.cull(o),a=e.length,c=o.alpha*r.alpha;if(!(0===a||c<=0)){var d=n,f=s,p=u;f.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),d.copyFrom(o.matrix);var v=i.currentContext,m=r.gidMap;v.save(),l?(d.multiplyWithOffset(l,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),f.e=r.x,f.f=r.y,d.multiply(f,p),p.copyToContext(v)):(f.e-=o.scrollX*r.scrollFactorX,f.f-=o.scrollY*r.scrollFactorY,f.copyToContext(v)),(!i.antialias||1<r.scaleX||1<r.scaleY)&&(v.imageSmoothingEnabled=!1);for(var x=0;x<a;x++){var y,w,T,E,S=e[x],A=m[S.index];A&&(y=A.image.getSourceImage(),null!==(w=A.getTileTextureCoordinates(S.index))&&(T=A.tileWidth/2,E=A.tileHeight/2,v.save(),v.translate(S.pixelX+T,S.pixelY+E),0!==S.rotation&&v.rotate(S.rotation),(S.flipX||S.flipY)&&v.scale(S.flipX?-1:1,S.flipY?-1:1),v.globalAlpha=c*S.alpha,v.drawImage(y,w.x,w.y,A.tileWidth,A.Height,-T,-E,A.tileWidth,A.tileHeight),v.restore()))}v.restore()}}},function(g,b,t){var h=t(16),n=t(258);h.register("tilemap",function(s){var u=void 0!==s?s:{};return n(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},function(g,b,t){var h=t(5),n=t(258);h.register("tilemap",function(s,u,i,r,o,l,e){return null===s&&(s=void 0),null===u&&(u=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===o&&(o=void 0),n(this.scene,s,u,i,r,o,l,e)})},function(g,b,t){g.exports={Clock:t(1455),TimerEvent:t(578)}},function(g,b,t){var h=t(0),n=t(24),s=t(21),u=t(578),i=t(89),r=new h({initialize:function(o){this.scene=o,this.systems=o.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],o.sys.events.once(s.BOOT,this.boot,this),o.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var o=this.systems.events;o.on(s.PRE_UPDATE,this.preUpdate,this),o.on(s.UPDATE,this.update,this),o.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var l;return o instanceof u?(this.removeEvent(l=o),l.elapsed=l.startAt,l.hasDispatched=!1,l.repeatCount=-1===l.repeat||l.loop?999999999999:l.repeat):l=new u(o),this._pendingInsertion.push(l),l},delayedCall:function(o,l,e,a){return this.addEvent({delay:o,callback:l,args:e,callbackScope:a})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;l++){var e=o[l];i(this._pendingRemoval,e),i(this._pendingInsertion,e),i(this._active,e)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,l=this._pendingInsertion.length;if(0!==o||0!==l){for(var e,a=0;a<o;a++){var c=this._active.indexOf(e=this._pendingRemoval[a]);-1<c&&this._active.splice(c,1),e.destroy()}for(a=0;a<l;a++)this._active.push(e=this._pendingInsertion[a]);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,l){if(this.now=o,!this.paused){l*=this.timeScale;for(var e=0;e<this._active.length;e++){var a,c=this._active[e];c.paused||(c.elapsed+=l*c.timeScale,c.elapsed>=c.delay&&(a=c.elapsed-c.delay,c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),0<c.repeatCount?(c.repeatCount--,c.elapsed=a,c.hasDispatched=!1):this._pendingRemoval.push(c)))}}},shutdown:function(){for(var o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var l=this.systems.events;l.off(s.PRE_UPDATE,this.preUpdate,this),l.off(s.UPDATE,this.update,this),l.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",r,"time"),g.exports=r},function(g,b,t){var h=t(97),n=t(17)(!1,n={Builders:t(1457),Events:t(263),TweenManager:t(1473),Tween:t(262),TweenData:t(264),Timeline:t(584)},h);g.exports=n},function(g,b,t){g.exports={GetBoolean:t(96),GetEaseFunction:t(80),GetNewValue:t(160),GetProps:t(579),GetTargets:t(259),GetTweens:t(580),GetValueOp:t(260),NumberTweenBuilder:t(581),StaggerBuilder:t(582),TimelineBuilder:t(583),TweenBuilder:t(161)}},function(g,b){g.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(g,b){g.exports="complete"},function(g,b){g.exports="loop"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="start"},function(g,b){g.exports="update"},function(g,b){g.exports="active"},function(g,b){g.exports="complete"},function(g,b){g.exports="loop"},function(g,b){g.exports="repeat"},function(g,b){g.exports="start"},function(g,b){g.exports="stop"},function(g,b){g.exports="update"},function(g,b){g.exports="yoyo"},function(g,b,t){var h=t(89),n=t(0),s=t(581),u=t(24),i=t(21),r=t(582),o=t(583),l=t(97),e=t(161),a=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,c.sys.events.once(i.BOOT,this.boot,this),c.sys.events.on(i.START,this.start,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},start:function(){var c=this.systems.events;c.on(i.PRE_UPDATE,this.preUpdate,this),c.on(i.UPDATE,this.update,this),c.once(i.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(c){return o(this,c)},timeline:function(c){var d=o(this,c);return d.paused||(this._add.push(d),this._toProcess++),d},create:function(c){return e(this,c)},add:function(c){var d=e(this,c);return this._add.push(d),this._toProcess++,d},existing:function(c){return this._add.push(c),this._toProcess++,this},addCounter:function(c){var d=s(this,c);return this._add.push(d),this._toProcess++,d},stagger:function(c,d){return r(c,d)},preUpdate:function(){if(0!==this._toProcess){for(var c,d=this._destroy,f=this._active,p=this._pending,v=0;v<d.length;v++){var m=f.indexOf(c=d[v]);-1===m?-1<(m=p.indexOf(c))&&(c.state=l.REMOVED,p.splice(m,1)):(c.state=l.REMOVED,f.splice(m,1))}for(d.length=0,d=this._add,v=0;v<d.length;v++)(c=d[v]).state===l.PENDING_ADD&&(c.init()?(c.play(),this._active.push(c)):this._pending.push(c));d.length=0,this._toProcess=0}},update:function(c,d){var f,p=this._active;d*=this.timeScale;for(var v=0;v<p.length;v++)(f=p[v]).update(c,d)&&(this._destroy.push(f),this._toProcess++)},remove:function(c){return h(this._add,c),h(this._pending,c),h(this._active,c),h(this._destroy,c),c.state=l.REMOVED,this},makeActive:function(c){if(-1!==this._add.indexOf(c)||-1!==this._active.indexOf(c))return this;var d=this._pending.indexOf(c);return-1!==d&&this._pending.splice(d,1),this._add.push(c),c.state=l.PENDING_ADD,this._toProcess++,this},each:function(c,d){for(var f=[null],p=1;p<arguments.length;p++)f.push(arguments[p]);for(var v in this.list)f[0]=this.list[v],c.apply(d,f)},getAllTweens:function(){for(var c=this._active,d=[],f=0;f<c.length;f++)d.push(c[f]);return d},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(c,d){void 0===d&&(d=!1);var f,p,v,m=this._active,x=[];for(Array.isArray(c)||(c=[c]),p=0;p<m.length;p++)for(f=m[p],v=0;v<c.length;v++)f.hasTarget(c[v])&&x.push(f);if(d)for(m=this._pending,p=0;p<m.length;p++)for(f=m[p],v=0;v<c.length;v++)f.hasTarget(c[v])&&x.push(f);return x},isTweening:function(c){for(var d,f=this._active,p=0;p<f.length;p++)if((d=f[p]).hasTarget(c)&&d.isPlaying())return!0;return!1},killAll:function(){for(var c=this.getAllTweens(),d=0;d<c.length;d++)c[d].stop();return this},killTweensOf:function(c){for(var d=this.getTweensOf(c),f=0;f<d.length;f++)d[f].stop();return this},pauseAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].pause();return this},resumeAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].resume();return this},setGlobalTimeScale:function(c){return this.timeScale=c,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var c=this.systems.events;c.off(i.PRE_UPDATE,this.preUpdate,this),c.off(i.UPDATE,this.update,this),c.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});u.register("TweenManager",a,"tweens"),g.exports=a},function(g,b,t){g.exports={Array:t(205),Base64:t(1475),Objects:t(1477),String:t(1481),NOOP:t(1)}},function(g,b,t){g.exports={ArrayBufferToBase64:t(1476),Base64ToArrayBuffer:t(427)}},function(g,b){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";g.exports=function(h,n){for(var s=new Uint8Array(h),u=s.length,i=n?"data:"+n+";base64,":"",r=0;r<u;r+=3)i+=t[s[r]>>2],i+=t[(3&s[r])<<4|s[r+1]>>4],i+=t[(15&s[r+1])<<2|s[r+2]>>6],i+=t[63&s[r+2]];return u%3==2?i=i.substring(0,i.length-1)+"=":u%3==1&&(i=i.substring(0,i.length-2)+"=="),i}},function(g,b,t){g.exports={Clone:t(77),DeepCopy:t(172),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1478),GetValue:t(6),HasAll:t(1479),HasAny:t(449),HasValue:t(125),IsPlainObject:t(7),Merge:t(143),MergeRight:t(1480),Pick:t(567),SetValue:t(472)}},function(g,b,t){var h=t(6),n=t(18);g.exports=function(s,u,i,r,o){void 0===o&&(o=i);var l=h(s,u,o);return n(l,i,r)}},function(g,b){g.exports=function(t,h){for(var n=0;n<h.length;n++)if(!t.hasOwnProperty(h[n]))return!1;return!0}},function(g,b,t){var h=t(77);g.exports=function(n,s){var u=h(n);for(var i in s)u.hasOwnProperty(i)&&(u[i]=s[i]);return u}},function(g,b,t){g.exports={Format:t(1482),Pad:t(183),RemoveAt:t(1483),Reverse:t(1484),UppercaseFirst:t(202),UUID:t(219)}},function(g,b){g.exports=function(t,h){return t.replace(/%([0-9]+)/g,function(n,s){return h[Number(s)-1]})}},function(g,b){g.exports=function(t,h){return 0===h?t.slice(1):t.slice(0,h-1)+t.slice(h)}},function(g,b){g.exports=function(t){return t.split("").reverse().join("")}},function(g,b,t){g.exports={SoundManagerCreator:t(420),Events:t(69),BaseSound:t(145),BaseSoundManager:t(144),WebAudioSound:t(428),WebAudioSoundManager:t(426),HTML5AudioSound:t(423),HTML5AudioSoundManager:t(421),NoAudioSound:t(425),NoAudioSoundManager:t(424)}},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(u){if(!(u=u.hasOwnProperty("body")?u.body:u).hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,r=this.centerDiff,o=u.bounds.max.x-u.bounds.min.x,l=u.bounds.max.y-u.bounds.min.y,e=o*u.centerOfMass.x,a=l*u.centerOfMass.y;return i.set(o/2,l/2),r.set(e-i.x,a-i.y),!0},getTopLeft:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var o=this.boundsCenter,l=this.centerDiff;return new n(i+o.x+l.x,r+o.y+l.y)}return!1},getTopCenter:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var l=this.centerDiff;return new n(i+l.x,r+this.boundsCenter.y+l.y)}return!1},getTopRight:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var o=this.boundsCenter,l=this.centerDiff;return new n(i-(o.x-l.x),r+o.y+l.y)}return!1},getLeftCenter:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var l=this.centerDiff;return new n(i+this.boundsCenter.x+l.x,r+l.y)}return!1},getCenter:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var o=this.centerDiff;return new n(i+o.x,r+o.y)}return!1},getRightCenter:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var l=this.centerDiff;return new n(i-(this.boundsCenter.x-l.x),r+l.y)}return!1},getBottomLeft:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var o=this.boundsCenter,l=this.centerDiff;return new n(i+o.x+l.x,r-(o.y-l.y))}return!1},getBottomCenter:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var l=this.centerDiff;return new n(i+l.x,r-(this.boundsCenter.y-l.y))}return!1},getBottomRight:function(u,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(u)){var o=this.boundsCenter,l=this.centerDiff;return new n(i-(o.x-l.x),r-(o.y-l.y))}return!1}});g.exports=s},function(g,b){function t(w,T,E,S){var A=T[0]-w[0],_=T[1]-w[1],C=S[0]-E[0],M=S[1]-E[1];if(C*_-M*A!=0){var R=(A*(E[1]-w[1])+_*(w[0]-E[0]))/(C*_-M*A),L=(C*(w[1]-E[1])+M*(E[0]-w[0]))/(M*A-C*_);return 0<=R&&R<=1&&0<=L&&L<=1}}function h(w,T,E){return(T[0]-w[0])*(E[1]-w[1])-(E[0]-w[0])*(T[1]-w[1])}function n(w,T,E){return 0<h(w,T,E)}function s(w,T,E){return 0<=h(w,T,E)}function u(w,T,E){return h(w,T,E)<0}function i(w,T,E){return h(w,T,E)<=0}g.exports={decomp:function(w){var T=function E(S){for(var A=[],_=[],C=[],M=[],R=Number.MAX_VALUE,L=0;L<S.length;++L)if(c(S,L))for(var D=0;D<S.length;++D)if(p(S,L,D)){_=E(m(S,L,D,M)),C=E(m(S,D,L,M));for(var F=0;F<C.length;F++)_.push(C[F]);_.length<R&&(R=(A=_).length,A.push([e(S,L),e(S,D)]))}return A}(w);return 0<T.length?function E(S,A){if(0===A.length)return[S];if(A instanceof Array&&A.length&&A[0]instanceof Array&&2===A[0].length&&A[0][0]instanceof Array){for(var _=[S],L=0;L<A.length;L++)for(var R=A[L],D=0;D<_.length;D++){var M=E(_[D],R);if(M){_.splice(D,1),_.push(M[0],M[1]);break}}return _}return L=S.indexOf((R=A)[0]),D=S.indexOf(R[1]),-1!==L&&-1!==D&&[m(S,L,D),m(S,D,L)]}(w,T):[w]},quickDecomp:function w(T,E,S,A,_,C,M){M=M||0,_=_||25,E=void 0!==E?E:[],S=S||[],A=A||[];var R=[0,0],L=[0,0],D=[0,0],F=0,U=0,P=0,O=0,B=0,k=0,I=0,N=[],Y=[],X=T,W=T;if(W.length<3)return E;if((C=C||100)<++M)return console.warn("quickDecomp: max level ("+C+") reached."),E;for(var G=0;G<T.length;++G)if(c(X,G)){S.push(X[G]),F=U=Number.MAX_VALUE;for(var z=0;z<T.length;++z)n(e(X,G-1),e(X,G),e(X,z))&&i(e(X,G-1),e(X,G),e(X,z-1))&&(D=x(e(X,G-1),e(X,G),e(X,z),e(X,z-1)),u(e(X,G+1),e(X,G),D)&&(P=l(X[G],D))<U&&(U=P,L=D,k=z)),n(e(X,G+1),e(X,G),e(X,z+1))&&i(e(X,G+1),e(X,G),e(X,z))&&(D=x(e(X,G+1),e(X,G),e(X,z),e(X,z+1)),n(e(X,G-1),e(X,G),D)&&(P=l(X[G],D))<F&&(F=P,R=D,B=z));if(k===(B+1)%T.length)D[0]=(L[0]+R[0])/2,D[1]=(L[1]+R[1])/2,A.push(D),G<B?(a(N,X,G,B+1),N.push(D),Y.push(D),0!==k&&a(Y,X,k,X.length),a(Y,X,0,G+1)):(0!==G&&a(N,X,G,X.length),a(N,X,0,B+1),N.push(D),Y.push(D),a(Y,X,k,G+1));else{if(B<k&&(B+=T.length),O=Number.MAX_VALUE,B<k)return E;for(z=k;z<=B;++z)s(e(X,G-1),e(X,G),e(X,z))&&i(e(X,G+1),e(X,G),e(X,z))&&(P=l(e(X,G),e(X,z)))<O&&v(X,G,z)&&(O=P,I=z%T.length);G<I?(a(N,X,G,I+1),0!==I&&a(Y,X,I,W.length),a(Y,X,0,G+1)):(0!==G&&a(N,X,G,W.length),a(N,X,0,I+1),a(Y,X,I,G+1))}return N.length<Y.length?(w(N,E,S,A,_,C,M),w(Y,E,S,A,_,C,M)):(w(Y,E,S,A,_,C,M),w(N,E,S,A,_,C,M)),E}return E.push(T),E},isSimple:function(w){var T,E=w;for(T=0;T<E.length-1;T++)for(var S=0;S<T-1;S++)if(t(E[T],E[T+1],E[S],E[S+1]))return!1;for(T=1;T<E.length-2;T++)if(t(E[0],E[E.length-1],E[T],E[T+1]))return!1;return!0},removeCollinearPoints:function(w,T){for(var E=0,S=w.length-1;3<w.length&&0<=S;--S)!function(A,_,C,M){if(M){var R=r,L=o;R[0]=_[0]-A[0],R[1]=_[1]-A[1],L[0]=C[0]-_[0],L[1]=C[1]-_[1];var D=R[0]*L[0]+R[1]*L[1],F=Math.sqrt(R[0]*R[0]+R[1]*R[1]),U=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return Math.acos(D/(F*U))<M}return 0===h(A,_,C)}(e(w,S-1),e(w,S),e(w,S+1),T)||(w.splice(S%w.length,1),E++);return E},removeDuplicatePoints:function(w,T){for(var E=w.length-1;1<=E;--E)for(var S=w[E],A=E-1;0<=A;--A)!y((_=S)[0],(C=w[A])[0],M=T)||!y(_[1],C[1],M)||w.splice(E,1);var _,C,M},makeCCW:function(w){for(var T=0,E=w,S=1;S<w.length;++S)(E[S][1]<E[T][1]||E[S][1]===E[T][1]&&E[S][0]>E[T][0])&&(T=S);return!n(e(w,T-1),e(w,T),e(w,T+1))&&(function(A){for(var _=[],C=A.length,M=0;M!==C;M++)_.push(A.pop());for(M=0;M!==C;M++)A[M]=_[M]}(w),!0)}};var r=[],o=[];function l(w,T){var E=T[0]-w[0],S=T[1]-w[1];return E*E+S*S}function e(w,T){var E=w.length;return w[T<0?T%E+E:T%E]}function a(w,T,E,S){for(var A=E;A<S;A++)w.push(T[A])}function c(w,T){return u(e(w,T-1),e(w,T),e(w,T+1))}var d=[],f=[];function p(w,T,E){var S,A,R,L,F,U,P,O,B,k,I,N,_=d,C=f;if(!s(e(w,T+1),e(w,T),e(w,E))||!i(e(w,T-1),e(w,T),e(w,E))){A=l(e(w,T),e(w,E));for(var M=0;M!==w.length;++M)if((M+1)%w.length!==T&&M!==T&&s(e(w,T),e(w,E),e(w,M+1))&&i(e(w,T),e(w,E),e(w,M))&&(_[0]=e(w,T),_[1]=e(w,E),C[0]=e(w,M),C[1]=e(w,M+1),F=void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,F=[0,0],O=(U=(R=_)[1][1]-R[0][1])*R[0][0]+(P=R[0][0]-R[1][0])*R[0][1],I=(B=(L=C)[1][1]-L[0][1])*L[0][0]+(k=L[0][0]-L[1][0])*L[0][1],y(N=U*k-B*P,0,0)||(F[0]=(k*O-P*I)/N,F[1]=(U*I-B*O)/N),S=F,l(e(w,T),S)<A))return;return 1}}function v(w,T,E){for(var S=0;S!==w.length;++S)if(S!==T&&S!==E&&(S+1)%w.length!==T&&(S+1)%w.length!==E&&t(e(w,T),e(w,E),e(w,S),e(w,S+1)))return;return 1}function m(w,T,E,S){var A=S||[];if(A.length=0,T<E)for(var _=T;_<=E;_++)A.push(w[_]);else{for(_=0;_<=E;_++)A.push(w[_]);for(_=T;_<w.length;_++)A.push(w[_])}return A}function x(w,T,E,S,A){var _=T[1]-w[1],C=w[0]-T[0],M=_*w[0]+C*w[1],R=S[1]-E[1],L=E[0]-S[0],D=R*E[0]+L*E[1],F=_*L-R*C;return y(F,0,A=A||0)?[0,0]:[(L*M-C*D)/F,(_*D-R*M)/F]}function y(w,T,E){return E=E||0,Math.abs(w-T)<=E}},function(g,b,t){var h=t(126),n=t(0),s=t(1388),u=t(246),i=t(1389),r=t(1489),o=t(1490),l=t(1491),e=t(1390),a=t(1386),c=t(1387),d=t(1492),f=t(94),p=new n({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},rectangle:function(v,m,x,y,w){var T=h.rectangle(v,m,x,y,w);return this.world.add(T),T},trapezoid:function(v,m,x,y,w,T){var E=h.trapezoid(v,m,x,y,w,T);return this.world.add(E),E},circle:function(v,m,x,y,w){var T=h.circle(v,m,x,y,w);return this.world.add(T),T},polygon:function(v,m,x,y,w){var T=h.polygon(v,m,x,y,w);return this.world.add(T),T},fromVertices:function(v,m,x,y,w,T,E){"string"==typeof x&&(x=f.fromPath(x));var S=h.fromVertices(v,m,x,y,w,T,E);return this.world.add(S),S},fromPhysicsEditor:function(v,m,x,y,w){void 0===w&&(w=!0);var T=a.parseBody(v,m,x,y);return w&&!this.world.has(T)&&this.world.add(T),T},fromSVG:function(v,m,x,y,w,T){void 0===y&&(y=1),void 0===w&&(w={}),void 0===T&&(T=!0);for(var E=x.getElementsByTagName("path"),S=[],A=0;A<E.length;A++){var _=i.pathToVertices(E[A],30);1!==y&&f.scale(_,y,y),S.push(_)}var C=h.fromVertices(v,m,S,w);return T&&this.world.add(C),C},fromJSON:function(v,m,x,y,w){void 0===y&&(y={}),void 0===w&&(w=!0);var T=c.parseBody(v,m,x,y);return T&&w&&this.world.add(T),T},imageStack:function(v,m,x,y,w,T,E,S,A){void 0===E&&(E=0),void 0===S&&(S=0),void 0===A&&(A={});var _=this.world,C=this.sys.displayList;A.addToWorld=!1;var M=s.stack(x,y,w,T,E,S,function(R,L){var D=new o(_,R,L,v,m,A);return C.add(D),D.body});return _.add(M),M},stack:function(v,m,x,y,w,T,E){var S=s.stack(v,m,x,y,w,T,E);return this.world.add(S),S},pyramid:function(v,m,x,y,w,T,E){var S=s.pyramid(v,m,x,y,w,T,E);return this.world.add(S),S},chain:function(v,m,x,y,w,T){return s.chain(v,m,x,y,w,T)},mesh:function(v,m,x,y,w){return s.mesh(v,m,x,y,w)},newtonsCradle:function(v,m,x,y,w){var T=s.newtonsCradle(v,m,x,y,w);return this.world.add(T),T},car:function(v,m,x,y,w){var T=s.car(v,m,x,y,w);return this.world.add(T),T},softBody:function(v,m,x,y,w,T,E,S,A,_){var C=s.softBody(v,m,x,y,w,T,E,S,A,_);return this.world.add(C),C},joint:function(v,m,x,y,w){return this.constraint(v,m,x,y,w)},spring:function(v,m,x,y,w){return this.constraint(v,m,x,y,w)},constraint:function(v,m,x,y,w){void 0===y&&(y=1),void 0===w&&(w={}),w.bodyA="body"===v.type?v:v.body,w.bodyB="body"===m.type?m:m.body,isNaN(x)||(w.length=x),w.stiffness=y;var T=u.create(w);return this.world.add(T),T},worldConstraint:function(v,m,x,y){void 0===x&&(x=1),void 0===y&&(y={}),y.bodyB="body"===v.type?v:v.body,isNaN(m)||(y.length=m),y.stiffness=x;var w=u.create(y);return this.world.add(w),w},mouseSpring:function(v){return this.pointerConstraint(v)},pointerConstraint:function(v){void 0===v&&(v={}),v.hasOwnProperty("render")||(v.render={visible:!1});var m=new d(this.scene,this.world,v);return this.world.add(m.constraint),m},image:function(v,m,x,y,w){var T=new o(this.world,v,m,x,y,w);return this.sys.displayList.add(T),T},tileBody:function(v,m){return new e(this.world,v,m)},sprite:function(v,m,x,y,w){var T=new l(this.world,v,m,x,y,w);return this.sys.displayList.add(T),this.sys.updateList.add(T),T},gameObject:function(v,m,x){return r(this.world,v,m,x)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});g.exports=p},function(g,b,t){var h=t(534),n=t(2),s=t(3);g.exports=function(u,i,r,o){void 0===r&&(r={}),void 0===o&&(o=!0);var l,e=i.x,a=i.y;return i.body={temp:!0,position:{x:e,y:a}},[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity].forEach(function(c){for(var d in c)(f=c[d]).get&&"function"==typeof f.get||f.set&&"function"==typeof f.set?Object.defineProperty(i,d,{get:c[d].get,set:c[d].set}):Object.defineProperty(i,d,{value:c[d]});var f}),i.world=u,i._tempVec2=new s(e,a),r.hasOwnProperty("type")&&"body"===r.type?i.setExistingBody(r,o):(l=(l=n(r,"shape",null))||"rectangle",r.addToWorld=o,i.setBody(l,r)),i}},function(g,b,t){var h=t(0),n=t(534),s=t(15),u=t(2),i=t(124),r=t(171),o=t(3),l=new h({Extends:i,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(e,a,c,d,f,p){s.call(this,e.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,f),this.setSizeToFrame(),this.setOrigin(),this.world=e,this._tempVec2=new o(a,c);var v=u(p,"shape",null);v?this.setBody(v,p):this.setRectangle(this.width,this.height,p),this.setPosition(a,c),this.initPipeline()}});g.exports=l},function(g,b,t){var h=t(162),n=t(0),s=t(534),u=t(15),i=t(2),r=t(171),o=t(73),l=t(3),e=new n({Extends:o,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,r],initialize:function(a,c,d,f,p,v){u.call(this,a.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(f,p),this.setSizeToFrame(),this.setOrigin(),this.world=a,this._tempVec2=new l(c,d);var m=i(v,"shape",null);m?this.setBody(m,v):this.setRectangle(this.width,this.height,v),this.setPosition(c,d),this.initPipeline()}});g.exports=e},function(g,b,t){var h=t(117),n=t(0),s=t(163),u=t(246),i=t(587),r=t(586),o=t(49),l=t(143),e=t(267),a=t(3),c=t(94),d=new n({initialize:function(f,p,v){void 0===v&&(v={}),this.scene=f,this.world=p,this.camera=null,this.pointer=null,this.active=!0,this.position=new a,this.body=null,this.part=null,this.constraint=u.create(l(v,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(r.BEFORE_UPDATE,this.update,this),f.sys.input.on(o.POINTER_DOWN,this.onDown,this),f.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(f){this.pointer||(this.pointer=f,this.camera=f.camera)},onUp:function(f){f===this.pointer&&(this.pointer=null)},getBody:function(f){var p=this.position,v=this.constraint;this.camera.getWorldPoint(f.x,f.y,p);for(var m=s.allBodies(this.world.localWorld),x=0;x<m.length;x++){var y=m[x];if(!y.ignorePointer&&h.contains(y.bounds,p)&&i.canCollide(y.collisionFilter,v.collisionFilter)&&this.hitTestBody(y,p))return this.world.emit(r.DRAG_START,y,this.part,this),!0}return!1},hitTestBody:function(f,p){for(var v=this.constraint,m=f.parts.length,x=1<m?1:0;x<m;x++){var y=f.parts[x];if(c.contains(y.vertices,p))return v.pointA=p,v.pointB={x:p.x-f.position.x,y:p.y-f.position.y},v.bodyB=f,v.angleB=f.angle,e.set(f,!1),this.part=y,this.body=f,!0}return!1},update:function(){var f=this.pointer,p=this.body;if(this.active&&f)if(f.isDown||!p){if(f.isDown){if(!p&&!this.getBody(f))return;p=this.body;var v=this.position,m=this.constraint;this.camera.getWorldPoint(f.x,f.y,v),m.pointA.x=v.x,m.pointA.y=v.y,e.set(p,!1),this.world.emit(r.DRAG,p,this)}}else this.stopDrag();else p&&this.stopDrag()},stopDrag:function(){var f=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,f&&this.world.emit(r.DRAG_END,f,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});g.exports=d},function(g,b,t){var h={};g.exports=h;var n=t(1392),s=t(50);h.name="matter-js",h.version="0.14.2",h.uses=[],h.used=[],h.use=function(){n.use(h,Array.prototype.slice.call(arguments))},h.before=function(u,i){return u=u.replace(/^Matter./,""),s.chainPathBefore(h,u,i)},h.after=function(u,i){return u=u.replace(/^Matter./,""),s.chainPathAfter(h,u,i)}},function(g,b,t){var h={};g.exports=h;var n=t(116),s=t(588),u=t(117),i=t(126),r=t(94);h.collides=function(o,l){for(var e=[],a=0;a<l.length;a++){var c=l[a];if(o!==c&&u.overlaps(c.bounds,o.bounds))for(var d=1===c.parts.length?0:1;d<c.parts.length;d++){var f=c.parts[d];if(u.overlaps(f.bounds,o.bounds)){var p=s.collides(f,o);if(p.collided){e.push(p);break}}}}return e},h.ray=function(o,l,e,a){a=a||1e-100;for(var c=n.angle(l,e),d=n.magnitude(n.sub(l,e)),v=i.rectangle(.5*(e.x+l.x),.5*(e.y+l.y),d,a,{angle:c}),m=h.collides(v,o),x=0;x<m.length;x+=1){var y=m[x];y.body=y.bodyB=y.bodyA}return m},h.region=function(o,l,e){for(var a=[],c=0;c<o.length;c++){var d=o[c],f=u.overlaps(d.bounds,l);(f&&!e||!f&&e)&&a.push(d)}return a},h.point=function(o,l){for(var e=[],a=0;a<o.length;a++){var c=o[a];if(u.contains(c.bounds,l))for(var d=1===c.parts.length?0:1;d<c.parts.length;d++){var f=c.parts[d];if(u.contains(f.bounds,l)&&r.contains(f.vertices,l)){e.push(c);break}}}return e}},function(g,b,t){var h={};g.exports=h;var n=t(1393),s=t(267),u=t(1396),i=t(1395),r=t(1528),o=t(1394),l=t(268),e=t(163),a=t(246),c=t(50),d=t(71);h.create=function(f,p){p=(p=c.isElement(f)?p:f)||{},((f=c.isElement(f)?f:null)||p.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var m=c.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:o}},p);return m.world=p.world||n.create(m.world),m.pairs=i.create(),m.broadphase=m.broadphase.controller.create(m.broadphase),m.metrics=m.metrics||{extended:!1},m.metrics=r.create(m.metrics),m},h.update=function(f,p,v){v=v||1;var m,T,x=f.world,y=f.timing,w=f.broadphase;y.timestamp+=(p=p||1e3/60)*y.timeScale;var E={timestamp:y.timestamp};l.trigger(f,"beforeUpdate",E);var S=e.allBodies(x),A=e.allConstraints(x);for(r.reset(f.metrics),f.enableSleeping&&s.update(S,y.timeScale),h._bodiesApplyGravity(S,x.gravity),h._bodiesUpdate(S,p,y.timeScale,v,x.bounds),a.preSolveAll(S),m=0;m<f.constraintIterations;m++)a.solveAll(A,y.timeScale);a.postSolveAll(S),T=w.controller?(x.isModified&&w.controller.clear(w),w.controller.update(w,S,f,x.isModified),w.pairsList):S,x.isModified&&e.setModified(x,!1,!1,!0);var _=w.detector(T,f),C=f.pairs,M=y.timestamp;for(i.update(C,_,M),i.removeOld(C,M),f.enableSleeping&&s.afterCollisions(C.list,y.timeScale),0<C.collisionStart.length&&l.trigger(f,"collisionStart",{pairs:C.collisionStart}),u.preSolvePosition(C.list),m=0;m<f.positionIterations;m++)u.solvePosition(C.list,S,y.timeScale);for(u.postSolvePosition(S),a.preSolveAll(S),m=0;m<f.constraintIterations;m++)a.solveAll(A,y.timeScale);for(a.postSolveAll(S),u.preSolveVelocity(C.list),m=0;m<f.velocityIterations;m++)u.solveVelocity(C.list,y.timeScale);return 0<C.collisionActive.length&&l.trigger(f,"collisionActive",{pairs:C.collisionActive}),0<C.collisionEnd.length&&l.trigger(f,"collisionEnd",{pairs:C.collisionEnd}),r.update(f.metrics,f),h._bodiesClearForces(S),l.trigger(f,"afterUpdate",E),f},h.merge=function(f,p){if(c.extend(f,p),p.world){f.world=p.world,h.clear(f);for(var v=e.allBodies(f.world),m=0;m<v.length;m++){var x=v[m];s.set(x,!1),x.id=c.nextId()}}},h.clear=function(f){var p=f.world;i.clear(f.pairs);var v,m=f.broadphase;m.controller&&(v=e.allBodies(p),m.controller.clear(m),m.controller.update(m,v,f,!0))},h._bodiesClearForces=function(f){for(var p=0;p<f.length;p++){var v=f[p];v.force.x=0,v.force.y=0,v.torque=0}},h._bodiesApplyGravity=function(f,p){var v=void 0!==p.scale?p.scale:.001;if((0!==p.x||0!==p.y)&&0!==v)for(var m=0;m<f.length;m++){var x=f[m];x.ignoreGravity||x.isStatic||x.isSleeping||(x.force.x+=x.mass*p.x*v*x.gravityScale.x,x.force.y+=x.mass*p.y*v*x.gravityScale.y)}},h._bodiesUpdate=function(f,p,v,m,x){for(var y=0;y<f.length;y++){var w=f[y];w.isStatic||w.isSleeping||d.update(w,p,v,m)}}},function(g,b,t){var h=t(126),n=t(71),s=t(0),u=t(50),i=t(163),r=t(1495),o=t(9),l=t(586),e=t(2),a=t(6),c=t(71),d=t(268),f=t(1390),p=t(1393),v=t(116),m=new s({Extends:o,initialize:function(x,y){o.call(this),this.scene=x,this.engine=r.create(y),this.localWorld=this.engine.world;var w=a(y,"gravity",null);w?this.setGravity(w.x,w.y,w.scale):!1===w&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=a(y,"enabled",!0),this.correction=a(y,"correction",1),this.getDelta=a(y,"getDelta",this.update60Hz);var T=e(y,"runner",{}),E=e(T,"fps",!1),S=e(T,"fps",60),A=e(T,"delta",1e3/S),_=e(T,"deltaMin",1e3/S),C=e(T,"deltaMax",1e3/(.5*S));E||(S=1e3/A),this.runner={fps:S,correction:e(T,"correction",1),deltaSampleSize:e(T,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:e(T,"isFixed",!1),delta:A,deltaMin:_,deltaMax:C},this.autoUpdate=a(y,"autoUpdate",!0);var M,R,L,D,F,U,P,O,B,k,I=a(y,"debug",!1);this.drawDebug="object"==typeof I||I,this.debugConfig={showAxes:e(I,"showAxes",!1),showAngleIndicator:e(I,"showAngleIndicator",!1),angleColor:e(I,"angleColor",15208787),showBroadphase:e(I,"showBroadphase",!1),broadphaseColor:e(I,"broadphaseColor",16757760),showBounds:e(I,"showBounds",!1),boundsColor:e(I,"boundsColor",16777215),showVelocity:e(I,"showVelocity",!1),velocityColor:e(I,"velocityColor",44783),showCollisions:e(I,"showCollisions",!1),collisionColor:e(I,"collisionColor",16094476),showSeparations:e(I,"showSeparations",!1),separationColor:e(I,"separationColor",16753920),showBody:e(I,"showBody",!0),showStaticBody:e(I,"showStaticBody",!0),showInternalEdges:e(I,"showInternalEdges",!1),renderFill:e(I,"renderFill",!1),renderLine:e(I,"renderLine",!0),fillColor:e(I,"fillColor",1075465),fillOpacity:e(I,"fillOpacity",1),lineColor:e(I,"lineColor",2678297),lineOpacity:e(I,"lineOpacity",1),lineThickness:e(I,"lineThickness",1),staticFillColor:e(I,"staticFillColor",857979),staticLineColor:e(I,"staticLineColor",1255396),showSleeping:e(I,"showSleeping",!1),staticBodySleepOpacity:e(I,"staticBodySleepOpacity",.7),sleepFillColor:e(I,"sleepFillColor",4605510),sleepLineColor:e(I,"sleepLineColor",10066585),showSensors:e(I,"showSensors",!0),sensorFillColor:e(I,"sensorFillColor",857979),sensorLineColor:e(I,"sensorLineColor",1255396),showPositions:e(I,"showPositions",!0),positionSize:e(I,"positionSize",4),positionColor:e(I,"positionColor",14697178),showJoint:e(I,"showJoint",!0),jointColor:e(I,"jointColor",14737474),jointLineOpacity:e(I,"jointLineOpacity",1),jointLineThickness:e(I,"jointLineThickness",2),pinSize:e(I,"pinSize",4),pinColor:e(I,"pinColor",4382944),springColor:e(I,"springColor",14697184),anchorColor:e(I,"anchorColor",15724527),anchorSize:e(I,"anchorSize",4),showConvexHulls:e(I,"showConvexHulls",!1),hullColor:e(I,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),e(y,"setBounds",!1)&&("boolean"==typeof(M=y.setBounds)?this.setBounds():(R=e(M,"x",0),L=e(M,"y",0),D=e(M,"width",x.sys.scale.width),F=e(M,"height",x.sys.scale.height),U=e(M,"thickness",64),P=e(M,"left",!0),O=e(M,"right",!0),B=e(M,"top",!0),k=e(M,"bottom",!0),this.setBounds(R,L,D,F,U,P,O,B,k)))},setCompositeRenderStyle:function(x){for(var y,w,T=x.bodies,E=x.constraints,S=x.composites,A=0;A<T.length;A++)w=(y=T[A]).render,this.setBodyRenderStyle(y,w.lineColor,w.lineOpacity,w.lineThickness,w.fillColor,w.fillOpacity);for(A=0;A<E.length;A++)w=(y=E[A]).render,this.setConstraintRenderStyle(y,w.lineColor,w.lineOpacity,w.lineThickness,w.pinSize,w.anchorColor,w.anchorSize);for(A=0;A<S.length;A++)this.setCompositeRenderStyle(y=S[A]);return this},setBodyRenderStyle:function(x,y,w,T,E,S){var A=x.render,_=this.debugConfig;return A&&(null==y&&(y=x.isStatic?_.staticLineColor:_.lineColor),null==w&&(w=_.lineOpacity),null==T&&(T=_.lineThickness),null==E&&(E=x.isStatic?_.staticFillColor:_.fillColor),null==S&&(S=_.fillOpacity),!1!==y&&(A.lineColor=y),!1!==w&&(A.lineOpacity=w),!1!==T&&(A.lineThickness=T),!1!==E&&(A.fillColor=E),!1!==S&&(A.fillOpacity=S)),this},setConstraintRenderStyle:function(x,y,w,T,E,S,A){var _,C=x.render,M=this.debugConfig;return C&&(null==y&&("line"===(_=C.type)?y=M.jointColor:"pin"===_?y=M.pinColor:"spring"===_&&(y=M.springColor)),null==w&&(w=M.jointLineOpacity),null==T&&(T=M.jointLineThickness),null==E&&(E=M.pinSize),null==S&&(S=M.anchorColor),null==A&&(A=M.anchorSize),!1!==y&&(C.lineColor=y),!1!==w&&(C.lineOpacity=w),!1!==T&&(C.lineThickness=T),!1!==E&&(C.pinSize=E),!1!==S&&(C.anchorColor=S),!1!==A&&(C.anchorSize=A)),this},setEventsProxy:function(){var x=this,y=this.engine,w=this.localWorld;this.drawDebug&&(d.on(w,"compositeModified",function(T){x.setCompositeRenderStyle(T)}),d.on(w,"beforeAdd",function(T){for(var E=[].concat(T.object),S=0;S<E.length;S++){var A=E[S],_=A.render;"body"===A.type?x.setBodyRenderStyle(A,_.lineColor,_.lineOpacity,_.lineThickness,_.fillColor,_.fillOpacity):"composite"===A.type?x.setCompositeRenderStyle(A):"constraint"===A.type&&x.setConstraintRenderStyle(A,_.lineColor,_.lineOpacity,_.lineThickness,_.pinSize,_.anchorColor,_.anchorSize)}})),d.on(w,"beforeAdd",function(T){x.emit(l.BEFORE_ADD,T)}),d.on(w,"afterAdd",function(T){x.emit(l.AFTER_ADD,T)}),d.on(w,"beforeRemove",function(T){x.emit(l.BEFORE_REMOVE,T)}),d.on(w,"afterRemove",function(T){x.emit(l.AFTER_REMOVE,T)}),d.on(y,"beforeUpdate",function(T){x.emit(l.BEFORE_UPDATE,T)}),d.on(y,"afterUpdate",function(T){x.emit(l.AFTER_UPDATE,T)}),d.on(y,"collisionStart",function(T){var E,S,A=T.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),x.emit(l.COLLISION_START,T,E,S)}),d.on(y,"collisionActive",function(T){var E,S,A=T.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),x.emit(l.COLLISION_ACTIVE,T,E,S)}),d.on(y,"collisionEnd",function(T){var E,S,A=T.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),x.emit(l.COLLISION_END,T,E,S)})},setBounds:function(x,y,w,T,E,S,A,_,C){return void 0===x&&(x=0),void 0===y&&(y=0),void 0===w&&(w=this.scene.sys.scale.width),void 0===T&&(T=this.scene.sys.scale.height),void 0===E&&(E=64),void 0===S&&(S=!0),void 0===A&&(A=!0),void 0===_&&(_=!0),void 0===C&&(C=!0),this.updateWall(S,"left",x-E,y-E,E,T+2*E),this.updateWall(A,"right",x+w,y-E,E,T+2*E),this.updateWall(_,"top",x,y-E,w,E),this.updateWall(C,"bottom",x,y+T,w,E),this},updateWall:function(x,y,w,T,E,S){var A=this.walls[y];x?(A&&p.remove(this.localWorld,A),this.walls[y]=this.create(w+=E/2,T+=S/2,E,S,{isStatic:!0,friction:0,frictionStatic:0})):(A&&p.remove(this.localWorld,A),this.walls[y]=null)},createDebugGraphic:function(){var x=this.scene.sys.add.graphics({x:0,y:0});return x.setDepth(Number.MAX_VALUE),this.debugGraphic=x,this.drawDebug=!0,x},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(x,y,w){return void 0===x&&(x=0),void 0===y&&(y=1),this.localWorld.gravity.x=x,this.localWorld.gravity.y=y,void 0!==w&&(this.localWorld.gravity.scale=w),this},create:function(x,y,w,T,E){var S=h.rectangle(x,y,w,T,E);return p.add(this.localWorld,S),S},add:function(x){return p.add(this.localWorld,x),this},remove:function(x,y){Array.isArray(x)||(x=[x]);for(var w=0;w<x.length;w++){var T=x[w];i.remove(this.localWorld,T.body?T.body:T,y)}return this},removeConstraint:function(x,y){return i.remove(this.localWorld,x,y),this},convertTilemapLayer:function(x,y){var w=x.layer,T=x.getTilesWithin(0,0,w.width,w.height,{isColliding:!0});return this.convertTiles(T,y),this},convertTiles:function(x,y){if(0===x.length)return this;for(var w=0;w<x.length;w++)new f(this,x[w],y);return this},nextGroup:function(x){return c.nextGroup(x)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(l.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(l.RESUME),this},update:function(x,y){var w,T,E,S;this.enabled&&this.autoUpdate&&(E=(w=this.engine).timing,S=this.correction,(T=this.runner).isFixed?y=this.getDelta(x,y):(y=x-T.timePrev||T.delta,T.timePrev=x,T.deltaHistory.push(y),T.deltaHistory=T.deltaHistory.slice(-T.deltaSampleSize),S=(y=(y=(y=Math.min.apply(null,T.deltaHistory))<T.deltaMin?T.deltaMin:y)>T.deltaMax?T.deltaMax:y)/T.delta,T.delta=y),0!==T.timeScalePrev&&(S*=E.timeScale/T.timeScalePrev),0===E.timeScale&&(S=0),T.timeScalePrev=E.timeScale,T.correction=S,T.frameCounter+=1,1e3<=x-T.counterTimestamp&&(T.fps=T.frameCounter*((x-T.counterTimestamp)/1e3),T.counterTimestamp=x,T.frameCounter=0),r.update(w,y,S))},step:function(x,y){r.update(this.engine,x,y)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(x){var y=x.hasOwnProperty("body")?x.body:x;return null!==i.get(this.localWorld,y.id,y.type)},getAllBodies:function(){return i.allBodies(this.localWorld)},getAllConstraints:function(){return i.allConstraints(this.localWorld)},getAllComposites:function(){return i.allComposites(this.localWorld)},postUpdate:function(){var x,y,w,T;this.drawDebug&&(x=this.debugConfig,y=this.engine,w=this.debugGraphic,T=i.allBodies(this.localWorld),this.debugGraphic.clear(),x.showBroadphase&&y.broadphase.controller&&this.renderGrid(y.broadphase,w,x.broadphaseColor,.5),x.showBounds&&this.renderBodyBounds(T,w,x.boundsColor,.5),(x.showBody||x.showStaticBody)&&this.renderBodies(T),x.showJoint&&this.renderJoints(),(x.showAxes||x.showAngleIndicator)&&this.renderBodyAxes(T,w,x.showAxes,x.angleColor,.5),x.showVelocity&&this.renderBodyVelocity(T,w,x.velocityColor,1,2),x.showSeparations&&this.renderSeparations(y.pairs.list,w,x.separationColor),x.showCollisions&&this.renderCollisions(y.pairs.list,w,x.collisionColor))},renderGrid:function(x,y,w,T){y.lineStyle(1,w,T);for(var E=u.keys(x.buckets),S=0;S<E.length;S++){var A,_=E[S];x.buckets[_].length<2||(A=_.split(/C|R/),y.strokeRect(parseInt(A[1],10)*x.bucketWidth,parseInt(A[2],10)*x.bucketHeight,x.bucketWidth,x.bucketHeight))}return this},renderSeparations:function(x,y,w){y.lineStyle(1,w,1);for(var T=0;T<x.length;T++){var E,S,A,_,C,M,R,L=x[T];L.isActive&&(S=(E=L.collision).bodyA,A=E.bodyB,_=S.position,R=S.isStatic||A.isStatic?1:4,A.isStatic&&(R=0),y.lineBetween((C=A.position).x,C.y,C.x-(M=E.penetration).x*R,C.y-M.y*R),R=S.isStatic||A.isStatic?1:4,S.isStatic&&(R=0),y.lineBetween(_.x,_.y,_.x-M.x*R,_.y-M.y*R))}return this},renderCollisions:function(x,y,w){var T,E,S,A,_,C;for(y.lineStyle(1,w,.5),y.fillStyle(w,1),T=0;T<x.length;T++)if((E=x[T]).isActive)for(var M=0;M<E.activeContacts.length;M++){var R=E.activeContacts[M].vertex;y.fillRect(R.x-2,R.y-2,5,5)}for(T=0;T<x.length;T++)(E=x[T]).isActive&&(S=E.collision,0<(A=E.activeContacts).length&&(_=A[0].vertex.x,C=A[0].vertex.y,2===A.length&&(_=(A[0].vertex.x+A[1].vertex.x)/2,C=(A[0].vertex.y+A[1].vertex.y)/2),S.bodyB===S.supports[0].body||S.bodyA.isStatic?y.lineBetween(_-8*S.normal.x,C-8*S.normal.y,_,C):y.lineBetween(_+8*S.normal.x,C+8*S.normal.y,_,C)));return this},renderBodyBounds:function(x,y,w,T){y.lineStyle(1,w,T);for(var E=0;E<x.length;E++){var S=x[E];if(S.render.visible){var A=S.bounds;if(A)y.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var _=S.parts,C=1<_.length?1:0;C<_.length;C++){var M=_[C];y.strokeRect(M.bounds.min.x,M.bounds.min.y,M.bounds.max.x-M.bounds.min.x,M.bounds.max.y-M.bounds.min.y)}}}return this},renderBodyAxes:function(x,y,w,T,E){y.lineStyle(1,T,E);for(var S=0;S<x.length;S++){var A,_,C,M=x[S],R=M.parts;if(M.render.visible)if(w)for(_=1<R.length?1:0;_<R.length;_++)for(A=R[_],C=0;C<A.axes.length;C++){var L=A.axes[C];y.lineBetween(A.position.x,A.position.y,A.position.x+20*L.x,A.position.y+20*L.y)}else for(_=1<R.length?1:0;_<R.length;_++)for(A=R[_],C=0;C<A.axes.length;C++)y.lineBetween(A.position.x,A.position.y,(A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(x,y,w,T,E){y.lineStyle(E,w,T);for(var S=0;S<x.length;S++){var A=x[S];A.render.visible&&y.lineBetween(A.position.x,A.position.y,A.position.x+2*(A.position.x-A.positionPrev.x),A.position.y+2*(A.position.y-A.positionPrev.y))}return this},renderBodies:function(x){for(var y=this.debugGraphic,w=this.debugConfig,T=w.showBody,E=w.showStaticBody,S=w.showSleeping,A=w.showInternalEdges,_=w.showConvexHulls,C=w.renderFill,M=w.renderLine,R=w.staticBodySleepOpacity,L=w.sleepFillColor,D=w.sleepLineColor,F=w.hullColor,U=0;U<x.length;U++){var P,O,B,k,I,Y=x[U];Y.render.visible&&(!E&&Y.isStatic||!T&&!Y.isStatic||(P=Y.render.lineColor,O=Y.render.lineOpacity,k=Y.render.fillColor,I=Y.render.fillOpacity,S&&Y.isSleeping&&(Y.isStatic?(O*=R,I*=R):(P=D,k=L)),C||(k=null),M||(P=null),this.renderBody(Y,y,A,P,O,B=Y.render.lineThickness,k,I),_&&1<Y.parts.length&&this.renderConvexHull(Y,y,F,B)))}},renderBody:function(x,y,w,T,E,S,A,_){void 0===T&&(T=null),void 0===E&&(E=null),void 0===S&&(S=1),void 0===A&&(A=null),void 0===_&&(_=null);for(var C,M,R,L=this.debugConfig,D=L.sensorFillColor,F=L.sensorLineColor,U=x.parts,P=U.length,O=1<P?1:0;O<P;O++){var B=U[O],k=B.render,I=k.opacity;if(k.visible&&0!==I&&(!B.isSensor||L.showSensors)){var N=B.circleRadius;if(y.beginPath(),B.isSensor?(null!==A&&y.fillStyle(D,_*I),null!==T&&y.lineStyle(S,F,E*I)):(null!==A&&y.fillStyle(A,_*I),null!==T&&y.lineStyle(S,T,E*I)),N)y.arc(B.position.x,B.position.y,N,0,2*Math.PI);else{var Y=B.vertices,X=Y.length;y.moveTo(Y[0].x,Y[0].y);for(var W=1;W<X;W++){var G,z=Y[W];!Y[W-1].isInternal||w?y.lineTo(z.x,z.y):y.moveTo(z.x,z.y),W<X&&z.isInternal&&!w&&y.moveTo(Y[G=(W+1)%X].x,Y[G].y)}y.closePath()}null!==A&&y.fillPath(),null!==T&&y.strokePath()}}return L.showPositions&&!x.isStatic&&(C=x.position.x,M=x.position.y,R=Math.ceil(L.positionSize/2),y.fillStyle(L.positionColor,1),y.fillRect(C-R,M-R,L.positionSize,L.positionSize)),this},renderConvexHull:function(x,y,w,T){if(void 0===T&&(T=1),1<x.parts.length){var E=x.vertices;y.lineStyle(T,w),y.beginPath(),y.moveTo(E[0].x,E[0].y);for(var S=1;S<E.length;S++)y.lineTo(E[S].x,E[S].y);y.lineTo(E[0].x,E[0].y),y.strokePath()}return this},renderJoints:function(){for(var x=this.debugGraphic,y=i.allConstraints(this.localWorld),w=0;w<y.length;w++){var T=y[w].render;this.renderConstraint(y[w],x,T.lineColor,T.lineOpacity,T.lineThickness,T.pinSize,T.anchorColor,T.anchorSize)}},renderConstraint:function(x,y,w,T,E,S,A,_){var C=x.render;if(!C.visible||!x.pointA||!x.pointB)return this;y.lineStyle(E,w,T);var M,R=x.bodyA,L=x.bodyB,D=R?v.add(R.position,x.pointA):x.pointA;if("pin"===C.type)y.strokeCircle(D.x,D.y,S);else{if(M=L?v.add(L.position,x.pointB):x.pointB,y.beginPath(),y.moveTo(D.x,D.y),"spring"===C.type)for(var F,U=v.sub(M,D),P=v.perp(v.normalise(U)),O=Math.ceil(u.clamp(x.length/5,12,20)),B=1;B<O;B+=1)y.lineTo(D.x+U.x*(B/O)+P.x*(F=B%2==0?1:-1)*4,D.y+U.y*(B/O)+P.y*F*4);y.lineTo(M.x,M.y)}return y.strokePath(),C.anchors&&0<_&&(y.fillStyle(A),y.fillCircle(D.x,D.y,_),y.fillCircle(M.x,M.y,_)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});g.exports=m},function(g,b,t){(function(h){t(590);var n=t(39),s=t(17),u={Actions:t(269),Animations:t(699),BlendModes:t(33),Cache:t(711),Cameras:t(714),Core:t(803),Class:t(0),Create:t(884),Curves:t(890),Data:t(892),Display:t(894),DOM:t(913),Events:t(914),Game:t(916),GameObjects:t(1007),Geom:t(477),Input:t(1302),Loader:t(1332),Math:t(190),Physics:t(1498),Plugins:t(1397),Renderer:t(1399),Scale:t(1406),ScaleModes:t(164),Scene:t(412),Scenes:t(1407),Structs:t(1409),Textures:t(1410),Tilemaps:t(1412),Time:t(1454),Tweens:t(1456),Utils:t(1474)};u.Sound=t(1485),u=s(!1,u,n),g.exports=u,h.Phaser=u}).call(this,t(589))},function(g,b,t){g.exports={Arcade:t(1360),Matter:t(1499)}},function(g,b,t){g.exports={BodyBounds:t(1486),Components:t(534),Events:t(586),Factory:t(1488),MatterGameObject:t(1489),Image:t(1490),Matter:t(1391),MatterPhysics:t(1529),PolyDecomp:t(1487),Sprite:t(1491),TileBody:t(1390),PhysicsEditorParser:t(1386),PhysicsJSONParser:t(1387),PointerConstraint:t(1492),World:t(1496)}},function(g,b){g.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(g,b){g.exports={setCollisionCategory:function(h){return this.body.collisionFilter.category=h,this},setCollisionGroup:function(h){return this.body.collisionFilter.group=h,this},setCollidesWith:function(h){var n=0;if(Array.isArray(h))for(var s=0;s<h.length;s++)n|=h[s];else n=h;return this.body.collisionFilter.mask=n,this},setOnCollide:function(h){return this.body.onCollideCallback=h,this},setOnCollideEnd:function(h){return this.body.onCollideEndCallback=h,this},setOnCollideActive:function(h){return this.body.onCollideActiveCallback=h,this},setOnCollideWith:function(h,n){Array.isArray(h)||(h=[h]);for(var s=0;s<h.length;s++){var u=h[s].hasOwnProperty("body")?h[s].body:h[s];this.body.setOnCollideWith(u,n)}return this}}},function(g,b,t){var h=t(71);g.exports={applyForce:function(s){return this._tempVec2.set(this.body.position.x,this.body.position.y),h.applyForce(this.body,this._tempVec2,s),this},applyForceFrom:function(s,u){return h.applyForce(this.body,s,u),this},thrust:function(s){var u=this.body.angle;return this._tempVec2.set(s*Math.cos(u),s*Math.sin(u)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(s){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(s*Math.cos(u),s*Math.sin(u)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(s){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(s*Math.cos(u),s*Math.sin(u)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(s){var u=this.body.angle-Math.PI;return this._tempVec2.set(s*Math.cos(u),s*Math.sin(u)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}}},function(g,b){g.exports={setFriction:function(h,n,s){return this.body.friction=h,void 0!==n&&(this.body.frictionAir=n),void 0!==s&&(this.body.frictionStatic=s),this},setFrictionAir:function(h){return this.body.frictionAir=h,this},setFrictionStatic:function(h){return this.body.frictionStatic=h,this}}},function(g,b){g.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(g,b,t){var h=t(71),n=t(3);g.exports={setMass:function(u){return h.setMass(this.body,u),this},setDensity:function(u){return h.setDensity(this.body,u),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},function(g,b){g.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(g,b,t){var h=t(126),n=t(71),s=t(123),u=t(2),i=t(1386),r=t(1387),o=t(94);g.exports={setRectangle:function(e,a,c){return this.setBody({type:"rectangle",width:e,height:a},c)},setCircle:function(e,a){return this.setBody({type:"circle",radius:e},a)},setPolygon:function(e,a,c){return this.setBody({type:"polygon",sides:a,radius:e},c)},setTrapezoid:function(e,a,c,d){return this.setBody({type:"trapezoid",width:e,height:a,slope:c},d)},setExistingBody:function(e,a){void 0===a&&(a=!0),this.body&&this.world.remove(this.body,!0),this.body=e;for(var c=0;c<e.parts.length;c++)e.parts[c].gameObject=this;var d,f,v,y=this;return e.destroy=function(){y.world.remove(y.body,!0),y.body.gameObject=null},a&&(this.world.has(e)&&this.world.remove(e,!0),this.world.add(e)),this._originComponent&&(d=e.render.sprite.xOffset,f=e.render.sprite.yOffset,v=e.centerOfMass.y,s(e.centerOfMass.x,.5)&&s(v,.5)?this.setOrigin(d+.5,f+.5):this.setOrigin(d+e.centerOffset.x/this.displayWidth,f+e.centerOffset.y/this.displayHeight)),this},setBody:function(e,a){if(!e)return this;"string"==typeof e&&(e={type:e});var c=u(e,"type","rectangle"),d=u(e,"x",this._tempVec2.x),f=u(e,"y",this._tempVec2.y),p=u(e,"width",this.width),v=u(e,"height",this.height);switch(c){case"rectangle":y=h.rectangle(d,f,p,v,a);break;case"circle":var m=u(e,"radius",Math.max(p,v)/2),x=u(e,"maxSides",25),y=h.circle(d,f,m,a,x);break;case"trapezoid":var w=u(e,"slope",.5);y=h.trapezoid(d,f,p,v,w,a);break;case"polygon":var T=u(e,"sides",5),E=u(e,"radius",Math.max(p,v)/2);y=h.polygon(d,f,T,E,a);break;case"fromVertices":case"fromVerts":var S,A,_,C=u(e,"verts",null);C&&("string"==typeof C&&(C=o.fromPath(C)),y=this.body&&!this.body.hasOwnProperty("temp")?(n.setVertices(this.body,C),this.body):(S=u(e,"flagInternal",!1),A=u(e,"removeCollinear",.01),_=u(e,"minimumArea",10),h.fromVertices(d,f,C,a,S,A,_)));break;case"fromPhysicsEditor":y=i.parseBody(d,f,e,a);break;case"fromPhysicsTracer":y=r.parseBody(d,f,e,a)}return y&&this.setExistingBody(y,e.addToWorld),this}}},function(g,b,t){var h=t(586),n=t(267),s=t(268);g.exports={setToSleep:function(){n.set(this.body,!0)},setAwake:function(){n.set(this.body,!1)},setSleepThreshold:function(i){return void 0===i&&(i=60),this.body.sleepThreshold=i,this},setSleepEvents:function(i,r){return this.setSleepStartEvent(i),this.setSleepEndEvent(r),this},setSleepStartEvent:function(i){var r;return i?(r=this.world,s.on(this.body,"sleepStart",function(o){r.emit(h.SLEEP_START,o,this)})):s.off(this.body,"sleepStart"),this},setSleepEndEvent:function(i){var r;return i?(r=this.world,s.on(this.body,"sleepEnd",function(o){r.emit(h.SLEEP_END,o,this)})):s.off(this.body,"sleepEnd"),this}}},function(g,b){g.exports="afteradd"},function(g,b){g.exports="afterremove"},function(g,b){g.exports="afterupdate"},function(g,b){g.exports="beforeadd"},function(g,b){g.exports="beforeremove"},function(g,b){g.exports="beforeupdate"},function(g,b){g.exports="collisionactive"},function(g,b){g.exports="collisionend"},function(g,b){g.exports="collisionstart"},function(g,b){g.exports="dragend"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="sleepend"},function(g,b){g.exports="sleepstart"},function(g,b,t){var h=t(71);g.exports={setStatic:function(s){return h.setStatic(this.body,s),this},isStatic:function(){return this.body.isStatic}}},function(g,b,t){var h=t(71),n=t(14),s=t(265),u=t(266);g.exports={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),h.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var o=1/this._scaleX,l=1/this._scaleY;this._scaleX=r,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,h.scale(this.body,o,l),h.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var o=1/this._scaleX,l=1/this._scaleY;this._scaleY=r,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,h.scale(this.body,o,l),h.scale(this.body,this._scaleX,r)}},angle:{get:function(){return u(this.body.angle*n.RAD_TO_DEG)},set:function(r){this.rotation=u(r)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=s(r),h.setAngle(this.body,this._rotation)}},setPosition:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this._tempVec2.set(r,o),h.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return void 0===r&&(r=0),this._rotation=s(r),h.setAngle(this.body,r),this},setFixedRotation:function(){return h.setInertia(this.body,1/0),this},setAngle:function(r){return void 0===r&&(r=0),this.angle=r,h.setAngle(this.body,this.rotation),this},setScale:function(r,o,l){void 0===r&&(r=1),void 0===o&&(o=r);var e=1/this._scaleX,a=1/this._scaleY;return this._scaleX=r,this._scaleY=o,h.scale(this.body,e,a,l),h.scale(this.body,r,o,l),this}}},function(g,b,t){var h=t(71);g.exports={setAngularVelocity:function(s){return h.setAngularVelocity(this.body,s),this},setVelocityX:function(s){return this._tempVec2.set(s,this.body.velocity.y),h.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(s){return this._tempVec2.set(this.body.velocity.x,s),h.setVelocity(this.body,this._tempVec2),this},setVelocity:function(s,u){return this._tempVec2.set(s,u),h.setVelocity(this.body,this._tempVec2),this}}},function(g,b,t){var h={};g.exports=h;var n=t(163),s=t(50);h.create=function(u){return s.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,u)},h.reset=function(u){u.extended&&(u.narrowDetections=0,u.narrowphaseTests=0,u.narrowReuse=0,u.narrowReuseCount=0,u.midphaseTests=0,u.broadphaseTests=0,u.narrowEff=0,u.midEff=0,u.broadEff=0,u.collisions=0,u.buckets=0,u.pairs=0,u.bodies=0)},h.update=function(u,i){var o;u.extended&&(o=n.allBodies(i.world),u.collisions=u.narrowDetections,u.pairs=i.pairs.list.length,u.bodies=o.length,u.midEff=(u.narrowDetections/(u.midphaseTests||1)).toFixed(2),u.narrowEff=(u.narrowDetections/(u.narrowphaseTests||1)).toFixed(2),u.broadEff=(1-u.broadphaseTests/(o.length||1)).toFixed(2),u.narrowReuse=(u.narrowReuseCount/(u.narrowphaseTests||1)).toFixed(2))}},function(g,b,t){var h=t(122),n=t(585),s=t(126),u=t(71),i=t(1486),r=t(117),o=t(0),l=t(163),e=t(1388),a=t(246),c=t(587),d=t(48),f=t(1488),p=t(2),v=t(6),m=t(1394),x=t(1530),y=t(1531),w=t(1493),T=t(1532),E=t(143),S=t(535),A=t(1395),_=t(1392),C=t(24),M=t(1494),R=t(1396),L=t(588),D=t(21),F=t(1389),U=t(116),P=t(94),O=t(1496),B=new o({initialize:function(k){this.scene=k,this.systems=k.sys,this.config=this.getConfig(),this.body=u,this.composite=l,this.detector=c,this.grid=m,this.pair=S,this.pairs=A,this.query=M,this.resolver=R,this.sat=L,this.constraint=a,this.bodies=s,this.composites=e,this.axes=n,this.bounds=r,this.svg=F,this.vector=U,this.vertices=P,this.verts=P,this._tempVec2=U.create(),v(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),v(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),v(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),R._restingThresh=v(this.config,"restingThresh",4),R._restingThreshTangent=v(this.config,"restingThreshTangent",6),R._positionDampen=v(this.config,"positionDampen",.9),R._positionWarming=v(this.config,"positionWarming",.8),R._frictionNormalMultiplier=v(this.config,"frictionNormalMultiplier",5),k.sys.events.once(D.BOOT,this.boot,this),k.sys.events.on(D.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new f(this.world),this.bodyBounds=new i,this.systems.events.once(D.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new f(this.world));var k=this.systems.events;k.on(D.UPDATE,this.world.update,this.world),k.on(D.POST_UPDATE,this.world.postUpdate,this.world),k.once(D.SHUTDOWN,this.shutdown,this)},getConfig:function(){var k=this.systems.game.config.physics;return E(p(this.systems.settings.physics,"matter",{}),p(k,"matter",{}))},enableAttractorPlugin:function(){return _.register(x),_.use(w,x),this},enableWrapPlugin:function(){return _.register(T),_.use(w,T),this},enableCollisionEventsPlugin:function(){return _.register(y),_.use(w,y),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(k,I){this.world.step(k,I)},containsPoint:function(k,I,N){k=this.getMatterBodies(k);var Y=U.create(I,N);return 0<M.point(k,Y).length},intersectPoint:function(k,I,N){N=this.getMatterBodies(N);var Y=U.create(k,I),X=[];return M.point(N,Y).forEach(function(W){-1===X.indexOf(W)&&X.push(W)}),X},intersectRect:function(k,I,N,Y,X,W){void 0===X&&(X=!1),W=this.getMatterBodies(W);var z=[];return M.region(W,{min:{x:k,y:I},max:{x:k+N,y:I+Y}},X).forEach(function(V){-1===z.indexOf(V)&&z.push(V)}),z},intersectRay:function(k,I,N,Y,X,W){void 0===X&&(X=1),W=this.getMatterBodies(W);for(var G=[],z=M.ray(W,U.create(k,I),U.create(N,Y),X),V=0;V<z.length;V++)G.push(z[V].body);return G},intersectBody:function(k,I){I=this.getMatterBodies(I);for(var N=[],Y=M.collides(k,I),X=0;X<Y.length;X++){var W=Y[X];N.push(W.bodyA===k?W.bodyB:W.bodyA)}return N},overlap:function(k,I,N,Y,X){void 0===N&&(N=null),void 0===Y&&(Y=null),void 0===X&&(X=N),Array.isArray(k)||(k=[k]),k=this.getMatterBodies(k),I=this.getMatterBodies(I);for(var W=!1,G=0;G<k.length;G++)for(var z=k[G],V=M.collides(z,I),H=0;H<V.length;H++){var j=V[H],K=j.bodyA.id===z.id?j.bodyB:j.bodyA;if(!Y||Y.call(X,z,K,j))if(W=!0,N)N.call(X,z,K,j);else if(!Y)return!0}return W},setCollisionCategory:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(N){N.collisionFilter.category=I}),this},setCollisionGroup:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(N){N.collisionFilter.group=I}),this},setCollidesWith:function(k,I){k=this.getMatterBodies(k);var N=0;if(Array.isArray(I))for(var Y=0;Y<I.length;Y++)N|=I[Y];else N=I;return k.forEach(function(X){X.collisionFilter.mask=N}),this},getMatterBodies:function(k){if(!k)return this.world.getAllBodies();Array.isArray(k)||(k=[k]);for(var I=[],N=0;N<k.length;N++){var Y=k[N].hasOwnProperty("body")?k[N].body:k[N];I.push(Y)}return I},setVelocity:function(k,I,N){k=this.getMatterBodies(k);var Y=this._tempVec2;return Y.x=I,Y.y=N,k.forEach(function(X){u.setVelocity(X,Y)}),this},setVelocityX:function(k,I){k=this.getMatterBodies(k);var N=this._tempVec2;return N.x=I,k.forEach(function(Y){N.y=Y.velocity.y,u.setVelocity(Y,N)}),this},setVelocityY:function(k,I){k=this.getMatterBodies(k);var N=this._tempVec2;return N.y=I,k.forEach(function(Y){N.x=Y.velocity.x,u.setVelocity(Y,N)}),this},setAngularVelocity:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(N){u.setAngularVelocity(N,I)}),this},applyForce:function(k,I){k=this.getMatterBodies(k);var N=this._tempVec2;return k.forEach(function(Y){N.x=Y.position.x,N.y=Y.position.y,u.applyForce(Y,N,I)}),this},applyForceFromPosition:function(k,I,N,Y){k=this.getMatterBodies(k);var X=this._tempVec2;return k.forEach(function(W){void 0===Y&&(Y=W.angle),X.x=N*Math.cos(Y),X.y=N*Math.sin(Y),u.applyForce(W,I,X)}),this},applyForceFromAngle:function(k,I,N){k=this.getMatterBodies(k);var Y=this._tempVec2;return k.forEach(function(X){void 0===N&&(N=X.angle),Y.x=I*Math.cos(N),Y.y=I*Math.sin(N),u.applyForce(X,{x:X.position.x,y:X.position.y},Y)}),this},getConstraintLength:function(k){var I=k.pointA.x,N=k.pointA.y,Y=k.pointB.x,X=k.pointB.y;return k.bodyA&&(I+=k.bodyA.position.x,N+=k.bodyA.position.y),k.bodyB&&(Y+=k.bodyB.position.x,X+=k.bodyB.position.y),d(I,N,Y,X)},alignBody:function(k,I,N,Y){var X;switch(k=k.hasOwnProperty("body")?k.body:k,Y){case h.TOP_LEFT:case h.LEFT_TOP:X=this.bodyBounds.getTopLeft(k,I,N);break;case h.TOP_CENTER:X=this.bodyBounds.getTopCenter(k,I,N);break;case h.TOP_RIGHT:case h.RIGHT_TOP:X=this.bodyBounds.getTopRight(k,I,N);break;case h.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(k,I,N);break;case h.CENTER:X=this.bodyBounds.getCenter(k,I,N);break;case h.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(k,I,N);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(k,I,N);break;case h.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(k,I,N);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(k,I,N)}return X&&u.setPosition(k,X),this},shutdown:function(){var k=this.systems.events;this.world&&(k.off(D.UPDATE,this.world.update,this.world),k.off(D.POST_UPDATE,this.world.postUpdate,this.world)),k.off(D.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(D.START,this.start,this),this.scene=null,this.systems=null}});C.register("MatterPhysics",B,"matterPhysics"),g.exports=B},function(g,b,t){var h=t(1391),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Body.create",function(){n.Body.init(this)}),s.before("Engine.update",function(u){n.Engine.update(u)})},Body:{init:function(s){s.plugin.attractors=s.plugin.attractors||[]}},Engine:{update:function(s){for(var u=h.Composite.allBodies(s.world),i=0;i<u.length;i++){var r=u[i],o=r.plugin.attractors;if(o&&0<o.length)for(var l=0;l<u.length;l++){var e=u[l];if(i!==l)for(var a=0;a<o.length;a++){var c=o[a],d=c;h.Common.isFunction(c)&&(d=c(r,e)),d&&h.Body.applyForce(e,e.position,d)}}}}},Attractors:{gravityConstant:.001,gravity:function(s,u){var i=h.Vector.sub(u.position,s.position),r=h.Vector.magnitudeSquared(i)||1e-4,o=h.Vector.normalise(i),e=h.Vector.mult(o,s.mass*u.mass/r*-n.Attractors.gravityConstant);h.Body.applyForce(s,s.position,h.Vector.neg(e)),h.Body.applyForce(u,u.position,e)}}};g.exports=n},function(g,b){g.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(h){h.pairs.map(function(n){var s=n.bodyA,u=n.bodyB;s.gameObject&&s.gameObject.emit("collide",s,u,n),u.gameObject&&u.gameObject.emit("collide",u,s,n),t.Events.trigger(s,"onCollide",{pair:n}),t.Events.trigger(u,"onCollide",{pair:n}),s.onCollideCallback&&s.onCollideCallback(n),u.onCollideCallback&&u.onCollideCallback(n),s.onCollideWith[u.id]&&s.onCollideWith[u.id](u,n),u.onCollideWith[s.id]&&u.onCollideWith[s.id](s,n)})}),t.Events.on(this,"collisionActive",function(h){h.pairs.map(function(n){var s=n.bodyA,u=n.bodyB;s.gameObject&&s.gameObject.emit("collideActive",s,u,n),u.gameObject&&u.gameObject.emit("collideActive",u,s,n),t.Events.trigger(s,"onCollideActive",{pair:n}),t.Events.trigger(u,"onCollideActive",{pair:n}),s.onCollideActiveCallback&&s.onCollideActiveCallback(n),u.onCollideActiveCallback&&u.onCollideActiveCallback(n)})}),t.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(n){var s=n.bodyA,u=n.bodyB;s.gameObject&&s.gameObject.emit("collideEnd",s,u,n),u.gameObject&&u.gameObject.emit("collideEnd",u,s,n),t.Events.trigger(s,"onCollideEnd",{pair:n}),t.Events.trigger(u,"onCollideEnd",{pair:n}),s.onCollideEndCallback&&s.onCollideEndCallback(n),u.onCollideEndCallback&&u.onCollideEndCallback(n)})})})}}},function(g,b,t){var h=t(1391),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.update",function(){n.Engine.update(this)})},Engine:{update:function(s){for(var u=s.world,i=h.Composite.allBodies(u),r=h.Composite.allComposites(u),o=0;o<i.length;o+=1){var l=i[o];l.plugin.wrap&&n.Body.wrap(l,l.plugin.wrap)}for(o=0;o<r.length;o+=1){var e=r[o];e.plugin.wrap&&n.Composite.wrap(e,e.plugin.wrap)}}},Bounds:{wrap:function(s,u){var i=null,r=null;if(void 0!==u.min.x&&void 0!==u.max.x&&(s.min.x>u.max.x?i=u.min.x-s.max.x:s.max.x<u.min.x&&(i=u.max.x-s.min.x)),void 0!==u.min.y&&void 0!==u.max.y&&(s.min.y>u.max.y?r=u.min.y-s.max.y:s.max.y<u.min.y&&(r=u.max.y-s.min.y)),null!==i||null!==r)return{x:i||0,y:r||0}}},Body:{wrap:function(s,u){var i=n.Bounds.wrap(s.bounds,u);return i&&h.Body.translate(s,i),i}},Composite:{bounds:function(s){for(var u=h.Composite.allBodies(s),i=[],r=0;r<u.length;r+=1){var o=u[r];i.push(o.bounds.min,o.bounds.max)}return h.Bounds.create(i)},wrap:function(s,u){var i=n.Bounds.wrap(n.Composite.bounds(s),u);return i&&h.Composite.translate(s,i),i}}};g.exports=n}],lt.c=gt,lt.d=function(g,b,t){lt.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:t})},lt.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},lt.t=function(g,b){if(1&b&&(g=lt(g)),8&b||4&b&&"object"==typeof g&&g&&g.__esModule)return g;var t=Object.create(null);if(lt.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:g}),2&b&&"string"!=typeof g)for(var h in g)lt.d(t,h,function(n){return g[n]}.bind(null,h));return t},lt.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return lt.d(b,"a",b),b},lt.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},lt.p="",lt(lt.s=1497);function lt(g){if(gt[g])return gt[g].exports;var b=gt[g]={i:g,l:!1,exports:{}};return pt[g].call(b.exports,b,b.exports,lt),b.l=!0,b.exports}var pt,gt});